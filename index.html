<html>

<head>
    <script src="lib/jquery-3.2.1.min.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="http://localhost:8080/assignment-search/asgn-search.min.css" />
    <script src="lib/handlebars.min.js"></script>
    <script src="facetoo.js"></script>
    <style>
        .breaked {
            width: 1em;
            font-size: 40px;
            letter-spacing: 40px;
            /* arbitrarily large letter-spacing for safety */
        }
    </style>
    <script>
        function makeid() {
            var text = "";
            var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

            for (var i = 0; i < 10; i++)
                text += possible.charAt(Math.floor(Math.random() * possible.length));

            return text;
        }
        const filters = [
            {
                "id": "Facet1",
                "name": null,
                "type": "Edm.String",
                "facetValues": [
                    { "label": "377884", "count": 10 },
                    { "label": "377887", "count": 10 },
                    { "label": "377890", "count": 10 },
                    { "label": "377881", "count": 5 },
                    { "label": "377888", "count": 5 },
                    { "label": "377895", "count": 5 },
                    { "label": "377892", "count": 3 },
                    { "label": "377894", "count": 3 },
                    { "label": "377902", "count": 3 },
                    { "label": "377904", "count": 3 }
                ]
            }];

        const facets = [];
        const facetValues = [];
        for (let index = 0; index < 10; index++) {
            facetValues.push({
                "label": "Label " + index, "count": 23 * index, "selected": index % 5 == 2
            });
        }
        for (let index = 0; index < 30; index++) {
            facets.push({
                "id": "Facet" + index,
                "name": makeid(),
                "type": "Edm.String",
                "facetValues": facetValues,
                "facetRanges": [
                    {
                        "min": null,
                        "max": null,
                        "isMinIncluded": false,
                        "isMaxIncluded": false
                    }
                ]
            });

        }

    </script>

</head>

<body>
    <button onclick="addFacets()">Add Facets</button>
    <button onclick="addFilters()">Add Filters</button>
    <div class="gui" style="height: 90%; width:30%;float:left;margin-top: 50px;" id="hi"></div>
    <div class="gui container" style="height: 90%; width:30%;float:right;    margin-top: 50px;" id="hi1"></div>
    <script>

        var facetoptions = {
            containerElement: document.getElementById("hi"),
            onFilterChange: function(column, value, actionType, type){
                alert(column + value + actionType + type);
            }
        };
        var filterOptions = {
            containerElement: document.getElementById("hi1"),
            onFilterChange: function(column, value, actionType, type){
                alert(column + value + actionType + type);
            }
        };
        var facet = new Facetoo.Facet(facetoptions);
        var filter = new Facetoo.Filter(filterOptions);
        function addFacets() {
            facet.bind(facets);
        }
        function addFilters() {
            filter.bind(filters);
        }
    </script>
</body>

</html>