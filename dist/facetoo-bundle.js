!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Handlebars")):"function"==typeof define&&define.amd?define(["Handlebars"],t):"object"==typeof exports?exports.Facetoo=t(require("Handlebars")):e.Facetoo=t(e.Handlebars)}("undefined"!=typeof self?self:this,function(e){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(2),a=n(3),r=n(5),l=n(10),c=function(){function e(e){var t=this;this.handlerChain=[],this.showLoader=function(){jQuery(t.configStore.Options.containerElement).find(".facet-loader").addClass("active")},this.hideLoader=function(){jQuery(t.configStore.Options.containerElement).find(".facet-loader").remove("active")},this.BindOnlyFacets=function(e){if(t.bindFinished){var n=t.templateService.BindOnlyFacets(e);t.parentElement.find(".facet-body").html(n)}else{t.templateService.Bind(e,[])}},this.BindOnlyAppliedFilters=function(e){if(t.bindFinished){var n=t.templateService.BindOnlyAppliedFilters(e);t.parentElement.find(".facet-subheader").html(n)}else{t.templateService.Bind([],e)}},this.Bind=function(e,n){t.parentElement.html(t.templateService.Bind(e,n)),t.bindFinished=!0},i.registerHelper("isChecked",function(e){return e?"checked":""}),this.configStore=new l.ConfigStore(e),this.parentElement=jQuery(e.containerElement),this.templateService=new r.FacetTemplateService,this.handlerChain.push(new o.ExpandCollapseHandler(this.parentElement,this.configStore)),this.handlerChain.push(new a.FilterActionHandler(this.parentElement,this.configStore)),this.handlerChain.forEach(function(e){e.RegisterDomHandler()})}return e}();t.Facet=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide",e[e.Toggle=2]="Toggle"}(i||(i={}));var o=function(){function e(e,t){this.element=e,this.configStore=t,this.ControlVisibilityOfFilter=function(e,t){var n=e.children("i"),o=n.hasClass("down");i.Toggle!==t&&(o&&t===i.Show||!o&&t===i.Hide)||(o?(e.parents(".facet-item").find(".facet-item-description").hide(),n.removeClass("down"),n.addClass("right")):(e.parents(".facet-item").find(".facet-item-description").show(),n.removeClass("right"),n.addClass("down")))}}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".facet-body .expand-all",function(t){e.element.find(".facet-item-header").each(function(t,n){e.ControlVisibilityOfFilter(jQuery(n),i.Show)}),t.stopPropagation()}),this.element.on("click",".facet-body .collapse-all",function(t){e.element.find(".facet-item-header").each(function(t,n){e.ControlVisibilityOfFilter(jQuery(n),i.Hide)}),t.stopPropagation()}),this.element.on("click",".facet-body .facet-item .facet-item-header",function(t){var n=jQuery(t.target).parents(".facet-item-header");e.element.find(".facet-header .button").removeAttr("disabled"),e.ControlVisibilityOfFilter(n,i.Toggle),t.stopPropagation()})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.ExpandCollapseHandler=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=function(){function e(e,t){this.element=e,this.configStore=t}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("change",".facet-body .facet-item-description .facet-value-checkbox",function(t){var n=jQuery(t.target),o=n.val().toString(),a=o.split(":"),r=n.is(":checked"),l=r?i.FilterActionType.Add:i.FilterActionType.Minus;e.configStore.Options.onFilterChange(a[0],a[1],l)}),this.element.on("click",".facet-subheader .facet-labels .label",function(t){var n=jQuery(t.target);n.is(".label")||(n=n.parents(".label"));var o=n.attr("data-filter-entry").toString(),a=o.split(":");e.configStore.Options.onFilterChange(a[0],a[1],i.FilterActionType.Minus)}),this.element.on("click",".facet-subheader .remove-all",function(t){e.element.find(".facet-subheader").hide(),e.configStore.Options.onAllFilterRemove()})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.FilterActionHandler=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.Add="Add",e.Minus="Minus"}(t.FilterActionType||(t.FilterActionType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(6),a=n(7),r=n(8),l=n(9),c=function(){function e(){this.tempateFunctionForFacetMain=i.compile(l),this.tempateFunctionForFacetHeader=i.compile(r),this.tempateFunctionForFacetSubHeader=i.compile(o),this.tempateFunctionForFacetBody=i.compile(a)}return e.prototype.Bind=function(e,t){var n=this.tempateFunctionForFacetHeader(),i=this.tempateFunctionForFacetSubHeader(t),o=this.tempateFunctionForFacetBody(e);return this.tempateFunctionForFacetMain({headerContent:n,subHeaderContent:i,bodyContent:o})},e.prototype.BindOnlyFacets=function(e){return this.tempateFunctionForFacetBody(e)},e.prototype.BindOnlyAppliedFilters=function(e){return this.tempateFunctionForFacetSubHeader(e)},e}();t.FacetTemplateService=c},function(e,t){e.exports='{{#if this.length}}\n<div class="content facet-subheader">\n    <h5 class="ui sub blue floated left header">Applied Filters</h5>\n    <div class="ui mini right floated buttons">\n        <button class="ui mini icon button remove-all">\n            <i class="close icon"></i>\n        </button>\n    </div>\n    <div class="ui tiny hidden clearing divider"></div>\n    <table class="ui very compact small collapsing border-less table" style="border: none;">\n        <tbod>\n            {{#each this}}\n            <tr class="top aligned">\n                <td>{{id}}</td>\n                <td>\n                    <span class="ui mini blue labels facet-labels">\n                        {{#each facetValues}}\n                        <span class="ui label remove-label" data-filter-entry="{{../id}}:{{this.label}}">\n                            {{this.label}}\n                            <i class="icon close"></i>\n                        </span>\n                        {{/each}}\n                    </span>\n                </td>\n            </tr>\n            {{/each}}\n        </tbod>\n    </table>\n</div>\n{{/if}}'},function(e,t){e.exports='<div class="content facet-body" style="height: 100%;overflow:hidden;">\n    <h5 class="ui sub blue left floated header">Select Filters</h5>\n    <div class="ui mini right floated buttons">\n        <button class="ui mini icon button expand-all">\n            <i class="plus icon"></i>\n        </button>\n        <button class="ui mini icon button collapse-all">\n            <i class="minus icon"></i>\n        </button>\n    </div>\n    <div class="ui tiny hidden clearing divider"></div>\n    <div class="ui medium list facet-list" style="height: 100%;overflow: auto;">\n        {{#each this}}\n        <div class="item facet-item">\n            <div class="content">\n                <div class="facet-item-header cursor-pointer">\n                    <i class="right triangle icon"></i>\n                    <span>{{name}}</span>\n                </div>\n                <div class="description facet-item-description" style="display:none;">\n                    \x3c!-- <div class="ui mini input">\n                        <input type="text" placeholder="Search...">\n                    </div> --\x3e\n                    <div class="ui small list">\n                        {{#each facetValues}}\n                        <div class="item">\n                            <input style="height:0.85em;" id="{{label}}-{{@index}}" {{isChecked selected}} class="facet-value-checkbox cursor-pointer" value="{{../id}}:{{label}}" type="checkbox"/>\n                            <label style="font-size:0.85em;" class="cursor-pointer" for="{{label}}-{{@index}}">{{label}} ({{count}})</label>\n                        </div>\n                        {{/each}}\n                    </div>\n                </div>\n            </div>\n        </div>\n        {{/each}}\n    </div>\n</div>'},function(e,t){e.exports='<div class="content facet-header">\n    <h5 class="ui sub blue floated left header">Filters Section</h5>\n    <div class="ui mini right floated buttons">\n        <button class="ui mini icon button remove-all">\n            <i class="close icon"></i>\n        </button>\n    </div>\n</div>'},function(e,t){e.exports='<style>\n    .remove-label:hover{\n        text-decoration: line-through;\n        cursor: pointer;\n    }\n    .border-less tr td { border-top: 0px !important; }\n    .cursor-pointer{\n        cursor: pointer;\n    }\n</style>\n\n<div class="ui fluid card" style="padding-top : 0px;height:100%;overflow:hidden;">\n    <div class="ui inverted dimmer facet-loader">\n        <div class="ui medium text loader">Loading Filters...</div>\n    </div>\n    {{{headerContent}}}\n    {{{subHeaderContent}}}\n    {{{bodyContent}}}\n</div>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.options=e}return Object.defineProperty(e.prototype,"Options",{get:function(){return this.options},enumerable:!0,configurable:!0}),e}();t.ConfigStore=i}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9mYWNldG9vLWJ1bmRsZS5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYjY2YWFkODIyMzIyZTk1NjRmYmUiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiSGFuZGxlYmFyc1wiIiwid2VicGFjazovLy8uL3NyYy90cy9tYWluL0ZhY2V0LnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL0V4cGFuZENvbGxhcHNlSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9GaWx0ZXJBY3Rpb25IYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvc2VydmljZXMvRmFjZXRUZW1wbGF0ZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2h0bWwvZmFjZXQtYXBwbGllZC1maWx0ZXJzLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2h0bWwvZmFjZXQtYm9keS5odG1sIiwid2VicGFjazovLy8uL3NyYy9odG1sL2ZhY2V0LWhlYWRlci5odG1sIiwid2VicGFjazovLy8uL3NyYy9odG1sL2ZhY2V0LW1haW4uaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvY29uZmlnL0NvbmZpZ1N0b3JlLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidmFsdWUiLCJIYW5kbGViYXJzIiwiRXhwYW5kQ29sbGFwc2VIYW5kbGVyXzEiLCJGaWx0ZXJBY3Rpb25IYW5kbGVyXzEiLCJGYWNldFRlbXBsYXRlU2VydmljZV8xIiwiQ29uZmlnU3RvcmVfMSIsIkZhY2V0Iiwib3B0aW9ucyIsIl90aGlzIiwiaGFuZGxlckNoYWluIiwic2hvd0xvYWRlciIsImpRdWVyeSIsImNvbmZpZ1N0b3JlIiwiT3B0aW9ucyIsImNvbnRhaW5lckVsZW1lbnQiLCJmaW5kIiwiYWRkQ2xhc3MiLCJoaWRlTG9hZGVyIiwicmVtb3ZlIiwiQmluZE9ubHlGYWNldHMiLCJmYWNldHMiLCJiaW5kRmluaXNoZWQiLCJmYWNldFN1YkhlYWRlciIsInRlbXBsYXRlU2VydmljZSIsInBhcmVudEVsZW1lbnQiLCJodG1sIiwiQmluZCIsIkJpbmRPbmx5QXBwbGllZEZpbHRlcnMiLCJmaWx0ZXJzIiwicmVnaXN0ZXJIZWxwZXIiLCJib29sIiwiQ29uZmlnU3RvcmUiLCJGYWNldFRlbXBsYXRlU2VydmljZSIsInB1c2giLCJFeHBhbmRDb2xsYXBzZUhhbmRsZXIiLCJGaWx0ZXJBY3Rpb25IYW5kbGVyIiwiZm9yRWFjaCIsImhhbmRsZXIiLCJSZWdpc3RlckRvbUhhbmRsZXIiLCJTaG93SGlkZSIsImVsZW1lbnQiLCJDb250cm9sVmlzaWJpbGl0eU9mRmlsdGVyIiwic2hvd0hpZGUiLCJpY29uRWxlbWVudCIsImNoaWxkcmVuIiwiY3VycmVudGx5VmlzaWJsZSIsImhhc0NsYXNzIiwiVG9nZ2xlIiwiU2hvdyIsIkhpZGUiLCJwYXJlbnRzIiwiaGlkZSIsInJlbW92ZUNsYXNzIiwic2hvdyIsIm9uIiwiZXZlbnQiLCJlYWNoIiwiaW5kZXgiLCJzdG9wUHJvcGFnYXRpb24iLCJoZWFkZXJFbGVtZW50IiwidGFyZ2V0IiwicmVtb3ZlQXR0ciIsIm9uUmVzaXplIiwib25Eb2N1bWVudENsaWNrIiwiRmlsdGVyQWN0aW9uVHlwZV8xIiwidmFsU3RyIiwidmFsIiwidG9TdHJpbmciLCJzcGxpdCIsImNoZWNrZWQiLCJpcyIsImFjdGlvbiIsIkZpbHRlckFjdGlvblR5cGUiLCJBZGQiLCJNaW51cyIsIm9uRmlsdGVyQ2hhbmdlIiwiYXR0ciIsIm9uQWxsRmlsdGVyUmVtb3ZlIiwiRmFjZXRTdWJIZWFkZXIiLCJGYWNldEJvZHkiLCJGYWNldEhlYWRlciIsIkZhY2V0TWFpbiIsInRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbiIsImNvbXBpbGUiLCJ0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEhlYWRlciIsInRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyIiwidGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRCb2R5IiwiaGVhZGVyQ29udGVudCIsInN1YkhlYWRlckNvbnRlbnQiLCJib2R5Q29udGVudCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxnQkFBQUMsVUFBQSxnQkFBQUMsUUFDQUEsT0FBQUQsUUFBQUQsRUFBQUcsUUFBQSxlQUNBLGtCQUFBQyxnQkFBQUMsSUFDQUQsUUFBQSxjQUFBSixHQUNBLGdCQUFBQyxTQUNBQSxRQUFBLFFBQUFELEVBQUFHLFFBQUEsZUFFQUosRUFBQSxRQUFBQyxFQUFBRCxFQUFBLGFBQ0MsbUJBQUFPLFdBQUFDLEtBQUEsU0FBQUMsR0FDRCxNQ0FnQixVQUFVQyxHQ04xQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQVYsT0FHQSxJQUFBQyxHQUFBVSxFQUFBRCxJQUNBRSxFQUFBRixFQUNBRyxHQUFBLEVBQ0FiLFdBVUEsT0FOQVEsR0FBQUUsR0FBQUksS0FBQWIsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQVMsR0FHQVIsRUFBQVksR0FBQSxFQUdBWixFQUFBRCxRQXZCQSxHQUFBVyxLQTREQSxPQWhDQUYsR0FBQU0sRUFBQVAsRUFHQUMsRUFBQU8sRUFBQUwsRUFHQUYsRUFBQVEsRUFBQSxTQUFBakIsRUFBQWtCLEVBQUFDLEdBQ0FWLEVBQUFXLEVBQUFwQixFQUFBa0IsSUFDQUcsT0FBQUMsZUFBQXRCLEVBQUFrQixHQUNBSyxjQUFBLEVBQ0FDLFlBQUEsRUFDQUMsSUFBQU4sS0FNQVYsRUFBQWlCLEVBQUEsU0FBQXpCLEdBQ0EsR0FBQWtCLEdBQUFsQixLQUFBMEIsV0FDQSxXQUEyQixNQUFBMUIsR0FBQSxTQUMzQixXQUFpQyxNQUFBQSxHQUVqQyxPQURBUSxHQUFBUSxFQUFBRSxFQUFBLElBQUFBLEdBQ0FBLEdBSUFWLEVBQUFXLEVBQUEsU0FBQVEsRUFBQUMsR0FBc0QsTUFBQVIsUUFBQVMsVUFBQUMsZUFBQWpCLEtBQUFjLEVBQUFDLElBR3REcEIsRUFBQXVCLEVBQUEsR0FHQXZCLElBQUF3QixFQUFBLEtEZ0JNLFNBQVVoQyxFQUFRRCxHRTdFeEJDLEVBQUFELFFBQUFPLEdGbUZNLFNBQVVOLEVBQVFELEVBQVNTLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV0QixFQUFTLGNBQWdCa0MsT0FBTyxHR3ZGdEQsSUFBQUMsR0FBQTFCLEVBQUEsR0FDQTJCLEVBQUEzQixFQUFBLEdBQ0E0QixFQUFBNUIsRUFBQSxHQUlBNkIsRUFBQTdCLEVBQUEsR0FFQThCLEVBQUE5QixFQUFBLElBR0ErQixFQUFBLFdBTUksUUFBQUEsR0FBWUMsR0FBWixHQUFBQyxHQUFBcEMsSUFEUUEsTUFBQXFDLGdCQWNEckMsS0FBQXNDLFdBQWEsV0FDaEJDLE9BQU9ILEVBQUtJLFlBQVlDLFFBQVFDLGtCQUFrQkMsS0FBSyxpQkFBaUJDLFNBQVMsV0FFOUU1QyxLQUFBNkMsV0FBYSxXQUNoQk4sT0FBT0gsRUFBS0ksWUFBWUMsUUFBUUMsa0JBQWtCQyxLQUFLLGlCQUFpQkcsT0FBTyxXQUU1RTlDLEtBQUErQyxlQUFrQixTQUFDQyxHQUN0QixHQUFLWixFQUFLYSxhQUVILENBQ0gsR0FBTUMsR0FBaUJkLEVBQUtlLGdCQUFnQkosZUFBZUMsRUFDM0RaLEdBQUtnQixjQUFjVCxLQUFLLGVBQWVVLEtBQUtILE9BSDVDLENBQWtCZCxFQUFLZSxnQkFBZ0JHLEtBQUtOLFFBSzdDaEQsS0FBQXVELHVCQUEwQixTQUFDQyxHQUM5QixHQUFLcEIsRUFBS2EsYUFFSCxDQUNILEdBQU1DLEdBQWlCZCxFQUFLZSxnQkFBZ0JJLHVCQUF1QkMsRUFDbkVwQixHQUFLZ0IsY0FBY1QsS0FBSyxvQkFBb0JVLEtBQUtILE9BSGpELENBQWtCZCxFQUFLZSxnQkFBZ0JHLFFBQVNFLEtBTWpEeEQsS0FBQXNELEtBQVEsU0FBQ04sRUFBa0JRLEdBQzlCcEIsRUFBS2dCLGNBQWNDLEtBQUtqQixFQUFLZSxnQkFBZ0JHLEtBQUtOLEVBQVFRLElBQzFEcEIsRUFBS2EsY0FBZSxHQW5DcEJwQixFQUFXNEIsZUFBZSxZQUFhLFNBQUNDLEdBQ3BDLE1BQU9BLEdBQU8sVUFBWSxLQUU5QjFELEtBQUt3QyxZQUFlLEdBQUlQLEdBQUEwQixZQUFZeEIsR0FDcENuQyxLQUFLb0QsY0FBZ0JiLE9BQU9KLEVBQVFPLGtCQUNwQzFDLEtBQUttRCxnQkFBa0IsR0FBSW5CLEdBQUE0QixxQkFDM0I1RCxLQUFLcUMsYUFBYXdCLEtBQUssR0FBSS9CLEdBQUFnQyxzQkFBc0I5RCxLQUFLb0QsY0FBZXBELEtBQUt3QyxjQUMxRXhDLEtBQUtxQyxhQUFhd0IsS0FBSyxHQUFJOUIsR0FBQWdDLG9CQUFvQi9ELEtBQUtvRCxjQUFlcEQsS0FBS3dDLGNBQ3hFeEMsS0FBS3FDLGFBQWEyQixRQUFRLFNBQUNDLEdBQ3ZCQSxFQUFRQyx1QkE0QnBCLE1BQUFoQyxLQTVDYXhDLEdBQUF3QyxTSHFJUCxTQUFVdkMsRUFBUUQsRUFBU1MsR0FFakMsWUFFQVksUUFBT0MsZUFBZXRCLEVBQVMsY0FBZ0JrQyxPQUFPLEdJakp0RCxJQUFLdUMsSUFBTCxTQUFLQSxHQUNEQSxJQUFBLGVBQ0FBLElBQUEsZUFDQUEsSUFBQSxvQkFIQ0EsVUFNTCxJQUFBTCxHQUFBLFdBQ0ksUUFBQUEsR0FBb0JNLEVBQXlCNUIsR0FBekJ4QyxLQUFBb0UsVUFBeUJwRSxLQUFBd0MsY0FxQ3JDeEMsS0FBQXFFLDBCQUE0QixTQUFDRCxFQUFpQkUsR0FDbEQsR0FBTUMsR0FBY0gsRUFBUUksU0FBUyxLQUMvQkMsRUFBbUJGLEVBQVlHLFNBQVMsT0FDMUNQLEdBQVNRLFNBQVdMLElBQWNHLEdBQW9CSCxJQUFhSCxFQUFTUyxPQUMxRUgsR0FBb0JILElBQWFILEVBQVNVLFFBRzNDSixHQUtETCxFQUFRVSxRQUFRLGVBQWVuQyxLQUFLLDJCQUEyQm9DLE9BQy9EUixFQUFZUyxZQUFZLFFBQ3hCVCxFQUFZM0IsU0FBUyxXQU5yQndCLEVBQVFVLFFBQVEsZUFBZW5DLEtBQUssMkJBQTJCc0MsT0FDL0RWLEVBQVlTLFlBQVksU0FDeEJULEVBQVkzQixTQUFTLFdBT2pDLE1BcERXa0IsR0FBQXRDLFVBQUEwQyxtQkFBUCxjQUFBOUIsR0FBQXBDLElBQ0lBLE1BQUtvRSxRQUFRYyxHQUFHLFFBQVMsMEJBQTJCLFNBQUNDLEdBQ2pEL0MsRUFBS2dDLFFBQVF6QixLQUFLLHNCQUFzQnlDLEtBQUssU0FBQ0MsRUFBT2pCLEdBQ2pEaEMsRUFBS2lDLDBCQUEwQjlCLE9BQU82QixHQUFVRCxFQUFTUyxRQU03RE8sRUFBTUcsb0JBRVZ0RixLQUFLb0UsUUFBUWMsR0FBRyxRQUFTLDRCQUE2QixTQUFDQyxHQUNuRC9DLEVBQUtnQyxRQUFRekIsS0FBSyxzQkFBc0J5QyxLQUFLLFNBQUNDLEVBQU9qQixHQUNqRGhDLEVBQUtpQywwQkFBMEI5QixPQUFPNkIsR0FBVUQsRUFBU1UsUUFPN0RNLEVBQU1HLG9CQUVWdEYsS0FBS29FLFFBQVFjLEdBQUcsUUFBUyw2Q0FBOEMsU0FBQ0MsR0FDcEUsR0FBTUksR0FBZ0JoRCxPQUFPNEMsRUFBTUssUUFBUVYsUUFBUSxxQkFDbkQxQyxHQUFLZ0MsUUFBUXpCLEtBQUsseUJBQXlCOEMsV0FBVyxZQUN0RHJELEVBQUtpQywwQkFBMEJrQixFQUFlcEIsRUFBU1EsUUFDdkRRLEVBQU1HLHFCQUdQeEIsRUFBQXRDLFVBQUFrRSxTQUFQLGFBR081QixFQUFBdEMsVUFBQW1FLGdCQUFQLFNBQXVCUixLQW9CM0JyQixJQXZEYXBFLEdBQUFvRSx5QkpvTlAsU0FBVW5FLEVBQVFELEVBQVNTLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV0QixFQUFTLGNBQWdCa0MsT0FBTyxHS2hPdEQsSUFBQWdFLEdBQUF6RixFQUFBLEdBR0E0RCxFQUFBLFdBRUksUUFBQUEsR0FBb0JLLEVBQXlCNUIsR0FBekJ4QyxLQUFBb0UsVUFBeUJwRSxLQUFBd0MsY0FtRGpELE1BakRXdUIsR0FBQXZDLFVBQUEwQyxtQkFBUCxjQUFBOUIsR0FBQXBDLElBQ0lBLE1BQUtvRSxRQUFRYyxHQUFHLFNBQVUsNERBQTZELFNBQUNDLEdBQ3BGLEdBQU1mLEdBQVU3QixPQUFPNEMsRUFBTUssUUFDdkJLLEVBQVN6QixFQUFRMEIsTUFBTUMsV0FDdkJuRSxFQUFRaUUsRUFBT0csTUFBTSxLQUNyQkMsRUFBVTdCLEVBQVE4QixHQUFHLFlBQ3JCQyxFQUFTRixFQUFVTCxFQUFBUSxpQkFBaUJDLElBQU1ULEVBQUFRLGlCQUFpQkUsS0FDakVsRSxHQUFLSSxZQUFZQyxRQUFROEQsZUFBZTNFLEVBQU0sR0FBSUEsRUFBTSxHQUFJdUUsS0FVaEVuRyxLQUFLb0UsUUFBUWMsR0FBRyxRQUFTLHdDQUF5QyxTQUFDQyxHQUMvRCxHQUFJZixHQUFVN0IsT0FBTzRDLEVBQU1LLE9BQ3RCcEIsR0FBUThCLEdBQUcsWUFDWjlCLEVBQVVBLEVBQVFVLFFBQVEsVUFFOUIsSUFBTWUsR0FBU3pCLEVBQVFvQyxLQUFLLHFCQUFxQlQsV0FDM0NuRSxFQUFRaUUsRUFBT0csTUFBTSxJQUMzQjVELEdBQUtJLFlBQVlDLFFBQVE4RCxlQUFlM0UsRUFBTSxHQUFJQSxFQUFNLEdBQUlnRSxFQUFBUSxpQkFBaUJFLFNBYWpGdEcsS0FBS29FLFFBQVFjLEdBQUcsUUFBUywrQkFBZ0MsU0FBQ0MsR0FDdEQvQyxFQUFLZ0MsUUFBUXpCLEtBQUssb0JBQW9Cb0MsT0FDdEMzQyxFQUFLSSxZQUFZQyxRQUFRZ0UsdUJBRzFCMUMsRUFBQXZDLFVBQUFrRSxTQUFQLGFBR08zQixFQUFBdkMsVUFBQW1FLGdCQUFQLFNBQXVCUixLQUkzQnBCLElBckRhckUsR0FBQXFFLHVCTDRSUCxTQUFVcEUsRUFBUUQsRUFBU1MsR0FFakMsWUFFQVksUUFBT0MsZUFBZXRCLEVBQVMsY0FBZ0JrQyxPQUFPLEtNcFN0RCxTQUFZd0UsR0FDUkEsRUFBQSxVQUNBQSxFQUFBLGVBRlExRyxFQUFBMEcsbUJBQUExRyxFQUFBMEcsdUJOOFNOLFNBQVV6RyxFQUFRRCxFQUFTUyxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldEIsRUFBUyxjQUFnQmtDLE9BQU8sR09sVHRELElBQUFDLEdBQUExQixFQUFBLEdBRUF1RyxFQUFBdkcsRUFBQSxHQUNBd0csRUFBQXhHLEVBQUEsR0FDQXlHLEVBQUF6RyxFQUFBLEdBQ0EwRyxFQUFBMUcsRUFBQSxHQUdBeUQsRUFBQSxXQU1JLFFBQUFBLEtBQ0k1RCxLQUFLOEcsNEJBQThCakYsRUFBV2tGLFFBQVFGLEdBQ3REN0csS0FBS2dILDhCQUFnQ25GLEVBQVdrRixRQUFRSCxHQUN4RDVHLEtBQUtpSCxpQ0FBbUNwRixFQUFXa0YsUUFBUUwsR0FDM0QxRyxLQUFLa0gsNEJBQThCckYsRUFBV2tGLFFBQVFKLEdBZ0I5RCxNQWRXL0MsR0FBQXBDLFVBQUE4QixLQUFQLFNBQVlOLEVBQWtCUSxHQUMxQixHQUFNMkQsR0FBaUJuSCxLQUFLZ0gsZ0NBQ3RCSSxFQUFtQnBILEtBQUtpSCxpQ0FBaUN6RCxHQUN6RDZELEVBQWNySCxLQUFLa0gsNEJBQTRCbEUsRUFDckQsT0FBT2hELE1BQUs4Ryw2QkFBNkJLLGNBQWFBLEVBQUVDLGlCQUFnQkEsRUFBRUMsWUFBV0EsS0FHbEZ6RCxFQUFBcEMsVUFBQXVCLGVBQVAsU0FBc0JDLEdBQ2xCLE1BQU9oRCxNQUFLa0gsNEJBQTRCbEUsSUFHckNZLEVBQUFwQyxVQUFBK0IsdUJBQVAsU0FBOEJDLEdBQzFCLE1BQU94RCxNQUFLaUgsaUNBQWlDekQsSUFFckRJLElBMUJhbEUsR0FBQWtFLHdCUDBVUCxTQUFVakUsRUFBUUQsR1FsVnhCQyxFQUFBRCxRQUFBLDBtQ1J3Vk0sU0FBVUMsRUFBUUQsR1N4VnhCQyxFQUFBRCxRQUFBLHl2RFQ4Vk0sU0FBVUMsRUFBUUQsR1U5VnhCQyxFQUFBRCxRQUFBLHFTVm9XTSxTQUFVQyxFQUFRRCxHV3BXeEJDLEVBQUFELFFBQUEscWhCWDBXTSxTQUFVQyxFQUFRRCxFQUFTUyxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldEIsRUFBUyxjQUFnQmtDLE9BQU8sR1k1V3RELElBQUErQixHQUFBLFdBRUksUUFBQUEsR0FBWXhCLEdBQ1JuQyxLQUFLbUMsUUFBVUEsRUFLdkIsTUFISXBCLFFBQUFDLGVBQVcyQyxFQUFBbkMsVUFBQSxXWjZXUEwsSVk3V0osV0FDSSxNQUFPbkIsTUFBS21DLFNaK1daakIsWUFBWSxFQUNaRCxjQUFjLElZOVd0QjBDLElBUmFqRSxHQUFBaUUiLCJmaWxlIjoiZmFjZXRvby1idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJIYW5kbGViYXJzXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkhhbmRsZWJhcnNcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiRmFjZXRvb1wiXSA9IGZhY3RvcnkocmVxdWlyZShcIkhhbmRsZWJhcnNcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkZhY2V0b29cIl0gPSBmYWN0b3J5KHJvb3RbXCJIYW5kbGViYXJzXCJdKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXykge1xucmV0dXJuIFxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL3VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJIYW5kbGViYXJzXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcIkhhbmRsZWJhcnNcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiRmFjZXRvb1wiXSA9IGZhY3RvcnkocmVxdWlyZShcIkhhbmRsZWJhcnNcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkZhY2V0b29cIl0gPSBmYWN0b3J5KHJvb3RbXCJIYW5kbGViYXJzXCJdKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXykge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXztcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xyXG52YXIgRXhwYW5kQ29sbGFwc2VIYW5kbGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xyXG52YXIgRmlsdGVyQWN0aW9uSGFuZGxlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcclxudmFyIEZhY2V0VGVtcGxhdGVTZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xyXG52YXIgQ29uZmlnU3RvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xyXG52YXIgRmFjZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbiA9IFtdO1xyXG4gICAgICAgIHRoaXMuc2hvd0xvYWRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29udGFpbmVyRWxlbWVudCkuZmluZChcIi5mYWNldC1sb2FkZXJcIikuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhpZGVMb2FkZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeShfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbnRhaW5lckVsZW1lbnQpLmZpbmQoXCIuZmFjZXQtbG9hZGVyXCIpLnJlbW92ZShcImFjdGl2ZVwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuQmluZE9ubHlGYWNldHMgPSBmdW5jdGlvbiAoZmFjZXRzKSB7XHJcbiAgICAgICAgICAgIGlmICghX3RoaXMuYmluZEZpbmlzaGVkKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnVsbEZhY2V0ID0gX3RoaXMudGVtcGxhdGVTZXJ2aWNlLkJpbmQoZmFjZXRzLCBbXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmFjZXRTdWJIZWFkZXIgPSBfdGhpcy50ZW1wbGF0ZVNlcnZpY2UuQmluZE9ubHlGYWNldHMoZmFjZXRzKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnBhcmVudEVsZW1lbnQuZmluZChcIi5mYWNldC1ib2R5XCIpLmh0bWwoZmFjZXRTdWJIZWFkZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLkJpbmRPbmx5QXBwbGllZEZpbHRlcnMgPSBmdW5jdGlvbiAoZmlsdGVycykge1xyXG4gICAgICAgICAgICBpZiAoIV90aGlzLmJpbmRGaW5pc2hlZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZ1bGxGYWNldCA9IF90aGlzLnRlbXBsYXRlU2VydmljZS5CaW5kKFtdLCBmaWx0ZXJzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBmYWNldFN1YkhlYWRlciA9IF90aGlzLnRlbXBsYXRlU2VydmljZS5CaW5kT25seUFwcGxpZWRGaWx0ZXJzKGZpbHRlcnMpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucGFyZW50RWxlbWVudC5maW5kKFwiLmZhY2V0LXN1YmhlYWRlclwiKS5odG1sKGZhY2V0U3ViSGVhZGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5CaW5kID0gZnVuY3Rpb24gKGZhY2V0cywgZmlsdGVycykge1xyXG4gICAgICAgICAgICBfdGhpcy5wYXJlbnRFbGVtZW50Lmh0bWwoX3RoaXMudGVtcGxhdGVTZXJ2aWNlLkJpbmQoZmFjZXRzLCBmaWx0ZXJzKSk7XHJcbiAgICAgICAgICAgIF90aGlzLmJpbmRGaW5pc2hlZCA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKFwiaXNDaGVja2VkXCIsIGZ1bmN0aW9uIChib29sKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBib29sID8gXCJjaGVja2VkXCIgOiBcIlwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBuZXcgQ29uZmlnU3RvcmVfMS5Db25maWdTdG9yZShvcHRpb25zKTtcclxuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQgPSBqUXVlcnkob3B0aW9ucy5jb250YWluZXJFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZSA9IG5ldyBGYWNldFRlbXBsYXRlU2VydmljZV8xLkZhY2V0VGVtcGxhdGVTZXJ2aWNlKCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRXhwYW5kQ29sbGFwc2VIYW5kbGVyXzEuRXhwYW5kQ29sbGFwc2VIYW5kbGVyKHRoaXMucGFyZW50RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEZpbHRlckFjdGlvbkhhbmRsZXJfMS5GaWx0ZXJBY3Rpb25IYW5kbGVyKHRoaXMucGFyZW50RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgaGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBGYWNldDtcclxufSgpKTtcclxuZXhwb3J0cy5GYWNldCA9IEZhY2V0O1xyXG5cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFNob3dIaWRlO1xyXG4oZnVuY3Rpb24gKFNob3dIaWRlKSB7XHJcbiAgICBTaG93SGlkZVtTaG93SGlkZVtcIlNob3dcIl0gPSAwXSA9IFwiU2hvd1wiO1xyXG4gICAgU2hvd0hpZGVbU2hvd0hpZGVbXCJIaWRlXCJdID0gMV0gPSBcIkhpZGVcIjtcclxuICAgIFNob3dIaWRlW1Nob3dIaWRlW1wiVG9nZ2xlXCJdID0gMl0gPSBcIlRvZ2dsZVwiO1xyXG59KShTaG93SGlkZSB8fCAoU2hvd0hpZGUgPSB7fSkpO1xyXG52YXIgRXhwYW5kQ29sbGFwc2VIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXhwYW5kQ29sbGFwc2VIYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyID0gZnVuY3Rpb24gKGVsZW1lbnQsIHNob3dIaWRlKSB7XHJcbiAgICAgICAgICAgIHZhciBpY29uRWxlbWVudCA9IGVsZW1lbnQuY2hpbGRyZW4oXCJpXCIpO1xyXG4gICAgICAgICAgICB2YXIgY3VycmVudGx5VmlzaWJsZSA9IGljb25FbGVtZW50Lmhhc0NsYXNzKFwiZG93blwiKTtcclxuICAgICAgICAgICAgaWYgKFNob3dIaWRlLlRvZ2dsZSAhPT0gc2hvd0hpZGUgJiYgKChjdXJyZW50bHlWaXNpYmxlICYmIHNob3dIaWRlID09PSBTaG93SGlkZS5TaG93KSB8fFxyXG4gICAgICAgICAgICAgICAgKCFjdXJyZW50bHlWaXNpYmxlICYmIHNob3dIaWRlID09PSBTaG93SGlkZS5IaWRlKSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWN1cnJlbnRseVZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50cyhcIi5mYWNldC1pdGVtXCIpLmZpbmQoXCIuZmFjZXQtaXRlbS1kZXNjcmlwdGlvblwiKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5yZW1vdmVDbGFzcyhcInJpZ2h0XCIpO1xyXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnQuYWRkQ2xhc3MoXCJkb3duXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRzKFwiLmZhY2V0LWl0ZW1cIikuZmluZChcIi5mYWNldC1pdGVtLWRlc2NyaXB0aW9uXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwiZG93blwiKTtcclxuICAgICAgICAgICAgICAgIGljb25FbGVtZW50LmFkZENsYXNzKFwicmlnaHRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgRXhwYW5kQ29sbGFwc2VIYW5kbGVyLnByb3RvdHlwZS5SZWdpc3RlckRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5mYWNldC1ib2R5IC5leHBhbmQtYWxsXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50LmZpbmQoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoalF1ZXJ5KGVsZW1lbnQpLCBTaG93SGlkZS5TaG93KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIGpRdWVyeShldmVudC50YXJnZXQpLnBhcmVudHMoXCJidXR0b25cIilcclxuICAgICAgICAgICAgLy8gLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcclxuICAgICAgICAgICAgLy8gLnNpYmxpbmdzKFwiYnV0dG9uXCIpXHJcbiAgICAgICAgICAgIC8vIC5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmZhY2V0LWJvZHkgLmNvbGxhcHNlLWFsbFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGpRdWVyeShlbGVtZW50KSwgU2hvd0hpZGUuSGlkZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBqUXVlcnkoZXZlbnQudGFyZ2V0KVxyXG4gICAgICAgICAgICAvLyAucGFyZW50cyhcImJ1dHRvblwiKVxyXG4gICAgICAgICAgICAvLyAuYXR0cihcImRpc2FibGVkXCIsIFwidHJ1ZVwiKVxyXG4gICAgICAgICAgICAvLyAuc2libGluZ3MoXCJidXR0b25cIilcclxuICAgICAgICAgICAgLy8gLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZmFjZXQtYm9keSAuZmFjZXQtaXRlbSAuZmFjZXQtaXRlbS1oZWFkZXJcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBoZWFkZXJFbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCkucGFyZW50cyhcIi5mYWNldC1pdGVtLWhlYWRlclwiKTtcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWhlYWRlciAuYnV0dG9uXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgX3RoaXMuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihoZWFkZXJFbGVtZW50LCBTaG93SGlkZS5Ub2dnbGUpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBFeHBhbmRDb2xsYXBzZUhhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIEV4cGFuZENvbGxhcHNlSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4cGFuZENvbGxhcHNlSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5FeHBhbmRDb2xsYXBzZUhhbmRsZXIgPSBFeHBhbmRDb2xsYXBzZUhhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQWN0aW9uVHlwZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcclxudmFyIEZpbHRlckFjdGlvbkhhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWx0ZXJBY3Rpb25IYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICB9XHJcbiAgICBGaWx0ZXJBY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5SZWdpc3RlckRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjaGFuZ2VcIiwgXCIuZmFjZXQtYm9keSAuZmFjZXQtaXRlbS1kZXNjcmlwdGlvbiAuZmFjZXQtdmFsdWUtY2hlY2tib3hcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciB2YWxTdHIgPSBlbGVtZW50LnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhbFN0ci5zcGxpdChcIjpcIik7XHJcbiAgICAgICAgICAgIHZhciBjaGVja2VkID0gZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gY2hlY2tlZCA/IEZpbHRlckFjdGlvblR5cGVfMS5GaWx0ZXJBY3Rpb25UeXBlLkFkZCA6IEZpbHRlckFjdGlvblR5cGVfMS5GaWx0ZXJBY3Rpb25UeXBlLk1pbnVzO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uRmlsdGVyQ2hhbmdlKHZhbHVlWzBdLCB2YWx1ZVsxXSwgYWN0aW9uKTtcclxuICAgICAgICAgICAgLy8gaWYgKCFjaGVja2VkKSB7XHJcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5mYWNldC1zdWJoZWFkZXIgLmZhY2V0LWxhYmVscyAubGFiZWxcIikuZWFjaCgoaW5kZXgsIGxhYmVsKSA9PiB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29uc3QgdmFsID0galF1ZXJ5KGxhYmVsKS5hdHRyKFwiZGF0YS1maWx0ZXItZW50cnlcIik7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgaWYgKHZhbCA9PT0gdmFsU3RyKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGpRdWVyeShsYWJlbCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5mYWNldC1zdWJoZWFkZXIgLmZhY2V0LWxhYmVscyAubGFiZWxcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5pcyhcIi5sYWJlbFwiKSkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50cyhcIi5sYWJlbFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdmFsU3RyID0gZWxlbWVudC5hdHRyKFwiZGF0YS1maWx0ZXItZW50cnlcIikudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsU3RyLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkZpbHRlckNoYW5nZSh2YWx1ZVswXSwgdmFsdWVbMV0sIEZpbHRlckFjdGlvblR5cGVfMS5GaWx0ZXJBY3Rpb25UeXBlLk1pbnVzKTtcclxuICAgICAgICAgICAgLy8gZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5lbGVtZW50LmZpbmQoXCIuZmFjZXQtYm9keSAuZmFjZXQtaXRlbS1kZXNjcmlwdGlvbiAuZmFjZXQtdmFsdWUtY2hlY2tib3hcIilcclxuICAgICAgICAgICAgLy8gLmVhY2goKGluZGV4LCBjaGVja2JveCkgPT4ge1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKCFqUXVlcnkoY2hlY2tib3gpLmlzKFwiOmNoZWNrZWRcIikpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zdCB2YWwgPSBqUXVlcnkoY2hlY2tib3gpLnZhbCgpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAodmFsID09PSB2YWxTdHIpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBqUXVlcnkoY2hlY2tib3gpLnByb3AoXCJjaGVja2VkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZmFjZXQtc3ViaGVhZGVyIC5yZW1vdmUtYWxsXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50LmZpbmQoXCIuZmFjZXQtc3ViaGVhZGVyXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkFsbEZpbHRlclJlbW92ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpbHRlckFjdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIEZpbHRlckFjdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWx0ZXJBY3Rpb25IYW5kbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkZpbHRlckFjdGlvbkhhbmRsZXIgPSBGaWx0ZXJBY3Rpb25IYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZpbHRlckFjdGlvblR5cGU7XHJcbihmdW5jdGlvbiAoRmlsdGVyQWN0aW9uVHlwZSkge1xyXG4gICAgRmlsdGVyQWN0aW9uVHlwZVtcIkFkZFwiXSA9IFwiQWRkXCI7XHJcbiAgICBGaWx0ZXJBY3Rpb25UeXBlW1wiTWludXNcIl0gPSBcIk1pbnVzXCI7XHJcbn0pKEZpbHRlckFjdGlvblR5cGUgPSBleHBvcnRzLkZpbHRlckFjdGlvblR5cGUgfHwgKGV4cG9ydHMuRmlsdGVyQWN0aW9uVHlwZSA9IHt9KSk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgSGFuZGxlYmFycyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XHJcbnZhciBGYWNldFN1YkhlYWRlciA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XHJcbnZhciBGYWNldEJvZHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xyXG52YXIgRmFjZXRIZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xyXG52YXIgRmFjZXRNYWluID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcclxudmFyIEZhY2V0VGVtcGxhdGVTZXJ2aWNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmFjZXRUZW1wbGF0ZVNlcnZpY2UoKSB7XHJcbiAgICAgICAgdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW4gPSBIYW5kbGViYXJzLmNvbXBpbGUoRmFjZXRNYWluKTtcclxuICAgICAgICB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0SGVhZGVyID0gSGFuZGxlYmFycy5jb21waWxlKEZhY2V0SGVhZGVyKTtcclxuICAgICAgICB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyID0gSGFuZGxlYmFycy5jb21waWxlKEZhY2V0U3ViSGVhZGVyKTtcclxuICAgICAgICB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0Qm9keSA9IEhhbmRsZWJhcnMuY29tcGlsZShGYWNldEJvZHkpO1xyXG4gICAgfVxyXG4gICAgRmFjZXRUZW1wbGF0ZVNlcnZpY2UucHJvdG90eXBlLkJpbmQgPSBmdW5jdGlvbiAoZmFjZXRzLCBmaWx0ZXJzKSB7XHJcbiAgICAgICAgdmFyIGhlYWRlckNvbnRlbnQgPSB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0SGVhZGVyKCk7XHJcbiAgICAgICAgdmFyIHN1YkhlYWRlckNvbnRlbnQgPSB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyKGZpbHRlcnMpO1xyXG4gICAgICAgIHZhciBib2R5Q29udGVudCA9IHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRCb2R5KGZhY2V0cyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRNYWluKHsgaGVhZGVyQ29udGVudDogaGVhZGVyQ29udGVudCwgc3ViSGVhZGVyQ29udGVudDogc3ViSGVhZGVyQ29udGVudCwgYm9keUNvbnRlbnQ6IGJvZHlDb250ZW50IH0pO1xyXG4gICAgfTtcclxuICAgIEZhY2V0VGVtcGxhdGVTZXJ2aWNlLnByb3RvdHlwZS5CaW5kT25seUZhY2V0cyA9IGZ1bmN0aW9uIChmYWNldHMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEJvZHkoZmFjZXRzKTtcclxuICAgIH07XHJcbiAgICBGYWNldFRlbXBsYXRlU2VydmljZS5wcm90b3R5cGUuQmluZE9ubHlBcHBsaWVkRmlsdGVycyA9IGZ1bmN0aW9uIChmaWx0ZXJzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRTdWJIZWFkZXIoZmlsdGVycyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZhY2V0VGVtcGxhdGVTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLkZhY2V0VGVtcGxhdGVTZXJ2aWNlID0gRmFjZXRUZW1wbGF0ZVNlcnZpY2U7XHJcblxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBcInt7I2lmIHRoaXMubGVuZ3RofX1cXG48ZGl2IGNsYXNzPVxcXCJjb250ZW50IGZhY2V0LXN1YmhlYWRlclxcXCI+XFxuICAgIDxoNSBjbGFzcz1cXFwidWkgc3ViIGJsdWUgZmxvYXRlZCBsZWZ0IGhlYWRlclxcXCI+QXBwbGllZCBGaWx0ZXJzPC9oNT5cXG4gICAgPGRpdiBjbGFzcz1cXFwidWkgbWluaSByaWdodCBmbG9hdGVkIGJ1dHRvbnNcXFwiPlxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwidWkgbWluaSBpY29uIGJ1dHRvbiByZW1vdmUtYWxsXFxcIj5cXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiY2xvc2UgaWNvblxcXCI+PC9pPlxcbiAgICAgICAgPC9idXR0b24+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ1aSB0aW55IGhpZGRlbiBjbGVhcmluZyBkaXZpZGVyXFxcIj48L2Rpdj5cXG4gICAgPHRhYmxlIGNsYXNzPVxcXCJ1aSB2ZXJ5IGNvbXBhY3Qgc21hbGwgY29sbGFwc2luZyBib3JkZXItbGVzcyB0YWJsZVxcXCIgc3R5bGU9XFxcImJvcmRlcjogbm9uZTtcXFwiPlxcbiAgICAgICAgPHRib2Q+XFxuICAgICAgICAgICAge3sjZWFjaCB0aGlzfX1cXG4gICAgICAgICAgICA8dHIgY2xhc3M9XFxcInRvcCBhbGlnbmVkXFxcIj5cXG4gICAgICAgICAgICAgICAgPHRkPnt7aWR9fTwvdGQ+XFxuICAgICAgICAgICAgICAgIDx0ZD5cXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJ1aSBtaW5pIGJsdWUgbGFiZWxzIGZhY2V0LWxhYmVsc1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAge3sjZWFjaCBmYWNldFZhbHVlc319XFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInVpIGxhYmVsIHJlbW92ZS1sYWJlbFxcXCIgZGF0YS1maWx0ZXItZW50cnk9XFxcInt7Li4vaWR9fTp7e3RoaXMubGFiZWx9fVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7dGhpcy5sYWJlbH19XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJpY29uIGNsb3NlXFxcIj48L2k+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7L2VhY2h9fVxcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICAgICAgICA8L3RkPlxcbiAgICAgICAgICAgIDwvdHI+XFxuICAgICAgICAgICAge3svZWFjaH19XFxuICAgICAgICA8L3Rib2Q+XFxuICAgIDwvdGFibGU+XFxuPC9kaXY+XFxue3svaWZ9fVwiO1xuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImNvbnRlbnQgZmFjZXQtYm9keVxcXCIgc3R5bGU9XFxcImhlaWdodDogMTAwJTtvdmVyZmxvdzpoaWRkZW47XFxcIj5cXG4gICAgPGg1IGNsYXNzPVxcXCJ1aSBzdWIgYmx1ZSBsZWZ0IGZsb2F0ZWQgaGVhZGVyXFxcIj5TZWxlY3QgRmlsdGVyczwvaDU+XFxuICAgIDxkaXYgY2xhc3M9XFxcInVpIG1pbmkgcmlnaHQgZmxvYXRlZCBidXR0b25zXFxcIj5cXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcInVpIG1pbmkgaWNvbiBidXR0b24gZXhwYW5kLWFsbFxcXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcInBsdXMgaWNvblxcXCI+PC9pPlxcbiAgICAgICAgPC9idXR0b24+XFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJ1aSBtaW5pIGljb24gYnV0dG9uIGNvbGxhcHNlLWFsbFxcXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcIm1pbnVzIGljb25cXFwiPjwvaT5cXG4gICAgICAgIDwvYnV0dG9uPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwidWkgdGlueSBoaWRkZW4gY2xlYXJpbmcgZGl2aWRlclxcXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcInVpIG1lZGl1bSBsaXN0IGZhY2V0LWxpc3RcXFwiIHN0eWxlPVxcXCJoZWlnaHQ6IDEwMCU7b3ZlcmZsb3c6IGF1dG87XFxcIj5cXG4gICAgICAgIHt7I2VhY2ggdGhpc319XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpdGVtIGZhY2V0LWl0ZW1cXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnRcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1pdGVtLWhlYWRlciBjdXJzb3ItcG9pbnRlclxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwicmlnaHQgdHJpYW5nbGUgaWNvblxcXCI+PC9pPlxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+e3tuYW1lfX08L3NwYW4+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJkZXNjcmlwdGlvbiBmYWNldC1pdGVtLWRlc2NyaXB0aW9uXFxcIiBzdHlsZT1cXFwiZGlzcGxheTpub25lO1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8IS0tIDxkaXYgY2xhc3M9XFxcInVpIG1pbmkgaW5wdXRcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBwbGFjZWhvbGRlcj1cXFwiU2VhcmNoLi4uXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PiAtLT5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInVpIHNtYWxsIGxpc3RcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7I2VhY2ggZmFjZXRWYWx1ZXN9fVxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW1cXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgc3R5bGU9XFxcImhlaWdodDowLjg1ZW07XFxcIiBpZD1cXFwie3tsYWJlbH19LXt7QGluZGV4fX1cXFwiIHt7aXNDaGVja2VkIHNlbGVjdGVkfX0gY2xhc3M9XFxcImZhY2V0LXZhbHVlLWNoZWNrYm94IGN1cnNvci1wb2ludGVyXFxcIiB2YWx1ZT1cXFwie3suLi9pZH19Ont7bGFiZWx9fVxcXCIgdHlwZT1cXFwiY2hlY2tib3hcXFwiLz5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPVxcXCJmb250LXNpemU6MC44NWVtO1xcXCIgY2xhc3M9XFxcImN1cnNvci1wb2ludGVyXFxcIiBmb3I9XFxcInt7bGFiZWx9fS17e0BpbmRleH19XFxcIj57e2xhYmVsfX0gKHt7Y291bnR9fSk8L2xhYmVsPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgIHt7L2VhY2h9fVxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICB7ey9lYWNofX1cXG4gICAgPC9kaXY+XFxuPC9kaXY+XCI7XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiY29udGVudCBmYWNldC1oZWFkZXJcXFwiPlxcbiAgICA8aDUgY2xhc3M9XFxcInVpIHN1YiBibHVlIGZsb2F0ZWQgbGVmdCBoZWFkZXJcXFwiPkZpbHRlcnMgU2VjdGlvbjwvaDU+XFxuICAgIDxkaXYgY2xhc3M9XFxcInVpIG1pbmkgcmlnaHQgZmxvYXRlZCBidXR0b25zXFxcIj5cXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcInVpIG1pbmkgaWNvbiBidXR0b24gcmVtb3ZlLWFsbFxcXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImNsb3NlIGljb25cXFwiPjwvaT5cXG4gICAgICAgIDwvYnV0dG9uPlxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cIjtcblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gXCI8c3R5bGU+XFxuICAgIC5yZW1vdmUtbGFiZWw6aG92ZXJ7XFxuICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcXG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgfVxcbiAgICAuYm9yZGVyLWxlc3MgdHIgdGQgeyBib3JkZXItdG9wOiAwcHggIWltcG9ydGFudDsgfVxcbiAgICAuY3Vyc29yLXBvaW50ZXJ7XFxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XFxuICAgIH1cXG48L3N0eWxlPlxcblxcbjxkaXYgY2xhc3M9XFxcInVpIGZsdWlkIGNhcmRcXFwiIHN0eWxlPVxcXCJwYWRkaW5nLXRvcCA6IDBweDtoZWlnaHQ6MTAwJTtvdmVyZmxvdzpoaWRkZW47XFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwidWkgaW52ZXJ0ZWQgZGltbWVyIGZhY2V0LWxvYWRlclxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ1aSBtZWRpdW0gdGV4dCBsb2FkZXJcXFwiPkxvYWRpbmcgRmlsdGVycy4uLjwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gICAge3t7aGVhZGVyQ29udGVudH19fVxcbiAgICB7e3tzdWJIZWFkZXJDb250ZW50fX19XFxuICAgIHt7e2JvZHlDb250ZW50fX19XFxuPC9kaXY+XCI7XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQ29uZmlnU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb25maWdTdG9yZShvcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25maWdTdG9yZS5wcm90b3R5cGUsIFwiT3B0aW9uc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gQ29uZmlnU3RvcmU7XHJcbn0oKSk7XHJcbmV4cG9ydHMuQ29uZmlnU3RvcmUgPSBDb25maWdTdG9yZTtcclxuXG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTtcbn0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBmYWNldG9vLWJ1bmRsZS5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGI2NmFhZDgyMjMyMmU5NTY0ZmJlIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIkhhbmRsZWJhcnNcIlxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJpbXBvcnQgKiBhcyBIYW5kbGViYXJzIGZyb20gXCJoYW5kbGViYXJzXCI7XG5pbXBvcnQgeyBFeHBhbmRDb2xsYXBzZUhhbmRsZXIgfSBmcm9tIFwiLi4vZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZUhhbmRsZXJcIjtcbmltcG9ydCB7IEZpbHRlckFjdGlvbkhhbmRsZXIgfSBmcm9tIFwiLi4vZXZlbnRoYW5kbGVycy9GaWx0ZXJBY3Rpb25IYW5kbGVyXCI7XG5pbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4uL2V2ZW50aGFuZGxlcnMvSUV2ZW50SGFuZGxlclwiO1xuaW1wb3J0IHsgSUZhY2V0IH0gZnJvbSBcIi4uL21vZGVscy9JRmFjZXRcIjtcbmltcG9ydCB7IElGYWNldFZhbHVlIH0gZnJvbSBcIi4uL21vZGVscy9JRmFjZXRWYWx1ZVwiO1xuaW1wb3J0IHsgRmFjZXRUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcbmltcG9ydCB7IElGYWNldFRlbXBsYXRlU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9JRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcbmltcG9ydCB7IENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4vLi4vY29uZmlnL0NvbmZpZ1N0b3JlXCI7XG5pbXBvcnQgeyBJRmFjZXRPcHRpb25zIH0gZnJvbSBcIi4vLi4vY29uZmlnL0lGYWNldE9wdGlvbnNcIjtcblxuZXhwb3J0IGNsYXNzIEZhY2V0IHtcbiAgICBwcml2YXRlIGNvbmZpZ1N0b3JlOiBDb25maWdTdG9yZTtcbiAgICBwcml2YXRlIHRlbXBsYXRlU2VydmljZTogSUZhY2V0VGVtcGxhdGVTZXJ2aWNlO1xuICAgIHByaXZhdGUgcGFyZW50RWxlbWVudDogSlF1ZXJ5O1xuICAgIHByaXZhdGUgYmluZEZpbmlzaGVkOiBib29sZWFuO1xuICAgIHByaXZhdGUgaGFuZGxlckNoYWluOiBJRXZlbnRIYW5kbGVyW10gPSBbXTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJRmFjZXRPcHRpb25zKSB7XG4gICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoXCJpc0NoZWNrZWRcIiwgKGJvb2w6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGJvb2wgPyBcImNoZWNrZWRcIiA6IFwiXCI7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gIG5ldyBDb25maWdTdG9yZShvcHRpb25zKTtcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0galF1ZXJ5KG9wdGlvbnMuY29udGFpbmVyRWxlbWVudCk7XG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlID0gbmV3IEZhY2V0VGVtcGxhdGVTZXJ2aWNlKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEV4cGFuZENvbGxhcHNlSGFuZGxlcih0aGlzLnBhcmVudEVsZW1lbnQsIHRoaXMuY29uZmlnU3RvcmUpKTtcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRmlsdGVyQWN0aW9uSGFuZGxlcih0aGlzLnBhcmVudEVsZW1lbnQsIHRoaXMuY29uZmlnU3RvcmUpKTtcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHB1YmxpYyBzaG93TG9hZGVyID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICBqUXVlcnkodGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbnRhaW5lckVsZW1lbnQpLmZpbmQoXCIuZmFjZXQtbG9hZGVyXCIpLmFkZENsYXNzKFwiYWN0aXZlXCIpO1xuICAgIH1cbiAgICBwdWJsaWMgaGlkZUxvYWRlciA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgalF1ZXJ5KHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50KS5maW5kKFwiLmZhY2V0LWxvYWRlclwiKS5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgfVxuICAgIHB1YmxpYyBCaW5kT25seUZhY2V0cyA9ICAoZmFjZXRzOiBJRmFjZXRbXSk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuYmluZEZpbmlzaGVkKSB7XG4gICAgICAgICAgICBjb25zdCBmdWxsRmFjZXQgPSB0aGlzLnRlbXBsYXRlU2VydmljZS5CaW5kKGZhY2V0cywgW10pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmFjZXRTdWJIZWFkZXIgPSB0aGlzLnRlbXBsYXRlU2VydmljZS5CaW5kT25seUZhY2V0cyhmYWNldHMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIuZmFjZXQtYm9keVwiKS5odG1sKGZhY2V0U3ViSGVhZGVyKTtcbiAgICAgICAgfSAgICB9XG4gICAgcHVibGljIEJpbmRPbmx5QXBwbGllZEZpbHRlcnMgPSAgKGZpbHRlcnM6IElGYWNldFtdKTogdm9pZCA9PiB7XG4gICAgICAgIGlmICghdGhpcy5iaW5kRmluaXNoZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxGYWNldCA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLkJpbmQoW10sIGZpbHRlcnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZmFjZXRTdWJIZWFkZXIgPSB0aGlzLnRlbXBsYXRlU2VydmljZS5CaW5kT25seUFwcGxpZWRGaWx0ZXJzKGZpbHRlcnMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50LmZpbmQoXCIuZmFjZXQtc3ViaGVhZGVyXCIpLmh0bWwoZmFjZXRTdWJIZWFkZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBCaW5kID0gIChmYWNldHM6IElGYWNldFtdLCBmaWx0ZXJzOiBJRmFjZXRbXSk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLnBhcmVudEVsZW1lbnQuaHRtbCh0aGlzLnRlbXBsYXRlU2VydmljZS5CaW5kKGZhY2V0cywgZmlsdGVycykpO1xuICAgICAgICB0aGlzLmJpbmRGaW5pc2hlZCA9IHRydWU7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMCEuL3NyYy90cy9tYWluL0ZhY2V0LnRzIiwiaW1wb3J0IHsgQ29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0NvbmZpZ1N0b3JlXCI7XG5pbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xuXG5lbnVtIFNob3dIaWRlIHtcbiAgICBTaG93LFxuICAgIEhpZGUsXG4gICAgVG9nZ2xlLFxufVxuXG5leHBvcnQgY2xhc3MgRXhwYW5kQ29sbGFwc2VIYW5kbGVyIGltcGxlbWVudHMgSUV2ZW50SGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBKUXVlcnksIHByaXZhdGUgY29uZmlnU3RvcmU6IENvbmZpZ1N0b3JlKSB7fVxuXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZmFjZXQtYm9keSAuZXhwYW5kLWFsbFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGpRdWVyeShlbGVtZW50KSwgU2hvd0hpZGUuU2hvdyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGpRdWVyeShldmVudC50YXJnZXQpLnBhcmVudHMoXCJidXR0b25cIilcbiAgICAgICAgICAgIC8vIC5hdHRyKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpXG4gICAgICAgICAgICAvLyAuc2libGluZ3MoXCJidXR0b25cIilcbiAgICAgICAgICAgIC8vIC5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmZhY2V0LWJvZHkgLmNvbGxhcHNlLWFsbFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGpRdWVyeShlbGVtZW50KSwgU2hvd0hpZGUuSGlkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGpRdWVyeShldmVudC50YXJnZXQpXG4gICAgICAgICAgICAvLyAucGFyZW50cyhcImJ1dHRvblwiKVxuICAgICAgICAgICAgLy8gLmF0dHIoXCJkaXNhYmxlZFwiLCBcInRydWVcIilcbiAgICAgICAgICAgIC8vIC5zaWJsaW5ncyhcImJ1dHRvblwiKVxuICAgICAgICAgICAgLy8gLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZmFjZXQtYm9keSAuZmFjZXQtaXRlbSAuZmFjZXQtaXRlbS1oZWFkZXJcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJFbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCkucGFyZW50cyhcIi5mYWNldC1pdGVtLWhlYWRlclwiKTtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWhlYWRlciAuYnV0dG9uXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIHRoaXMuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihoZWFkZXJFbGVtZW50LCBTaG93SGlkZS5Ub2dnbGUpO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuICAgIHByaXZhdGUgQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlciA9IChlbGVtZW50OiBKUXVlcnksIHNob3dIaWRlOiBTaG93SGlkZSkgPT4ge1xuICAgICAgICBjb25zdCBpY29uRWxlbWVudCA9IGVsZW1lbnQuY2hpbGRyZW4oXCJpXCIpO1xuICAgICAgICBjb25zdCBjdXJyZW50bHlWaXNpYmxlID0gaWNvbkVsZW1lbnQuaGFzQ2xhc3MoXCJkb3duXCIpO1xuICAgICAgICBpZiAoU2hvd0hpZGUuVG9nZ2xlICE9PSBzaG93SGlkZSAmJiAoKGN1cnJlbnRseVZpc2libGUgJiYgc2hvd0hpZGUgPT09IFNob3dIaWRlLlNob3cpIHx8XG4gICAgICAgICAgICAoIWN1cnJlbnRseVZpc2libGUgJiYgc2hvd0hpZGUgPT09IFNob3dIaWRlLkhpZGUpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghY3VycmVudGx5VmlzaWJsZSkge1xuICAgICAgICAgICAgZWxlbWVudC5wYXJlbnRzKFwiLmZhY2V0LWl0ZW1cIikuZmluZChcIi5mYWNldC1pdGVtLWRlc2NyaXB0aW9uXCIpLnNob3coKTtcbiAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwicmlnaHRcIik7XG4gICAgICAgICAgICBpY29uRWxlbWVudC5hZGRDbGFzcyhcImRvd25cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBlbGVtZW50LnBhcmVudHMoXCIuZmFjZXQtaXRlbVwiKS5maW5kKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIikuaGlkZSgpO1xuICAgICAgICAgICAgaWNvbkVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJkb3duXCIpO1xuICAgICAgICAgICAgaWNvbkVsZW1lbnQuYWRkQ2xhc3MoXCJyaWdodFwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTAhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZUhhbmRsZXIudHMiLCJpbXBvcnQgeyBDb25maWdTdG9yZSB9IGZyb20gXCIuLi9jb25maWcvQ29uZmlnU3RvcmVcIjtcbmltcG9ydCB7IEZpbHRlckFjdGlvblR5cGUgfSBmcm9tIFwiLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGVcIjtcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBGaWx0ZXJBY3Rpb25IYW5kbGVyIGltcGxlbWVudHMgSUV2ZW50SGFuZGxlciB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnQ6IEpRdWVyeSwgcHJpdmF0ZSBjb25maWdTdG9yZTogQ29uZmlnU3RvcmUpIHt9XG5cbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjaGFuZ2VcIiwgXCIuZmFjZXQtYm9keSAuZmFjZXQtaXRlbS1kZXNjcmlwdGlvbiAuZmFjZXQtdmFsdWUtY2hlY2tib3hcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICBjb25zdCB2YWxTdHIgPSBlbGVtZW50LnZhbCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbFN0ci5zcGxpdChcIjpcIik7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpO1xuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gY2hlY2tlZCA/IEZpbHRlckFjdGlvblR5cGUuQWRkIDogRmlsdGVyQWN0aW9uVHlwZS5NaW51cztcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkZpbHRlckNoYW5nZSh2YWx1ZVswXSwgdmFsdWVbMV0sIGFjdGlvbik7XG4gICAgICAgICAgICAvLyBpZiAoIWNoZWNrZWQpIHtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5mYWNldC1zdWJoZWFkZXIgLmZhY2V0LWxhYmVscyAubGFiZWxcIikuZWFjaCgoaW5kZXgsIGxhYmVsKSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgICAgIGNvbnN0IHZhbCA9IGpRdWVyeShsYWJlbCkuYXR0cihcImRhdGEtZmlsdGVyLWVudHJ5XCIpO1xuICAgICAgICAgICAgLy8gICAgICAgICBpZiAodmFsID09PSB2YWxTdHIpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGpRdWVyeShsYWJlbCkucmVtb3ZlKCk7XG4gICAgICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgICAgIC8vICAgICB9KTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmZhY2V0LXN1YmhlYWRlciAuZmFjZXQtbGFiZWxzIC5sYWJlbFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQuaXMoXCIubGFiZWxcIikpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRzKFwiLmxhYmVsXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdmFsU3RyID0gZWxlbWVudC5hdHRyKFwiZGF0YS1maWx0ZXItZW50cnlcIikudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsU3RyLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkZpbHRlckNoYW5nZSh2YWx1ZVswXSwgdmFsdWVbMV0sIEZpbHRlckFjdGlvblR5cGUuTWludXMpO1xuICAgICAgICAgICAgLy8gZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgIC8vIHRoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWJvZHkgLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb24gLmZhY2V0LXZhbHVlLWNoZWNrYm94XCIpXG4gICAgICAgICAgICAvLyAuZWFjaCgoaW5kZXgsIGNoZWNrYm94KSA9PiB7XG4gICAgICAgICAgICAvLyAgICAgaWYgKCFqUXVlcnkoY2hlY2tib3gpLmlzKFwiOmNoZWNrZWRcIikpIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vICAgICBjb25zdCB2YWwgPSBqUXVlcnkoY2hlY2tib3gpLnZhbCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAvLyAgICAgaWYgKHZhbCA9PT0gdmFsU3RyKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIGpRdWVyeShjaGVja2JveCkucHJvcChcImNoZWNrZWRcIiwgZmFsc2UpO1xuICAgICAgICAgICAgLy8gICAgIH1cbiAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZmFjZXQtc3ViaGVhZGVyIC5yZW1vdmUtYWxsXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuZmFjZXQtc3ViaGVhZGVyXCIpLmhpZGUoKTtcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkFsbEZpbHRlclJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayhldmVudDogYW55KTogdm9pZCB7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMCEuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZpbHRlckFjdGlvbkhhbmRsZXIudHMiLCJleHBvcnQgZW51bSBGaWx0ZXJBY3Rpb25UeXBlIHtcbiAgICBBZGQgPSBcIkFkZFwiLFxuICAgIE1pbnVzID0gXCJNaW51c1wiLFxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMCEuL3NyYy90cy9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZS50cyIsImltcG9ydCAqIGFzIEhhbmRsZWJhcnMgZnJvbSBcImhhbmRsZWJhcnNcIjtcbmltcG9ydCB7IElGYWNldCB9IGZyb20gXCIuLi9tb2RlbHMvSUZhY2V0XCI7XG5pbXBvcnQgKiBhcyBGYWNldFN1YkhlYWRlciBmcm9tIFwiLi8uLi8uLi9odG1sL2ZhY2V0LWFwcGxpZWQtZmlsdGVycy5odG1sXCI7XG5pbXBvcnQgKiBhcyBGYWNldEJvZHkgZnJvbSBcIi4vLi4vLi4vaHRtbC9mYWNldC1ib2R5Lmh0bWxcIjtcbmltcG9ydCAqIGFzIEZhY2V0SGVhZGVyIGZyb20gXCIuLy4uLy4uL2h0bWwvZmFjZXQtaGVhZGVyLmh0bWxcIjtcbmltcG9ydCAqIGFzIEZhY2V0TWFpbiBmcm9tIFwiLi8uLi8uLi9odG1sL2ZhY2V0LW1haW4uaHRtbFwiO1xuaW1wb3J0IHsgSUZhY2V0VGVtcGxhdGVTZXJ2aWNlIH0gZnJvbSBcIi4vSUZhY2V0VGVtcGxhdGVTZXJ2aWNlXCI7XG5cbmV4cG9ydCBjbGFzcyBGYWNldFRlbXBsYXRlU2VydmljZSBpbXBsZW1lbnRzIElGYWNldFRlbXBsYXRlU2VydmljZSB7XG4gICAgcHJpdmF0ZSBkYXRhOiBJRmFjZXRbXTtcbiAgICBwcml2YXRlIHRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbjogYW55O1xuICAgIHByaXZhdGUgdGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRIZWFkZXI6IGFueTtcbiAgICBwcml2YXRlIHRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyOiBhbnk7XG4gICAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEJvZHk6IGFueTtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW4gPSBIYW5kbGViYXJzLmNvbXBpbGUoRmFjZXRNYWluKTtcbiAgICAgICAgdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEhlYWRlciA9IEhhbmRsZWJhcnMuY29tcGlsZShGYWNldEhlYWRlcik7XG4gICAgICAgIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRTdWJIZWFkZXIgPSBIYW5kbGViYXJzLmNvbXBpbGUoRmFjZXRTdWJIZWFkZXIpO1xuICAgICAgICB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0Qm9keSA9IEhhbmRsZWJhcnMuY29tcGlsZShGYWNldEJvZHkpO1xuICAgIH1cbiAgICBwdWJsaWMgQmluZChmYWNldHM6IElGYWNldFtdLCBmaWx0ZXJzOiBJRmFjZXRbXSk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSAgdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEhlYWRlcigpO1xuICAgICAgICBjb25zdCBzdWJIZWFkZXJDb250ZW50ID0gdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlcihmaWx0ZXJzKTtcbiAgICAgICAgY29uc3QgYm9keUNvbnRlbnQgPSB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0Qm9keShmYWNldHMpO1xuICAgICAgICByZXR1cm4gdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW4oe2hlYWRlckNvbnRlbnQsIHN1YkhlYWRlckNvbnRlbnQsIGJvZHlDb250ZW50fSk7XG4gICAgfVxuXG4gICAgcHVibGljIEJpbmRPbmx5RmFjZXRzKGZhY2V0czogSUZhY2V0W10pOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEJvZHkoZmFjZXRzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgQmluZE9ubHlBcHBsaWVkRmlsdGVycyhmaWx0ZXJzOiBJRmFjZXRbXSk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyKGZpbHRlcnMpO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTAhLi9zcmMvdHMvc2VydmljZXMvRmFjZXRUZW1wbGF0ZVNlcnZpY2UudHMiLCJtb2R1bGUuZXhwb3J0cyA9IFwie3sjaWYgdGhpcy5sZW5ndGh9fVxcbjxkaXYgY2xhc3M9XFxcImNvbnRlbnQgZmFjZXQtc3ViaGVhZGVyXFxcIj5cXG4gICAgPGg1IGNsYXNzPVxcXCJ1aSBzdWIgYmx1ZSBmbG9hdGVkIGxlZnQgaGVhZGVyXFxcIj5BcHBsaWVkIEZpbHRlcnM8L2g1PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ1aSBtaW5pIHJpZ2h0IGZsb2F0ZWQgYnV0dG9uc1xcXCI+XFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJ1aSBtaW5pIGljb24gYnV0dG9uIHJlbW92ZS1hbGxcXFwiPlxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJjbG9zZSBpY29uXFxcIj48L2k+XFxuICAgICAgICA8L2J1dHRvbj5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcInVpIHRpbnkgaGlkZGVuIGNsZWFyaW5nIGRpdmlkZXJcXFwiPjwvZGl2PlxcbiAgICA8dGFibGUgY2xhc3M9XFxcInVpIHZlcnkgY29tcGFjdCBzbWFsbCBjb2xsYXBzaW5nIGJvcmRlci1sZXNzIHRhYmxlXFxcIiBzdHlsZT1cXFwiYm9yZGVyOiBub25lO1xcXCI+XFxuICAgICAgICA8dGJvZD5cXG4gICAgICAgICAgICB7eyNlYWNoIHRoaXN9fVxcbiAgICAgICAgICAgIDx0ciBjbGFzcz1cXFwidG9wIGFsaWduZWRcXFwiPlxcbiAgICAgICAgICAgICAgICA8dGQ+e3tpZH19PC90ZD5cXG4gICAgICAgICAgICAgICAgPHRkPlxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcInVpIG1pbmkgYmx1ZSBsYWJlbHMgZmFjZXQtbGFiZWxzXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICB7eyNlYWNoIGZhY2V0VmFsdWVzfX1cXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwidWkgbGFiZWwgcmVtb3ZlLWxhYmVsXFxcIiBkYXRhLWZpbHRlci1lbnRyeT1cXFwie3suLi9pZH19Ont7dGhpcy5sYWJlbH19XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3t0aGlzLmxhYmVsfX1cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImljb24gY2xvc2VcXFwiPjwvaT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICAgICAgICAgICAgICAgICAge3svZWFjaH19XFxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICAgICAgICAgIDwvdGQ+XFxuICAgICAgICAgICAgPC90cj5cXG4gICAgICAgICAgICB7ey9lYWNofX1cXG4gICAgICAgIDwvdGJvZD5cXG4gICAgPC90YWJsZT5cXG48L2Rpdj5cXG57ey9pZn19XCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaHRtbC9mYWNldC1hcHBsaWVkLWZpbHRlcnMuaHRtbFxuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiY29udGVudCBmYWNldC1ib2R5XFxcIiBzdHlsZT1cXFwiaGVpZ2h0OiAxMDAlO292ZXJmbG93OmhpZGRlbjtcXFwiPlxcbiAgICA8aDUgY2xhc3M9XFxcInVpIHN1YiBibHVlIGxlZnQgZmxvYXRlZCBoZWFkZXJcXFwiPlNlbGVjdCBGaWx0ZXJzPC9oNT5cXG4gICAgPGRpdiBjbGFzcz1cXFwidWkgbWluaSByaWdodCBmbG9hdGVkIGJ1dHRvbnNcXFwiPlxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwidWkgbWluaSBpY29uIGJ1dHRvbiBleHBhbmQtYWxsXFxcIj5cXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwicGx1cyBpY29uXFxcIj48L2k+XFxuICAgICAgICA8L2J1dHRvbj5cXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcInVpIG1pbmkgaWNvbiBidXR0b24gY29sbGFwc2UtYWxsXFxcIj5cXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwibWludXMgaWNvblxcXCI+PC9pPlxcbiAgICAgICAgPC9idXR0b24+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ1aSB0aW55IGhpZGRlbiBjbGVhcmluZyBkaXZpZGVyXFxcIj48L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwidWkgbWVkaXVtIGxpc3QgZmFjZXQtbGlzdFxcXCIgc3R5bGU9XFxcImhlaWdodDogMTAwJTtvdmVyZmxvdzogYXV0bztcXFwiPlxcbiAgICAgICAge3sjZWFjaCB0aGlzfX1cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW0gZmFjZXQtaXRlbVxcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudFxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZhY2V0LWl0ZW0taGVhZGVyIGN1cnNvci1wb2ludGVyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJyaWdodCB0cmlhbmdsZSBpY29uXFxcIj48L2k+XFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj57e25hbWV9fTwvc3Bhbj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImRlc2NyaXB0aW9uIGZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cXFwiIHN0eWxlPVxcXCJkaXNwbGF5Om5vbmU7XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDwhLS0gPGRpdiBjbGFzcz1cXFwidWkgbWluaSBpbnB1dFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XFxcInRleHRcXFwiIHBsYWNlaG9sZGVyPVxcXCJTZWFyY2guLi5cXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+IC0tPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwidWkgc21hbGwgbGlzdFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAge3sjZWFjaCBmYWNldFZhbHVlc319XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBzdHlsZT1cXFwiaGVpZ2h0OjAuODVlbTtcXFwiIGlkPVxcXCJ7e2xhYmVsfX0te3tAaW5kZXh9fVxcXCIge3tpc0NoZWNrZWQgc2VsZWN0ZWR9fSBjbGFzcz1cXFwiZmFjZXQtdmFsdWUtY2hlY2tib3ggY3Vyc29yLXBvaW50ZXJcXFwiIHZhbHVlPVxcXCJ7ey4uL2lkfX06e3tsYWJlbH19XFxcIiB0eXBlPVxcXCJjaGVja2JveFxcXCIvPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9XFxcImZvbnQtc2l6ZTowLjg1ZW07XFxcIiBjbGFzcz1cXFwiY3Vyc29yLXBvaW50ZXJcXFwiIGZvcj1cXFwie3tsYWJlbH19LXt7QGluZGV4fX1cXFwiPnt7bGFiZWx9fSAoe3tjb3VudH19KTwvbGFiZWw+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAge3svZWFjaH19XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIHt7L2VhY2h9fVxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9odG1sL2ZhY2V0LWJvZHkuaHRtbFxuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiY29udGVudCBmYWNldC1oZWFkZXJcXFwiPlxcbiAgICA8aDUgY2xhc3M9XFxcInVpIHN1YiBibHVlIGZsb2F0ZWQgbGVmdCBoZWFkZXJcXFwiPkZpbHRlcnMgU2VjdGlvbjwvaDU+XFxuICAgIDxkaXYgY2xhc3M9XFxcInVpIG1pbmkgcmlnaHQgZmxvYXRlZCBidXR0b25zXFxcIj5cXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcInVpIG1pbmkgaWNvbiBidXR0b24gcmVtb3ZlLWFsbFxcXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImNsb3NlIGljb25cXFwiPjwvaT5cXG4gICAgICAgIDwvYnV0dG9uPlxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cIjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9odG1sL2ZhY2V0LWhlYWRlci5odG1sXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3R5bGU+XFxuICAgIC5yZW1vdmUtbGFiZWw6aG92ZXJ7XFxuICAgICAgICB0ZXh0LWRlY29yYXRpb246IGxpbmUtdGhyb3VnaDtcXG4gICAgICAgIGN1cnNvcjogcG9pbnRlcjtcXG4gICAgfVxcbiAgICAuYm9yZGVyLWxlc3MgdHIgdGQgeyBib3JkZXItdG9wOiAwcHggIWltcG9ydGFudDsgfVxcbiAgICAuY3Vyc29yLXBvaW50ZXJ7XFxuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XFxuICAgIH1cXG48L3N0eWxlPlxcblxcbjxkaXYgY2xhc3M9XFxcInVpIGZsdWlkIGNhcmRcXFwiIHN0eWxlPVxcXCJwYWRkaW5nLXRvcCA6IDBweDtoZWlnaHQ6MTAwJTtvdmVyZmxvdzpoaWRkZW47XFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwidWkgaW52ZXJ0ZWQgZGltbWVyIGZhY2V0LWxvYWRlclxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ1aSBtZWRpdW0gdGV4dCBsb2FkZXJcXFwiPkxvYWRpbmcgRmlsdGVycy4uLjwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gICAge3t7aGVhZGVyQ29udGVudH19fVxcbiAgICB7e3tzdWJIZWFkZXJDb250ZW50fX19XFxuICAgIHt7e2JvZHlDb250ZW50fX19XFxuPC9kaXY+XCI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaHRtbC9mYWNldC1tYWluLmh0bWxcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiaW1wb3J0IHsgSUZhY2V0T3B0aW9ucyB9IGZyb20gXCIuL0lGYWNldE9wdGlvbnNcIjtcblxuZXhwb3J0IGNsYXNzIENvbmZpZ1N0b3JlIHtcbiAgICBwcml2YXRlIG9wdGlvbnM6IElGYWNldE9wdGlvbnM7XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogSUZhY2V0T3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0IE9wdGlvbnMoKTogSUZhY2V0T3B0aW9ucyB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMCEuL3NyYy90cy9jb25maWcvQ29uZmlnU3RvcmUudHMiXSwic291cmNlUm9vdCI6IiJ9