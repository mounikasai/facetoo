!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("handlebars/runtime"),require("moment")):"function"==typeof define&&define.amd?define(["handlebars.runtime","moment"],t):"object"==typeof exports?exports.Facetoo=t(require("handlebars/runtime"),require("moment")):e.Facetoo=t(e.Handlebars,e.moment)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.Add="Add",e.Minus="Minus"}(t.FilterActionType||(t.FilterActionType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide",e[e.Toggle=2]="Toggle"}(t.ShowHide||(t.ShowHide={}))},function(e,t,n){var i=n(0);e.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,i,o,r){var a;return'<div class="gui of-hidden min-w-50 w-auto fluid-h flex column container" id="'+e.escapeExpression(e.lambda(null!=t?t.idPrefix:t,t))+'-facet-container">\n    <section class="gui h-auto gui-subheading-1 m-0 border-bottom light p-r-10 p-t-5 p-b-5 p-l-10">\n        <button class="gui cursor-pointer expand-all" \n                aria-label="Expand All Filters">\n            <i  class="gui-icon special rotate-left gui-icon-chevdouble"></i>\n            Expand All\n        </button>\n        <button class="gui cursor-pointer collapse-all" \n                aria-label="Collapse All Filters">\n            <i class="gui-icon special rotate-right gui-icon-chevdouble"></i>\n            Collapse All\n        </button>\n    </section>\n    <section class="gui border-bottom light p-r-10 p-t-5 p-b-5 p-l-10">\n        <div class="gui gui-icon input fluid-w h-30">\n            <input class="gui input fluid-w gui-subheading-2 filter-search-input"\n                   placeholder="Search Filters. Shortcut Alt + F " />\n            <i class="gui gui-icon gui-icon-search gui-hidden"></i>\n        </div>\n    </section>\n    <ul class="gui fluid-h facet-list of-auto ofx-hidden m-0 p-0" \n        role="tree"\n        aria-live="polite">\n'+(null!=(a=e.invokePartial(n(18),t,{name:"facet-pinned",data:r,indent:"        ",helpers:i,partials:o,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(n(25),t,{name:"facet-unpinned",data:r,indent:"        ",helpers:i,partials:o,decorators:e.decorators}))?a:"")+"    </ul>\n</div>"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e?" collapsed ":""};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e?"true":"false"};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){var t=0;if(void 0!==e&&null!==e&&e.length>0)for(var n=0,i=e;n<i.length;n++){var o=i[n];o.selected&&t++}return 0===t?"":'<span class="gui-body-2">('+t+")</span>"};t.default=i},function(e,t,n){function i(e){return e&&(e.__esModule?e.default:e)}var o=n(0);e.exports=(o.default||o).template({1:function(e,t,o,r,a,l,s){var u=null!=t?t:e.nullContext||{},c=e.escapeExpression,d=e.lambda;return'    <li class="gui item '+c(i(n(19)).call(u,a&&a.index,null!=s[2]?s[2].noOfFacetToShow:s[2],{name:"CheckLength",hash:{},data:a}))+'"\r\n        aria-label="'+c(d(null!=t?t.label:t,t))+'">\r\n        <label  data-attr-value="'+c(d(null!=t?t.label:t,t))+'" \r\n                data-attr-id="'+c(d(null!=s[1]?s[1].id:s[1],t))+'"\r\n                data-attr-type="'+c(d(null!=s[1]?s[1].type:s[1],t))+'"\r\n                tabindex="0"\r\n                role="treeitem"\r\n                title="'+c(d(null!=t?t.label:t,t))+"("+c(d(null!=t?t.count:t,t))+')"\r\n                for="'+c(d(null!=t?t.idPrefix:t,t))+"-"+c(d(null!=s[1]?s[1].id:s[1],t))+"-"+c(d(a&&a.index,t))+'-checkbox"\r\n                aria-label="Filter '+c(d(null!=t?t.label:t,t))+" in "+c(d(null!=s[1]?s[1].name:s[1],t))+" has "+c(d(null!=t?t.count:t,t))+" records. Press spacebar to "+c(i(n(20)).call(u,null!=t?t.selected:t,{name:"ApplyRemove",hash:{},data:a}))+' this filter."\r\n                class="gui cursor-pointer gui-subheading-1 no-wrap text-shorten m-0">\r\n            <input class="gui facet-value-checkbox cursor-pointer m-l-0" \r\n                    id="'+c(d(null!=t?t.idPrefix:t,t))+"-"+c(d(null!=s[1]?s[1].id:s[1],t))+"-"+c(d(a&&a.index,t))+'-checkbox"\r\n                    '+c(i(n(21)).call(u,null!=t?t.selected:t,{name:"Checked",hash:{},data:a}))+"\r\n                    "+c(i(n(22)).call(u,null!=t?t.disabled:t,{name:"Disabled",hash:{},data:a}))+'\r\n                    tabindex="-1"\r\n                    value="'+c(d(null!=s[1]?s[1].id:s[1],t))+":::"+c(d(null!=t?t.label:t,t))+":::"+c(d(null!=s[1]?s[1].type:s[1],t))+'" \r\n                    type="checkbox" />\r\n                    '+c(i(n(8)).call(u,null!=s[1]?s[1].type:s[1],null!=t?t.label:t,{name:"FormatLabelByType",hash:{},data:a}))+'\r\n            <span class="gui gui-subheading-1 m-0">('+c(d(null!=t?t.count:t,t))+")</span>\r\n        </label>\r\n    </li>\r\n"},compiler:[7,">= 4.0.0"],main:function(e,t,o,r,a,l,s){var u,c=null!=t?t:e.nullContext||{};return'<ul class="description gui facet-item-description m-t-10 p-l-5 p-0 '+e.escapeExpression(i(n(23)).call(c,null!=t?t.collapsed:t,!0,{name:"Hidden",hash:{},data:a}))+'" \r\n    role="group">\r\n'+(null!=(u=o.each.call(c,null!=t?t.facetValues:t,{name:"each",hash:{},fn:e.program(1,a,0,l,s),inverse:e.noop,data:a}))?u:"")+"    "+(null!=(u=i(n(24)).call(c,null!=t?t.facetValues:t,null!=s[1]?s[1].noOfFacetToShow:s[1],{name:"ShowMoreLessLink",hash:{},data:a}))?u:"")+"\r\n</ul>"},useData:!0,useDepths:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=function(e,t){return i&&"Edm.DateTimeOffset"===e?i.utc(t).format("DD-MMM-YYYY hh:mm a"):"Assigned"===t?"Committed":"Complete"===t?"Assigned":t};t.default=o},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.isDescendant=function(e,t){for(var n=t.parentNode;null!=n;){if(n===e)return!0;n=n.parentNode}return!1},e.isSelfOrDescendant=function(t,n){return t===n||e.isDescendant(t,n)},e.isHidden=function(e){return!e||null===e.offsetParent},e.isAriaHidden=function(e){return!!e&&"true"===e.getAttribute("aria-hidden")},e.setAriaHidden=function(e,t){if(!e)throw Error("DomUtils.setAriaHidden - Node cannot be of null or undefined");e.setAttribute("aria-hidden",t)},e.isAriaExpanded=function(e){return!!e&&"true"===e.getAttribute("aria-expanded")},e.setAriaExpanded=function(e,t){if(!e)throw Error("DomUtils.setAriaExpanded - Node cannot be of null or undefined");e.setAttribute("aria-expanded",t)},e.show=function(e){if(!e)throw Error("DomUtils.show - Node cannot be of null or undefined");e.classList.remove("gui-hidden")},e.hide=function(e){if(!e)throw Error("DomUtils.hide - Node cannot be of null or undefined");e.classList.add("gui-hidden")},e.toggleLabel=function(e){if(!e)throw Error("DomUtils.toggleLabel - Node cannot be of null or undefined");var t=e.htmlFor,n=document.getElementById(t)||e.firstElementChild;return n.checked=!n.checked,n.checked},e.off=function(e){var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)},e}();t.DomUtils=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.UpKeyCode=38,e.DownKeyCode=40,e.EnterKeyCode=13,e.SpaceKeyCode=28,e}();t.FacetConstants=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=function(){function e(){}return e.ControlVisibilityOfFilter=function(e,t,n){var o=e.find(".expansion-icon"),r=o.hasClass("gui-icon-chevron-up");i.ShowHide.Toggle!==t&&(r&&t===i.ShowHide.Show||!r&&t===i.ShowHide.Hide)||(r?(e.find(".facet-item-description").slideUp(200),o.removeClass("gui-icon-chevron-up"),o.addClass("gui-icon-chevron-down"),e.attr("aria-expanded","false").attr("aria-label","Press enter or space to expand filter values for "+n)):(e.find(".facet-item-description").slideDown(200),o.removeClass("gui-icon-chevron-down"),o.addClass("gui-icon-chevron-up"),e.attr("aria-expanded","true").attr("aria-label","Press enter or space to collapse filter values for "+n)))},e}();t.ExpandCollapseManager=o},function(e,t){e.exports=function(e,t,n,i){function o(){function o(){a=Number(new Date),n.apply(s,c)}function l(){r=void 0}var s=this,u=Number(new Date)-a,c=arguments;i&&!r&&o(),r&&clearTimeout(r),void 0===i&&u>e?o():!0!==t&&(r=setTimeout(i?l:o,void 0===i?e-u:e))}var r,a=0;return"boolean"!=typeof t&&(i=n,n=t,t=void 0),o}},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(15)),i(n(30))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),o=n(26),r=n(29),a=function(){function e(e){var t=this;this.handlerChain=[],this.bind=function(e){t.templateService.setData(e),t.reRender()},this.reRender=function(){setTimeout(function(){var e=t.templateService.getData(),n=t.templateService.bind(e);t.facetElement.innerHTML=n;document.querySelectorAll('[role="tree"]');t.facetTree=new o.FacetTree(t.configStore.Options.containerElement,t,t.configStore),t.facetTree.init()},1)},this.setFacetConfig=function(e){t.configStore.Options.facetConfig=e},this.destroy=function(){t.facetTree.destroy()},this.configStore=new r.FacetConfigStore(e),this.facetElement=e.containerElement,this.templateService=new i.FacetTemplateService(this.configStore)}return e}();t.Facet=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),o=function(){function e(e){var t=this;this.configStore=e,this.setData=function(e){t.data=e},this.getData=function(){return t.data},this.compareFn=function(e,t){return void 0===e.order?-1:void 0===t.order?1:e.order-t.order},this.mergeWithFacetConfig=function(e){for(var n=[],i=0,o=e;i<o.length;i++)for(var r=o[i],a=0,l=t.configStore.Options.facetConfig;a<l.length;a++){var s=l[a];if(s.id===r.id){n.push({collapsed:s.collapsed,facetRanges:r.facetRanges,facetValues:r.facetValues,id:s.id,name:s.name,order:s.order,pinned:s.pinned,type:s.type});break}}return n},this.tempateFunctionForFacetMain=i}return e.prototype.bind=function(e){var t=(this.configStore.Options.collapsed,this.mergeWithFacetConfig(e)),n=t.filter(function(e){return void 0!==e.pinned&&e.pinned}),i=t.filter(function(e){return void 0===e.pinned||!e.pinned});n.sort(this.compareFn),i.sort(this.compareFn);var o=this.configStore.Options.noOfFacetToShow,r=this.configStore.Options.idPrefix;return this.tempateFunctionForFacetMain({idPrefix:r,favorites:n,nonFavorites:i,noOfFacetToShow:o})},e}();t.FacetTemplateService=o},function(e,t,n){var i=n(0);e.exports=(i.default||i).template({1:function(e,t,i,o,r){var a;return'    <div class="facet-body gui fluid-h of-hidden gui-hidden">'+(null!=(a=e.invokePartial(n(3),t,{name:"facet-body",data:r,helpers:i,partials:o,decorators:e.decorators}))?a:"")+"</div>\n"},3:function(e,t,i,o,r){var a;return'    <div class="facet-body gui fluid-h of-hidden">'+(null!=(a=e.invokePartial(n(3),t,{name:"facet-body",data:r,helpers:i,partials:o,decorators:e.decorators}))?a:"")+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,o){var r;return'<div class="gui fluid-h ">\n'+(null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.collapsed:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o}))?r:"")+"</div>"},usePartial:!0,useData:!0})},function(e,t,n){function i(e){return e&&(e.__esModule?e.default:e)}var o=n(0);e.exports=(o.default||o).template({1:function(e,t,n,i,o){var r,a=e.lambda,l=e.escapeExpression;return'<li class="gui m-0 p-r-10 p-t-5 p-b-5 p-l-10" \r\n    aria-label="Pinned Filters"\r\n    data-attr-value="Pinned Filters"\r\n    data-attr-ignoreForSearch="true"\r\n    aria-expanded="true"\r\n    role="treeitem"\r\n    id="'+l(a(null!=t?t.idPrefix:t,t))+'-pinned-facets-container">\r\n    <h6 class="gui gui-subheading-2 caps bold-500 flex m-b-10 jc-sb">\r\n        PINNED FILTERS\r\n        <i class="gui gui-icon selectable gui-icon-chevron-up expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n    </h6>\r\n    <ul aria-labelledby="'+l(a(null!=t?t.idPrefix:t,t))+'-pinned-facets-container" class="gui m-0 p-0" role="group">\r\n'+(null!=(r=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.favorites:t,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o}))?r:"")+"    </ul>\r\n</li>\r\n"},2:function(e,t,o,r,a){var l,s=e.lambda,u=e.escapeExpression,c=null!=t?t:e.nullContext||{};return'        <li aria-label="'+u(s(null!=t?t.name:t,t))+'"\r\n            class="gui item facet-item border-bottom light p-r-10 p-t-5 p-b-5 p-l-5 '+u(i(n(4)).call(c,null!=t?t.collapsed:t,{name:"Collapsed",hash:{},data:a}))+'"\r\n            role="treeitem"\r\n            aria-expanded="'+u(i(n(5)).call(c,null!=t?t.collapsed:t,{name:"Boolean",hash:{},data:a}))+'"\r\n            data-attr-id="'+u(s(null!=t?t.id:t,t))+'" \r\n            data-attr-value="'+u(s(null!=t?t.name:t,t))+'">\r\n            <div class="facet-item-header fluid gui item flex jc-sb" id="facet-item-header-'+u(s(a&&a.index,t))+'">\r\n                <span class="gui primary gui-subheading-1 caps m-0 cursor-pointer" title="'+u(s(null!=t?t.name:t,t))+'">\r\n                    '+u(s(null!=t?t.name:t,t))+" "+(null!=(l=i(n(6)).call(c,null!=t?t.facetValues:t,{name:"SelectedFiltersCount",hash:{},data:a}))?l:"")+'\r\n                </span>\r\n                <span>\r\n                    <i  data-attr-id="'+u(s(null!=t?t.id:t,t))+'" \r\n                        class="gui gui-icon selectable pin-unpin-selector gui-icon-unpin m-t-5 m-r-10 unpin-icon cursor-pointer" \r\n                        aria-label="Press enter or space to unpin filter '+u(s(null!=t?t.name:t,t))+'"\r\n                        tabindex="0"></i>\r\n'+(null!=(l=o.if.call(c,null!=t?t.collapsed:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?l:"")+"                </span>\r\n            </div>\r\n"+(null!=(l=e.invokePartial(n(7),t,{name:"facet-label",data:a,indent:"            ",helpers:o,partials:r,decorators:e.decorators}))?l:"")+"        </li>\r\n"},3:function(e,t,n,i,o){return'                        <i class="gui gui-icon selectable gui-icon-chevron-up expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n'},5:function(e,t,n,i,o){return'                        <i class="gui gui-icon selectable gui-icon-chevron-down expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,o){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.favorites:t)?r.length:r,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?r:""},usePartial:!0,useData:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){return void 0!==e&&e+1>t?"gui-hidden extra-filter":""};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e?" remove ":" apply "};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e?"checked":""};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e?"disabled":""};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){var n;return n=t?!e:!!e,n?" gui-hidden ":" "};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return e.length>t?'<li class="gui m-b-5 m-t-5"><a tabindex="0" role="treeitem" aria-label="Press enter to show '+(e.length-t)+' more values" class="gui caps gui-body-2 simple show-more-link cursor-pointer p-0 m-t-3">'+(e.length-t)+' More </a></li><li class="gui m-b-5 m-t-5 gui-hidden"><a tabindex="0" role="treeitem" aria-label="Press enter to show less values" class="gui caps gui-body-2 simple show-less-link cursor-pointer p-0 m-t-3">Show Less</a></li>':""};t.default=i},function(e,t,n){function i(e){return e&&(e.__esModule?e.default:e)}var o=n(0);e.exports=(o.default||o).template({1:function(e,t,n,i,o){var r,a=e.lambda,l=e.escapeExpression;return'<li class="gui m-0 p-r-10 p-t-5 p-b-5 p-l-10" \r\n    aria-label="All Filters"\r\n    data-attr-value="All Filters"\r\n    data-attr-ignoreForSearch="true"\r\n    aria-expanded="true"\r\n    role="treeitem"\r\n    id="'+l(a(null!=t?t.idPrefix:t,t))+'-unpinned-facets-container">\r\n    <h6 class="gui gui-subheading-2 caps bold-500 m-b-10 flex jc-sb">\r\n        All FILTERS\r\n        <i class="gui gui-icon selectable gui-icon-chevron-up expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n    </h6>\r\n    <ul aria-labelledby="'+l(a(null!=t?t.idPrefix:t,t))+'-unpinned-facets-container" class="gui m-0 p-0" role="group">\r\n'+(null!=(r=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.nonFavorites:t,{name:"each",hash:{},fn:e.program(2,o,0),inverse:e.noop,data:o}))?r:"")+"    </ul>\r\n</li>\r\n"},2:function(e,t,o,r,a){var l,s=e.lambda,u=e.escapeExpression,c=null!=t?t:e.nullContext||{};return'        <li aria-label="'+u(s(null!=t?t.name:t,t))+'"\r\n            class="gui item facet-item border-bottom light p-r-10 p-t-5 p-b-5 p-l-5 '+u(i(n(4)).call(c,null!=t?t.collapsed:t,{name:"Collapsed",hash:{},data:a}))+'"\r\n            role="treeitem"\r\n            aria-expanded="'+u(i(n(5)).call(c,null!=t?t.collapsed:t,{name:"Boolean",hash:{},data:a}))+'"\r\n            data-attr-id="'+u(s(null!=t?t.id:t,t))+'" \r\n            data-attr-value="'+u(s(null!=t?t.name:t,t))+'">\r\n            <div class="facet-item-header fluid gui item flex jc-sb" id="facet-item-header-'+u(s(a&&a.index,t))+'">\r\n                <span class="gui primary gui-subheading-1 caps m-0 cursor-pointer" title="'+u(s(null!=t?t.name:t,t))+'">\r\n                    '+u(s(null!=t?t.name:t,t))+" "+(null!=(l=i(n(6)).call(c,null!=t?t.facetValues:t,{name:"SelectedFiltersCount",hash:{},data:a}))?l:"")+'\r\n                </span>\r\n                <span>\r\n                    <i  data-attr-id="'+u(s(null!=t?t.id:t,t))+'" \r\n                        class="gui gui-icon selectable pin-unpin-selector gui-icon-pin m-t-5 m-r-10 pin-icon cursor-pointer" \r\n                        aria-label="Press enter or space to pin filter '+u(s(null!=t?t.name:t,t))+'"\r\n                        tabindex="0"></i>\r\n'+(null!=(l=o.if.call(c,null!=t?t.collapsed:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?l:"")+"                </span>\r\n            </div>\r\n"+(null!=(l=e.invokePartial(n(7),t,{name:"facet-label",data:a,indent:"            ",helpers:o,partials:r,decorators:e.decorators}))?l:"")+"        </li>\r\n"},3:function(e,t,n,i,o){return'                        <i class="gui gui-icon selectable gui-icon-chevron-up expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n'},5:function(e,t,n,i,o){return'                        <i class="gui gui-icon selectable gui-icon-chevron-down expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,o){var r;return null!=(r=n.if.call(null!=t?t:e.nullContext||{},null!=(r=null!=t?t.nonFavorites:t)?r.length:r,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?r:""},usePartial:!0,useData:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(10),r=n(27),a=function(){function e(e,t,n){var a=this;this.lastInputValue="",this.findTreeitems=function(e,t,n){for(var i=e.firstElementChild,o=n;i;){var l=i.getAttribute("role");l&&"treeitem"===l.toLowerCase()&&(o=new r.FacetTreeItem(i,t,n),o.init(),t.treeitems.push(o),t.firstChars.push(o.label.substring(0,1).toLowerCase())),i.firstElementChild&&a.findTreeitems(i,t,o),i=i.nextElementSibling}},this.init=function(){a.treeDomNode.getAttribute("role")||a.treeDomNode.setAttribute("role","tree"),a.findTreeitems(a.treeDomNode,a,!1),a.updateVisibleTreeitems(),a.firstTreeitem.treeItemDomNode.tabIndex=0,a.collapseAllNode.addEventListener("click",a.collapseAllItems),a.expandAllNode.addEventListener("click",a.expandAllItems),a.searchBoxNode.addEventListener("keyup",a.handleSearchForFilters),document.addEventListener("keydown",a.setFocusToSearchBox)},this.destroy=function(){o.DomUtils.off(a.parentElement),document.removeEventListener("keydown",a.setFocusToSearchBox)},this.setFocusToSearchBox=function(e){e.altKey&&"f"===e.key&&(e.preventDefault(),a.searchBoxNode.focus())},this.setFocusToItem=function(e,t){for(var n=0,i=a.treeitems;n<i.length;n++){var o=i[n];o===e?(o.treeItemDomNode.tabIndex=0,t||o.treeItemDomNode.focus()):o.treeItemDomNode.tabIndex=-1}},this.setFocusToFirstVisible=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t];if(i.isVisible){a.setFocusToItem(i,e);break}}},this.setFocusToNextItem=function(e){for(var t,n=a.treeitems.length-1;n>=0;n--){var i=a.treeitems[n];if(i===e)break;i.isVisible&&(t=i)}t&&a.setFocusToItem(t)},this.setFocusToPreviousItem=function(e){for(var t,n=0,i=a.treeitems;n<i.length;n++){var o=i[n];if(o===e)break;o.isVisible&&(t=o)}t&&a.setFocusToItem(t)},this.setFocusToParentItem=function(e){e.groupTreeitem&&a.setFocusToItem(e.groupTreeitem)},this.setFocusToFirstItem=function(){a.setFocusToItem(a.firstTreeitem)},this.setFocusToLastItem=function(){a.setFocusToItem(a.lastTreeitem)},this.expandTreeitem=function(e,t){e.isExpandable&&(o.DomUtils.setAriaExpanded(e.treeItemDomNode,"true"),a.toggleExpansionIcon(e,!0),a.updateVisibleTreeitems(t)),a.collapseAllNode.removeAttribute("disabled"),a.expandAllNode.removeAttribute("disabled")},this.expandAllSiblingItems=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t];i.groupTreeitem===e.groupTreeitem&&i.isExpandable&&a.expandTreeitem(i)}a.notifyCollapseAndExpansion()},this.expandAllItems=function(){for(var e=0,t=a.treeitems;e<t.length;e++){var n=t[e];n.isExpandable&&a.expandTreeitem(n)}a.collapseAllNode.removeAttribute("disabled"),a.expandAllNode.setAttribute("disabled","true"),a.collapseAllNode.focus(),a.notifyCollapseAndExpansion()},this.collapseAllItems=function(){for(var e=0,t=a.treeitems;e<t.length;e++){var n=t[e];n.isExpandable&&a.collapseTreeitem(n)}a.expandAllNode.removeAttribute("disabled"),a.collapseAllNode.setAttribute("disabled","true"),a.expandAllNode.focus(),a.notifyCollapseAndExpansion()},this.collapseAllSiblingItems=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t];i.groupTreeitem===e.groupTreeitem&&i.isExpandable&&a.collapseTreeitem(i)}a.notifyCollapseAndExpansion()},this.collapseTreeitem=function(e,t){var n;n=e.isExpanded()?e:e.groupTreeitem,n&&(o.DomUtils.setAriaExpanded(n.treeItemDomNode,"false"),a.toggleExpansionIcon(n,!1),a.updateVisibleTreeitems(t),a.setFocusToItem(n)),a.collapseAllNode.removeAttribute("disabled"),a.expandAllNode.removeAttribute("disabled")},this.toggleExpansionIcon=function(e,t){var n,i=e.treeItemDomNode.querySelectorAll(".expansion-icon");i&&i.length&&(n=i[0]),t?(n.classList.remove("gui-icon-chevron-down"),n.classList.add("gui-icon-chevron-up")):(n.classList.remove("gui-icon-chevron-up"),n.classList.add("gui-icon-chevron-down"))},this.updateVisibleTreeitems=function(e){a.firstTreeitem=a.treeitems[0];for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t],o=i.treeItemDomNode.parentElement;for(i.isVisible=!0,(i.treeItemDomNode.classList.contains("gui-hidden")||o.classList.contains("gui-hidden"))&&(i.isVisible=!1);o&&o!==a.treeDomNode;)"false"===o.getAttribute("aria-expanded")&&(i.isVisible=!1),o=o.parentElement;i.isVisible&&(a.lastTreeitem=i)}e&&a.notifyCollapseAndExpansion()},this.setFocusByFirstCharacter=function(e,t){var n,i;t=t.toLowerCase(),n=a.treeitems.indexOf(e)+1,n===a.treeitems.length&&(n=0),i=a.getIndexFirstChars(n,t),-1===i&&(i=a.getIndexFirstChars(0,t)),i>-1&&a.setFocusToItem(a.treeitems[i])},this.getIndexFirstChars=function(e,t){for(var n=e;n<a.firstChars.length;n++)if(a.treeitems[n].isVisible&&t===a.firstChars[n])return n;return-1},this.showMoreValues=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t],o=i.treeItemDomNode.parentElement;i.groupTreeitem===e&&(o.classList.remove("gui-hidden"),i.isVisible=!0,i.isShowLessLink&&(o.classList.remove("gui-hidden"),i.treeItemDomNode.focus()),i.isShowMoreLink&&(o.classList.add("gui-hidden"),i.isVisible=!1))}a.updateVisibleTreeitems()},this.showLessValues=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t],o=i.treeItemDomNode.parentElement;i.groupTreeitem===e&&(o.classList.contains("extra-filter")&&(o.classList.add("gui-hidden"),i.isVisible=!1),i.isShowLessLink&&(o.classList.add("gui-hidden"),i.isVisible=!1),i.isShowMoreLink&&(o.classList.remove("gui-hidden"),i.treeItemDomNode.focus()))}a.updateVisibleTreeitems()},this.handleLabelChange=function(e){var t=o.DomUtils.toggleLabel(e.treeItemDomNode),n=t?i.FilterActionType.Add:i.FilterActionType.Minus;e.treeItemDomNode.setAttribute("aria-selected",t.toString()),a.configStore.Options.onFilterChange(e.id,e.label,n,e.dataType,e.isRange)},this.notifyCollapseAndExpansion=function(){for(var e=a.configStore.Options.facetConfig,t=[],n=0,i=a.treeitems;n<i.length;n++){var o=i[n];if(o.isExpandable)for(var r=0,l=e;r<l.length;r++){var s=l[r];if(s.id===o.id){s.collapsed=!o.isExpanded(),t.push({key:s.id,collapsed:s.collapsed});break}}}a.configStore.Options.onCollapseToggle(t)},this.handlePinUnpin=function(e,t,n){for(var i=a.configStore.Options.facetConfig,o=0,r=i;o<r.length;o++){var l=r[o];if(l.id===n){l.pinned=t;break}}a.facet.reRender(),a.configStore.Options.onPinUnpin(n,t),e.stopPropagation()},this.handleSearchForFilters=function(e){var t=e.target,n=t.parentElement,i=t.value.toLowerCase();if(i!==a.lastInputValue){a.lastInputValue=i;var o=!1;n.classList.add("loading"),void 0!==i&&null!==i&&""!==i.trim()||(o=!0),setTimeout(function(){o?a.handleBlankInputSearch():a.handleNotBlankInputSearch(i),a.updateVisibleTreeitems(),a.setFocusToFirstVisible(!0),n.classList.remove("loading")},1)}},this.handleBlankInputSearch=function(){for(var e=0,t=a.treeitems;e<t.length;e++){var n=t[e];if(!n.ignoreForSearch&&(n.isExpandable&&(n.isVisible=!0,o.DomUtils.show(n.treeItemDomNode),n.treeItemDomNode.classList.contains("collapsed")?o.DomUtils.setAriaExpanded(n.treeItemDomNode,"true"):o.DomUtils.setAriaExpanded(n.treeItemDomNode,"false")),!n.isExpandable)){if(!n.isShowMoreLink&&!n.isShowLessLink){n.treeItemDomNode.parentElement.classList.contains("extra-filter")?(n.isVisible=!1,o.DomUtils.hide(n.treeItemDomNode.parentElement)):(n.isVisible=!0,o.DomUtils.show(n.treeItemDomNode.parentElement));continue}if(n.isShowMoreLink){n.isVisible=!0,o.DomUtils.show(n.treeItemDomNode.parentElement);continue}if(n.isShowLessLink){n.isVisible=!1,o.DomUtils.hide(n.treeItemDomNode.parentElement);continue}}}},this.handleNotBlankInputSearch=function(e){for(var t,n,i,r=0,l=a.treeitems;r<l.length;r++){var s=l[r];if(!s.ignoreForSearch&&(s.isExpandable&&(t=s,n=!1,i=!1,s.isVisible=!1,o.DomUtils.setAriaExpanded(s.treeItemDomNode,"false"),o.DomUtils.hide(s.treeItemDomNode),s.label.toLowerCase().indexOf(e)>-1&&(n=!0)),(n||i)&&(t.isVisible=!0,o.DomUtils.setAriaExpanded(t.treeItemDomNode,"true"),o.DomUtils.show(t.treeItemDomNode)),!s.isExpandable&&s.groupTreeitem===t))if(n)s.isShowLessLink||s.isShowMoreLink?(s.isVisible=!1,o.DomUtils.hide(s.treeItemDomNode.parentElement)):(s.isVisible=!0,o.DomUtils.show(s.treeItemDomNode.parentElement));else{if(s.isShowMoreLink||s.isShowLessLink)continue;s.label.toLowerCase().indexOf(e)>-1?(s.isVisible=!0,o.DomUtils.show(s.treeItemDomNode.parentElement),i=!0):(s.isVisible=!1,o.DomUtils.hide(s.treeItemDomNode.parentElement))}}},this.configStore=n,this.parentElement=e,this.facet=t,this.treeDomNode=this.parentElement.querySelectorAll("[role=tree]")[0],this.collapseAllNode=this.parentElement.querySelectorAll(".collapse-all")[0],this.expandAllNode=this.parentElement.querySelectorAll(".expand-all")[0],this.searchBoxNode=this.parentElement.querySelectorAll(".filter-search-input")[0],this.treeitems=[],this.firstChars=[],this.firstTreeitem=null,this.lastTreeitem=null}return e}();t.FacetTree=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=n(28),r=function(){function e(e,t,n){var r=this;this.init=function(){r.treeItemDomNode.tabIndex=-1,r.treeItemDomNode.getAttribute("role")||r.treeItemDomNode.setAttribute("role","treeitem"),r.treeItemDomNode.addEventListener("keydown",r.handleKeydown.bind(r)),r.treeItemDomNode.addEventListener("click",r.handleClick.bind(r)),r.treeItemDomNode.addEventListener("focus",r.handleFocus.bind(r)),r.treeItemDomNode.addEventListener("blur",r.handleBlur.bind(r)),r.isExpandable?(r.treeItemDomNode.firstElementChild.addEventListener("mouseover",r.handleMouseOver.bind(r)),r.treeItemDomNode.firstElementChild.addEventListener("mouseout",r.handleMouseOut.bind(r))):(r.treeItemDomNode.addEventListener("mouseover",r.handleMouseOver.bind(r)),r.treeItemDomNode.addEventListener("mouseout",r.handleMouseOut.bind(r))),r.pinUnPinDomNode&&(r.pinUnPinDomNode.addEventListener("click",r.handleUnPinClick),r.pinUnPinDomNode.addEventListener("keydown",r.handleUnPinKeyup))},this.destroy=function(){var e=r.treeItemDomNode.cloneNode(!0);r.treeItemDomNode.parentNode.replaceChild(e,r.treeItemDomNode),r.treeItemDomNode=null},this.isExpanded=function(){return!!r.isExpandable&&i.DomUtils.isAriaExpanded(r.treeItemDomNode)},this.handleUnPinClick=function(e){e.target.classList.contains("unpin-icon")?r.tree.handlePinUnpin(e,!1,r.id):r.tree.handlePinUnpin(e,!0,r.id)},this.handleUnPinKeyup=function(e){var t=e.target;switch(e.keyCode){case o.KeyCodes.SPACE:case o.KeyCodes.RETURN:t.classList.contains("unpin-icon")?r.tree.handlePinUnpin(e,!1,r.id):r.tree.handlePinUnpin(e,!0,r.id)}e.stopPropagation()},this.handleKeydown=function(e){function t(e){return 1===e.length&&e.match(/\S/)}function n(e){"*"===a?(e.tree.expandAllSiblingItems(e),i=!0):t(a)&&(e.tree.setFocusByFirstCharacter(e,a),i=!0)}var i=(e.currentTarget,!1),a=e.key;if(r.stopDefaultClick=!1,!(e.altKey||e.ctrlKey||e.metaKey)){if(e.shiftKey)e.keyCode===o.KeyCodes.SPACE||e.keyCode===o.KeyCodes.RETURN?(e.stopPropagation(),r.stopDefaultClick=!0):t(a)&&n(r);else switch(e.keyCode){case o.KeyCodes.SPACE:case o.KeyCodes.RETURN:i=!0,r.isExpandable?r.isExpanded()?r.tree.collapseTreeitem(r,!0):r.tree.expandTreeitem(r,!0):(r.isShowMoreLink&&r.tree.showMoreValues(r.groupTreeitem),r.isShowLessLink&&r.tree.showLessValues(r.groupTreeitem),r.isLabel&&r.tree.handleLabelChange(r));break;case o.KeyCodes.UP:r.tree.setFocusToPreviousItem(r),i=!0;break;case o.KeyCodes.DOWN:r.tree.setFocusToNextItem(r),i=!0;break;case o.KeyCodes.RIGHT:r.isExpandable&&(r.isExpanded()?r.tree.setFocusToNextItem(r):r.tree.expandTreeitem(r,!0)),i=!0;break;case o.KeyCodes.LEFT:r.isExpandable&&r.isExpanded()?(r.tree.collapseTreeitem(r,!0),i=!0):r.inGroup&&(r.tree.setFocusToParentItem(r),i=!0);break;case o.KeyCodes.HOME:r.tree.setFocusToFirstItem(),i=!0;break;case o.KeyCodes.END:r.tree.setFocusToLastItem(),i=!0;break;default:t(a)&&n(r)}i&&(e.stopPropagation(),e.preventDefault())}},this.handleClick=function(e){(e.target===r.treeItemDomNode||i.DomUtils.isSelfOrDescendant(r.treeItemDomNode.firstElementChild,e.target))&&(r.isExpandable?(r.isExpanded()?r.tree.collapseTreeitem(r,!0):r.tree.expandTreeitem(r,!0),e.stopPropagation()):(r.isShowMoreLink&&r.tree.showMoreValues(r.groupTreeitem),r.isShowLessLink&&r.tree.showLessValues(r.groupTreeitem),r.isLabel&&r.tree.handleLabelChange(r),e.stopPropagation(),e.preventDefault()))},this.handleFocus=function(e){var t=r.treeItemDomNode;r.isExpandable&&(t=t.firstElementChild),t.classList.add("focus")},this.handleBlur=function(e){var t=this.treeItemDomNode;this.isExpandable&&(t=t.firstElementChild),t.classList.remove("focus")},this.handleMouseOver=function(e){e.currentTarget.classList.add("hover")},this.handleMouseOut=function(e){e.currentTarget.classList.remove("hover")},e.tabIndex=-1,this.tree=t,this.groupTreeitem=n,this.treeItemDomNode=e,this.stopDefaultClick=!1,this.pinUnPinDomNode=this.treeItemDomNode.firstElementChild.querySelector(".pin-unpin-selector"),this.id=e.getAttribute("data-attr-id"),this.label=e.getAttribute("data-attr-value"),this.dataType=e.getAttribute("data-attr-type"),this.isRange="true"===e.getAttribute("data-attr-isRange"),this.ignoreForSearch="true"===e.getAttribute("data-attr-ignoreForSearch"),this.isShowMoreLink=e.classList.contains("show-more-link"),this.isShowLessLink=e.classList.contains("show-less-link"),this.isLabel="label"===e.tagName.toLowerCase(),this.isExpandable=!1,this.isVisible=!1,this.inGroup=!1,n&&(this.inGroup=!0);for(var a=e.firstElementChild;a;){if("ul"===a.tagName.toLowerCase()){a.setAttribute("role","group"),this.isExpandable=!0;break}a=a.nextElementSibling}}return e}();t.FacetTreeItem=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCodes=Object.freeze({RETURN:13,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;if(this.defaultFacetOptions={animationTime:200,collapsed:!1,containerElement:null,facetConfig:[],idPrefix:Math.floor(16777216*(1+Math.random())).toString(),noOfFacetToShow:5,onCollapseToggle:function(e){},onFilterChange:function(e,t,n){},onPinUnpin:function(e,t){}},this.extendOptions=function(e){return t.options=jQuery.extend({},t.defaultFacetOptions,e)},this.extendOptions(e),null===e.containerElement)throw new Error("Please Provide a valid container Element object")}return Object.defineProperty(e.prototype,"Options",{get:function(){return this.options},enumerable:!0,configurable:!0}),e}();t.FacetConfigStore=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),o=n(32),r=n(35),a=n(36),l=function(){function e(e){var t=this;this.handlerChain=[],this.bind=function(e){setTimeout(function(){var n=t.templateService.bind(e);t.filterElement.html(n)},1)},this.destroy=function(){void 0!==t.filterElement&&t.filterElement.off(),t.handlerChain.forEach(function(e){void 0!==e&&void 0!==e.deregister&&e.deregister()})},this.configStore=new r.FilterConfigStore(e),this.filterElement=jQuery(e.containerElement),this.templateService=new o.FilterTemplateService(this.configStore),this.handlerChain.push(new a.FilterActionHandler(this.filterElement,this.configStore)),this.handlerChain.push(new i.HotKeysFiltersHandler),this.handlerChain.forEach(function(e){e.RegisterDomHandler()})}return e}();t.Filter=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.RegisterDomHandler=function(){jQuery(document).on("keydown",e.focusOnSearch)},this.onResize=function(){throw new Error("Method not implemented.")},this.onDocumentClick=function(e){},this.deRegister=function(){jQuery(document).off("keydown",e.focusOnSearch)},this.focusOnSearch=function(e){e.altKey&&"r"===e.key&&(e.preventDefault(),jQuery(".facet-subheader .remove-all").focus())}}return e}();t.HotKeysFiltersHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),o=function(){function e(e){var t=this;this.configStore=e,this.mergeWithFacetConfig=function(e){for(var n=[],i=0,o=e;i<o.length;i++)for(var r=o[i],a=0,l=t.configStore.Options.filterConfig;a<l.length;a++){var s=l[a];if(s.id===r.id){n.push({collapsed:s.collapsed,facetRanges:r.facetRanges,facetValues:r.facetValues,id:s.id,name:s.name,order:s.order,pinned:s.pinned,type:s.type});break}}return n},this.tempateFunctionForFacetSubHeader=i}return e.prototype.bind=function(e){var t=this.mergeWithFacetConfig(e);return this.tempateFunctionForFacetSubHeader({filters:t})},e}();t.FilterTemplateService=o},function(e,t,n){function i(e){return e&&(e.__esModule?e.default:e)}var o=n(0);e.exports=(o.default||o).template({1:function(e,t,n,i,o,r,a){var l;return'<section class="content facet-subheader gui fluid-w basic curved p-5" aria-label="Applied Filters">\n    <span class="gui gui-subheading-2 caps">Applied Filters</span>\n    <button class="gui m-l-5 remove-all" aria-label="Clear All Filters">\n        <i class="gui-icon gui-icon-cancel"></i>\n        <span>Clear All</span>\n    </button>\n    <span class="gui m-l-10">\n'+(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.filters:t,{name:"each",hash:{},fn:e.program(2,o,0,r,a),inverse:e.noop,data:o}))?l:"")+"    </span>\n</section>\n"},2:function(e,t,n,i,o,r,a){var l,s=null!=t?t:e.nullContext||{};return'        <span class="gui m-r-5">\n            <span class="gui large labels facet-labels">\n                <span class="gui gui-subheading-1">'+e.escapeExpression(e.lambda(null!=t?t.name:t,t))+"</span>\n"+(null!=(l=n.each.call(s,null!=t?t.facetValues:t,{name:"each",hash:{},fn:e.program(3,o,0,r,a),inverse:e.noop,data:o}))?l:"")+(null!=(l=n.each.call(s,null!=t?t.facetRanges:t,{name:"each",hash:{},fn:e.program(5,o,0,r,a),inverse:e.noop,data:o}))?l:"")+"            </span>\n        </span>\n"},3:function(e,t,o,r,a,l,s){var u=e.lambda,c=e.escapeExpression;return'                <button aria-label="Clear filter '+c(u(null!=t?t.label:t,t))+" of "+c(u(null!=t?t.name:t,t))+'"\n                        class="gui m-0 m-t-2 m-r-2 p-4 label cursor-pointer strikethrough-hover" \n                        data-filter-entry="'+c(u(null!=s[1]?s[1].id:s[1],t))+":::"+c(u(null!=t?t.label:t,t))+":::"+c(u(null!=s[1]?s[1].type:s[1],t))+'">\n                    '+c(i(n(8)).call(null!=t?t:e.nullContext||{},null!=s[1]?s[1].type:s[1],null!=t?t.label:t,{name:"FormatLabelByType",hash:{},data:a}))+'\n                    <i class="gui-icon gui-icon-cancel"></i>\n                </button>\n'},5:function(e,t,o,r,a,l,s){var u=e.lambda,c=e.escapeExpression;return'                <button aria-label="Clear Range for filter '+c(u(null!=t?t.name:t,t))+'"\n                        class="gui m-0 m-t-2 m-r-2 p-4 label cursor-pointer strikethrough-hover" \n                        data-filter-entry="'+c(u(null!=s[1]?s[1].id:s[1],t))+":::"+c(u(null!=t?t.label:t,t))+":::"+c(u(null!=s[1]?s[1].type:s[1],t))+':::true">\n                    '+c(i(n(34)).call(null!=t?t:e.nullContext||{},null!=t?t.min:t,null!=t?t.max:t,null!=s[1]?s[1].type:s[1],{name:"Range",hash:{},data:a}))+'\n                    <i class="gui-icon gui-icon-cancel"></i>\n                </button>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,o,r,a){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.filters:t)?l.length:l,{name:"if",hash:{},fn:e.program(1,o,0,r,a),inverse:e.noop,data:o}))?l:""},useData:!0,useDepths:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=function(e,t,n){var o="",r=e,a=t;return"Edm.DateTimeOffset"===n&&(void 0!==e&&null!==e&&""!==e&&(r=i(e).format("DD-MMM-YYYY")),void 0!==t&&null!==t&&""!==t&&(a=i(t).format("DD-MMM-YYYY"))),void 0!==r&&null!==r&&""!==r&&(o+=" from: "+r),void 0!==a&&null!==a&&""!==a&&(o+=" to: "+a),o};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;if(this.defaultfilterOptions={animationTime:200,containerElement:null,filterConfig:[],onAllFilterRemove:function(){},onFilterChange:function(e,t,n){}},this.extendOptions=function(e){return t.options=jQuery.extend({},t.defaultfilterOptions,e)},this.extendOptions(e),null===e.containerElement)throw new Error("Please Provide a valid container Element object for filters")}return Object.defineProperty(e.prototype,"Options",{get:function(){return this.options},enumerable:!0,configurable:!0}),e}();t.FilterConfigStore=i},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(37)),i(n(38)),i(n(39)),i(n(42)),i(n(43)),i(n(44)),i(n(45)),i(n(46))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=n(12),r=n(2),a=function(){function e(e,t,n){var a=this;this.element=e,this.configStore=t,this.templateService=n,this.onFocusInOfTreeItem=function(e){var t=jQuery(e.target),n=t.is("[role=treeitem]")?t:t.parents("[role=treeitem]").first(),i=jQuery("#"+n.attr("aria-labelledBy"));i&&i.length?i.addClass("focus"):n.addClass("focus"),e.stopImmediatePropagation(),e.stopPropagation()},this.onFocusOutOfTreeItem=function(e){var t=jQuery(e.target),n=t.is("[role=treeitem]")?t:t.parents("[role=treeitem]").first(),i=jQuery("#"+n.attr("aria-labelledBy"));i&&i.length?i.removeClass("focus"):n.removeClass("focus"),e.stopPropagation()},this.handleKeyDown=function(e){console.log("Handling Key Down");var t=e.keyCode||e.which;if(!([i.FacetConstants.EnterKeyCode,i.FacetConstants.SpaceKeyCode,i.FacetConstants.UpKeyCode,i.FacetConstants.DownKeyCode].indexOf(t)<=-1))return[i.FacetConstants.EnterKeyCode,i.FacetConstants.SpaceKeyCode].indexOf(t)>-1?void a.handleVisibilityOfOne(e):[i.FacetConstants.UpKeyCode,i.FacetConstants.DownKeyCode].indexOf(t)>-1?void a.handleUpAndDownOfTreeItem(e):void 0},this.handleUpAndDownOfTreeItem=function(e){var t=e.keyCode||e.which;if(!([i.FacetConstants.UpKeyCode,i.FacetConstants.DownKeyCode].indexOf(t)<=-1)){console.log("Handling Up and Down");var n=jQuery(e.target),o=n.is("[role=treeitem]")?n:n.parents("[role=treeitem]").first();if(e.preventDefault(),i.FacetConstants.UpKeyCode===t){var r=o.prevAll(":visible").first();if(r.length)return void r.focus();var a=o.parent().prevAll(":visible").first().find("[role=treeitem]");if(a.length)return void a.focus();o.parents("[role=treeitem]").each(function(e,t){var n=jQuery(t),i=n.prevAll(":visible").first();if(i.length)return i.focus(),!1})}if(i.FacetConstants.DownKeyCode===t){var l=o.find("[role=treeitem]:visible").first();if(l.length)return void l.focus();var s=o.nextAll(":visible").first();if(s.length)return void s.focus();var u=o.parent().nextAll(":visible").first().find("[role=treeitem]");if(u.length)return void u.focus();o.parents("[role=treeitem]").each(function(e,t){var n=jQuery(t),i=n.nextAll(":visible").first();if(i.length)return i.focus(),!1})}}},this.handleVisibilityOfAll=function(e,t){var n=e.keyCode||e.which;if("click"===e.type||"keyup"!==e.type||n===i.FacetConstants.EnterKeyCode||n===i.FacetConstants.SpaceKeyCode){var l=t===r.ShowHide.Show;a.element.find(".facet-item-header").each(function(e,n){var i=jQuery(n).parents(".facet-item"),r=i.attr("data-attr-name");l?i.addClass("collapsed"):i.removeClass("collapsed"),o.ExpandCollapseManager.ControlVisibilityOfFilter(jQuery(n),t,r)});for(var s=a.configStore.Options.facetConfig,u=[],c=0,d=s;c<d.length;c++){var f=d[c];f.collapsed=l,u.push({key:f.id,collapsed:f.collapsed})}a.configStore.Options.onCollapseToggle(u),e.stopPropagation()}},this.handleVisibilityOfOne=function(e){var t=jQuery(e.target),n=t.is("[role=treeitem]")?t:t.parents("[role=treeitem]").first();if(n.hasClass("collapsible")&&t.parents(".facet-item-header").length){var i=n.attr("data-attr-name"),l=n.attr("data-attr-id"),s=n.hasClass("collapsed");s?n.removeClass("collapsed"):n.addClass("collapsed");for(var u=a.configStore.Options.facetConfig,c=[],d=0,f=u;d<f.length;d++){var p=f[d];if(p.id===l){p.collapsed=!s,c.push({key:p.id,collapsed:p.collapsed});break}}a.configStore.Options.onCollapseToggle(c),o.ExpandCollapseManager.ControlVisibilityOfFilter(n,r.ShowHide.Toggle,i),e.stopPropagation()}}}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".expand-all",function(t){e.handleVisibilityOfAll(t,r.ShowHide.Show)}),this.element.on("keyup",".expand-all",function(t){e.handleVisibilityOfAll(t,r.ShowHide.Show)}),this.element.on("click",".collapse-all",function(t){e.handleVisibilityOfAll(t,r.ShowHide.Hide)}),this.element.on("keyup",".collapse-all",function(t){e.handleVisibilityOfAll(t,r.ShowHide.Hide)}),this.element.on("click","[role=treeitem]",this.handleVisibilityOfOne),this.element.on("keydown","[role=treeitem]",this.handleKeyDown),this.element.on("focusin","[role=treeitem]",this.onFocusInOfTreeItem),this.element.on("focusout","[role=treeitem]",this.onFocusOutOfTreeItem)},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.ExpandCollapseFacetsHandler=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function(){function e(e,t){this.element=e,this.configStore=t}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("change",".facet-body .facet-item-description .facet-value-checkbox",function(t){var n=jQuery(t.target),o=n.val().toString(),r=o.split(":::"),a=n.is(":checked"),l=a?i.FilterActionType.Add:i.FilterActionType.Minus;e.configStore.Options.onFilterChange(r[0],r[1],l,r[2],!1),t.stopPropagation()})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.FacetActionHandler=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(40),o=n(12),r=n(2),a=function(){function e(e,t){var n=this;this.element=e,this.configStore=t,this.handleSearch=function(e){var t=jQuery(e.target);t.parent().addClass("loading"),t.next().show(),setTimeout(function(){var e=t.val().toString().toLowerCase();n.element.find(".facet-list .facet-item").each(function(t,i){var a=jQuery(i),l=a.attr("data-attr-name"),s=!1,u=!1;void 0!==e&&null!==e&&""!==e.trim()||(u=!0),u||-1===a.attr("data-attr-name").toLowerCase().indexOf(e)||(s=!0),u?(n.element.find(".show-more-link").each(function(e,t){jQuery(t).hasClass("gui-hidden")?jQuery(t).hide():jQuery(t).show()}),n.element.find(".show-less-link").each(function(e,t){jQuery(t).hasClass("gui-hidden")?jQuery(t).hide():jQuery(t).show()})):(n.element.find(".show-more-link").hide(),n.element.find(".show-less-link").hide());var c=!1;a.find("label").each(function(t,n){var i=jQuery(n);if(u?i.parent(".extra-filter").hide():i.parent(".extra-filter").show(),s||u)return void i.show();-1===i.attr("data-attr-value").toLowerCase().indexOf(e)?i.hide():(c=!0,i.show())});var d=a.find(".facet-item-header"),f=a.hasClass("collapsed");s||c||u?a.fadeIn(n.configStore.Options.animationTime):a.fadeOut(n.configStore.Options.animationTime),f||s||c?o.ExpandCollapseManager.ControlVisibilityOfFilter(d,r.ShowHide.Show,l):o.ExpandCollapseManager.ControlVisibilityOfFilter(d,r.ShowHide.Hide,l)}),t.parent().removeClass("loading"),t.next().hide()},1),e.stopPropagation()}}return e.prototype.RegisterDomHandler=function(){this.element.on("keyup",".filter-search-input",i.debounce(250,this.handleSearch))},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.FacetSearchHandler=a},function(e,t,n){var i=n(13),o=n(41);e.exports={throttle:i,debounce:o}},function(e,t,n){var i=n(13);e.exports=function(e,t,n){return void 0===n?i(e,t,!1):i(e,n,!1!==t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=function(){function e(e,t){this.filterElement=e,this.configStore=t}return e.prototype.RegisterDomHandler=function(){var e=this;this.filterElement.on("click",".facet-subheader .facet-labels .label",function(t){var n=jQuery(t.target);n.is(".label")||(n=n.parents(".label"));var o=n.attr("data-filter-entry").toString(),r=o.split(":::"),a=!1;4===r.length&&(a=!0),e.configStore.Options.onFilterChange(r[0],r[1],i.FilterActionType.Minus,r[2],a),t.stopPropagation()}),this.filterElement.on("click",".facet-subheader .remove-all",function(t){e.configStore.Options.onAllFilterRemove(),t.stopPropagation()})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.FilterActionHandler=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=this;this.element=e,this.configStore=t,this.RegisterDomHandler=function(){n.element.on("click",".hide-facet",n.hideFacet),n.element.on("click",".show-facet",n.showFacet),n.element.on("keyup",".hide-facet",function(e){var t=e.keyCode||e.which;13!==t&&32!==t||n.hideFacet(e)}),n.element.on("keyup",".show-facet",function(e){var t=e.keyCode||e.which;13!==t&&32!==t||n.showFacet(e)})},this.hideFacet=function(e){$(".facet-body").hide(),$(".facet-collapsed-body").fadeIn(n.configStore.Options.animationTime),n.configStore.Options.collapsed=!0,e.stopPropagation()},this.showFacet=function(e){$(".facet-collapsed-body").hide(),$(".facet-body").fadeIn(n.configStore.Options.animationTime),n.configStore.Options.collapsed=!1,e.stopPropagation()}}return e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.HideFacetSectionHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.element=e,this.configStore=t,this.templateService=n}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".pin-icon",function(t){e.handlePinUnpin(t,!0)}),this.element.on("click",".unpin-icon",function(t){e.handlePinUnpin(t,!1)}),this.element.on("keyup",".pin-icon",function(t){var n=t.keyCode||t.which;13!==n&&32!==n||e.handlePinUnpin(t,!0)}),this.element.on("keyup",".unpin-icon",function(t){var n=t.keyCode||t.which;13!==n&&32!==n||e.handlePinUnpin(t,!1)})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e.prototype.handlePinUnpin=function(e,t){for(var n=this,i=jQuery(e.target),o=i.attr("data-attr-id"),r=this.configStore.Options.facetConfig,a=0,l=r;a<l.length;a++){var s=l[a];if(s.id===o){s.pinned=t;break}}setTimeout(function(){n.element.html(n.templateService.bind(n.templateService.getData()))},1),this.configStore.Options.onPinUnpin(o,t),e.stopPropagation()},e}();t.PinUnpinEventHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.element=e,this.configStore=t}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".show-more-link",function(t){e.showMoreLessFilters(t,!0)}),this.element.on("click",".show-less-link",function(t){e.showMoreLessFilters(t,!1)}),this.element.on("keyup",".show-more-link",function(t){var n=t.keyCode||t.which;13!==n&&32!==n||e.showMoreLessFilters(t,!0)}),this.element.on("keyup",".show-less-link",function(t){var n=t.keyCode||t.which;13!==n&&32!==n||e.showMoreLessFilters(t,!1)})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e.prototype.showMoreLessFilters=function(e,t){var n=jQuery(e.target);t?n.parents(".facet-item-description").find(".extra-filter").fadeIn(this.configStore.Options.animationTime,function(){n.parent().hide(),n.parent().next().show().find("a").focus()}):n.parents(".facet-item-description").find(".extra-filter").fadeOut(this.configStore.Options.animationTime,function(){n.parent().prev().show().find("a").focus(),n.parent().hide()}),e.stopPropagation()},e}();t.ShowMoreLessHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),o=function(){function e(e){var t=this;this.element=e,this.deRegister=function(){t.element.off("keydown",".arrowkeys-aware",t.handleArrowKeys)},this.handleArrowKeys=function(e){var t=e.which;if(t===i.FacetConstants.UpKeyCode||t===i.FacetConstants.DownKeyCode){var n=jQuery(e.target);n.is(".arrowkeys-aware")||(n=n.parent());var o,r=n.parent();if(t===i.FacetConstants.UpKeyCode&&(o=r.prev().find(".arrowkeys-aware")),t===i.FacetConstants.DownKeyCode&&(o=r.next().find(".arrowkeys-aware")),o&&o.length)e.view.event.preventDefault(),e.stopPropagation(),o.focus();else{var a=r.next().find("show-more-link")||r.next().find("show-less-link");a&&a.length&&a.focus()}}}}return e.prototype.RegisterDomHandler=function(){this.element.on("keydown",".arrowkeys-aware",this.handleArrowKeys)},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.FacetKeyBoardNavigationHandler=o}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9mYWNldG9vLm1pbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYmVkMWY0NWMyMmU1Njc0MzVlYmMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIkhhbmRsZWJhcnNcIixcImFtZFwiOlwiaGFuZGxlYmFycy5ydW50aW1lXCIsXCJjb21tb25qczJcIjpcImhhbmRsZWJhcnMvcnVudGltZVwiLFwiY29tbW9uanNcIjpcImhhbmRsZWJhcnMvcnVudGltZVwifSIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvU2hvd0hpZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9mYWNldC1ib2R5LmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvQ29sbGFwc2VkLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9Cb29sZWFuLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9TZWxlY3RlZEZpbHRlcnNDb3VudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2ZhY2V0LWxhYmVsLmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvRm9ybWF0TGFiZWxCeVR5cGUudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9tZW50XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2ExMXkvRG9tVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2NvbmZpZy9GYWNldENvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Rocm90dGxlLWRlYm91bmNlL3Rocm90dGxlLmpzIiwid2VicGFjazovLy8uL3NyYy90cy9tYWluL0VudHJ5LnRzIiwid2VicGFjazovLy8uL3NyYy90cy9tYWluL0ZhY2V0LnRzIiwid2VicGFjazovLy8uL3NyYy90cy9zZXJ2aWNlcy9GYWNldFRlbXBsYXRlU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2ZhY2V0LW1haW4uaGJzIiwid2VicGFjazovLy8uL3NyYy9oYnMvZmFjZXQtcGlubmVkLmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tMZW5ndGgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9oZWxwZXJzL0FwcGx5UmVtb3ZlLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9DaGVja2VkLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvSGlkZGVuLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9TaG93TW9yZUxlc3NMaW5rLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvZmFjZXQtdW5waW5uZWQuaGJzIiwid2VicGFjazovLy8uL3NyYy90cy9hMTF5L0ZhY2V0VHJlZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvYTExeS9GYWNldFRyZWVJdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9hMTF5L0tleUNvZGVzLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9jb25maWcvRmFjZXRDb25maWdTdG9yZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvbWFpbi9GaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvSG90S2V5c0ZpbHRlcnNIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9zZXJ2aWNlcy9GaWx0ZXJUZW1wbGF0ZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9mYWNldC1hcHBsaWVkLWZpbHRlcnMuaGJzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9SYW5nZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvY29uZmlnL0ZpbHRlckNvbmZpZ1N0b3JlLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9GYWNldEFjdGlvbkhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmFjZXRTZWFyY2hIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aHJvdHRsZS1kZWJvdW5jZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGhyb3R0bGUtZGVib3VuY2UvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmlsdGVyQWN0aW9uSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9IaWRlRmFjZXRTZWN0aW9uSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9QaW5VbnBpbkV2ZW50SGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9TaG93TW9yZUxlc3NIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlci50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidmFsdWUiLCJGaWx0ZXJBY3Rpb25UeXBlIiwiU2hvd0hpZGUiLCJIYW5kbGViYXJzIiwidGVtcGxhdGUiLCJjb21waWxlciIsIm1haW4iLCJjb250YWluZXIiLCJkZXB0aDAiLCJoZWxwZXJzIiwicGFydGlhbHMiLCJkYXRhIiwic3RhY2sxIiwiZXNjYXBlRXhwcmVzc2lvbiIsImxhbWJkYSIsImlkUHJlZml4IiwiaW52b2tlUGFydGlhbCIsImluZGVudCIsImRlY29yYXRvcnMiLCJ1c2VQYXJ0aWFsIiwidXNlRGF0YSIsImNvbGxhcHNlZCIsImRlZmF1bHQiLCJCb29sZWFuVmFsdWUiLCJib29sIiwic2VsZWN0ZWRGaWx0ZXJzQ291bnQiLCJmYWNldFZhbHVlcyIsImluZGV4IiwidW5kZWZpbmVkIiwibGVuZ3RoIiwiX2kiLCJmYWNldFZhbHVlc18xIiwiZmFjZXRWYWx1ZSIsInNlbGVjdGVkIiwiX19kZWZhdWx0Iiwib2JqIiwiMSIsImJsb2NrUGFyYW1zIiwiZGVwdGhzIiwiYWxpYXMxIiwibnVsbENvbnRleHQiLCJhbGlhczIiLCJhbGlhczMiLCJub09mRmFjZXRUb1Nob3ciLCJoYXNoIiwibGFiZWwiLCJpZCIsInR5cGUiLCJjb3VudCIsImRpc2FibGVkIiwiZWFjaCIsImZuIiwicHJvZ3JhbSIsImludmVyc2UiLCJub29wIiwidXNlRGVwdGhzIiwibW9tZW50IiwiZm9ybWF0TGFiZWxCeVR5cGUiLCJ1dGMiLCJmb3JtYXQiLCJEb21VdGlscyIsImlzRGVzY2VuZGFudCIsInBhcmVudCIsImNoaWxkIiwibm9kZSIsInBhcmVudE5vZGUiLCJpc1NlbGZPckRlc2NlbmRhbnQiLCJpc0hpZGRlbiIsIm9mZnNldFBhcmVudCIsImlzQXJpYUhpZGRlbiIsImdldEF0dHJpYnV0ZSIsInNldEFyaWFIaWRkZW4iLCJFcnJvciIsInNldEF0dHJpYnV0ZSIsImlzQXJpYUV4cGFuZGVkIiwic2V0QXJpYUV4cGFuZGVkIiwic2hvdyIsImNsYXNzTGlzdCIsInJlbW92ZSIsImhpZGUiLCJhZGQiLCJ0b2dnbGVMYWJlbCIsImZvcklkIiwiaHRtbEZvciIsImlucHV0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2hlY2tlZCIsIm9mZiIsIm5ld05vZGUiLCJjbG9uZU5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJGYWNldENvbnN0YW50cyIsIlVwS2V5Q29kZSIsIkRvd25LZXlDb2RlIiwiRW50ZXJLZXlDb2RlIiwiU3BhY2VLZXlDb2RlIiwiU2hvd0hpZGVfMSIsIkV4cGFuZENvbGxhcHNlTWFuYWdlciIsIkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIiLCJ0YXJnZXQiLCJzaG93SGlkZSIsImljb25FbGVtZW50IiwiZmluZCIsImN1cnJlbnRseVZpc2libGUiLCJoYXNDbGFzcyIsIlRvZ2dsZSIsIlNob3ciLCJIaWRlIiwic2xpZGVVcCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJhdHRyIiwic2xpZGVEb3duIiwiZGVsYXkiLCJub1RyYWlsaW5nIiwiY2FsbGJhY2siLCJkZWJvdW5jZU1vZGUiLCJ3cmFwcGVyIiwiZXhlYyIsImxhc3RFeGVjIiwiTnVtYmVyIiwiRGF0ZSIsImFwcGx5IiwiYXJncyIsImNsZWFyIiwidGltZW91dElEIiwiZWxhcHNlZCIsImFyZ3VtZW50cyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJfX2V4cG9ydCIsIkZhY2V0VGVtcGxhdGVTZXJ2aWNlXzEiLCJGYWNldFRyZWVfMSIsIkZhY2V0Q29uZmlnU3RvcmVfMSIsIkZhY2V0Iiwib3B0aW9ucyIsIl90aGlzIiwiaGFuZGxlckNoYWluIiwiYmluZCIsImZhY2V0cyIsInRlbXBsYXRlU2VydmljZSIsInNldERhdGEiLCJyZVJlbmRlciIsImdldERhdGEiLCJmdWxsRmFjZXQiLCJmYWNldEVsZW1lbnQiLCJpbm5lckhUTUwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZmFjZXRUcmVlIiwiRmFjZXRUcmVlIiwiY29uZmlnU3RvcmUiLCJPcHRpb25zIiwiY29udGFpbmVyRWxlbWVudCIsImluaXQiLCJzZXRGYWNldENvbmZpZyIsImZhY2V0Q29uZmlnIiwiZGVzdHJveSIsIkZhY2V0Q29uZmlnU3RvcmUiLCJGYWNldFRlbXBsYXRlU2VydmljZSIsIkZhY2V0TWFpbiIsImNvbXBhcmVGbiIsInByZXYiLCJuZXh0Iiwib3JkZXIiLCJtZXJnZVdpdGhGYWNldENvbmZpZyIsIm1lcmdlZEFycmF5IiwiZmFjZXRzXzEiLCJmYWNldCIsIl9hIiwiX2IiLCJwdXNoIiwiZmFjZXRSYW5nZXMiLCJwaW5uZWQiLCJ0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW4iLCJtZXJnZWRGYWNldHMiLCJmYXZvcml0ZXMiLCJmaWx0ZXIiLCJmIiwibm9uRmF2b3JpdGVzIiwic29ydCIsIjMiLCIyIiwiNSIsImNoZWNrTGVuZ3RoIiwidjIiLCJBcHBseVJlbW92ZSIsImhpZGRlbiIsImludmVydCIsIlNob3dNb3JlTGVzc0xpbmsiLCJGaWx0ZXJBY3Rpb25UeXBlXzEiLCJEb21VdGlsc18xIiwiRmFjZXRUcmVlSXRlbV8xIiwibGFzdElucHV0VmFsdWUiLCJmaW5kVHJlZWl0ZW1zIiwidHJlZSIsImdyb3VwIiwiZWxlbSIsInRpIiwicm9sZSIsInRvTG93ZXJDYXNlIiwiRmFjZXRUcmVlSXRlbSIsInRyZWVpdGVtcyIsImZpcnN0Q2hhcnMiLCJzdWJzdHJpbmciLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0cmVlRG9tTm9kZSIsInVwZGF0ZVZpc2libGVUcmVlaXRlbXMiLCJmaXJzdFRyZWVpdGVtIiwidHJlZUl0ZW1Eb21Ob2RlIiwidGFiSW5kZXgiLCJjb2xsYXBzZUFsbE5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiY29sbGFwc2VBbGxJdGVtcyIsImV4cGFuZEFsbE5vZGUiLCJleHBhbmRBbGxJdGVtcyIsInNlYXJjaEJveE5vZGUiLCJoYW5kbGVTZWFyY2hGb3JGaWx0ZXJzIiwic2V0Rm9jdXNUb1NlYXJjaEJveCIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJhbHRLZXkiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsImZvY3VzIiwic2V0Rm9jdXNUb0l0ZW0iLCJ0cmVlaXRlbSIsImRvbnRTZXRmb2N1cyIsInNldEZvY3VzVG9GaXJzdFZpc2libGUiLCJpc1Zpc2libGUiLCJzZXRGb2N1c1RvTmV4dEl0ZW0iLCJjdXJyZW50SXRlbSIsIm5leHRJdGVtIiwic2V0Rm9jdXNUb1ByZXZpb3VzSXRlbSIsInByZXZJdGVtIiwic2V0Rm9jdXNUb1BhcmVudEl0ZW0iLCJncm91cFRyZWVpdGVtIiwic2V0Rm9jdXNUb0ZpcnN0SXRlbSIsInNldEZvY3VzVG9MYXN0SXRlbSIsImxhc3RUcmVlaXRlbSIsImV4cGFuZFRyZWVpdGVtIiwibm90aWZ5IiwiaXNFeHBhbmRhYmxlIiwidG9nZ2xlRXhwYW5zaW9uSWNvbiIsInJlbW92ZUF0dHJpYnV0ZSIsImV4cGFuZEFsbFNpYmxpbmdJdGVtcyIsIm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uIiwiY29sbGFwc2VUcmVlaXRlbSIsImNvbGxhcHNlQWxsU2libGluZ0l0ZW1zIiwiaXNFeHBhbmRlZCIsImN1cnJlbnRFeHBhbmRlZCIsImljb25Ob2RlIiwiaWNvbk5vZGVMaXN0IiwicGFyZW50XzEiLCJjb250YWlucyIsInNldEZvY3VzQnlGaXJzdENoYXJhY3RlciIsImNoYXIiLCJzdGFydCIsImluZGV4T2YiLCJnZXRJbmRleEZpcnN0Q2hhcnMiLCJzdGFydEluZGV4Iiwic2hvd01vcmVWYWx1ZXMiLCJncm91cEl0ZW0iLCJwYXJlbnRfMiIsImlzU2hvd0xlc3NMaW5rIiwiaXNTaG93TW9yZUxpbmsiLCJzaG93TGVzc1ZhbHVlcyIsInBhcmVudF8zIiwiaGFuZGxlTGFiZWxDaGFuZ2UiLCJhY3Rpb24iLCJBZGQiLCJNaW51cyIsInRvU3RyaW5nIiwib25GaWx0ZXJDaGFuZ2UiLCJkYXRhVHlwZSIsImlzUmFuZ2UiLCJwdWJsaXNoIiwiZGF0YV8xIiwib25Db2xsYXBzZVRvZ2dsZSIsImhhbmRsZVBpblVucGluIiwicGluIiwiZGF0YV8yIiwib25QaW5VbnBpbiIsInN0b3BQcm9wYWdhdGlvbiIsInZhbCIsImlucHV0VmFsdWVCbGFuayIsInRyaW0iLCJoYW5kbGVCbGFua0lucHV0U2VhcmNoIiwiaGFuZGxlTm90QmxhbmtJbnB1dFNlYXJjaCIsImlnbm9yZUZvclNlYXJjaCIsImdyb3VwSXRlbU1hdGNoZWQiLCJjaGlsZEl0ZW1NYXRjaGVkIiwiS2V5Q29kZXNfMSIsImhhbmRsZUtleWRvd24iLCJoYW5kbGVDbGljayIsImhhbmRsZUZvY3VzIiwiaGFuZGxlQmx1ciIsImhhbmRsZU1vdXNlT3ZlciIsImhhbmRsZU1vdXNlT3V0IiwicGluVW5QaW5Eb21Ob2RlIiwiaGFuZGxlVW5QaW5DbGljayIsImhhbmRsZVVuUGluS2V5dXAiLCJrZXlDb2RlIiwiS2V5Q29kZXMiLCJTUEFDRSIsIlJFVFVSTiIsImlzUHJpbnRhYmxlQ2hhcmFjdGVyIiwic3RyIiwibWF0Y2giLCJwcmludGFibGVDaGFyYWN0ZXIiLCJpdGVtIiwiZmxhZyIsImN1cnJlbnRUYXJnZXQiLCJzdG9wRGVmYXVsdENsaWNrIiwiY3RybEtleSIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImlzTGFiZWwiLCJVUCIsIkRPV04iLCJSSUdIVCIsIkxFRlQiLCJpbkdyb3VwIiwiSE9NRSIsIkVORCIsInF1ZXJ5U2VsZWN0b3IiLCJ0YWdOYW1lIiwiZnJlZXplIiwiUEFHRVVQIiwiUEFHRURPV04iLCJkZWZhdWx0RmFjZXRPcHRpb25zIiwiYW5pbWF0aW9uVGltZSIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImNvbGxhcHNlQ29uZmlnIiwiZXh0ZW5kT3B0aW9ucyIsImlucHV0T3B0aW9ucyIsImpRdWVyeSIsImV4dGVuZCIsIkhvdEtleXNGaWx0ZXJzSGFuZGxlcl8xIiwiRmlsdGVyVGVtcGxhdGVTZXJ2aWNlXzEiLCJGaWx0ZXJDb25maWdTdG9yZV8xIiwiZXZlbnRoYW5kbGVyc18xIiwiRmlsdGVyIiwiZmlsdGVycyIsImZhY2V0U3ViSGVhZGVyIiwiZmlsdGVyRWxlbWVudCIsImh0bWwiLCJmb3JFYWNoIiwiaGFuZGxlciIsImRlcmVnaXN0ZXIiLCJGaWx0ZXJDb25maWdTdG9yZSIsIkZpbHRlclRlbXBsYXRlU2VydmljZSIsIkZpbHRlckFjdGlvbkhhbmRsZXIiLCJIb3RLZXlzRmlsdGVyc0hhbmRsZXIiLCJSZWdpc3RlckRvbUhhbmRsZXIiLCJvbiIsImZvY3VzT25TZWFyY2giLCJvblJlc2l6ZSIsIm9uRG9jdW1lbnRDbGljayIsImRlUmVnaXN0ZXIiLCJGYWNldFN1YkhlYWRlciIsImZpbHRlcnNfMSIsImZpbHRlckNvbmZpZyIsInRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyIiwibWVyZ2VkRmlsdGVycyIsIm1pbiIsIm1heCIsInJhbmdlIiwibWluU3RyIiwibWF4U3RyIiwiZGVmYXVsdGZpbHRlck9wdGlvbnMiLCJvbkFsbEZpbHRlclJlbW92ZSIsIkZhY2V0Q29uc3RhbnRzXzEiLCJFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMSIsIkV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlciIsImVsZW1lbnQiLCJvbkZvY3VzSW5PZlRyZWVJdGVtIiwib1QiLCJpcyIsInBhcmVudHMiLCJmaXJzdCIsImxhYmVsSWQiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJvbkZvY3VzT3V0T2ZUcmVlSXRlbSIsImhhbmRsZUtleURvd24iLCJjb25zb2xlIiwibG9nIiwiY29kZSIsIndoaWNoIiwiaGFuZGxlVmlzaWJpbGl0eU9mT25lIiwiaGFuZGxlVXBBbmREb3duT2ZUcmVlSXRlbSIsInByZXZTaWJsaW5nIiwicHJldkFsbCIsInByZXZEZWVwU2libGluZyIsInBhcmVudEdyb3VwIiwicGFyZW50Q2hpbGQiLCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJuZXh0QWxsIiwibmV4dERlZXBTaWJsaW5nIiwiaGFuZGxlVmlzaWJpbGl0eU9mQWxsIiwiaGlkZVNob3ciLCJpc0NvbGxhcHNlZCIsIkZhY2V0QWN0aW9uSGFuZGxlciIsInZhbFN0ciIsInNwbGl0IiwidGhyb3R0bGVfZGVib3VuY2VfMSIsIkZhY2V0U2VhcmNoSGFuZGxlciIsImhhbmRsZVNlYXJjaCIsImUiLCJmYWNldEl0ZW0iLCJmYWNldE5hbWVNYXRjaCIsInNod01vcmVFbGVtIiwic2hvd0xlc3NMaW5rIiwiZmFjZXRDaGlsZE1hdGNoIiwiaiIsImxhYmVsRWxlbSIsImhlYWRlckVsbWVudCIsImZhZGVJbiIsImZhZGVPdXQiLCJkZWJvdW5jZSIsInRocm90dGxlIiwiYXRCZWdpbiIsIkhpZGVGYWNldFNlY3Rpb25IYW5kbGVyIiwiaGlkZUZhY2V0Iiwic2hvd0ZhY2V0IiwiJCIsIlBpblVucGluRXZlbnRIYW5kbGVyIiwiU2hvd01vcmVMZXNzSGFuZGxlciIsInNob3dNb3JlTGVzc0ZpbHRlcnMiLCJzaG93TW9yZSIsIkZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlciIsImhhbmRsZUFycm93S2V5cyIsImZvY3VzYWJsZSIsImRpdiIsInZpZXciXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsZ0JBQUFDLFVBQUEsZ0JBQUFDLFFBQ0FBLE9BQUFELFFBQUFELEVBQUFHLFFBQUEsc0JBQUFBLFFBQUEsV0FDQSxrQkFBQUMsZ0JBQUFDLElBQ0FELFFBQUEsK0JBQUFKLEdBQ0EsZ0JBQUFDLFNBQ0FBLFFBQUEsUUFBQUQsRUFBQUcsUUFBQSxzQkFBQUEsUUFBQSxXQUVBSixFQUFBLFFBQUFDLEVBQUFELEVBQUEsV0FBQUEsRUFBQSxTQUNDLG1CQUFBTyxXQUFBQyxLQUFBLFNBQUFDLEVBQUFDLEdBQ0QsTUNBZ0IsVUFBVUMsR0NOMUIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFYLE9BR0EsSUFBQUMsR0FBQVcsRUFBQUQsSUFDQUUsRUFBQUYsRUFDQUcsR0FBQSxFQUNBZCxXQVVBLE9BTkFTLEdBQUFFLEdBQUFJLEtBQUFkLEVBQUFELFFBQUFDLElBQUFELFFBQUFVLEdBR0FULEVBQUFhLEdBQUEsRUFHQWIsRUFBQUQsUUF2QkEsR0FBQVksS0E0REEsT0FoQ0FGLEdBQUFNLEVBQUFQLEVBR0FDLEVBQUFPLEVBQUFMLEVBR0FGLEVBQUFRLEVBQUEsU0FBQWxCLEVBQUFtQixFQUFBQyxHQUNBVixFQUFBVyxFQUFBckIsRUFBQW1CLElBQ0FHLE9BQUFDLGVBQUF2QixFQUFBbUIsR0FDQUssY0FBQSxFQUNBQyxZQUFBLEVBQ0FDLElBQUFOLEtBTUFWLEVBQUFpQixFQUFBLFNBQUExQixHQUNBLEdBQUFtQixHQUFBbkIsS0FBQTJCLFdBQ0EsV0FBMkIsTUFBQTNCLEdBQUEsU0FDM0IsV0FBaUMsTUFBQUEsR0FFakMsT0FEQVMsR0FBQVEsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBVixFQUFBVyxFQUFBLFNBQUFRLEVBQUFDLEdBQXNELE1BQUFSLFFBQUFTLFVBQUFDLGVBQUFqQixLQUFBYyxFQUFBQyxJQUd0RHBCLEVBQUF1QixFQUFBLEdBR0F2QixJQUFBd0IsRUFBQSxNRHFCTSxTQUFVakMsRUFBUUQsR0VsRnhCQyxFQUFBRCxRQUFBTyxHRjZGTSxTQUFVTixFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sS0dqR3RELFNBQVlDLEdBQ1JBLEVBQUEsVUFDQUEsRUFBQSxlQUZRcEMsRUFBQW9DLG1CQUFBcEMsRUFBQW9DLHVCSGdITixTQUFVbkMsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEtJcEh0RCxTQUFZRSxHQUNSQSxJQUFBLGVBQ0FBLElBQUEsZUFDQUEsSUFBQSxvQkFIUXJDLEVBQUFxQyxXQUFBckMsRUFBQXFDLGVKb0lOLFNBQVVwQyxFQUFRRCxFQUFTVSxHS3BJakMsR0FBQTRCLEdBQUE1QixFQUFBLEVBRUFULEdBQUFELFNBQUFzQyxFQUFBLFNBQUFBLEdBQUFDLFVBQWlFQyxVQUFBLGNBQUFDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDakUsR0FBQUMsRUFFQSx1RkFDQUwsRUFBQU0saUJBQUFOLEVBQUFPLE9BQUEsTUFBQU4sSUFBQU8sU0FBQVAsTUFDQSxnbENBQ2dSLE9BQWhSSSxFQUFBTCxFQUFBUyxjQUFBekMsRUFBQSxJQUFBaUMsR0FBa0p4QixLQUFBLGVBQUEyQixPQUFBTSxPQUFBLFdBQUFSLFVBQUFDLFdBQUFRLFdBQUFYLEVBQUFXLGNBQThITixFQUFBLEtBQ0ksT0FBcFJBLEVBQUFMLEVBQUFTLGNBQUF6QyxFQUFBLElBQUFpQyxHQUFvSnhCLEtBQUEsaUJBQUEyQixPQUFBTSxPQUFBLFdBQUFSLFVBQUFDLFdBQUFRLFdBQUFYLEVBQUFXLGNBQWdJTixFQUFBLElBQ3BSLHFCQUNDTyxZQUFBLEVBQUFDLFNBQUEsS0wrSUssU0FBVXRELEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxHTTlKdEQsSUFBTXFCLEdBQVksU0FBQ3JCLEdBQ2YsTUFBSUEsR0FDTyxjQUVKLEdBR1huQyxHQUFBeUQsUUFBZUQsR053S1QsU0FBVXZELEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxHT25MdEQsSUFBTXVCLEdBQWUsU0FBQ0MsR0FDbEIsTUFBT0EsR0FBTyxPQUFTLFFBRzNCM0QsR0FBQXlELFFBQWVDLEdQNkxULFNBQVV6RCxFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sR1FuTXRELElBQU15QixHQUF1QixTQUFDQyxHQUMxQixHQUFJQyxHQUFRLENBQ1osUUFBb0JDLEtBQWhCRixHQUNtQixPQUFoQkEsR0FDQUEsRUFBWUcsT0FBUyxFQUNwQixJQUF5QixHQUFBQyxHQUFBLEVBQUFDLEVBQUFMLEVBQUFJLEVBQUFDLEVBQUFGLE9BQUFDLElBQVcsQ0FBL0IsR0FBTUUsR0FBVUQsRUFBQUQsRUFDYkUsR0FBV0MsVUFDWE4sSUFJaEIsTUFBaUIsS0FBVkEsRUFBYyxHQUFLLDZCQUFpQ0EsRUFBUSxXQUd2RTlELEdBQUF5RCxRQUFlRyxHUjhNVCxTQUFVM0QsRUFBUUQsRUFBU1UsR1M3TmpDLFFBQUEyRCxHQUFBQyxHQUF5QixNQUFBQSxPQUFBMUMsV0FBQTBDLEVBQUEsUUFBQUEsR0FEekIsR0FBQWhDLEdBQUE1QixFQUFBLEVBRUFULEdBQUFELFNBQUFzQyxFQUFBLFNBQUFBLEdBQUFDLFVBQWlFZ0MsRUFBQSxTQUFBN0IsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQTBCLEVBQUFDLEdBQ2pFLEdBQUFDLEdBQUEsTUFBQS9CLElBQUFELEVBQUFpQyxnQkFBcUVDLEVBQUFsQyxFQUFBTSxpQkFBQTZCLEVBQUFuQyxFQUFBTyxNQUVyRSxrQ0FDQTJCLEVBQUFQLEVBQUEzRCxFQUFBLEtBQUFLLEtBQUEyRCxFQUFBNUIsS0FBQWdCLE1BQUEsTUFBQVcsRUFBQSxHQUFBQSxFQUFBLEdBQUFLLGdCQUFBTCxFQUFBLElBQThOdEQsS0FBQSxjQUFBNEQsUUFBOEJqQyxVQUM1UCw0QkFDQThCLEVBQUFDLEVBQUEsTUFBQWxDLElBQUFxQyxNQUFBckMsTUFDQSwwQ0FDQWlDLEVBQUFDLEVBQUEsTUFBQWxDLElBQUFxQyxNQUFBckMsTUFDQSx1Q0FDQWlDLEVBQUFDLEVBQUEsTUFBQUosRUFBQSxHQUFBQSxFQUFBLEdBQUFRLEdBQUFSLEVBQUEsR0FBQTlCLElBQ0Esd0NBQ0FpQyxFQUFBQyxFQUFBLE1BQUFKLEVBQUEsR0FBQUEsRUFBQSxHQUFBUyxLQUFBVCxFQUFBLEdBQUE5QixJQUNBLGtHQUNBaUMsRUFBQUMsRUFBQSxNQUFBbEMsSUFBQXFDLE1BQUFyQyxNQUNBLElBQ0FpQyxFQUFBQyxFQUFBLE1BQUFsQyxJQUFBd0MsTUFBQXhDLE1BQ0EsOEJBQ0FpQyxFQUFBQyxFQUFBLE1BQUFsQyxJQUFBTyxTQUFBUCxNQUNBLElBQ0FpQyxFQUFBQyxFQUFBLE1BQUFKLEVBQUEsR0FBQUEsRUFBQSxHQUFBUSxHQUFBUixFQUFBLEdBQUE5QixJQUNBLElBQ0FpQyxFQUFBQyxFQUFBL0IsS0FBQWdCLE1BQUFuQixJQUNBLG9EQUNBaUMsRUFBQUMsRUFBQSxNQUFBbEMsSUFBQXFDLE1BQUFyQyxNQUNBLE9BQ0FpQyxFQUFBQyxFQUFBLE1BQUFKLEVBQUEsR0FBQUEsRUFBQSxHQUFBdEQsS0FBQXNELEVBQUEsR0FBQTlCLElBQ0EsUUFDQWlDLEVBQUFDLEVBQUEsTUFBQWxDLElBQUF3QyxNQUFBeEMsTUFDQSwrQkFDQWlDLEVBQUFQLEVBQUEzRCxFQUFBLEtBQUFLLEtBQUEyRCxFQUFBLE1BQUEvQixJQUFBeUIsU0FBQXpCLEdBQXlMeEIsS0FBQSxjQUFBNEQsUUFBOEJqQyxVQUN2TixtTkFDQThCLEVBQUFDLEVBQUEsTUFBQWxDLElBQUFPLFNBQUFQLE1BQ0EsSUFDQWlDLEVBQUFDLEVBQUEsTUFBQUosRUFBQSxHQUFBQSxFQUFBLEdBQUFRLEdBQUFSLEVBQUEsR0FBQTlCLElBQ0EsSUFDQWlDLEVBQUFDLEVBQUEvQixLQUFBZ0IsTUFBQW5CLElBQ0EscUNBQ0FpQyxFQUFBUCxFQUFBM0QsRUFBQSxLQUFBSyxLQUFBMkQsRUFBQSxNQUFBL0IsSUFBQXlCLFNBQUF6QixHQUFxTHhCLEtBQUEsVUFBQTRELFFBQTBCakMsVUFDL00sMkJBQ0E4QixFQUFBUCxFQUFBM0QsRUFBQSxLQUFBSyxLQUFBMkQsRUFBQSxNQUFBL0IsSUFBQXlDLFNBQUF6QyxHQUFzTHhCLEtBQUEsV0FBQTRELFFBQTJCakMsVUFDak4sdUVBQ0E4QixFQUFBQyxFQUFBLE1BQUFKLEVBQUEsR0FBQUEsRUFBQSxHQUFBUSxHQUFBUixFQUFBLEdBQUE5QixJQUNBLE1BQ0FpQyxFQUFBQyxFQUFBLE1BQUFsQyxJQUFBcUMsTUFBQXJDLE1BQ0EsTUFDQWlDLEVBQUFDLEVBQUEsTUFBQUosRUFBQSxHQUFBQSxFQUFBLEdBQUFTLEtBQUFULEVBQUEsR0FBQTlCLElBQ0EsdUVBQ0FpQyxFQUFBUCxFQUFBM0QsRUFBQSxJQUFBSyxLQUFBMkQsRUFBQSxNQUFBRCxFQUFBLEdBQUFBLEVBQUEsR0FBQVMsS0FBQVQsRUFBQSxTQUFBOUIsSUFBQXFDLE1BQUFyQyxHQUE2T3hCLEtBQUEsb0JBQUE0RCxRQUFvQ2pDLFVBQ2pSLDJEQUNBOEIsRUFBQUMsRUFBQSxNQUFBbEMsSUFBQXdDLE1BQUF4QyxNQUNBLGlEQUNDSCxVQUFBLGNBQUFDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQTBCLEVBQUFDLEdBQ0QsR0FBQTFCLEdBQUEyQixFQUFBLE1BQUEvQixJQUFBRCxFQUFBaUMsZUFFQSw2RUFDQWpDLEVBQUFNLGlCQUFBcUIsRUFBQTNELEVBQUEsS0FBQUssS0FBQTJELEVBQUEsTUFBQS9CLElBQUFhLFVBQUFiLEdBQUEsR0FBOE14QixLQUFBLFNBQUE0RCxRQUF5QmpDLFVBQ3ZPLCtCQUMrTSxPQUEvTUMsRUFBQUgsRUFBQXlDLEtBQUF0RSxLQUFBMkQsRUFBQSxNQUFBL0IsSUFBQWtCLFlBQUFsQixHQUEwRnhCLEtBQUEsT0FBQTRELFFBQXVCTyxHQUFBNUMsRUFBQTZDLFFBQUEsRUFBQXpDLEVBQUEsRUFBQTBCLEVBQUFDLEdBQUFlLFFBQUE5QyxFQUFBK0MsS0FBQTNDLFVBQThGQyxFQUFBLElBQy9NLFFBQ2lULE9BQWpUQSxFQUFBc0IsRUFBQTNELEVBQUEsS0FBQUssS0FBQTJELEVBQUEsTUFBQS9CLElBQUFrQixZQUFBbEIsRUFBQSxNQUFBOEIsRUFBQSxHQUFBQSxFQUFBLEdBQUFLLGdCQUFBTCxFQUFBLElBQWlRdEQsS0FBQSxtQkFBQTRELFFBQW1DakMsVUFBYUMsRUFBQSxJQUNqVCxhQUNDUSxTQUFBLEVBQUFtQyxXQUFBLEtUeU9LLFNBQVV6RixFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sR1U3U3RELElBQUF3RCxHQUFBakYsRUFBQSxHQUNNa0YsRUFBb0IsU0FBQ1YsRUFBYy9DLEdBQ3JDLE1BQUl3RCxJQUFtQix1QkFBVFQsRUFDSFMsRUFBT0UsSUFBSTFELEdBQU8yRCxPQUFPLHVCQUVqQixhQUFWM0QsRUFDTSxZQUVJLGFBQVZBLEVBQ00sV0FFSkEsRUFJZm5DLEdBQUF5RCxRQUFlbUMsR1Z3VFQsU0FBVTNGLEVBQVFELEdXdlV4QkMsRUFBQUQsUUFBQVEsR1hrVk0sU0FBVVAsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEdZcFZ0RCxJQUFBNEQsR0FBQSxtQkFBQUEsTUFzREEsTUFyRGtCQSxHQUFBQyxhQUFlLFNBQUNDLEVBQVFDLEdBRWxDLElBREEsR0FBSUMsR0FBT0QsRUFBTUUsV0FDRixNQUFSRCxHQUFjLENBQ2pCLEdBQUlBLElBQVNGLEVBQ1QsT0FBTyxDQUVYRSxHQUFPQSxFQUFLQyxXQUVoQixPQUFPLEdBRUdMLEVBQUFNLG1CQUFxQixTQUFDSixFQUFRQyxHQUN4QyxNQUFLRCxLQUFXQyxHQUNUSCxFQUFTQyxhQUFhQyxFQUFRQyxJQUUzQkgsRUFBQU8sU0FBVyxTQUFDSCxHQUN0QixPQUFLQSxHQUN3QixPQUF0QkEsRUFBS0ksY0FFRlIsRUFBQVMsYUFBZSxTQUFDTCxHQUMxQixRQUFLQSxHQUN1QyxTQUFyQ0EsRUFBS00sYUFBYSxnQkFFZlYsRUFBQVcsY0FBZ0IsU0FBQ1AsRUFBbUJoRSxHQUM5QyxJQUFLZ0UsRUFBUSxLQUFNUSxPQUFNLCtEQUN6QlIsR0FBS1MsYUFBYSxjQUFlekUsSUFFdkI0RCxFQUFBYyxlQUFpQixTQUFDVixHQUM1QixRQUFLQSxHQUN5QyxTQUF2Q0EsRUFBS00sYUFBYSxrQkFFZlYsRUFBQWUsZ0JBQWtCLFNBQUNYLEVBQW1CaEUsR0FDaEQsSUFBS2dFLEVBQVEsS0FBTVEsT0FBTSxpRUFDekJSLEdBQUtTLGFBQWEsZ0JBQWlCekUsSUFFekI0RCxFQUFBZ0IsS0FBTyxTQUFDWixHQUNsQixJQUFLQSxFQUFRLEtBQU1RLE9BQU0sc0RBQ3pCUixHQUFLYSxVQUFVQyxPQUFPLGVBRVpsQixFQUFBbUIsS0FBTyxTQUFDZixHQUNsQixJQUFLQSxFQUFRLEtBQU1RLE9BQU0sc0RBQ3pCUixHQUFLYSxVQUFVRyxJQUFJLGVBRVRwQixFQUFBcUIsWUFBYyxTQUFDakIsR0FDekIsSUFBS0EsRUFBUSxLQUFNUSxPQUFNLDZEQUN6QixJQUFNVSxHQUFRbEIsRUFBS21CLFFBQ2JDLEVBQTJCQyxTQUFTQyxlQUFlSixJQUFVbEIsRUFBS3VCLGlCQUV4RSxPQURBSCxHQUFNSSxTQUFXSixFQUFNSSxRQUNoQkosRUFBTUksU0FFSDVCLEVBQUE2QixJQUFNLFNBQUN6QixHQUNqQixHQUFNMEIsR0FBVTFCLEVBQUsyQixXQUFVLEVBQy9CM0IsR0FBS0MsV0FBVzJCLGFBQWFGLEVBQVMxQixJQUU5Q0osSUF0RGEvRixHQUFBK0YsWVoyYVAsU0FBVTlGLEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxHYWpidEQsSUFBQTZGLEdBQUEsbUJBQUFBLE1BS0EsTUFKa0JBLEdBQUFDLFVBQW9CLEdBQ3BCRCxFQUFBRSxZQUFzQixHQUN0QkYsRUFBQUcsYUFBdUIsR0FDdkJILEVBQUFJLGFBQXVCLEdBQ3pDSixJQUxhaEksR0FBQWdJLGtCYnFjUCxTQUFVL0gsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEdjemN0RCxJQUFBa0csR0FBQTNILEVBQUEsR0FFQTRILEVBQUEsbUJBQUFBLE1BMEJBLE1BeEJrQkEsR0FBQUMsMEJBQTRCLFNBQUNDLEVBQWdCQyxFQUFvQnRILEdBQzNFLEdBQU11SCxHQUFjRixFQUFPRyxLQUFLLG1CQUMxQkMsRUFBbUJGLEVBQVlHLFNBQVMsc0JBQzFDUixHQUFBaEcsU0FBU3lHLFNBQVdMLElBQWNHLEdBQW9CSCxJQUFhSixFQUFBaEcsU0FBUzBHLE9BQzFFSCxHQUFvQkgsSUFBYUosRUFBQWhHLFNBQVMyRyxRQUczQ0osR0FRREosRUFBT0csS0FBSywyQkFBMkJNLFFBQVEsS0FDL0NQLEVBQVlRLFlBQVksdUJBQ3hCUixFQUFZUyxTQUFTLHlCQUNyQlgsRUFDQ1ksS0FBSyxnQkFBaUIsU0FDdEJBLEtBQUssYUFBYyxvREFBc0RqSSxLQVoxRXFILEVBQU9HLEtBQUssMkJBQTJCVSxVQUFVLEtBQ2pEWCxFQUFZUSxZQUFZLHlCQUN4QlIsRUFBWVMsU0FBUyx1QkFDckJYLEVBQ0NZLEtBQUssZ0JBQWlCLFFBQ3RCQSxLQUFLLGFBQWMsc0RBQXdEakksTUFXeEZtSCxJQTFCYXRJLEdBQUFzSSx5QmRnZlAsU0FBVXJJLEVBQVFELEdlaGV4QkMsRUFBQUQsUUFBQSxTQUFBc0osRUFBQUMsRUFBQUMsRUFBQUMsR0FvQkEsUUFBQUMsS0FPQSxRQUFBQyxLQUNBQyxFQUFBQyxPQUFBLEdBQUFDLE9BQ0FOLEVBQUFPLE1BQUExSixFQUFBMkosR0FLQSxRQUFBQyxLQUNBQyxNQUFBbkcsR0FiQSxHQUFBMUQsR0FBQUMsS0FDQTZKLEVBQUFOLE9BQUEsR0FBQUMsT0FBQUYsRUFDQUksRUFBQUksU0FjQVgsS0FBQVMsR0FHQVAsSUFJQU8sR0FDQUcsYUFBQUgsT0FHQW5HLEtBQUEwRixHQUFBVSxFQUFBYixFQUdBSyxLQUVHLElBQUFKLElBVUhXLEVBQUFJLFdBQUFiLEVBQUFRLEVBQUFOLE1BQUE1RixLQUFBMEYsRUFBQUgsRUFBQWEsRUFBQWIsSUEzREEsR0FBQVksR0FHQU4sRUFBQSxDQThEQSxPQTNEQSxpQkFBQUwsS0FDQUUsRUFBQUQsRUFDQUEsRUFBQUQsRUFDQUEsTUFBQXhGLElBd0RBMkYsSWZnZ0JNLFNBQVV6SixFQUFRRCxFQUFTVSxHQUVqQyxZQUVBLFNBQVM2SixHQUFTdkosR0FDZCxJQUFLLEdBQUlpQixLQUFLakIsR0FBUWhCLEVBQVFnQyxlQUFlQyxLQUFJakMsRUFBUWlDLEdBQUtqQixFQUFFaUIsSUFFcEVYLE9BQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxJZ0IvbEJ0RG9JLEVBQUE3SixFQUFBLEtBQ0E2SixFQUFBN0osRUFBQSxNaEIwbUJNLFNBQVVULEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxHaUIzbUJ0RCxJQUFBcUksR0FBQTlKLEVBQUEsSUFFQStKLEVBQUEvSixFQUFBLElBQ0FnSyxFQUFBaEssRUFBQSxJQUtBaUssRUFBQSxXQU1JLFFBQUFBLEdBQVlDLEdBQVosR0FBQUMsR0FBQXZLLElBRlFBLE1BQUF3SyxnQkFtQkR4SyxLQUFBeUssS0FBUSxTQUFDQyxHQUNaSCxFQUFLSSxnQkFBZ0JDLFFBQVFGLEdBQzdCSCxFQUFLTSxZQUVGN0ssS0FBQTZLLFNBQVcsV0FDZGIsV0FBVyxXQUNQLEdBQU14SCxHQUFPK0gsRUFBS0ksZ0JBQWdCRyxVQUM1QkMsRUFBWVIsRUFBS0ksZ0JBQWdCRixLQUFLakksRUFDNUMrSCxHQUFLUyxhQUFhQyxVQUFZRixDQUNoQjdELFVBQVNnRSxpQkFBaUIsZ0JBQ3hDWCxHQUFLWSxVQUFZLEdBQUloQixHQUFBaUIsVUFBVWIsRUFBS2MsWUFBWUMsUUFBUUMsaUJBQWtCaEIsRUFBTUEsRUFBS2MsYUFDckZkLEVBQUtZLFVBQVVLLFFBQ2hCLElBRUF4TCxLQUFBeUwsZUFBaUIsU0FBQ0MsR0FDckJuQixFQUFLYyxZQUFZQyxRQUFRSSxZQUFjQSxHQUVwQzFMLEtBQUEyTCxRQUFXLFdBQ2RwQixFQUFLWSxVQUFVUSxXQWxDZjNMLEtBQUtxTCxZQUFlLEdBQUlqQixHQUFBd0IsaUJBQWlCdEIsR0FDekN0SyxLQUFLZ0wsYUFBZVYsRUFBUWlCLGlCQUM1QnZMLEtBQUsySyxnQkFBa0IsR0FBSVQsR0FBQTJCLHFCQUFxQjdMLEtBQUtxTCxhQWtDN0QsTUFBQWhCLEtBM0NhM0ssR0FBQTJLLFNqQjJwQlAsU0FBVTFLLEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxHa0J6cUJ0RCxJQUFBaUssR0FBQTFMLEVBQUEsSUFJQXlMLEVBQUEsV0FNRSxRQUFBQSxHQUFvQlIsR0FBcEIsR0FBQWQsR0FBQXZLLElBQW9CQSxNQUFBcUwsY0FjYnJMLEtBQUE0SyxRQUFVLFNBQUNGLEdBQ2hCSCxFQUFLL0gsS0FBT2tJLEdBRVAxSyxLQUFBOEssUUFBVSxXQUNmLE1BQU9QLEdBQUsvSCxNQUVOeEMsS0FBQStMLFVBQVksU0FBQ0MsRUFBV0MsR0FDOUIsV0FBbUJ4SSxLQUFmdUksRUFBS0UsT0FDQyxNQUVTekksS0FBZndJLEVBQUtDLE1BQ0EsRUFFRkYsRUFBS0UsTUFBUUQsRUFBS0MsT0FFbkJsTSxLQUFBbU0scUJBQXVCLFNBQUN6QixHQUU5QixJQUFvQixHQURkMEIsTUFDY3pJLEVBQUEsRUFBQTBJLEVBQUEzQixFQUFBL0csRUFBQTBJLEVBQUEzSSxPQUFBQyxJQUNsQixJQUEwQixHQURqQjJJLEdBQUtELEVBQUExSSxHQUNZNEksRUFBQSxFQUFBQyxFQUFBakMsRUFBS2MsWUFBWUMsUUFBUUksWUFBekJhLEVBQUFDLEVBQUE5SSxPQUFBNkksSUFBb0MsQ0FBekQsR0FBTWIsR0FBV2MsRUFBQUQsRUFDcEIsSUFBSWIsRUFBWS9HLEtBQU8ySCxFQUFNM0gsR0FBSSxDQUMvQnlILEVBQVlLLE1BQ1Z2SixVQUFXd0ksRUFBWXhJLFVBQ3ZCd0osWUFBYUosRUFBTUksWUFDbkJuSixZQUFhK0ksRUFBTS9JLFlBQ25Cb0IsR0FBSStHLEVBQVkvRyxHQUNoQjlELEtBQU02SyxFQUFZN0ssS0FDbEJxTCxNQUFPUixFQUFZUSxNQUNuQlMsT0FBUWpCLEVBQVlpQixPQUNwQi9ILEtBQU04RyxFQUFZOUcsTUFFcEIsUUFJTixNQUFPd0gsSUEvQ1BwTSxLQUFLNE0sNEJBQThCZCxFQWlEdkMsTUEvQ1NELEdBQUFwSyxVQUFBZ0osS0FBUCxTQUFZQyxHQUNWLEdBQ01tQyxJQURxQjdNLEtBQUtxTCxZQUFZQyxRQUFRcEksVUFDL0JsRCxLQUFLbU0scUJBQXFCekIsSUFDekNvQyxFQUFZRCxFQUFhRSxPQUFPLFNBQUNDLEdBQU0sV0FBYXZKLEtBQWJ1SixFQUFFTCxRQUF3QkssRUFBRUwsU0FDbkVNLEVBQWVKLEVBQWFFLE9BQU8sU0FBQ0MsR0FBTSxXQUFhdkosS0FBYnVKLEVBQUVMLFNBQXlCSyxFQUFFTCxRQUM3RUcsR0FBVUksS0FBS2xOLEtBQUsrTCxXQUNwQmtCLEVBQWFDLEtBQUtsTixLQUFLK0wsVUFDdkIsSUFBTXZILEdBQWtCeEUsS0FBS3FMLFlBQVlDLFFBQVE5RyxnQkFDM0M1QixFQUFXNUMsS0FBS3FMLFlBQVlDLFFBQVExSSxRQUMxQyxPQUFPNUMsTUFBSzRNLDZCQUE2QmhLLFNBQVFBLEVBQUVrSyxVQUFTQSxFQUFFRyxhQUFZQSxFQUFFekksZ0JBQWVBLEtBc0MvRnFILElBeERhbk0sR0FBQW1NLHdCbEIwdUJQLFNBQVVsTSxFQUFRRCxFQUFTVSxHbUJodkJqQyxHQUFBNEIsR0FBQTVCLEVBQUEsRUFFQVQsR0FBQUQsU0FBQXNDLEVBQUEsU0FBQUEsR0FBQUMsVUFBaUVnQyxFQUFBLFNBQUE3QixFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNqRSxHQUFBQyxFQUVBLHdFQUN3UCxPQUF4UEEsRUFBQUwsRUFBQVMsY0FBQXpDLEVBQUEsR0FBQWlDLEdBQWdKeEIsS0FBQSxhQUFBMkIsT0FBQUYsVUFBQUMsV0FBQVEsV0FBQVgsRUFBQVcsY0FBd0dOLEVBQUEsSUFDeFAsWUFDQzBLLEVBQUEsU0FBQS9LLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0QsR0FBQUMsRUFFQSw2REFDd1AsT0FBeFBBLEVBQUFMLEVBQUFTLGNBQUF6QyxFQUFBLEdBQUFpQyxHQUFnSnhCLEtBQUEsYUFBQTJCLE9BQUFGLFVBQUFDLFdBQUFRLFdBQUFYLEVBQUFXLGNBQXdHTixFQUFBLElBQ3hQLFlBQ0NQLFVBQUEsY0FBQUMsS0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNELEdBQUFDLEVBRUEsdUNBQ3VQLE9BQXZQQSxFQUFBSCxFQUFBLEdBQUE3QixLQUFBLE1BQUE0QixJQUFBRCxFQUFBaUMsZ0JBQTBGLE1BQUFoQyxJQUFBYSxVQUFBYixHQUFnRHhCLEtBQUEsS0FBQTRELFFBQXFCTyxHQUFBNUMsRUFBQTZDLFFBQUEsRUFBQXpDLEVBQUEsR0FBQTBDLFFBQUE5QyxFQUFBNkMsUUFBQSxFQUFBekMsRUFBQSxHQUFBQSxVQUF3RkMsRUFBQSxJQUN2UCxVQUNDTyxZQUFBLEVBQUFDLFNBQUEsS25CMnZCSyxTQUFVdEQsRUFBUUQsRUFBU1UsR29COXdCakMsUUFBQTJELEdBQUFDLEdBQXlCLE1BQUFBLE9BQUExQyxXQUFBMEMsRUFBQSxRQUFBQSxHQUR6QixHQUFBaEMsR0FBQTVCLEVBQUEsRUFFQVQsR0FBQUQsU0FBQXNDLEVBQUEsU0FBQUEsR0FBQUMsVUFBaUVnQyxFQUFBLFNBQUE3QixFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNqRSxHQUFBQyxHQUFBMkIsRUFBQWhDLEVBQUFPLE9BQUEyQixFQUFBbEMsRUFBQU0sZ0JBRUEsME9BQ0E0QixFQUFBRixFQUFBLE1BQUEvQixJQUFBTyxTQUFBUCxNQUNBLDRSQUNBaUMsRUFBQUYsRUFBQSxNQUFBL0IsSUFBQU8sU0FBQVAsTUFDQSxtRUFDeU8sT0FBek9JLEVBQUFILEVBQUF5QyxLQUFBdEUsS0FBQSxNQUFBNEIsSUFBQUQsRUFBQWlDLGdCQUF5RixNQUFBaEMsSUFBQXlLLFVBQUF6SyxHQUFnRHhCLEtBQUEsT0FBQTRELFFBQXVCTyxHQUFBNUMsRUFBQTZDLFFBQUEsRUFBQXpDLEVBQUEsR0FBQTBDLFFBQUE5QyxFQUFBK0MsS0FBQTNDLFVBQXlFQyxFQUFBLElBQ3pPLDBCQUNDMkssRUFBQSxTQUFBaEwsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDRCxHQUFBQyxHQUFBMkIsRUFBQWhDLEVBQUFPLE9BQUEyQixFQUFBbEMsRUFBQU0saUJBQUE2QixFQUFBLE1BQUFsQyxJQUFBRCxFQUFBaUMsZUFFQSxrQ0FDQUMsRUFBQUYsRUFBQSxNQUFBL0IsSUFBQXhCLEtBQUF3QixNQUNBLDRGQUNBaUMsRUFBQVAsRUFBQTNELEVBQUEsSUFBQUssS0FBQThELEVBQUEsTUFBQWxDLElBQUFhLFVBQUFiLEdBQXdMeEIsS0FBQSxZQUFBNEQsUUFBNEJqQyxVQUNwTixrRUFDQThCLEVBQUFQLEVBQUEzRCxFQUFBLElBQUFLLEtBQUE4RCxFQUFBLE1BQUFsQyxJQUFBYSxVQUFBYixHQUFzTHhCLEtBQUEsVUFBQTRELFFBQTBCakMsVUFDaE4sa0NBQ0E4QixFQUFBRixFQUFBLE1BQUEvQixJQUFBc0MsR0FBQXRDLE1BQ0Esc0NBQ0FpQyxFQUFBRixFQUFBLE1BQUEvQixJQUFBeEIsS0FBQXdCLE1BQ0Esb0dBQ0FpQyxFQUFBRixFQUFBNUIsS0FBQWdCLE1BQUFuQixJQUNBLG1HQUNBaUMsRUFBQUYsRUFBQSxNQUFBL0IsSUFBQXhCLEtBQUF3QixNQUNBLDZCQUNBaUMsRUFBQUYsRUFBQSxNQUFBL0IsSUFBQXhCLEtBQUF3QixNQUNBLEtBQzZQLE9BQTdQSSxFQUFBc0IsRUFBQTNELEVBQUEsSUFBQUssS0FBQThELEVBQUEsTUFBQWxDLElBQUFrQixZQUFBbEIsR0FBeU14QixLQUFBLHVCQUFBNEQsUUFBdUNqQyxVQUFhQyxFQUFBLElBQzdQLGtHQUNBNkIsRUFBQUYsRUFBQSxNQUFBL0IsSUFBQXNDLEdBQUF0QyxNQUNBLHVOQUNBaUMsRUFBQUYsRUFBQSxNQUFBL0IsSUFBQXhCLEtBQUF3QixNQUNBLHNEQUNzTSxPQUF0TUksRUFBQUgsRUFBQSxHQUFBN0IsS0FBQThELEVBQUEsTUFBQWxDLElBQUFhLFVBQUFiLEdBQXlGeEIsS0FBQSxLQUFBNEQsUUFBcUJPLEdBQUE1QyxFQUFBNkMsUUFBQSxFQUFBekMsRUFBQSxHQUFBMEMsUUFBQTlDLEVBQUE2QyxRQUFBLEVBQUF6QyxFQUFBLEdBQUFBLFVBQXdGQyxFQUFBLElBQ3RNLHFEQUNrUixPQUFsUkEsRUFBQUwsRUFBQVMsY0FBQXpDLEVBQUEsR0FBQWlDLEdBQWlKeEIsS0FBQSxjQUFBMkIsT0FBQU0sT0FBQSxlQUFBUixVQUFBQyxXQUFBUSxXQUFBWCxFQUFBVyxjQUFpSU4sRUFBQSxJQUNsUixxQkFDQzBLLEVBQUEsU0FBQS9LLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0QsNElBQ0M2SyxFQUFBLFNBQUFqTCxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNELDhJQUNDTixVQUFBLGNBQUFDLEtBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDRCxHQUFBQyxFQUVBLE9BQXlSLFFBQXpSQSxFQUFBSCxFQUFBLEdBQUE3QixLQUFBLE1BQUE0QixJQUFBRCxFQUFBaUMsZ0JBQTZGLE9BQUE1QixFQUFBLE1BQUFKLElBQUF5SyxVQUFBekssR0FBQUksRUFBQWlCLE9BQUFqQixHQUE4RjVCLEtBQUEsS0FBQTRELFFBQXFCTyxHQUFBNUMsRUFBQTZDLFFBQUEsRUFBQXpDLEVBQUEsR0FBQTBDLFFBQUE5QyxFQUFBK0MsS0FBQTNDLFVBQXlFQyxFQUFBLElBQ3hSTyxZQUFBLEVBQUFDLFNBQUEsS3BCMHhCSyxTQUFVdEQsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEdxQmgxQnRELElBQU15TCxHQUFjLFNBQUM5SixFQUFPK0osR0FDeEIsV0FBYzlKLEtBQVZELEdBQXVCQSxFQUFRLEVBQUkrSixFQUM1QiwwQkFFSixHQUdYN04sR0FBQXlELFFBQWVtSyxHckIwMUJULFNBQVUzTixFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sR3NCcjJCdEQsSUFBTTJMLEdBQWMsU0FBQ25LLEdBQ2pCLE1BQU9BLEdBQU8sV0FBYSxVQUcvQjNELEdBQUF5RCxRQUFlcUssR3RCKzJCVCxTQUFVN04sRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEd1QnYzQnRELElBQU13RixHQUFVLFNBQUNoRSxHQUNiLE1BQU9BLEdBQU8sVUFBWSxHQUc5QjNELEdBQUF5RCxRQUFla0UsR3ZCaTRCVCxTQUFVMUgsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEd3Qno0QnRELElBQU1pRCxHQUFXLFNBQUN6QixHQUNkLE1BQU9BLEdBQU8sV0FBYSxHQUcvQjNELEdBQUF5RCxRQUFlMkIsR3hCbTVCVCxTQUFVbkYsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEd5QjM1QnRELElBQU00TCxHQUFTLFNBQUM1TCxFQUFnQjZMLEdBQzVCLEdBQUk5RyxFQWNKLE9BVFFBLEdBSko4RyxHQUNLN0wsSUFNREEsRUFNRCtFLEVBQU8sZUFBaUIsSUFHbkNsSCxHQUFBeUQsUUFBZXNLLEd6Qnc2QlQsU0FBVTlOLEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxHMEI5N0J0RCxJQUFNOEwsR0FBbUIsU0FBQ25LLEVBQU8rSixFQUFJakQsR0FDakMsTUFBSTlHLEdBQU1FLE9BQVM2SixFQUNSLGdHQUVrQy9KLEVBQU1FLE9BQVM2SixHQUFNLDZGQUUzRC9KLEVBQU1FLE9BQVM2SixHQUNoQixtT0FPSyxHQUlmN04sR0FBQXlELFFBQWV3SyxHMUJ5OEJULFNBQVVoTyxFQUFRRCxFQUFTVSxHMkIxOUJqQyxRQUFBMkQsR0FBQUMsR0FBeUIsTUFBQUEsT0FBQTFDLFdBQUEwQyxFQUFBLFFBQUFBLEdBRHpCLEdBQUFoQyxHQUFBNUIsRUFBQSxFQUVBVCxHQUFBRCxTQUFBc0MsRUFBQSxTQUFBQSxHQUFBQyxVQUFpRWdDLEVBQUEsU0FBQTdCLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ2pFLEdBQUFDLEdBQUEyQixFQUFBaEMsRUFBQU8sT0FBQTJCLEVBQUFsQyxFQUFBTSxnQkFFQSxvT0FDQTRCLEVBQUFGLEVBQUEsTUFBQS9CLElBQUFPLFNBQUFQLE1BQ0EsMlJBQ0FpQyxFQUFBRixFQUFBLE1BQUEvQixJQUFBTyxTQUFBUCxNQUNBLHFFQUM0TyxPQUE1T0ksRUFBQUgsRUFBQXlDLEtBQUF0RSxLQUFBLE1BQUE0QixJQUFBRCxFQUFBaUMsZ0JBQXlGLE1BQUFoQyxJQUFBNEssYUFBQTVLLEdBQW1EeEIsS0FBQSxPQUFBNEQsUUFBdUJPLEdBQUE1QyxFQUFBNkMsUUFBQSxFQUFBekMsRUFBQSxHQUFBMEMsUUFBQTlDLEVBQUErQyxLQUFBM0MsVUFBeUVDLEVBQUEsSUFDNU8sMEJBQ0MySyxFQUFBLFNBQUFoTCxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNELEdBQUFDLEdBQUEyQixFQUFBaEMsRUFBQU8sT0FBQTJCLEVBQUFsQyxFQUFBTSxpQkFBQTZCLEVBQUEsTUFBQWxDLElBQUFELEVBQUFpQyxlQUVBLGtDQUNBQyxFQUFBRixFQUFBLE1BQUEvQixJQUFBeEIsS0FBQXdCLE1BQ0EsNEZBQ0FpQyxFQUFBUCxFQUFBM0QsRUFBQSxJQUFBSyxLQUFBOEQsRUFBQSxNQUFBbEMsSUFBQWEsVUFBQWIsR0FBd0x4QixLQUFBLFlBQUE0RCxRQUE0QmpDLFVBQ3BOLGtFQUNBOEIsRUFBQVAsRUFBQTNELEVBQUEsSUFBQUssS0FBQThELEVBQUEsTUFBQWxDLElBQUFhLFVBQUFiLEdBQXNMeEIsS0FBQSxVQUFBNEQsUUFBMEJqQyxVQUNoTixrQ0FDQThCLEVBQUFGLEVBQUEsTUFBQS9CLElBQUFzQyxHQUFBdEMsTUFDQSxzQ0FDQWlDLEVBQUFGLEVBQUEsTUFBQS9CLElBQUF4QixLQUFBd0IsTUFDQSxvR0FDQWlDLEVBQUFGLEVBQUE1QixLQUFBZ0IsTUFBQW5CLElBQ0EsbUdBQ0FpQyxFQUFBRixFQUFBLE1BQUEvQixJQUFBeEIsS0FBQXdCLE1BQ0EsNkJBQ0FpQyxFQUFBRixFQUFBLE1BQUEvQixJQUFBeEIsS0FBQXdCLE1BQ0EsS0FDNlAsT0FBN1BJLEVBQUFzQixFQUFBM0QsRUFBQSxJQUFBSyxLQUFBOEQsRUFBQSxNQUFBbEMsSUFBQWtCLFlBQUFsQixHQUF5TXhCLEtBQUEsdUJBQUE0RCxRQUF1Q2pDLFVBQWFDLEVBQUEsSUFDN1Asa0dBQ0E2QixFQUFBRixFQUFBLE1BQUEvQixJQUFBc0MsR0FBQXRDLE1BQ0EsaU5BQ0FpQyxFQUFBRixFQUFBLE1BQUEvQixJQUFBeEIsS0FBQXdCLE1BQ0Esc0RBQ3NNLE9BQXRNSSxFQUFBSCxFQUFBLEdBQUE3QixLQUFBOEQsRUFBQSxNQUFBbEMsSUFBQWEsVUFBQWIsR0FBeUZ4QixLQUFBLEtBQUE0RCxRQUFxQk8sR0FBQTVDLEVBQUE2QyxRQUFBLEVBQUF6QyxFQUFBLEdBQUEwQyxRQUFBOUMsRUFBQTZDLFFBQUEsRUFBQXpDLEVBQUEsR0FBQUEsVUFBd0ZDLEVBQUEsSUFDdE0scURBQ2tSLE9BQWxSQSxFQUFBTCxFQUFBUyxjQUFBekMsRUFBQSxHQUFBaUMsR0FBaUp4QixLQUFBLGNBQUEyQixPQUFBTSxPQUFBLGVBQUFSLFVBQUFDLFdBQUFRLFdBQUFYLEVBQUFXLGNBQWlJTixFQUFBLElBQ2xSLHFCQUNDMEssRUFBQSxTQUFBL0ssRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDRCw0SUFDQzZLLEVBQUEsU0FBQWpMLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0QsOElBQ0NOLFVBQUEsY0FBQUMsS0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNELEdBQUFDLEVBRUEsT0FBNFIsUUFBNVJBLEVBQUFILEVBQUEsR0FBQTdCLEtBQUEsTUFBQTRCLElBQUFELEVBQUFpQyxnQkFBNkYsT0FBQTVCLEVBQUEsTUFBQUosSUFBQTRLLGFBQUE1SyxHQUFBSSxFQUFBaUIsT0FBQWpCLEdBQWlHNUIsS0FBQSxLQUFBNEQsUUFBcUJPLEdBQUE1QyxFQUFBNkMsUUFBQSxFQUFBekMsRUFBQSxHQUFBMEMsUUFBQTlDLEVBQUErQyxLQUFBM0MsVUFBeUVDLEVBQUEsSUFDM1JPLFlBQUEsRUFBQUMsU0FBQSxLM0JzK0JLLFNBQVV0RCxFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sRzRCMWhDdEQsSUFBQStMLEdBQUF4TixFQUFBLEdBQ0F5TixFQUFBek4sRUFBQSxJQUNBME4sRUFBQTFOLEVBQUEsSUFHQWdMLEVBQUEsV0FzQkksUUFBQUEsR0FBWXZGLEVBQW1CeUcsRUFBY2pCLEdBQTdDLEdBQUFkLEdBQUF2SyxJQUZRQSxNQUFBK04sZUFBeUIsR0FnQjFCL04sS0FBQWdPLGNBQWdCLFNBQUNuSSxFQUFNb0ksRUFBTUMsR0FHaEMsSUFGQSxHQUFJQyxHQUFZdEksRUFBS3VCLGtCQUNqQmdILEVBQUtGLEVBQ0ZDLEdBQU0sQ0FDVCxHQUFNRSxHQUFPRixFQUFLaEksYUFBYSxPQUMzQmtJLElBQStCLGFBQXZCQSxFQUFLQyxnQkFDYkYsRUFBSyxHQUFJTixHQUFBUyxjQUFjSixFQUFNRixFQUFNQyxHQUNuQ0UsRUFBRzVDLE9BQ0h5QyxFQUNLTyxVQUNBL0IsS0FBSzJCLEdBQ1ZILEVBQ0tRLFdBQ0FoQyxLQUFLMkIsRUFBRzFKLE1BQU1nSyxVQUFVLEVBQUcsR0FBR0osZ0JBRW5DSCxFQUFLL0csbUJBQ0xtRCxFQUFLeUQsY0FBY0csRUFBTUYsRUFBTUcsR0FFbkNELEVBQU9BLEVBQUtRLHFCQUliM08sS0FBQXdMLEtBQU8sV0FFTGpCLEVBQUtxRSxZQUFZekksYUFBYSxTQUMvQm9FLEVBQ0txRSxZQUNBdEksYUFBYSxPQUFRLFFBRzlCaUUsRUFBS3lELGNBQWN6RCxFQUFLcUUsWUFBYXJFLEdBQU0sR0FHM0NBLEVBQUtzRSx5QkFHTHRFLEVBQUt1RSxjQUFjQyxnQkFBZ0JDLFNBQVcsRUFHOUN6RSxFQUFLMEUsZ0JBQWdCQyxpQkFBaUIsUUFBUzNFLEVBQUs0RSxrQkFDcEQ1RSxFQUFLNkUsY0FBY0YsaUJBQWlCLFFBQVMzRSxFQUFLOEUsZ0JBQ2xEOUUsRUFBSytFLGNBQWNKLGlCQUFpQixRQUFTM0UsRUFBS2dGLHdCQUNsRHJJLFNBQVNnSSxpQkFBaUIsVUFBVzNFLEVBQUtpRixzQkFFdkN4UCxLQUFBMkwsUUFBVSxXQUNia0MsRUFBQXBJLFNBQVM2QixJQUFJaUQsRUFBS2tGLGVBQ2xCdkksU0FBU3dJLG9CQUFvQixVQUFXbkYsRUFBS2lGLHNCQUUxQ3hQLEtBQUF3UCxvQkFBc0IsU0FBQ0csR0FDdEJBLEVBQU1DLFFBQTBCLE1BQWRELEVBQU1FLE1BQ3hCRixFQUFNRyxpQkFDTnZGLEVBQUsrRSxjQUFjUyxVQUdwQi9QLEtBQUFnUSxlQUFpQixTQUFDQyxFQUF5QkMsR0FDOUMsSUFBaUIsR0FBQXZNLEdBQUEsRUFBQTRJLEVBQUFoQyxFQUFLaUUsVUFBTDdLLEVBQUE0SSxFQUFBN0ksT0FBQUMsSUFBYyxDQUExQixHQUFNeUssR0FBRTdCLEVBQUE1SSxFQUNMeUssS0FBTzZCLEdBQ1A3QixFQUFHVyxnQkFBZ0JDLFNBQVcsRUFDekJrQixHQUNEOUIsRUFDQ1csZ0JBQ0FnQixTQUdMM0IsRUFBR1csZ0JBQWdCQyxVQUFZLElBSXBDaFAsS0FBQW1RLHVCQUF5QixTQUFDRCxHQUM3QixJQUFpQixHQUFBdk0sR0FBQSxFQUFBNEksRUFBQWhDLEVBQUtpRSxVQUFMN0ssRUFBQTRJLEVBQUE3SSxPQUFBQyxJQUFjLENBQTFCLEdBQU15SyxHQUFFN0IsRUFBQTVJLEVBQ1QsSUFBSXlLLEVBQUdnQyxVQUFXLENBQ2Q3RixFQUFLeUYsZUFBZTVCLEVBQUk4QixFQUN4QixVQUlMbFEsS0FBQXFRLG1CQUFxQixTQUFDQyxHQUV6QixJQUFLLEdBRERDLEdBQ0toUSxFQUFLZ0ssRUFBS2lFLFVBQVU5SyxPQUFTLEVBQUluRCxHQUFLLEVBQUdBLElBQUssQ0FDbkQsR0FBTTZOLEdBQUs3RCxFQUFLaUUsVUFBVWpPLEVBQzFCLElBQUk2TixJQUFPa0MsRUFDUCxLQUVBbEMsR0FBR2dDLFlBQ0hHLEVBQVduQyxHQUdmbUMsR0FDQWhHLEVBQUt5RixlQUFlTyxJQUlyQnZRLEtBQUF3USx1QkFBeUIsU0FBQ0YsR0FFN0IsSUFBaUIsR0FEYkcsR0FDYTlNLEVBQUEsRUFBQTRJLEVBQUFoQyxFQUFLaUUsVUFBTDdLLEVBQUE0SSxFQUFBN0ksT0FBQUMsSUFBYyxDQUExQixHQUFNeUssR0FBRTdCLEVBQUE1SSxFQUNULElBQUl5SyxJQUFPa0MsRUFDUCxLQUVBbEMsR0FBR2dDLFlBQ0hLLEVBQVdyQyxHQUdmcUMsR0FDQWxHLEVBQUt5RixlQUFlUyxJQUlyQnpRLEtBQUEwUSxxQkFBdUIsU0FBQ0osR0FDdkJBLEVBQVlLLGVBQ1pwRyxFQUFLeUYsZUFBZU0sRUFBWUssZ0JBSWpDM1EsS0FBQTRRLG9CQUFzQixXQUN6QnJHLEVBQUt5RixlQUFlekYsRUFBS3VFLGdCQUd0QjlPLEtBQUE2USxtQkFBcUIsV0FDeEJ0RyxFQUFLeUYsZUFBZXpGLEVBQUt1RyxlQUd0QjlRLEtBQUErUSxlQUFpQixTQUFDVCxFQUE0QlUsR0FFN0NWLEVBQVlXLGVBQ1pwRCxFQUFBcEksU0FBU2UsZ0JBQWdCOEosRUFBWXZCLGdCQUFpQixRQUN0RHhFLEVBQUsyRyxvQkFBb0JaLEdBQWEsR0FDdEMvRixFQUFLc0UsdUJBQXVCbUMsSUFFaEN6RyxFQUFLMEUsZ0JBQWdCa0MsZ0JBQWdCLFlBQ3JDNUcsRUFBSzZFLGNBQWMrQixnQkFBZ0IsYUFHaENuUixLQUFBb1Isc0JBQXdCLFNBQUNkLEdBQzVCLElBQWlCLEdBQUEzTSxHQUFBLEVBQUE0SSxFQUFBaEMsRUFBS2lFLFVBQUw3SyxFQUFBNEksRUFBQTdJLE9BQUFDLElBQWMsQ0FBMUIsR0FBTXlLLEdBQUU3QixFQUFBNUksRUFDSnlLLEdBQUd1QyxnQkFBa0JMLEVBQVlLLGVBQWtCdkMsRUFBRzZDLGNBQ3ZEMUcsRUFBS3dHLGVBQWUzQyxHQUc1QjdELEVBQUs4Ryw4QkFFRnJSLEtBQUFxUCxlQUFpQixXQUNwQixJQUFpQixHQUFBMUwsR0FBQSxFQUFBNEksRUFBQWhDLEVBQUtpRSxVQUFMN0ssRUFBQTRJLEVBQUE3SSxPQUFBQyxJQUFjLENBQTFCLEdBQU15SyxHQUFFN0IsRUFBQTVJLEVBQ0x5SyxHQUFHNkMsY0FDSDFHLEVBQUt3RyxlQUFlM0MsR0FHNUI3RCxFQUFLMEUsZ0JBQWdCa0MsZ0JBQWdCLFlBQ3JDNUcsRUFBSzZFLGNBQWM5SSxhQUFhLFdBQVksUUFDNUNpRSxFQUFLMEUsZ0JBQWdCYyxRQUNyQnhGLEVBQUs4Ryw4QkFFRnJSLEtBQUFtUCxpQkFBbUIsV0FDdEIsSUFBaUIsR0FBQXhMLEdBQUEsRUFBQTRJLEVBQUFoQyxFQUFLaUUsVUFBTDdLLEVBQUE0SSxFQUFBN0ksT0FBQUMsSUFBYyxDQUExQixHQUFNeUssR0FBRTdCLEVBQUE1SSxFQUNMeUssR0FBRzZDLGNBQ0gxRyxFQUFLK0csaUJBQWlCbEQsR0FHOUI3RCxFQUFLNkUsY0FBYytCLGdCQUFnQixZQUNuQzVHLEVBQUswRSxnQkFBZ0IzSSxhQUFhLFdBQVksUUFDOUNpRSxFQUFLNkUsY0FBY1csUUFDbkJ4RixFQUFLOEcsOEJBRUZyUixLQUFBdVIsd0JBQTBCLFNBQUNqQixHQUM5QixJQUFpQixHQUFBM00sR0FBQSxFQUFBNEksRUFBQWhDLEVBQUtpRSxVQUFMN0ssRUFBQTRJLEVBQUE3SSxPQUFBQyxJQUFjLENBQTFCLEdBQU15SyxHQUFFN0IsRUFBQTVJLEVBQ0p5SyxHQUFHdUMsZ0JBQWtCTCxFQUFZSyxlQUFrQnZDLEVBQUc2QyxjQUN2RDFHLEVBQUsrRyxpQkFBaUJsRCxHQUc5QjdELEVBQUs4Ryw4QkFFRnJSLEtBQUFzUixpQkFBbUIsU0FBQ2hCLEVBQTRCVSxHQUNuRCxHQUFJTCxFQUVBQSxHQURBTCxFQUFZa0IsYUFDSWxCLEVBRUFBLEVBQVlLLGNBRzVCQSxJQUNBOUMsRUFBQXBJLFNBQVNlLGdCQUFnQm1LLEVBQWM1QixnQkFBaUIsU0FDeER4RSxFQUFLMkcsb0JBQW9CUCxHQUFlLEdBQ3hDcEcsRUFBS3NFLHVCQUF1Qm1DLEdBQzVCekcsRUFBS3lGLGVBQWVXLElBRXhCcEcsRUFBSzBFLGdCQUFnQmtDLGdCQUFnQixZQUNyQzVHLEVBQUs2RSxjQUFjK0IsZ0JBQWdCLGFBRWhDblIsS0FBQWtSLG9CQUFzQixTQUFDUCxFQUE4QmMsR0FDeEQsR0FDSUMsR0FERUMsRUFBZWhCLEVBQWM1QixnQkFBZ0I3RCxpQkFBaUIsa0JBRS9EeUcsSUFBZ0JBLEVBQWFqTyxTQUM5QmdPLEVBQVdDLEVBQWEsSUFFdkJGLEdBSURDLEVBQVNoTCxVQUFVQyxPQUFPLHlCQUMxQitLLEVBQVNoTCxVQUFVRyxJQUFJLHlCQUp2QjZLLEVBQVNoTCxVQUFVQyxPQUFPLHVCQUMxQitLLEVBQVNoTCxVQUFVRyxJQUFJLDJCQU14QjdHLEtBQUE2Tyx1QkFBeUIsU0FBQ21DLEdBQzdCekcsRUFBS3VFLGNBQWdCdkUsRUFBS2lFLFVBQVUsRUFDcEMsS0FBaUIsR0FBQTdLLEdBQUEsRUFBQTRJLEVBQUFoQyxFQUFLaUUsVUFBTDdLLEVBQUE0SSxFQUFBN0ksT0FBQUMsSUFBYyxDQUExQixHQUFNeUssR0FBRTdCLEVBQUE1SSxHQUNMaU8sRUFBU3hELEVBQUdXLGdCQUFnQlUsYUFNaEMsS0FMQXJCLEVBQUdnQyxXQUFZLEdBQ1ZoQyxFQUFHVyxnQkFBZ0JySSxVQUFVbUwsU0FBUyxlQUNwQ0QsRUFBT2xMLFVBQVVtTCxTQUFTLGlCQUM3QnpELEVBQUdnQyxXQUFZLEdBRVp3QixHQUFXQSxJQUFXckgsRUFBS3FFLGFBQ2UsVUFBekNnRCxFQUFPekwsYUFBYSxtQkFDcEJpSSxFQUFHZ0MsV0FBWSxHQUVuQndCLEVBQVNBLEVBQU9uQyxhQUVoQnJCLEdBQUdnQyxZQUNIN0YsRUFBS3VHLGFBQWUxQyxHQUd2QjRDLEdBQ0R6RyxFQUFLOEcsOEJBSU5yUixLQUFBOFIseUJBQTJCLFNBQUN4QixFQUFheUIsR0FDNUMsR0FBSUMsR0FDQXhPLENBQ0p1TyxHQUFPQSxFQUFLekQsY0FHWjBELEVBQVF6SCxFQUNIaUUsVUFDQXlELFFBQVEzQixHQUFlLEVBQ3hCMEIsSUFBVXpILEVBQUtpRSxVQUFVOUssU0FDekJzTyxFQUFRLEdBSVp4TyxFQUFRK0csRUFBSzJILG1CQUFtQkYsRUFBT0QsSUFHeEIsSUFBWHZPLElBQ0FBLEVBQVErRyxFQUFLMkgsbUJBQW1CLEVBQUdILElBSW5Ddk8sR0FBUyxHQUNUK0csRUFBS3lGLGVBQWV6RixFQUFLaUUsVUFBVWhMLEtBSXBDeEQsS0FBQWtTLG1CQUFxQixTQUFDQyxFQUFvQkosR0FDN0MsSUFBSyxHQUFJeFIsR0FBSTRSLEVBQVk1UixFQUFJZ0ssRUFBS2tFLFdBQVcvSyxPQUFRbkQsSUFDakQsR0FBSWdLLEVBQUtpRSxVQUFVak8sR0FBRzZQLFdBQ2QyQixJQUFTeEgsRUFBS2tFLFdBQVdsTyxHQUN6QixNQUFPQSxFQUluQixRQUFRLEdBRUxQLEtBQUFvUyxlQUFpQixTQUFDQyxHQUNyQixJQUFpQixHQUFBMU8sR0FBQSxFQUFBNEksRUFBQWhDLEVBQUtpRSxVQUFMN0ssRUFBQTRJLEVBQUE3SSxPQUFBQyxJQUFjLENBQTFCLEdBQU15SyxHQUFFN0IsRUFBQTVJLEdBQ0gyTyxFQUFTbEUsRUFBR1csZ0JBQWdCVSxhQUM3QnJCLEdBQUd1QyxnQkFBa0IwQixJQUN0QkMsRUFBTzVMLFVBQVVDLE9BQU8sY0FDeEJ5SCxFQUFHZ0MsV0FBWSxFQUNYaEMsRUFBR21FLGlCQUNIRCxFQUFPNUwsVUFBVUMsT0FBTyxjQUN4QnlILEVBQUdXLGdCQUFnQmdCLFNBRW5CM0IsRUFBR29FLGlCQUNIRixFQUFPNUwsVUFBVUcsSUFBSSxjQUNyQnVILEVBQUdnQyxXQUFZLElBSTNCN0YsRUFBS3NFLDBCQUVGN08sS0FBQXlTLGVBQWlCLFNBQUNKLEdBQ3JCLElBQWlCLEdBQUExTyxHQUFBLEVBQUE0SSxFQUFBaEMsRUFBS2lFLFVBQUw3SyxFQUFBNEksRUFBQTdJLE9BQUFDLElBQWMsQ0FBMUIsR0FBTXlLLEdBQUU3QixFQUFBNUksR0FDSCtPLEVBQVN0RSxFQUFHVyxnQkFBZ0JVLGFBQzdCckIsR0FBR3VDLGdCQUFrQjBCLElBQ2xCSyxFQUFPaE0sVUFBVW1MLFNBQVMsa0JBQzFCYSxFQUFPaE0sVUFBVUcsSUFBSSxjQUNyQnVILEVBQUdnQyxXQUFZLEdBRWZoQyxFQUFHbUUsaUJBQ0hHLEVBQU9oTSxVQUFVRyxJQUFJLGNBQ3JCdUgsRUFBR2dDLFdBQVksR0FFZmhDLEVBQUdvRSxpQkFDSEUsRUFBT2hNLFVBQVVDLE9BQU8sY0FDeEJ5SCxFQUFHVyxnQkFBZ0JnQixVQUkvQnhGLEVBQUtzRSwwQkFFRjdPLEtBQUEyUyxrQkFBb0IsU0FBQ3JDLEdBQ3hCLEdBQU1qSixHQUFVd0csRUFBQXBJLFNBQVNxQixZQUFZd0osRUFBWXZCLGlCQUMzQzZELEVBQVN2TCxFQUFVdUcsRUFBQTlMLGlCQUFpQitRLElBQU1qRixFQUFBOUwsaUJBQWlCZ1IsS0FDakV4QyxHQUFZdkIsZ0JBQWdCekksYUFBYSxnQkFBaUJlLEVBQVEwTCxZQUNsRXhJLEVBQUtjLFlBQVlDLFFBQVEwSCxlQUFlMUMsRUFBWTNMLEdBQ1oyTCxFQUFZNUwsTUFDWmtPLEVBQ0F0QyxFQUFZMkMsU0FDWjNDLEVBQVk0QyxVQUVqRGxULEtBQUFxUiwyQkFBNkIsV0FHaEMsSUFBaUIsR0FGWDdPLEdBQU8rSCxFQUFLYyxZQUFZQyxRQUFRSSxZQUNoQ3lILEtBQ1d4UCxFQUFBLEVBQUE0SSxFQUFBaEMsRUFBS2lFLFVBQUw3SyxFQUFBNEksRUFBQTdJLE9BQUFDLElBQWMsQ0FBMUIsR0FBTXlLLEdBQUU3QixFQUFBNUksRUFDVCxJQUFLeUssRUFBRzZDLGFBQ0osSUFBb0IsR0FBQXpFLEdBQUEsRUFBQTRHLEVBQUE1USxFQUFBZ0ssRUFBQTRHLEVBQUExUCxPQUFBOEksSUFBSSxDQUFuQixHQUFNRixHQUFLOEcsRUFBQTVHLEVBQ1osSUFBS0YsRUFBTTNILEtBQU95SixFQUFHekosR0FBSSxDQUNyQjJILEVBQU1wSixXQUFha0wsRUFBR29ELGFBQ3RCMkIsRUFBUTFHLE1BQU1vRCxJQUFLdkQsRUFBTTNILEdBQUl6QixVQUFXb0osRUFBTXBKLFdBQzlDLFNBS2hCcUgsRUFBS2MsWUFBWUMsUUFBUStILGlCQUFpQkYsSUFFdkNuVCxLQUFBc1QsZUFBaUIsU0FBQzNELEVBQVk0RCxFQUFjNU8sR0FFL0MsSUFBb0IsR0FEZG5DLEdBQU8rSCxFQUFLYyxZQUFZQyxRQUFRSSxZQUNsQi9ILEVBQUEsRUFBQTZQLEVBQUFoUixFQUFBbUIsRUFBQTZQLEVBQUE5UCxPQUFBQyxJQUFJLENBQW5CLEdBQU0ySSxHQUFLa0gsRUFBQTdQLEVBQ1osSUFBSzJJLEVBQU0zSCxLQUFPQSxFQUFLLENBQ25CMkgsRUFBTUssT0FBUzRHLENBQ2YsUUFHUmhKLEVBQUsrQixNQUFNekIsV0FDWE4sRUFBS2MsWUFBWUMsUUFBUW1JLFdBQVc5TyxFQUFJNE8sR0FDeEM1RCxFQUFNK0QsbUJBRUgxVCxLQUFBdVAsdUJBQXlCLFNBQUNJLEdBQzdCLEdBQU0xSSxHQUFRMEksRUFBTXpILE9BQ2R2QyxFQUFTc0IsRUFBTXdJLGNBQ2ZrRSxFQUFNMU0sRUFBTXBGLE1BQU15TSxhQUN4QixJQUFLcUYsSUFBUXBKLEVBQUt3RCxlQUFsQixDQUdBeEQsRUFBS3dELGVBQWlCNEYsQ0FDdEIsSUFBSUMsSUFBa0IsQ0FDdEJqTyxHQUFPZSxVQUFVRyxJQUFJLGVBQ1RwRCxLQUFSa1EsR0FBNkIsT0FBUkEsR0FBK0IsS0FBZkEsRUFBSUUsU0FDekNELEdBQWtCLEdBRXRCNUosV0FBVyxXQUNENEosRUFHRnJKLEVBQUt1Six5QkFGTHZKLEVBQUt3SiwwQkFBMEJKLEdBSW5DcEosRUFBS3NFLHlCQUNMdEUsRUFBSzRGLHdCQUF1QixHQUM1QnhLLEVBQU9lLFVBQVVDLE9BQU8sWUFDekIsS0FxREMzRyxLQUFBOFQsdUJBQXlCLFdBRTdCLElBQWlCLEdBQUFuUSxHQUFBLEVBQUE0SSxFQUFBaEMsRUFBS2lFLFVBQUw3SyxFQUFBNEksRUFBQTdJLE9BQUFDLElBQWMsQ0FBMUIsR0FBTXlLLEdBQUU3QixFQUFBNUksRUFDVCxLQUFJeUssRUFBRzRGLGtCQUlINUYsRUFBRzZDLGVBQ0g3QyxFQUFHZ0MsV0FBWSxFQUNmdkMsRUFBQXBJLFNBQVNnQixLQUFLMkgsRUFBR1csaUJBQ1pYLEVBQUdXLGdCQUFnQnJJLFVBQVVtTCxTQUFTLGFBQ3ZDaEUsRUFBQXBJLFNBQVNlLGdCQUFnQjRILEVBQUdXLGdCQUFpQixRQUU3Q2xCLEVBQUFwSSxTQUFTZSxnQkFBZ0I0SCxFQUFHVyxnQkFBaUIsV0FHL0NYLEVBQUc2QyxjQUFlLENBQ3BCLElBQU03QyxFQUFHb0UsaUJBQW1CcEUsRUFBR21FLGVBQWlCLENBQzdCbkUsRUFBR1csZ0JBQWdCVSxjQUNML0ksVUFBVW1MLFNBQVMsaUJBRTVDekQsRUFBR2dDLFdBQVksRUFDZnZDLEVBQUFwSSxTQUFTbUIsS0FBS3dILEVBQUdXLGdCQUFnQlUsaUJBRWpDckIsRUFBR2dDLFdBQVksRUFDZnZDLEVBQUFwSSxTQUFTZ0IsS0FBSzJILEVBQUdXLGdCQUFnQlUsZUFFckMsVUFFSixHQUFLckIsRUFBR29FLGVBQWlCLENBQ3JCcEUsRUFBR2dDLFdBQVksRUFDZnZDLEVBQUFwSSxTQUFTZ0IsS0FBSzJILEVBQUdXLGdCQUFnQlUsY0FDakMsVUFFSixHQUFLckIsRUFBR21FLGVBQWlCLENBQ3JCbkUsRUFBR2dDLFdBQVksRUFDZnZDLEVBQUFwSSxTQUFTbUIsS0FBS3dILEVBQUdXLGdCQUFnQlUsY0FDakMsY0FLUnpQLEtBQUErVCwwQkFBNEIsU0FBQ0osR0FJakMsSUFBaUIsR0FIYnRCLEdBQ0E0QixFQUNBQyxFQUNhdlEsRUFBQSxFQUFBNEksRUFBQWhDLEVBQUtpRSxVQUFMN0ssRUFBQTRJLEVBQUE3SSxPQUFBQyxJQUFjLENBQTFCLEdBQU15SyxHQUFFN0IsRUFBQTVJLEVBQ1QsS0FBSXlLLEVBQUc0RixrQkFJSDVGLEVBQUc2QyxlQUVIb0IsRUFBWWpFLEVBQ1o2RixHQUFtQixFQUNuQkMsR0FBbUIsRUFDbkI5RixFQUFHZ0MsV0FBWSxFQUNmdkMsRUFBQXBJLFNBQVNlLGdCQUFnQjRILEVBQUdXLGdCQUFpQixTQUM3Q2xCLEVBQUFwSSxTQUFTbUIsS0FBS3dILEVBQUdXLGlCQUdiWCxFQUFHMUosTUFBTTRKLGNBQWMyRCxRQUFRMEIsSUFBUSxJQUN2Q00sR0FBbUIsS0FJdEJBLEdBQW9CQyxLQUNyQjdCLEVBQVVqQyxXQUFZLEVBQ3RCdkMsRUFBQXBJLFNBQVNlLGdCQUFnQjZMLEVBQVV0RCxnQkFBaUIsUUFDcERsQixFQUFBcEksU0FBU2dCLEtBQUs0TCxFQUFVdEQsbUJBR3RCWCxFQUFHNkMsY0FBZ0I3QyxFQUFHdUMsZ0JBQWtCMEIsR0FFMUMsR0FBSzRCLEVBQ0c3RixFQUFHbUUsZ0JBQWtCbkUsRUFBR29FLGdCQUN4QnBFLEVBQUdnQyxXQUFZLEVBQ2Z2QyxFQUFBcEksU0FBU21CLEtBQUt3SCxFQUFHVyxnQkFBZ0JVLGlCQUVqQ3JCLEVBQUdnQyxXQUFZLEVBQ2Z2QyxFQUFBcEksU0FBU2dCLEtBQUsySCxFQUFHVyxnQkFBZ0JVLG9CQUVsQyxDQUlILEdBQUlyQixFQUFHb0UsZ0JBQWtCcEUsRUFBR21FLGVBQ3hCLFFBRUFuRSxHQUFHMUosTUFBTTRKLGNBQWMyRCxRQUFRMEIsSUFBUSxHQUN2Q3ZGLEVBQUdnQyxXQUFZLEVBQ2Z2QyxFQUFBcEksU0FBU2dCLEtBQUsySCxFQUFHVyxnQkFBZ0JVLGVBQ2pDeUUsR0FBbUIsSUFFbkI5RixFQUFHZ0MsV0FBWSxFQUNmdkMsRUFBQXBJLFNBQVNtQixLQUFLd0gsRUFBR1csZ0JBQWdCVSxtQkF6Z0JqRHpQLEtBQUtxTCxZQUFjQSxFQUNuQnJMLEtBQUt5UCxjQUFnQjVKLEVBQ3JCN0YsS0FBS3NNLE1BQVFBLEVBQ2J0TSxLQUFLNE8sWUFBYzVPLEtBQUt5UCxjQUFjdkUsaUJBQWlCLGVBQWUsR0FDdEVsTCxLQUFLaVAsZ0JBQWtCalAsS0FBS3lQLGNBQWN2RSxpQkFBaUIsaUJBQWlCLEdBQzVFbEwsS0FBS29QLGNBQWdCcFAsS0FBS3lQLGNBQWN2RSxpQkFBaUIsZUFBZSxHQUN4RWxMLEtBQUtzUCxjQUFnQnRQLEtBQUt5UCxjQUFjdkUsaUJBQWlCLHdCQUF3QixHQUNqRmxMLEtBQUt3TyxhQUNMeE8sS0FBS3lPLGNBQ0x6TyxLQUFLOE8sY0FBZ0IsS0FDckI5TyxLQUFLOFEsYUFBZSxLQXFnQjVCLE1BQUExRixLQXRpQmExTCxHQUFBMEwsYTVCeWpEUCxTQUFVekwsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEc2Qm5rRHRELElBQUFnTSxHQUFBek4sRUFBQSxJQUVBK1QsRUFBQS9ULEVBQUEsSUFFQW1PLEVBQUEsV0FtQkksUUFBQUEsR0FBWTFJLEVBQW1Cb0ksRUFBaUJDLEdBQWhELEdBQUEzRCxHQUFBdkssSUF3Q09BLE1BQUF3TCxLQUFPLFdBQ1ZqQixFQUFLd0UsZ0JBQWdCQyxVQUFZLEVBQzVCekUsRUFBS3dFLGdCQUFnQjVJLGFBQWEsU0FDbkNvRSxFQUNLd0UsZ0JBQ0F6SSxhQUFhLE9BQVEsWUFFOUJpRSxFQUNLd0UsZ0JBQ0FHLGlCQUFpQixVQUFXM0UsRUFBSzZKLGNBQWMzSixLQUFLRixJQUN6REEsRUFDS3dFLGdCQUNBRyxpQkFBaUIsUUFBUzNFLEVBQUs4SixZQUFZNUosS0FBS0YsSUFDckRBLEVBQ0t3RSxnQkFDQUcsaUJBQWlCLFFBQVMzRSxFQUFLK0osWUFBWTdKLEtBQUtGLElBQ3JEQSxFQUNLd0UsZ0JBQ0FHLGlCQUFpQixPQUFRM0UsRUFBS2dLLFdBQVc5SixLQUFLRixJQUUvQ0EsRUFBSzBHLGNBQ0wxRyxFQUNLd0UsZ0JBQ0EzSCxrQkFDQThILGlCQUFpQixZQUFhM0UsRUFBS2lLLGdCQUFnQi9KLEtBQUtGLElBQzdEQSxFQUNLd0UsZ0JBQ0EzSCxrQkFDQThILGlCQUFpQixXQUFZM0UsRUFBS2tLLGVBQWVoSyxLQUFLRixNQUUzREEsRUFDS3dFLGdCQUNBRyxpQkFBaUIsWUFBYTNFLEVBQUtpSyxnQkFBZ0IvSixLQUFLRixJQUM3REEsRUFDS3dFLGdCQUNBRyxpQkFBaUIsV0FBWTNFLEVBQUtrSyxlQUFlaEssS0FBS0YsS0FFM0RBLEVBQUttSyxrQkFDTG5LLEVBQUttSyxnQkFBZ0J4RixpQkFBaUIsUUFBUzNFLEVBQUtvSyxrQkFDcERwSyxFQUFLbUssZ0JBQWdCeEYsaUJBQWlCLFVBQVczRSxFQUFLcUssb0JBSXZENVUsS0FBQTJMLFFBQVUsV0FDYixHQUFNcEUsR0FBVWdELEVBQUt3RSxnQkFBZ0J2SCxXQUFVLEVBQy9DK0MsR0FBS3dFLGdCQUFnQmpKLFdBQVcyQixhQUFhRixFQUFTZ0QsRUFBS3dFLGlCQUMzRHhFLEVBQUt3RSxnQkFBa0IsTUFHcEIvTyxLQUFBd1IsV0FBYSxXQUNoQixRQUFJakgsRUFBSzBHLGNBQ0VwRCxFQUFBcEksU0FBU2MsZUFBZWdFLEVBQUt3RSxrQkFJckMvTyxLQUFBMlUsaUJBQW1CLFNBQUNoRixHQUNSQSxFQUFNekgsT0FDVnhCLFVBQVVtTCxTQUFTLGNBQzFCdEgsRUFBSzBELEtBQUtxRixlQUFlM0QsR0FBTyxFQUFPcEYsRUFBSzVGLElBRTVDNEYsRUFBSzBELEtBQUtxRixlQUFlM0QsR0FBTyxFQUFNcEYsRUFBSzVGLEtBRzVDM0UsS0FBQTRVLGlCQUFtQixTQUFDakYsR0FDdkIsR0FBTXpILEdBQVN5SCxFQUFNekgsTUFDckIsUUFBUXlILEVBQU1rRixTQUNWLElBQUtWLEdBQUFXLFNBQVNDLE1BQ2QsSUFBS1osR0FBQVcsU0FBU0UsT0FDTjlNLEVBQU94QixVQUFVbUwsU0FBUyxjQUMxQnRILEVBQUswRCxLQUFLcUYsZUFBZTNELEdBQU8sRUFBT3BGLEVBQUs1RixJQUU1QzRGLEVBQUswRCxLQUFLcUYsZUFBZTNELEdBQU8sRUFBTXBGLEVBQUs1RixJQU12RGdMLEVBQU0rRCxtQkFFSDFULEtBQUFvVSxjQUFnQixTQUFDekUsR0FLcEIsUUFBQXNGLEdBQThCQyxHQUMxQixNQUFzQixLQUFmQSxFQUFJeFIsUUFBZ0J3UixFQUFJQyxNQUFNLE1BRXpDLFFBQUFDLEdBQTRCQyxHQUNYLE1BQVR0RCxHQUNBc0QsRUFDS3BILEtBQ0FtRCxzQkFBc0JpRSxHQUMzQkMsR0FBTyxHQUVITCxFQUFxQmxELEtBQ3JCc0QsRUFDS3BILEtBQ0E2RCx5QkFBeUJ1RCxFQUFNdEQsR0FDcEN1RCxHQUFPLEdBbEJuQixHQUNJQSxJQURRM0YsRUFBTTRGLGVBQ1AsR0FDTHhELEVBQU9wQyxFQUFNRSxHQXVCbkIsSUFGQXRGLEVBQUtpTCxrQkFBbUIsSUFFcEI3RixFQUFNQyxRQUFVRCxFQUFNOEYsU0FBVzlGLEVBQU0rRixTQUEzQyxDQUlBLEdBQUkvRixFQUFNZ0csU0FDRmhHLEVBQU1rRixVQUFZVixFQUFBVyxTQUFTQyxPQUFTcEYsRUFBTWtGLFVBQVlWLEVBQUFXLFNBQVNFLFFBQy9EckYsRUFBTStELGtCQUNObkosRUFBS2lMLGtCQUFtQixHQUVwQlAsRUFBcUJsRCxJQUNyQnFELEVBQW1CN0ssT0FJM0IsUUFBUW9GLEVBQU1rRixTQUNWLElBQUtWLEdBQUFXLFNBQVNDLE1BQ2QsSUFBS1osR0FBQVcsU0FBU0UsT0FDVk0sR0FBTyxFQUNIL0ssRUFBSzBHLGFBQ0QxRyxFQUFLaUgsYUFDTGpILEVBQ0swRCxLQUNBcUQsaUJBQWlCL0csR0FBTSxHQUU1QkEsRUFDSzBELEtBQ0E4QyxlQUFleEcsR0FBTSxJQUd6QkEsRUFBS2lJLGdCQUNOakksRUFDSzBELEtBQ0FtRSxlQUFlN0gsRUFBS29HLGVBRXhCcEcsRUFBS2dJLGdCQUNOaEksRUFDSzBELEtBQ0F3RSxlQUFlbEksRUFBS29HLGVBRXhCcEcsRUFBS3FMLFNBQ05yTCxFQUNLMEQsS0FDQTBFLGtCQUFrQnBJLEdBRy9CLE1BRUosS0FBSzRKLEdBQUFXLFNBQVNlLEdBQ1Z0TCxFQUNLMEQsS0FDQXVDLHVCQUF1QmpHLEdBQzVCK0ssR0FBTyxDQUNQLE1BRUosS0FBS25CLEdBQUFXLFNBQVNnQixLQUNWdkwsRUFDSzBELEtBQ0FvQyxtQkFBbUI5RixHQUN4QitLLEdBQU8sQ0FDUCxNQUVKLEtBQUtuQixHQUFBVyxTQUFTaUIsTUFDTnhMLEVBQUswRyxlQUNEMUcsRUFBS2lILGFBQ0xqSCxFQUNLMEQsS0FDQW9DLG1CQUFtQjlGLEdBRXhCQSxFQUNLMEQsS0FDQThDLGVBQWV4RyxHQUFNLElBR2xDK0ssR0FBTyxDQUNQLE1BRUosS0FBS25CLEdBQUFXLFNBQVNrQixLQUNOekwsRUFBSzBHLGNBQWdCMUcsRUFBS2lILGNBQzFCakgsRUFDSzBELEtBQ0FxRCxpQkFBaUIvRyxHQUFNLEdBQzVCK0ssR0FBTyxHQUVIL0ssRUFBSzBMLFVBQ0wxTCxFQUNLMEQsS0FDQXlDLHFCQUFxQm5HLEdBQzFCK0ssR0FBTyxFQUdmLE1BRUosS0FBS25CLEdBQUFXLFNBQVNvQixLQUNWM0wsRUFDSzBELEtBQ0EyQyxzQkFDTDBFLEdBQU8sQ0FDUCxNQUVKLEtBQUtuQixHQUFBVyxTQUFTcUIsSUFDVjVMLEVBQ0swRCxLQUNBNEMscUJBQ0x5RSxHQUFPLENBQ1AsTUFFSixTQUNRTCxFQUFxQmxELElBQ3JCcUQsRUFBbUI3SyxHQUsvQitLLElBQ0EzRixFQUFNK0Qsa0JBQ04vRCxFQUFNRyxvQkFJUDlQLEtBQUFxVSxZQUFjLFNBQUMxRSxJQUdkQSxFQUFNekgsU0FBV3FDLEVBQUt3RSxpQkFDakJsQixFQUFBcEksU0FBU00sbUJBQW1Cd0UsRUFBS3dFLGdCQUFnQjNILGtCQUFtQnVJLEVBQU16SCxXQUkvRXFDLEVBQUswRyxjQUNEMUcsRUFBS2lILGFBQ0xqSCxFQUNLMEQsS0FDQXFELGlCQUFpQi9HLEdBQU0sR0FFNUJBLEVBQ0swRCxLQUNBOEMsZUFBZXhHLEdBQU0sR0FFOUJvRixFQUFNK0Qsb0JBRURuSixFQUFLaUksZ0JBQ05qSSxFQUNLMEQsS0FDQW1FLGVBQWU3SCxFQUFLb0csZUFFeEJwRyxFQUFLZ0ksZ0JBQ05oSSxFQUNLMEQsS0FDQXdFLGVBQWVsSSxFQUFLb0csZUFFeEJwRyxFQUFLcUwsU0FDTnJMLEVBQ0swRCxLQUNBMEUsa0JBQWtCcEksR0FFM0JvRixFQUFNK0Qsa0JBQ04vRCxFQUFNRyxvQkFJUDlQLEtBQUFzVSxZQUFjLFNBQUMzRSxHQUNsQixHQUFJOUosR0FBZ0IwRSxFQUFLd0UsZUFDckJ4RSxHQUFLMEcsZUFDTHBMLEVBQU9BLEVBQUt1QixtQkFFaEJ2QixFQUNLYSxVQUNBRyxJQUFJLFVBR043RyxLQUFBdVUsV0FBYSxTQUFTNUUsR0FDekIsR0FBSTlKLEdBQU83RixLQUFLK08sZUFDWi9PLE1BQUtpUixlQUNMcEwsRUFBT0EsRUFBS3VCLG1CQUVoQnZCLEVBQ0thLFVBQ0FDLE9BQU8sVUFHVDNHLEtBQUF3VSxnQkFBa0IsU0FBQzdFLEdBQ1BBLEVBQU00RixjQUNkN08sVUFBVUcsSUFBSSxVQUdsQjdHLEtBQUF5VSxlQUFpQixTQUFDOUUsR0FDTkEsRUFBTTRGLGNBQ2Q3TyxVQUFVQyxPQUFPLFVBMVV4QmQsRUFBS21KLFVBQVksRUFDakJoUCxLQUFLaU8sS0FBT0EsRUFDWmpPLEtBQUsyUSxjQUFnQnpDLEVBQ3JCbE8sS0FBSytPLGdCQUFrQmxKLEVBSXZCN0YsS0FBS3dWLGtCQUFtQixFQU14QnhWLEtBQUswVSxnQkFBa0IxVSxLQUFLK08sZ0JBQWdCM0gsa0JBQWtCZ1AsY0FBYyx1QkFDNUVwVyxLQUFLMkUsR0FBS2tCLEVBQUtNLGFBQWEsZ0JBQzVCbkcsS0FBSzBFLE1BQVFtQixFQUFLTSxhQUFhLG1CQUMvQm5HLEtBQUtpVCxTQUFXcE4sRUFBS00sYUFBYSxrQkFDbENuRyxLQUFLa1QsUUFBcUQsU0FBM0NyTixFQUFLTSxhQUFhLHFCQUNqQ25HLEtBQUtnVSxnQkFBcUUsU0FBbkRuTyxFQUFLTSxhQUFhLDZCQUN6Q25HLEtBQUt3UyxlQUFpQjNNLEVBQUthLFVBQVVtTCxTQUFTLGtCQUM5QzdSLEtBQUt1UyxlQUFpQjFNLEVBQUthLFVBQVVtTCxTQUFTLGtCQUM5QzdSLEtBQUs0VixRQUF5QyxVQUEvQi9QLEVBQUt3USxRQUFRL0gsY0FDNUJ0TyxLQUFLaVIsY0FBZSxFQUNwQmpSLEtBQUtvUSxXQUFZLEVBQ2pCcFEsS0FBS2lXLFNBQVUsRUFDWC9ILElBQ0FsTyxLQUFLaVcsU0FBVSxFQUduQixLQURBLEdBQUk5SCxHQUFPdEksRUFBS3VCLGtCQUNUK0csR0FBTSxDQUNULEdBQW1DLE9BQS9CQSxFQUFLa0ksUUFBUS9ILGNBQXdCLENBQ3JDSCxFQUFLN0gsYUFBYSxPQUFRLFNBQzFCdEcsS0FBS2lSLGNBQWUsQ0FDcEIsT0FFSjlDLEVBQU9BLEVBQUtRLG9CQXlTeEIsTUFBQUosS0FoV2E3TyxHQUFBNk8saUI3Qm01RFAsU0FBVTVPLEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxJOEI1NUR6Q25DLEVBQUFvVixTQUFXOVQsT0FBT3NWLFFBQzNCdEIsT0FBUSxHQUNSRCxNQUFPLEdBQ1B3QixPQUFRLEdBQ1JDLFNBQVUsR0FDVkwsSUFBSyxHQUNMRCxLQUFNLEdBQ05GLEtBQU0sR0FDTkgsR0FBSSxHQUNKRSxNQUFPLEdBQ1BELEtBQU0sTTlCdzZESixTQUFVblcsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEcrQm43RHRELElBQUErSixHQUFBLFdBb0JJLFFBQUFBLEdBQVl0QixHQUFaLEdBQUFDLEdBQUF2SyxJQUVJLElBcEJJQSxLQUFBeVcscUJBQ0pDLGNBQWUsSUFDZnhULFdBQVcsRUFDWHFJLGlCQUFrQixLQUNsQkcsZUFDQTlJLFNBQVUrVCxLQUFLQyxNQUE0QixVQUFyQixFQUFJRCxLQUFLRSxXQUF1QjlELFdBQ3REdk8sZ0JBQWlCLEVBRWpCNk8saUJBQWtCLFNBQUN5RCxLQUduQjlELGVBQWdCLFNBQUNuRCxFQUFhaE8sRUFBZStRLEtBRzdDYSxXQUFZLFNBQUM1RCxFQUFhMEQsTUFXdEJ2VCxLQUFBK1csY0FBZ0IsU0FBQ0MsR0FDckIsTUFBT3pNLEdBQUtELFFBQVUyTSxPQUFPQyxVQUFXM00sRUFBS2tNLG9CQUFxQk8sSUFQbEVoWCxLQUFLK1csY0FBY3pNLEdBQ2MsT0FBN0JBLEVBQVFpQixpQkFDUixLQUFNLElBQUlsRixPQUFNLG1EQU81QixNQUpJckYsUUFBQUMsZUFBVzJLLEVBQUFuSyxVQUFBLFcvQnc3RFBMLEkrQng3REosV0FBcUMsTUFBT3BCLE1BQUtzSyxTL0J5N0Q3Q25KLFlBQVksRUFDWkQsY0FBYyxJK0J0N0R0QjBLLElBOUJhbE0sR0FBQWtNLG9CL0JrK0RQLFNBQVVqTSxFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sR2dDeCtEdEQsSUFBQXNWLEdBQUEvVyxFQUFBLElBRUFnWCxFQUFBaFgsRUFBQSxJQUVBaVgsRUFBQWpYLEVBQUEsSUFDQWtYLEVBQUFsWCxFQUFBLElBRUFtWCxFQUFBLFdBS0ksUUFBQUEsR0FBWWpOLEdBQVosR0FBQUMsR0FBQXZLLElBRFFBLE1BQUF3SyxnQkFXRHhLLEtBQUF5SyxLQUFRLFNBQUMrTSxHQUNaeE4sV0FBVyxXQUNQLEdBQU15TixHQUFpQmxOLEVBQUtJLGdCQUFnQkYsS0FBSytNLEVBQ2pEak4sR0FBS21OLGNBQWNDLEtBQUtGLElBQ3pCLElBRUF6WCxLQUFBMkwsUUFBVyxlQUNjbEksS0FBdkI4RyxFQUFLbU4sZUFDTm5OLEVBQUttTixjQUFjcFEsTUFFdkJpRCxFQUFLQyxhQUFhb04sUUFBUSxTQUFDQyxPQUNQcFUsS0FBWm9VLE9BQWdEcFUsS0FBdkJvVSxFQUFRQyxZQUNqQ0QsRUFBUUMsZ0JBckJoQjlYLEtBQUtxTCxZQUFlLEdBQUlnTSxHQUFBVSxrQkFBa0J6TixHQUMxQ3RLLEtBQUswWCxjQUFnQlQsT0FBTzNNLEVBQVFpQixrQkFDcEN2TCxLQUFLMkssZ0JBQWtCLEdBQUl5TSxHQUFBWSxzQkFBc0JoWSxLQUFLcUwsYUFDdERyTCxLQUFLd0ssYUFBYWlDLEtBQUssR0FBSTZLLEdBQUFXLG9CQUFvQmpZLEtBQUswWCxjQUFlMVgsS0FBS3FMLGNBQ3hFckwsS0FBS3dLLGFBQWFpQyxLQUFLLEdBQUkwSyxHQUFBZSx1QkFDM0JsWSxLQUFLd0ssYUFBYW9OLFFBQVEsU0FBQ0MsR0FDdkJBLEVBQVFNLHVCQW1CcEIsTUFBQVosS0EvQmE3WCxHQUFBNlgsVWhDK2dFUCxTQUFVNVgsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEdpQzFoRXRELElBQUFxVyxHQUFBLG1CQUFBQSxLQUFBLEdBQUEzTixHQUFBdkssSUFFV0EsTUFBQW1ZLG1CQUFxQixXQUN4QmxCLE9BQU8vUCxVQUFVa1IsR0FBRyxVQUFXN04sRUFBSzhOLGdCQUVqQ3JZLEtBQUFzWSxTQUFXLFdBQ2QsS0FBTSxJQUFJalMsT0FBTSw0QkFFYnJHLEtBQUF1WSxnQkFBa0IsU0FBQzVJLEtBSW5CM1AsS0FBQXdZLFdBQWEsV0FDaEJ2QixPQUFPL1AsVUFBVUksSUFBSSxVQUFXaUQsRUFBSzhOLGdCQUdqQ3JZLEtBQUFxWSxjQUFnQixTQUFDMUksR0FDakJBLEVBQU1DLFFBQTBCLE1BQWRELEVBQU1FLE1BQ3hCRixFQUFNRyxpQkFDTm1ILE9BQU8sZ0NBQWdDbEgsVUFHbkQsTUFBQW1JLEtBRVF4WSxHQUFBd1kseUJqQ3FpRUYsU0FBVXZZLEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxHa0Noa0V0RCxJQUFBNFcsR0FBQXJZLEVBQUEsSUFJQTRYLEVBQUEsV0FLSSxRQUFBQSxHQUFvQjNNLEdBQXBCLEdBQUFkLEdBQUF2SyxJQUFvQkEsTUFBQXFMLGNBT1pyTCxLQUFBbU0scUJBQXVCLFNBQUNxTCxHQUU1QixJQUFvQixHQURkcEwsTUFDY3pJLEVBQUEsRUFBQStVLEVBQUFsQixFQUFBN1QsRUFBQStVLEVBQUFoVixPQUFBQyxJQUNsQixJQUEwQixHQURqQjJJLEdBQUtvTSxFQUFBL1UsR0FDWTRJLEVBQUEsRUFBQUMsRUFBQWpDLEVBQUtjLFlBQVlDLFFBQVFxTixhQUF6QnBNLEVBQUFDLEVBQUE5SSxPQUFBNkksSUFBcUMsQ0FBMUQsR0FBTWIsR0FBV2MsRUFBQUQsRUFDcEIsSUFBSWIsRUFBWS9HLEtBQU8ySCxFQUFNM0gsR0FBSSxDQUMvQnlILEVBQVlLLE1BQ1Z2SixVQUFXd0ksRUFBWXhJLFVBQ3ZCd0osWUFBYUosRUFBTUksWUFDbkJuSixZQUFhK0ksRUFBTS9JLFlBQ25Cb0IsR0FBSStHLEVBQVkvRyxHQUNoQjlELEtBQU02SyxFQUFZN0ssS0FDbEJxTCxNQUFPUixFQUFZUSxNQUNuQlMsT0FBUWpCLEVBQVlpQixPQUNwQi9ILEtBQU04RyxFQUFZOUcsTUFFcEIsUUFJTixNQUFPd0gsSUF6QlBwTSxLQUFLNFksaUNBQW1DSCxFQTJCaEQsTUF6QldULEdBQUF2VyxVQUFBZ0osS0FBUCxTQUFZK00sR0FDUixHQUFNcUIsR0FBZ0I3WSxLQUFLbU0scUJBQXFCcUwsRUFDaEQsT0FBT3hYLE1BQUs0WSxrQ0FBa0NwQixRQUFTcUIsS0F1Qi9EYixJQWpDYXRZLEdBQUFzWSx5QmxDMm1FUCxTQUFVclksRUFBUUQsRUFBU1UsR21DaG5FakMsUUFBQTJELEdBQUFDLEdBQXlCLE1BQUFBLE9BQUExQyxXQUFBMEMsRUFBQSxRQUFBQSxHQUR6QixHQUFBaEMsR0FBQTVCLEVBQUEsRUFFQVQsR0FBQUQsU0FBQXNDLEVBQUEsU0FBQUEsR0FBQUMsVUFBaUVnQyxFQUFBLFNBQUE3QixFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBMEIsRUFBQUMsR0FDakUsR0FBQTFCLEVBRUEsOFhBQzRQLE9BQTVQQSxFQUFBSCxFQUFBeUMsS0FBQXRFLEtBQUEsTUFBQTRCLElBQUFELEVBQUFpQyxnQkFBeUYsTUFBQWhDLElBQUFtVixRQUFBblYsR0FBOEN4QixLQUFBLE9BQUE0RCxRQUF1Qk8sR0FBQTVDLEVBQUE2QyxRQUFBLEVBQUF6QyxFQUFBLEVBQUEwQixFQUFBQyxHQUFBZSxRQUFBOUMsRUFBQStDLEtBQUEzQyxVQUE4RkMsRUFBQSxJQUM1UCw2QkFDQzJLLEVBQUEsU0FBQWhMLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUEwQixFQUFBQyxHQUNELEdBQUExQixHQUFBMkIsRUFBQSxNQUFBL0IsSUFBQUQsRUFBQWlDLGVBRUEseUpBQ0FqQyxFQUFBTSxpQkFBQU4sRUFBQU8sT0FBQSxNQUFBTixJQUFBeEIsS0FBQXdCLE1BQ0EsYUFDK00sT0FBL01JLEVBQUFILEVBQUF5QyxLQUFBdEUsS0FBQTJELEVBQUEsTUFBQS9CLElBQUFrQixZQUFBbEIsR0FBMEZ4QixLQUFBLE9BQUE0RCxRQUF1Qk8sR0FBQTVDLEVBQUE2QyxRQUFBLEVBQUF6QyxFQUFBLEVBQUEwQixFQUFBQyxHQUFBZSxRQUFBOUMsRUFBQStDLEtBQUEzQyxVQUE4RkMsRUFBQSxLQUNBLE9BQS9NQSxFQUFBSCxFQUFBeUMsS0FBQXRFLEtBQUEyRCxFQUFBLE1BQUEvQixJQUFBcUssWUFBQXJLLEdBQTBGeEIsS0FBQSxPQUFBNEQsUUFBdUJPLEdBQUE1QyxFQUFBNkMsUUFBQSxFQUFBekMsRUFBQSxFQUFBMEIsRUFBQUMsR0FBQWUsUUFBQTlDLEVBQUErQyxLQUFBM0MsVUFBOEZDLEVBQUEsSUFDL00sMENBQ0MwSyxFQUFBLFNBQUEvSyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBMEIsRUFBQUMsR0FDRCxHQUFBQyxHQUFBaEMsRUFBQU8sT0FBQTJCLEVBQUFsQyxFQUFBTSxnQkFFQSwyREFDQTRCLEVBQUFGLEVBQUEsTUFBQS9CLElBQUFxQyxNQUFBckMsTUFDQSxPQUNBaUMsRUFBQUYsRUFBQSxNQUFBL0IsSUFBQXhCLEtBQUF3QixNQUNBLG9KQUNBaUMsRUFBQUYsRUFBQSxNQUFBRCxFQUFBLEdBQUFBLEVBQUEsR0FBQVEsR0FBQVIsRUFBQSxHQUFBOUIsSUFDQSxNQUNBaUMsRUFBQUYsRUFBQSxNQUFBL0IsSUFBQXFDLE1BQUFyQyxNQUNBLE1BQ0FpQyxFQUFBRixFQUFBLE1BQUFELEVBQUEsR0FBQUEsRUFBQSxHQUFBUyxLQUFBVCxFQUFBLEdBQUE5QixJQUNBLDJCQUNBaUMsRUFBQVAsRUFBQTNELEVBQUEsSUFBQUssS0FBQSxNQUFBNEIsSUFBQUQsRUFBQWlDLGdCQUFpTSxNQUFBRixFQUFBLEdBQUFBLEVBQUEsR0FBQVMsS0FBQVQsRUFBQSxTQUFBOUIsSUFBQXFDLE1BQUFyQyxHQUE2RnhCLEtBQUEsb0JBQUE0RCxRQUFvQ2pDLFVBQ2xVLCtGQUNDNkssRUFBQSxTQUFBakwsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQTBCLEVBQUFDLEdBQ0QsR0FBQUMsR0FBQWhDLEVBQUFPLE9BQUEyQixFQUFBbEMsRUFBQU0sZ0JBRUEscUVBQ0E0QixFQUFBRixFQUFBLE1BQUEvQixJQUFBeEIsS0FBQXdCLE1BQ0Esb0pBQ0FpQyxFQUFBRixFQUFBLE1BQUFELEVBQUEsR0FBQUEsRUFBQSxHQUFBUSxHQUFBUixFQUFBLEdBQUE5QixJQUNBLE1BQ0FpQyxFQUFBRixFQUFBLE1BQUEvQixJQUFBcUMsTUFBQXJDLE1BQ0EsTUFDQWlDLEVBQUFGLEVBQUEsTUFBQUQsRUFBQSxHQUFBQSxFQUFBLEdBQUFTLEtBQUFULEVBQUEsR0FBQTlCLElBQ0Esa0NBQ0FpQyxFQUFBUCxFQUFBM0QsRUFBQSxLQUFBSyxLQUFBLE1BQUE0QixJQUFBRCxFQUFBaUMsZ0JBQXFMLE1BQUFoQyxJQUFBeVcsSUFBQXpXLEVBQUEsTUFBQUEsSUFBQTBXLElBQUExVyxFQUFBLE1BQUE4QixFQUFBLEdBQUFBLEVBQUEsR0FBQVMsS0FBQVQsRUFBQSxJQUFrSXRELEtBQUEsUUFBQTRELFFBQXdCakMsVUFDL1UsK0ZBQ0NOLFVBQUEsY0FBQUMsS0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBMEIsRUFBQUMsR0FDRCxHQUFBMUIsRUFFQSxPQUE0UyxRQUE1U0EsRUFBQUgsRUFBQSxHQUFBN0IsS0FBQSxNQUFBNEIsSUFBQUQsRUFBQWlDLGdCQUE2RixPQUFBNUIsRUFBQSxNQUFBSixJQUFBbVYsUUFBQW5WLEdBQUFJLEVBQUFpQixPQUFBakIsR0FBNEY1QixLQUFBLEtBQUE0RCxRQUFxQk8sR0FBQTVDLEVBQUE2QyxRQUFBLEVBQUF6QyxFQUFBLEVBQUEwQixFQUFBQyxHQUFBZSxRQUFBOUMsRUFBQStDLEtBQUEzQyxVQUE4RkMsRUFBQSxJQUMzU1EsU0FBQSxFQUFBbUMsV0FBQSxLbkM0bkVLLFNBQVV6RixFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sR29DbnJFdEQsSUFBQXdELEdBQUFqRixFQUFBLEdBQ000WSxFQUFRLFNBQUNGLEVBQUtDLEVBQUtuVSxHQUNyQixHQUFJc1EsR0FBTSxHQUNOK0QsRUFBU0gsRUFDVEksRUFBU0gsQ0FlYixPQWRhLHVCQUFUblUsUUFDWW5CLEtBQVJxVixHQUE2QixPQUFSQSxHQUF3QixLQUFSQSxJQUNyQ0csRUFBUzVULEVBQU95VCxHQUFLdFQsT0FBTyxvQkFFcEIvQixLQUFSc1YsR0FBNkIsT0FBUkEsR0FBd0IsS0FBUkEsSUFDckNHLEVBQVM3VCxFQUFPMFQsR0FBS3ZULE9BQU8scUJBR3JCL0IsS0FBWHdWLEdBQW1DLE9BQVhBLEdBQThCLEtBQVhBLElBQzNDL0QsR0FBTyxVQUFZK0QsT0FFUnhWLEtBQVh5VixHQUFtQyxPQUFYQSxHQUE4QixLQUFYQSxJQUMzQ2hFLEdBQU8sUUFBVWdFLEdBRWRoRSxFQUdYeFYsR0FBQXlELFFBQWU2VixHcEM2ckVULFNBQVVyWixFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sR3FDcHRFdEQsSUFBQWtXLEdBQUEsV0FhSSxRQUFBQSxHQUFZek4sR0FBWixHQUFBQyxHQUFBdkssSUFFSSxJQWJJQSxLQUFBbVosc0JBQ0p6QyxjQUFlLElBQ2ZuTCxpQkFBa0IsS0FDbEJvTixnQkFDQVMsa0JBQW1CLGFBR25CcEcsZUFBZ0IsU0FBQ25ELEVBQWFoTyxFQUFlK1EsTUFhekM1UyxLQUFBK1csY0FBZ0IsU0FBQ0MsR0FDckIsTUFBUXpNLEdBQUtELFFBQVUyTSxPQUFPQyxVQUFXM00sRUFBSzRPLHFCQUFzQm5DLElBVHBFaFgsS0FBSytXLGNBQWN6TSxHQUNjLE9BQTdCQSxFQUFRaUIsaUJBQ1IsS0FBTSxJQUFJbEYsT0FBTSwrREFTNUIsTUFOSXJGLFFBQUFDLGVBQVc4VyxFQUFBdFcsVUFBQSxXckN5dEVQTCxJcUN6dEVKLFdBQ0ksTUFBT3BCLE1BQUtzSyxTckMydEVabkosWUFBWSxFQUNaRCxjQUFjLElxQ3Z0RXRCNlcsSUF6QmFyWSxHQUFBcVkscUJyQzh2RVAsU0FBVXBZLEVBQVFELEVBQVNVLEdBRWpDLFlBRUEsU0FBUzZKLEdBQVN2SixHQUNkLElBQUssR0FBSWlCLEtBQUtqQixHQUFRaEIsRUFBUWdDLGVBQWVDLEtBQUlqQyxFQUFRaUMsR0FBS2pCLEVBQUVpQixJQUVwRVgsT0FBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLElzQ3h3RXREb0ksRUFBQTdKLEVBQUEsS0FDQTZKLEVBQUE3SixFQUFBLEtBQ0E2SixFQUFBN0osRUFBQSxLQUNBNkosRUFBQTdKLEVBQUEsS0FDQTZKLEVBQUE3SixFQUFBLEtBRUE2SixFQUFBN0osRUFBQSxLQUNBNkosRUFBQTdKLEVBQUEsS0FDQTZKLEVBQUE3SixFQUFBLE10Q2t4RU0sU0FBVVQsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEd1Qzd4RXRELElBQUF3WCxHQUFBalosRUFBQSxJQUVBa1osRUFBQWxaLEVBQUEsSUFFQTJILEVBQUEzSCxFQUFBLEdBRUFtWixFQUFBLFdBQ0ksUUFBQUEsR0FBb0JDLEVBQ0FuTyxFQUNBVixHQUZwQixHQUFBSixHQUFBdkssSUFBb0JBLE1BQUF3WixVQUNBeFosS0FBQXFMLGNBQ0FyTCxLQUFBMkssa0JBMEJaM0ssS0FBQXlaLG9CQUFzQixTQUFDOUosR0FDM0IsR0FBTStKLEdBQUt6QyxPQUFPdEgsRUFBTXpILFFBQ2xCQSxFQUFTd1IsRUFBR0MsR0FBRyxtQkFBcUJELEVBQUtBLEVBQUdFLFFBQVEsbUJBQW1CQyxRQUN2RUMsRUFBVTdDLE9BQU8sSUFBTS9PLEVBQU9ZLEtBQUssbUJBQ3BDZ1IsSUFBV0EsRUFBUXBXLE9BQ3BCb1csRUFBUWpSLFNBQVMsU0FFakJYLEVBQU9XLFNBQVMsU0FFcEI4RyxFQUFNb0ssMkJBQ05wSyxFQUFNK0QsbUJBRUYxVCxLQUFBZ2EscUJBQXVCLFNBQUNySyxHQUM1QixHQUFNK0osR0FBS3pDLE9BQU90SCxFQUFNekgsUUFDbEJBLEVBQVN3UixFQUFHQyxHQUFHLG1CQUFxQkQsRUFBS0EsRUFBR0UsUUFBUSxtQkFBbUJDLFFBQ3ZFQyxFQUFVN0MsT0FBTyxJQUFNL08sRUFBT1ksS0FBSyxtQkFDcENnUixJQUFXQSxFQUFRcFcsT0FDcEJvVyxFQUFRbFIsWUFBWSxTQUVwQlYsRUFBT1UsWUFBWSxTQUV2QitHLEVBQU0rRCxtQkFFRjFULEtBQUFpYSxjQUFnQixTQUFDdEssR0FFckJ1SyxRQUFRQyxJQUFJLG9CQUNaLElBQU1DLEdBQU96SyxFQUFNa0YsU0FBV2xGLEVBQU0wSyxLQUNwQyxPQUFNaEIsRUFBQTNSLGVBQWVHLGFBQWN3UixFQUFBM1IsZUFBZUksYUFDMUN1UixFQUFBM1IsZUFBZUMsVUFBVzBSLEVBQUEzUixlQUFlRSxhQUFjcUssUUFBUW1JLEtBQVUsR0FHakYsT0FBS2YsRUFBQTNSLGVBQWVHLGFBQWN3UixFQUFBM1IsZUFBZUksY0FBY21LLFFBQVFtSSxJQUFTLE1BQzVFN1AsR0FBSytQLHNCQUFzQjNLLElBRzFCMEosRUFBQTNSLGVBQWVDLFVBQVcwUixFQUFBM1IsZUFBZUUsYUFBYXFLLFFBQVFtSSxJQUFTLE1BQ3hFN1AsR0FBS2dRLDBCQUEwQjVLLE9BRG5DLElBS0kzUCxLQUFBdWEsMEJBQTRCLFNBQUM1SyxHQUNqQyxHQUFNeUssR0FBT3pLLEVBQU1rRixTQUFXbEYsRUFBTTBLLEtBQ3BDLE9BQUtoQixFQUFBM1IsZUFBZUMsVUFBVzBSLEVBQUEzUixlQUFlRSxhQUFhcUssUUFBUW1JLEtBQVUsR0FBN0UsQ0FJQUYsUUFBUUMsSUFBSSx1QkFDWixJQUFNVCxHQUFLekMsT0FBT3RILEVBQU16SCxRQUNsQkEsRUFBU3dSLEVBQUdDLEdBQUcsbUJBQXFCRCxFQUFLQSxFQUFHRSxRQUFRLG1CQUFtQkMsT0FFN0UsSUFEQWxLLEVBQU1HLGlCQUNEdUosRUFBQTNSLGVBQWVDLFlBQWN5UyxFQUFPLENBRXJDLEdBQU1JLEdBQWN0UyxFQUFPdVMsUUFBUSxZQUFZWixPQUMvQyxJQUFLVyxFQUFZOVcsT0FFYixXQURBOFcsR0FBWXpLLE9BR2hCLElBQU0ySyxHQUFrQnhTLEVBQU92QyxTQUFTOFUsUUFBUSxZQUFZWixRQUFReFIsS0FBSyxrQkFDekUsSUFBS3FTLEVBQWdCaFgsT0FFakIsV0FEQWdYLEdBQWdCM0ssT0FHcEI3SCxHQUFPMFIsUUFBUSxtQkFBbUI3VSxLQUFLLFNBQUN2QixFQUFlbVgsR0FDbkQsR0FBTXpNLEdBQVErSSxPQUFPMEQsR0FDZkMsRUFBYzFNLEVBQU11TSxRQUFRLFlBQVlaLE9BQzlDLElBQUtlLEVBQVlsWCxPQUViLE1BREFrWCxHQUFZN0ssU0FDTCxJQUluQixHQUFLc0osRUFBQTNSLGVBQWVFLGNBQWdCd1MsRUFBTyxDQUN2QyxHQUFNUyxHQUFhM1MsRUFBT0csS0FBSywyQkFBMkJ3UixPQUMxRCxJQUFLZ0IsRUFBV25YLE9BRVosV0FEQW1YLEdBQVc5SyxPQUlmLElBQU0rSyxHQUFjNVMsRUFBTzZTLFFBQVEsWUFBWWxCLE9BQy9DLElBQUtpQixFQUFZcFgsT0FFYixXQURBb1gsR0FBWS9LLE9BSWhCLElBQU1pTCxHQUFrQjlTLEVBQU92QyxTQUFTb1YsUUFBUSxZQUFZbEIsUUFBUXhSLEtBQUssa0JBQ3pFLElBQUsyUyxFQUFnQnRYLE9BRWpCLFdBREFzWCxHQUFnQmpMLE9BR3BCN0gsR0FBTzBSLFFBQVEsbUJBQW1CN1UsS0FBSyxTQUFDdkIsRUFBZW1YLEdBQ25ELEdBQU16TSxHQUFRK0ksT0FBTzBELEdBQ2ZDLEVBQWMxTSxFQUFNNk0sUUFBUSxZQUFZbEIsT0FDOUMsSUFBS2UsRUFBWWxYLE9BRWIsTUFEQWtYLEdBQVk3SyxTQUNMLE9BS2YvUCxLQUFBaWIsc0JBQXdCLFNBQUN0TCxFQUFPdUwsR0FDcEMsR0FBTWQsR0FBT3pLLEVBQU1rRixTQUFXbEYsRUFBTTBLLEtBQ3BDLElBQW9CLFVBQWYxSyxFQUFNL0ssTUFBb0MsVUFBZitLLEVBQU0vSyxNQUFvQndWLElBQVNmLEVBQUEzUixlQUFlRyxjQUMxRXVTLElBQVNmLEVBQUEzUixlQUFlSSxhQURoQyxDQUlBLEdBQU1qRyxHQUFRcVosSUFBYW5ULEVBQUFoRyxTQUFTMEcsSUFDcEM4QixHQUFLaVAsUUFBUW5SLEtBQUssc0JBQXNCdEQsS0FBSyxTQUFDdkIsRUFBT2dXLEdBQ2pELEdBQU03VCxHQUFTc1IsT0FBT3VDLEdBQVNJLFFBQVEsZUFDakMvWSxFQUFPOEUsRUFBT21ELEtBQUssaUJBQ3BCakgsR0FDRDhELEVBQU9rRCxTQUFTLGFBRWhCbEQsRUFBT2lELFlBQVksYUFFdkIwUSxFQUFBdFIsc0JBQXNCQywwQkFBMEJnUCxPQUFPdUMsR0FBVTBCLEVBQVVyYSxJQUkvRSxLQUFvQixHQUZkMkIsR0FBTytILEVBQUtjLFlBQVlDLFFBQVFJLFlBQ2hDeUgsS0FDY3hQLEVBQUEsRUFBQXlQLEVBQUE1USxFQUFBbUIsRUFBQXlQLEVBQUExUCxPQUFBQyxJQUFJLENBQW5CLEdBQU0ySSxHQUFLOEcsRUFBQXpQLEVBQ1oySSxHQUFNcEosVUFBWXJCLEVBQ2xCc1IsRUFBUTFHLE1BQU1vRCxJQUFLdkQsRUFBTTNILEdBQUl6QixVQUFXb0osRUFBTXBKLFlBRWxEcUgsRUFBS2MsWUFBWUMsUUFBUStILGlCQUFpQkYsR0FDMUN4RCxFQUFNK0Qsb0JBRUYxVCxLQUFBc2Esc0JBQXdCLFNBQUMzSyxHQUM3QixHQUFNK0osR0FBS3pDLE9BQU90SCxFQUFNekgsUUFDbEJBLEVBQVN3UixFQUFHQyxHQUFHLG1CQUFxQkQsRUFBS0EsRUFBR0UsUUFBUSxtQkFBbUJDLE9BRTdFLElBRDBCM1IsRUFBT0ssU0FBUyxnQkFBa0JtUixFQUFHRSxRQUFRLHNCQUFzQmxXLE9BQzdGLENBR0EsR0FBTTdDLEdBQU9xSCxFQUFPWSxLQUFLLGtCQUNuQm5FLEVBQUt1RCxFQUFPWSxLQUFLLGdCQUNqQnFTLEVBQWNqVCxFQUFPSyxTQUFTLFlBQzlCNFMsR0FHRmpULEVBQU9VLFlBQVksYUFGbkJWLEVBQU9XLFNBQVMsWUFNcEIsS0FBb0IsR0FGZHJHLEdBQU8rSCxFQUFLYyxZQUFZQyxRQUFRSSxZQUNoQ3lILEtBQ2N4UCxFQUFBLEVBQUE2UCxFQUFBaFIsRUFBQW1CLEVBQUE2UCxFQUFBOVAsT0FBQUMsSUFBSSxDQUFuQixHQUFNMkksR0FBS2tILEVBQUE3UCxFQUNaLElBQUkySSxFQUFNM0gsS0FBT0EsRUFBSyxDQUNsQjJILEVBQU1wSixXQUFhaVksRUFDbkJoSSxFQUFRMUcsTUFBTW9ELElBQUt2RCxFQUFNM0gsR0FBSXpCLFVBQVdvSixFQUFNcEosV0FDOUMsUUFHUnFILEVBQUtjLFlBQVlDLFFBQVErSCxpQkFBaUJGLEdBQzFDbUcsRUFBQXRSLHNCQUFzQkMsMEJBQTBCQyxFQUFRSCxFQUFBaEcsU0FBU3lHLE9BQVEzSCxHQUN6RThPLEVBQU0rRCxvQkFFZCxNQWpMVzZGLEdBQUE5WCxVQUFBMFcsbUJBQVAsY0FBQTVOLEdBQUF2SyxJQUNJQSxNQUFLd1osUUFBUXBCLEdBQUcsUUFBUyxjQUFlLFNBQUN6SSxHQUNyQ3BGLEVBQUswUSxzQkFBc0J0TCxFQUFPNUgsRUFBQWhHLFNBQVMwRyxRQUUvQ3pJLEtBQUt3WixRQUFRcEIsR0FBRyxRQUFTLGNBQWUsU0FBQ3pJLEdBQ3JDcEYsRUFBSzBRLHNCQUFzQnRMLEVBQU81SCxFQUFBaEcsU0FBUzBHLFFBRS9DekksS0FBS3daLFFBQVFwQixHQUFHLFFBQVMsZ0JBQWlCLFNBQUN6SSxHQUN2Q3BGLEVBQUswUSxzQkFBc0J0TCxFQUFPNUgsRUFBQWhHLFNBQVMyRyxRQUUvQzFJLEtBQUt3WixRQUFRcEIsR0FBRyxRQUFTLGdCQUFpQixTQUFDekksR0FDdkNwRixFQUFLMFEsc0JBQXNCdEwsRUFBTzVILEVBQUFoRyxTQUFTMkcsUUFFL0MxSSxLQUFLd1osUUFBUXBCLEdBQUcsUUFBUyxrQkFBbUJwWSxLQUFLc2EsdUJBQ2pEdGEsS0FBS3daLFFBQVFwQixHQUFHLFVBQVcsa0JBQW1CcFksS0FBS2lhLGVBQ25EamEsS0FBS3daLFFBQVFwQixHQUFHLFVBQVcsa0JBQW1CcFksS0FBS3laLHFCQUNuRHpaLEtBQUt3WixRQUFRcEIsR0FBRyxXQUFZLGtCQUFtQnBZLEtBQUtnYSx1QkFFakRULEVBQUE5WCxVQUFBNlcsU0FBUCxhQUdPaUIsRUFBQTlYLFVBQUE4VyxnQkFBUCxTQUF1QjVJLEtBNEozQjRKLElBdExhN1osR0FBQTZaLCtCdkNzK0VQLFNBQVU1WixFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sR3dDaC9FdEQsSUFBQStMLEdBQUF4TixFQUFBLEdBR0FnYixFQUFBLFdBRUksUUFBQUEsR0FBb0I1QixFQUF5Qm5PLEdBQXpCckwsS0FBQXdaLFVBQXlCeFosS0FBQXFMLGNBb0JqRCxNQWxCVytQLEdBQUEzWixVQUFBMFcsbUJBQVAsY0FBQTVOLEdBQUF2SyxJQUNJQSxNQUFLd1osUUFBUXBCLEdBQUcsU0FBVSw0REFBNkQsU0FBQ3pJLEdBQ3BGLEdBQU02SixHQUFVdkMsT0FBT3RILEVBQU16SCxRQUN2Qm1ULEVBQVM3QixFQUFRN0YsTUFBTVosV0FDdkJsUixFQUFRd1osRUFBT0MsTUFBTSxPQUNyQmpVLEVBQVVtUyxFQUFRRyxHQUFHLFlBQ3JCL0csRUFBU3ZMLEVBQVV1RyxFQUFBOUwsaUJBQWlCK1EsSUFBTWpGLEVBQUE5TCxpQkFBaUJnUixLQUNqRXZJLEdBQUtjLFlBQVlDLFFBQVEwSCxlQUFlblIsRUFBTSxHQUFJQSxFQUFNLEdBQUkrUSxFQUFRL1EsRUFBTSxJQUFJLEdBQzlFOE4sRUFBTStELHFCQUdQMEgsRUFBQTNaLFVBQUE2VyxTQUFQLGFBR084QyxFQUFBM1osVUFBQThXLGdCQUFQLFNBQXVCNUksS0FJM0J5TCxJQXRCYTFiLEdBQUEwYixzQnhDa2hGUCxTQUFVemIsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEd5QzFoRnRELElBQUEwWixHQUFBbmIsRUFBQSxJQUdBa1osRUFBQWxaLEVBQUEsSUFFQTJILEVBQUEzSCxFQUFBLEdBRUFvYixFQUFBLFdBQ0ksUUFBQUEsR0FBb0JoQyxFQUF5Qm5PLEdBQTdDLEdBQUFkLEdBQUF2SyxJQUFvQkEsTUFBQXdaLFVBQXlCeFosS0FBQXFMLGNBY3JDckwsS0FBQXliLGFBQWUsU0FBQzlMLEdBQ3BCLEdBQU02SixHQUFVdkMsT0FBT3RILEVBQU16SCxPQUM3QnNSLEdBQVE3VCxTQUFTa0QsU0FBUyxXQUMxQjJRLEVBQVF2TixPQUFPeEYsT0FDZnVELFdBQVcsV0FDUCxHQUFNMkosR0FBTTZGLEVBQ1A3RixNQUNBWixXQUNBekUsYUFDTC9ELEdBQ0tpUCxRQUNBblIsS0FBSywyQkFDTHRELEtBQUssU0FBQ3hFLEVBQVdtYixHQUNkLEdBQU1DLEdBQVkxRSxPQUFPeUUsR0FDbkI3YSxFQUFPOGEsRUFBVTdTLEtBQUssa0JBQ3hCOFMsR0FBaUIsRUFDakJoSSxHQUFrQixNQUVWblEsS0FBUmtRLEdBQTZCLE9BQVJBLEdBQStCLEtBQWZBLEVBQUlFLFNBQ3pDRCxHQUFrQixHQUdqQkEsSUFBb0YsSUFBakUrSCxFQUFVN1MsS0FBSyxrQkFBa0J3RixjQUFjMkQsUUFBUTBCLEtBQzNFaUksR0FBaUIsR0FFakJoSSxHQUNBckosRUFDS2lQLFFBQ0FuUixLQUFLLG1CQUNMdEQsS0FBSyxTQUFDdkIsRUFBZXFZLEdBQ2Q1RSxPQUFPNEUsR0FBYXRULFNBQVMsY0FDN0IwTyxPQUFPNEUsR0FBYWpWLE9BRXBCcVEsT0FBTzRFLEdBQWFwVixTQUdoQzhELEVBQ0tpUCxRQUNBblIsS0FBSyxtQkFDTHRELEtBQUssU0FBQ3ZCLEVBQWVzWSxHQUNkN0UsT0FBTzZFLEdBQWN2VCxTQUFTLGNBQzlCME8sT0FBTzZFLEdBQWNsVixPQUVyQnFRLE9BQU82RSxHQUFjclYsV0FJakM4RCxFQUNLaVAsUUFDQW5SLEtBQUssbUJBQ0x6QixPQUNMMkQsRUFDS2lQLFFBQ0FuUixLQUFLLG1CQUNMekIsT0FHVCxJQUFJbVYsSUFBMkIsQ0FDL0JKLEdBQ0t0VCxLQUFLLFNBQ0x0RCxLQUFLLFNBQUNpWCxFQUFXdFgsR0FDZCxHQUFNdVgsR0FBWWhGLE9BQU92UyxFQVV6QixJQVRJa1AsRUFDQXFJLEVBQ0t0VyxPQUFPLGlCQUNQaUIsT0FFTHFWLEVBQ0t0VyxPQUFPLGlCQUNQYyxPQUVMbVYsR0FBa0JoSSxFQUVsQixXQURBcUksR0FBVXhWLFFBSWlDLElBRDVCd1YsRUFBVW5ULEtBQUssbUJBQ25Cd0YsY0FBYzJELFFBQVEwQixHQUNqQ3NJLEVBQVVyVixRQUVWbVYsR0FBa0IsRUFDbEJFLEVBQVV4VixTQUl0QixJQUFNeVYsR0FBZVAsRUFBVXRULEtBQUssc0JBQzlCbkYsRUFBWXlZLEVBQVVwVCxTQUFTLFlBQ2pDcVQsSUFBa0JHLEdBQW1CbkksRUFDckMrSCxFQUFVUSxPQUFPNVIsRUFBS2MsWUFBWUMsUUFBUW9MLGVBRTFDaUYsRUFBVVMsUUFBUTdSLEVBQUtjLFlBQVlDLFFBQVFvTCxlQUczQ3hULEdBQWEwWSxHQUFrQkcsRUFDL0J6QyxFQUFBdFIsc0JBQXNCQywwQkFBMEJpVSxFQUFjblUsRUFBQWhHLFNBQVMwRyxLQUFNNUgsR0FFN0V5WSxFQUFBdFIsc0JBQXNCQywwQkFBMEJpVSxFQUFjblUsRUFBQWhHLFNBQVMyRyxLQUFNN0gsS0FHekYyWSxFQUFRN1QsU0FBU2lELFlBQVksV0FDN0I0USxFQUFRdk4sT0FBT3JGLFFBRW5CLEdBQ0ErSSxFQUFNK0QsbUJBRWQsTUFwSFc4SCxHQUFBL1osVUFBQTBXLG1CQUFQLFdBQ0luWSxLQUNLd1osUUFDQXBCLEdBQUcsUUFBUyx1QkFBd0JtRCxFQUFBYyxTQUFTLElBQUtyYyxLQUFLeWIsZ0JBR3pERCxFQUFBL1osVUFBQTZXLFNBQVAsYUFHT2tELEVBQUEvWixVQUFBOFcsZ0JBQVAsU0FBdUI1SSxLQTJHM0I2TCxJQXZIYTliLEdBQUE4YixzQnpDa3FGUCxTQUFVN2IsRUFBUUQsRUFBU1UsRzBDenFGakMsR0FBQWtjLEdBQUFsYyxFQUFBLElBQ0FpYyxFQUFBamMsRUFBQSxHQUVBVCxHQUFBRCxTQUNBNGMsV0FDQUQsYTFDc3JGTSxTQUFVMWMsRUFBUUQsRUFBU1UsRzJDenJGakMsR0FBQWtjLEdBQUFsYyxFQUFBLEdBZ0JBVCxHQUFBRCxRQUFBLFNBQUFzSixFQUFBdVQsRUFBQXJULEdBQ0EsV0FBQXpGLEtBQUF5RixFQUFBb1QsRUFBQXRULEVBQUF1VCxHQUFBLEdBQUFELEVBQUF0VCxFQUFBRSxHQUFBLElBQUFxVCxLM0N3c0ZNLFNBQVU1YyxFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sRzRDOXRGdEQsSUFBQStMLEdBQUF4TixFQUFBLEdBR0E2WCxFQUFBLFdBRUksUUFBQUEsR0FBb0JQLEVBQStCck0sR0FBL0JyTCxLQUFBMFgsZ0JBQStCMVgsS0FBQXFMLGNBNkJ2RCxNQTNCVzRNLEdBQUF4VyxVQUFBMFcsbUJBQVAsY0FBQTVOLEdBQUF2SyxJQUNJQSxNQUFLMFgsY0FBY1UsR0FBRyxRQUFTLHdDQUF5QyxTQUFDekksR0FDckUsR0FBSTZKLEdBQVV2QyxPQUFPdEgsRUFBTXpILE9BQ3RCc1IsR0FBUUcsR0FBRyxZQUNaSCxFQUFVQSxFQUFRSSxRQUFRLFVBRTlCLElBQU15QixHQUFTN0IsRUFBUTFRLEtBQUsscUJBQXFCaUssV0FDM0NsUixFQUFRd1osRUFBT0MsTUFBTSxPQUN2QnBJLEdBQVUsQ0FDTyxLQUFqQnJSLEVBQU02QixTQUNOd1AsR0FBVSxHQUVkM0ksRUFBS2MsWUFBWUMsUUFBUTBILGVBQWVuUixFQUFNLEdBQUlBLEVBQU0sR0FBSStMLEVBQUE5TCxpQkFBaUJnUixNQUFPalIsRUFBTSxHQUFJcVIsR0FDOUZ2RCxFQUFNK0Qsb0JBRVYxVCxLQUFLMFgsY0FBY1UsR0FBRyxRQUFTLCtCQUFnQyxTQUFDekksR0FDNURwRixFQUFLYyxZQUFZQyxRQUFROE4sb0JBQ3pCekosRUFBTStELHFCQUdQdUUsRUFBQXhXLFVBQUE2VyxTQUFQLGFBR09MLEVBQUF4VyxVQUFBOFcsZ0JBQVAsU0FBdUI1SSxLQUkzQnNJLElBL0JhdlksR0FBQXVZLHVCNUN5d0ZQLFNBQVV0WSxFQUFRRCxFQUFTVSxHQUVqQyxZQUVBWSxRQUFPQyxlQUFldkIsRUFBUyxjQUFnQm1DLE9BQU8sRzZDOXdGdEQsSUFBQTJhLEdBQUEsV0FDSSxRQUFBQSxHQUFvQmhELEVBQXlCbk8sR0FBN0MsR0FBQWQsR0FBQXZLLElBQW9CQSxNQUFBd1osVUFBeUJ4WixLQUFBcUwsY0FFdENyTCxLQUFBbVksbUJBQXFCLFdBQ3hCNU4sRUFBS2lQLFFBQVFwQixHQUFHLFFBQVMsY0FBZTdOLEVBQUtrUyxXQUM3Q2xTLEVBQUtpUCxRQUFRcEIsR0FBRyxRQUFTLGNBQWU3TixFQUFLbVMsV0FDN0NuUyxFQUFLaVAsUUFBUXBCLEdBQUcsUUFBUyxjQUFlLFNBQUN6SSxHQUNyQyxHQUFNeUssR0FBT3pLLEVBQU1rRixTQUFXbEYsRUFBTTBLLEtBQ3RCLE1BQVRELEdBQXdCLEtBQVRBLEdBR3BCN1AsRUFBS2tTLFVBQVU5TSxLQUVuQnBGLEVBQUtpUCxRQUFRcEIsR0FBRyxRQUFTLGNBQWUsU0FBQ3pJLEdBQ3JDLEdBQU15SyxHQUFPekssRUFBTWtGLFNBQVdsRixFQUFNMEssS0FDdEIsTUFBVEQsR0FBd0IsS0FBVEEsR0FHcEI3UCxFQUFLbVMsVUFBVS9NLE1BU2hCM1AsS0FBQXljLFVBQVksU0FBQzlNLEdBQ2hCZ04sRUFBRSxlQUFlL1YsT0FDakIrVixFQUFFLHlCQUF5QlIsT0FBTzVSLEVBQUtjLFlBQVlDLFFBQVFvTCxlQUMzRG5NLEVBQUtjLFlBQVlDLFFBQVFwSSxXQUFZLEVBQ3JDeU0sRUFBTStELG1CQUVIMVQsS0FBQTBjLFVBQVksU0FBQy9NLEdBQ2hCZ04sRUFBRSx5QkFBeUIvVixPQUMzQitWLEVBQUUsZUFBZVIsT0FBTzVSLEVBQUtjLFlBQVlDLFFBQVFvTCxlQUNqRG5NLEVBQUtjLFlBQVlDLFFBQVFwSSxXQUFZLEVBQ3JDeU0sRUFBTStELG1CQUVkLE1BbEJXOEksR0FBQS9hLFVBQUE2VyxTQUFQLGFBR09rRSxFQUFBL2EsVUFBQThXLGdCQUFQLFNBQXVCNUksS0FlM0I2TSxJQXZDYTljLEdBQUE4YywyQjdDcTBGUCxTQUFVN2MsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEc4Q3IwRnRELElBQUErYSxHQUFBLFdBQ0ksUUFBQUEsR0FBb0JwRCxFQUF5Qm5PLEVBQ3pCVixHQURBM0ssS0FBQXdaLFVBQXlCeFosS0FBQXFMLGNBQ3pCckwsS0FBQTJLLGtCQThDeEIsTUE1Q1dpUyxHQUFBbmIsVUFBQTBXLG1CQUFQLGNBQUE1TixHQUFBdkssSUFDSUEsTUFBS3daLFFBQVFwQixHQUFHLFFBQVMsWUFBYSxTQUFDekksR0FDbkNwRixFQUFLK0ksZUFBZTNELEdBQU8sS0FFL0IzUCxLQUFLd1osUUFBUXBCLEdBQUcsUUFBUyxjQUFlLFNBQUN6SSxHQUNyQ3BGLEVBQUsrSSxlQUFlM0QsR0FBTyxLQUUvQjNQLEtBQUt3WixRQUFRcEIsR0FBRyxRQUFTLFlBQWEsU0FBQ3pJLEdBQ25DLEdBQU15SyxHQUFPekssRUFBTWtGLFNBQVdsRixFQUFNMEssS0FDdEIsTUFBVEQsR0FBd0IsS0FBVEEsR0FHcEI3UCxFQUFLK0ksZUFBZTNELEdBQU8sS0FFL0IzUCxLQUFLd1osUUFBUXBCLEdBQUcsUUFBUyxjQUFlLFNBQUN6SSxHQUNyQyxHQUFNeUssR0FBT3pLLEVBQU1rRixTQUFXbEYsRUFBTTBLLEtBQ3RCLE1BQVRELEdBQXdCLEtBQVRBLEdBR3BCN1AsRUFBSytJLGVBQWUzRCxHQUFPLE1BRzVCaU4sRUFBQW5iLFVBQUE2VyxTQUFQLGFBR09zRSxFQUFBbmIsVUFBQThXLGdCQUFQLFNBQXVCNUksS0FHZmlOLEVBQUFuYixVQUFBNlIsZUFBUixTQUF1QjNELEVBQVk0RCxHQUkvQixJQUFvQixHQUp4QmhKLEdBQUF2SyxLQUNVd1osRUFBVXZDLE9BQU90SCxFQUFNekgsUUFDdkJ2RCxFQUFLNlUsRUFBUTFRLEtBQUssZ0JBQ2xCdEcsRUFBT3hDLEtBQUtxTCxZQUFZQyxRQUFRSSxZQUNsQi9ILEVBQUEsRUFBQXlQLEVBQUE1USxFQUFBbUIsRUFBQXlQLEVBQUExUCxPQUFBQyxJQUFJLENBQW5CLEdBQU0ySSxHQUFLOEcsRUFBQXpQLEVBQ1osSUFBSzJJLEVBQU0zSCxLQUFPQSxFQUFLLENBQ25CMkgsRUFBTUssT0FBUzRHLENBQ2YsUUFHUnZKLFdBQVcsV0FDUE8sRUFBS2lQLFFBQVE3QixLQUFLcE4sRUFBS0ksZ0JBQWdCRixLQUFLRixFQUFLSSxnQkFBZ0JHLGFBQ2xFLEdBQ0g5SyxLQUFLcUwsWUFBWUMsUUFBUW1JLFdBQVc5TyxFQUFJNE8sR0FDeEM1RCxFQUFNK0QsbUJBRWRrSixJQWhEYWxkLEdBQUFrZCx3QjlDdTRGUCxTQUFVamQsRUFBUUQsRUFBU1UsR0FFakMsWUFFQVksUUFBT0MsZUFBZXZCLEVBQVMsY0FBZ0JtQyxPQUFPLEcrQzM0RnRELElBQUFnYixHQUFBLFdBQ0ksUUFBQUEsR0FBb0JyRCxFQUF5Qm5PLEdBQXpCckwsS0FBQXdaLFVBQXlCeFosS0FBQXFMLGNBMkRqRCxNQXpEV3dSLEdBQUFwYixVQUFBMFcsbUJBQVAsY0FBQTVOLEdBQUF2SyxJQUNJQSxNQUNLd1osUUFDQXBCLEdBQUcsUUFBUyxrQkFBbUIsU0FBQ3pJLEdBQzdCcEYsRUFBS3VTLG9CQUFvQm5OLEdBQU8sS0FFeEMzUCxLQUNLd1osUUFDQXBCLEdBQUcsUUFBUyxrQkFBbUIsU0FBQ3pJLEdBQzdCcEYsRUFBS3VTLG9CQUFvQm5OLEdBQU8sS0FFeEMzUCxLQUNLd1osUUFDQXBCLEdBQUcsUUFBUyxrQkFBbUIsU0FBQ3pJLEdBQzdCLEdBQU15SyxHQUFPekssRUFBTWtGLFNBQVdsRixFQUFNMEssS0FDdkIsTUFBVEQsR0FBd0IsS0FBVEEsR0FHbkI3UCxFQUFLdVMsb0JBQW9Cbk4sR0FBTyxLQUV4QzNQLEtBQ0t3WixRQUNBcEIsR0FBRyxRQUFTLGtCQUFtQixTQUFDekksR0FDN0IsR0FBTXlLLEdBQU96SyxFQUFNa0YsU0FBV2xGLEVBQU0wSyxLQUN2QixNQUFURCxHQUF3QixLQUFUQSxHQUduQjdQLEVBQUt1UyxvQkFBb0JuTixHQUFPLE1BR3JDa04sRUFBQXBiLFVBQUE2VyxTQUFQLGFBR091RSxFQUFBcGIsVUFBQThXLGdCQUFQLFNBQXVCNUksS0FHZmtOLEVBQUFwYixVQUFBcWIsb0JBQVIsU0FBNEJuTixFQUFZb04sR0FDcEMsR0FBTXZELEdBQVV2QyxPQUFPdEgsRUFBTXpILE9BQ3pCNlUsR0FDQXZELEVBQ0tJLFFBQVEsMkJBQ1J2UixLQUFLLGlCQUNMOFQsT0FBT25jLEtBQUtxTCxZQUFZQyxRQUFRb0wsY0FBZSxXQUM1QzhDLEVBQVE3VCxTQUFTaUIsT0FDakI0UyxFQUFRN1QsU0FBU3NHLE9BQU94RixPQUFPNEIsS0FBSyxLQUFLMEgsVUFHakR5SixFQUNLSSxRQUFRLDJCQUNSdlIsS0FBSyxpQkFDTCtULFFBQVFwYyxLQUFLcUwsWUFBWUMsUUFBUW9MLGNBQWUsV0FDN0M4QyxFQUFRN1QsU0FBU3FHLE9BQU92RixPQUFPNEIsS0FBSyxLQUFLMEgsUUFDekN5SixFQUFRN1QsU0FBU2lCLFNBRzdCK0ksRUFBTStELG1CQUVkbUosSUE1RGFuZCxHQUFBbWQsdUIvQ3c5RlAsU0FBVWxkLEVBQVFELEVBQVNVLEdBRWpDLFlBRUFZLFFBQU9DLGVBQWV2QixFQUFTLGNBQWdCbUMsT0FBTyxHZ0RuK0Z0RCxJQUFBd1gsR0FBQWpaLEVBQUEsSUFHQTRjLEVBQUEsV0FFSSxRQUFBQSxHQUFvQnhELEdBQXBCLEdBQUFqUCxHQUFBdkssSUFBb0JBLE1BQUF3WixVQVdieFosS0FBQXdZLFdBQWEsV0FDaEJqTyxFQUFLaVAsUUFBUWxTLElBQUksVUFBVyxtQkFBb0JpRCxFQUFLMFMsa0JBRWpEamQsS0FBQWlkLGdCQUFrQixTQUFDdE4sR0FDdkIsR0FBTXlLLEdBQU96SyxFQUFNMEssS0FDbkIsSUFBS0QsSUFBU2YsRUFBQTNSLGVBQWVDLFdBQWF5UyxJQUFTZixFQUFBM1IsZUFBZUUsWUFBbEUsQ0FHQSxHQUFJNFIsR0FBVXZDLE9BQU90SCxFQUFNekgsT0FDckJzUixHQUFRRyxHQUFHLHNCQUNiSCxFQUFVQSxFQUFRN1QsU0FFdEIsSUFBSXVYLEdBQ0VDLEVBQU0zRCxFQUFRN1QsUUFPcEIsSUFOS3lVLElBQVNmLEVBQUEzUixlQUFlQyxZQUN6QnVWLEVBQVlDLEVBQUluUixPQUFPM0QsS0FBSyxxQkFFM0IrUixJQUFTZixFQUFBM1IsZUFBZUUsY0FDekJzVixFQUFZQyxFQUFJbFIsT0FBTzVELEtBQUsscUJBRTNCNlUsR0FBYUEsRUFBVXhaLE9BQ3hCaU0sRUFBTXlOLEtBQUt6TixNQUFNRyxpQkFDakJILEVBQU0rRCxrQkFDTndKLEVBQVVuTixZQUNQLENBQ0gsR0FBTWdOLEdBQVdJLEVBQUlsUixPQUFPNUQsS0FBSyxtQkFBcUI4VSxFQUFJbFIsT0FBTzVELEtBQUssaUJBQ2pFMFUsSUFBWUEsRUFBU3JaLFFBQ3RCcVosRUFBU2hOLFdBSXpCLE1BeENXaU4sR0FBQXZiLFVBQUEwVyxtQkFBUCxXQUNJblksS0FBS3daLFFBQVFwQixHQUFHLFVBQVcsbUJBQW9CcFksS0FBS2lkLGtCQUVqREQsRUFBQXZiLFVBQUE2VyxTQUFQLGFBR08wRSxFQUFBdmIsVUFBQThXLGdCQUFQLFNBQXVCNUksS0FrQzNCcU4sSUE1Q2F0ZCxHQUFBc2QiLCJmaWxlIjoiZmFjZXRvby5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJoYW5kbGViYXJzL3J1bnRpbWVcIiksIHJlcXVpcmUoXCJtb21lbnRcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiaGFuZGxlYmFycy5ydW50aW1lXCIsIFwibW9tZW50XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkZhY2V0b29cIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJoYW5kbGViYXJzL3J1bnRpbWVcIiksIHJlcXVpcmUoXCJtb21lbnRcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkZhY2V0b29cIl0gPSBmYWN0b3J5KHJvb3RbXCJIYW5kbGViYXJzXCJdLCByb290W1wibW9tZW50XCJdKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV85X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiaGFuZGxlYmFycy9ydW50aW1lXCIpLCByZXF1aXJlKFwibW9tZW50XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcImhhbmRsZWJhcnMucnVudGltZVwiLCBcIm1vbWVudFwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJGYWNldG9vXCJdID0gZmFjdG9yeShyZXF1aXJlKFwiaGFuZGxlYmFycy9ydW50aW1lXCIpLCByZXF1aXJlKFwibW9tZW50XCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJGYWNldG9vXCJdID0gZmFjdG9yeShyb290W1wiSGFuZGxlYmFyc1wiXSwgcm9vdFtcIm1vbWVudFwiXSk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDE0KTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogZXh0ZXJuYWwge1wicm9vdFwiOlwiSGFuZGxlYmFyc1wiLFwiYW1kXCI6XCJoYW5kbGViYXJzLnJ1bnRpbWVcIixcImNvbW1vbmpzMlwiOlwiaGFuZGxlYmFycy9ydW50aW1lXCIsXCJjb21tb25qc1wiOlwiaGFuZGxlYmFycy9ydW50aW1lXCJ9ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXztcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQWN0aW9uVHlwZTtcclxuKGZ1bmN0aW9uIChGaWx0ZXJBY3Rpb25UeXBlKSB7XHJcbiAgICBGaWx0ZXJBY3Rpb25UeXBlW1wiQWRkXCJdID0gXCJBZGRcIjtcclxuICAgIEZpbHRlckFjdGlvblR5cGVbXCJNaW51c1wiXSA9IFwiTWludXNcIjtcclxufSkoRmlsdGVyQWN0aW9uVHlwZSA9IGV4cG9ydHMuRmlsdGVyQWN0aW9uVHlwZSB8fCAoZXhwb3J0cy5GaWx0ZXJBY3Rpb25UeXBlID0ge30pKTtcclxuXG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvU2hvd0hpZGUudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFNob3dIaWRlO1xyXG4oZnVuY3Rpb24gKFNob3dIaWRlKSB7XHJcbiAgICBTaG93SGlkZVtTaG93SGlkZVtcIlNob3dcIl0gPSAwXSA9IFwiU2hvd1wiO1xyXG4gICAgU2hvd0hpZGVbU2hvd0hpZGVbXCJIaWRlXCJdID0gMV0gPSBcIkhpZGVcIjtcclxuICAgIFNob3dIaWRlW1Nob3dIaWRlW1wiVG9nZ2xlXCJdID0gMl0gPSBcIlRvZ2dsZVwiO1xyXG59KShTaG93SGlkZSA9IGV4cG9ydHMuU2hvd0hpZGUgfHwgKGV4cG9ydHMuU2hvd0hpZGUgPSB7fSkpO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvZmFjZXQtYm9keS5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIjxkaXYgY2xhc3M9XFxcImd1aSBvZi1oaWRkZW4gbWluLXctNTAgdy1hdXRvIGZsdWlkLWggZmxleCBjb2x1bW4gY29udGFpbmVyXFxcIiBpZD1cXFwiXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKGNvbnRhaW5lci5sYW1iZGEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLWZhY2V0LWNvbnRhaW5lclxcXCI+XFxuICAgIDxzZWN0aW9uIGNsYXNzPVxcXCJndWkgaC1hdXRvIGd1aS1zdWJoZWFkaW5nLTEgbS0wIGJvcmRlci1ib3R0b20gbGlnaHQgcC1yLTEwIHAtdC01IHAtYi01IHAtbC0xMFxcXCI+XFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgZXhwYW5kLWFsbFxcXCIgXFxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIkV4cGFuZCBBbGwgRmlsdGVyc1xcXCI+XFxuICAgICAgICAgICAgPGkgIGNsYXNzPVxcXCJndWktaWNvbiBzcGVjaWFsIHJvdGF0ZS1sZWZ0IGd1aS1pY29uLWNoZXZkb3VibGVcXFwiPjwvaT5cXG4gICAgICAgICAgICBFeHBhbmQgQWxsXFxuICAgICAgICA8L2J1dHRvbj5cXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBjdXJzb3ItcG9pbnRlciBjb2xsYXBzZS1hbGxcXFwiIFxcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJDb2xsYXBzZSBBbGwgRmlsdGVyc1xcXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aS1pY29uIHNwZWNpYWwgcm90YXRlLXJpZ2h0IGd1aS1pY29uLWNoZXZkb3VibGVcXFwiPjwvaT5cXG4gICAgICAgICAgICBDb2xsYXBzZSBBbGxcXG4gICAgICAgIDwvYnV0dG9uPlxcbiAgICA8L3NlY3Rpb24+XFxuICAgIDxzZWN0aW9uIGNsYXNzPVxcXCJndWkgYm9yZGVyLWJvdHRvbSBsaWdodCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTEwXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImd1aSBndWktaWNvbiBpbnB1dCBmbHVpZC13IGgtMzBcXFwiPlxcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiZ3VpIGlucHV0IGZsdWlkLXcgZ3VpLXN1YmhlYWRpbmctMiBmaWx0ZXItc2VhcmNoLWlucHV0XFxcIlxcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cXFwiU2VhcmNoIEZpbHRlcnMuIFNob3J0Y3V0IEFsdCArIEYgXFxcIiAvPlxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gZ3VpLWljb24tc2VhcmNoIGd1aS1oaWRkZW5cXFwiPjwvaT5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L3NlY3Rpb24+XFxuICAgIDx1bCBjbGFzcz1cXFwiZ3VpIGZsdWlkLWggZmFjZXQtbGlzdCBvZi1hdXRvIG9meC1oaWRkZW4gbS0wIHAtMFxcXCIgXFxuICAgICAgICByb2xlPVxcXCJ0cmVlXFxcIlxcbiAgICAgICAgYXJpYS1saXZlPVxcXCJwb2xpdGVcXFwiPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9mYWNldC1waW5uZWQuaGJzICovIDE4KSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtcGlubmVkXCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICBcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2ZhY2V0LXVucGlubmVkLmhicyAqLyAyNSksZGVwdGgwLHtcIm5hbWVcIjpcImZhY2V0LXVucGlubmVkXCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICBcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgIDwvdWw+XFxuPC9kaXY+XCI7XG59LFwidXNlUGFydGlhbFwiOnRydWUsXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9oZWxwZXJzL0NvbGxhcHNlZC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb2xsYXBzZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBcIiBjb2xsYXBzZWQgXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gY29sbGFwc2VkO1xyXG5cblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2hlbHBlcnMvQm9vbGVhbi50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgQm9vbGVhblZhbHVlID0gZnVuY3Rpb24gKGJvb2wpIHtcclxuICAgIHJldHVybiBib29sID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEJvb2xlYW5WYWx1ZTtcclxuXG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9TZWxlY3RlZEZpbHRlcnNDb3VudC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHNlbGVjdGVkRmlsdGVyc0NvdW50ID0gZnVuY3Rpb24gKGZhY2V0VmFsdWVzKSB7XHJcbiAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgaWYgKGZhY2V0VmFsdWVzICE9PSB1bmRlZmluZWRcclxuICAgICAgICAmJiBmYWNldFZhbHVlcyAhPT0gbnVsbFxyXG4gICAgICAgICYmIGZhY2V0VmFsdWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGZhY2V0VmFsdWVzXzEgPSBmYWNldFZhbHVlczsgX2kgPCBmYWNldFZhbHVlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmFjZXRWYWx1ZSA9IGZhY2V0VmFsdWVzXzFbX2ldO1xyXG4gICAgICAgICAgICBpZiAoZmFjZXRWYWx1ZS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBpbmRleCA9PT0gMCA/IFwiXCIgOiBcIjxzcGFuIGNsYXNzPVxcXCJndWktYm9keS0yXFxcIj4oXCIgKyBpbmRleCArIFwiKTwvc3Bhbj5cIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gc2VsZWN0ZWRGaWx0ZXJzQ291bnQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvZmFjZXQtbGFiZWwuaGJzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgSGFuZGxlYmFycyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGhhbmRsZWJhcnMgKi8gMCk7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcIjFcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWNvbnRhaW5lci5sYW1iZGE7XG5cbiAgcmV0dXJuIFwiICAgIDxsaSBjbGFzcz1cXFwiZ3VpIGl0ZW0gXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tMZW5ndGgudHMgKi8gMTkpKS5jYWxsKGFsaWFzMSwoZGF0YSAmJiBkYXRhLmluZGV4KSwoZGVwdGhzWzJdICE9IG51bGwgPyBkZXB0aHNbMl0ubm9PZkZhY2V0VG9TaG93IDogZGVwdGhzWzJdKSx7XCJuYW1lXCI6XCJDaGVja0xlbmd0aFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgYXJpYS1sYWJlbD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgICAgIDxsYWJlbCAgZGF0YS1hdHRyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICAgICAgICAgICAgICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5pZCA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICAgICAgZGF0YS1hdHRyLXR5cGU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgICAgICB0YWJpbmRleD1cXFwiMFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgcm9sZT1cXFwidHJlZWl0ZW1cXFwiXFxyXFxuICAgICAgICAgICAgICAgIHRpdGxlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIoXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvdW50IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgZm9yPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiLVwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkYXRhICYmIGRhdGEuaW5kZXgpLCBkZXB0aDApKVxuICAgICsgXCItY2hlY2tib3hcXFwiXFxyXFxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIkZpbHRlciBcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgaW4gXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLm5hbWUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCIgaGFzIFwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIiByZWNvcmRzLiBQcmVzcyBzcGFjZWJhciB0byBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9BcHBseVJlbW92ZS50cyAqLyAyMCkpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zZWxlY3RlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiQXBwbHlSZW1vdmVcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIiB0aGlzIGZpbHRlci5cXFwiXFxyXFxuICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgZ3VpLXN1YmhlYWRpbmctMSBuby13cmFwIHRleHQtc2hvcnRlbiBtLTBcXFwiPlxcclxcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiZ3VpIGZhY2V0LXZhbHVlLWNoZWNrYm94IGN1cnNvci1wb2ludGVyIG0tbC0wXFxcIiBcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiLVwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkYXRhICYmIGRhdGEuaW5kZXgpLCBkZXB0aDApKVxuICAgICsgXCItY2hlY2tib3hcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9DaGVja2VkLnRzICovIDIxKSkuY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnNlbGVjdGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDaGVja2VkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL0Rpc2FibGVkLnRzICovIDIyKSkuY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmRpc2FibGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJEaXNhYmxlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cXFwiLTFcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cXFwiY2hlY2tib3hcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9Gb3JtYXRMYWJlbEJ5VHlwZS50cyAqLyA4KSkuY2FsbChhbGlhczEsKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCkse1wibmFtZVwiOlwiRm9ybWF0TGFiZWxCeVR5cGVcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMSBtLTBcXFwiPihcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIpPC9zcGFuPlxcclxcbiAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgPC9saT5cXHJcXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiPHVsIGNsYXNzPVxcXCJkZXNjcmlwdGlvbiBndWkgZmFjZXQtaXRlbS1kZXNjcmlwdGlvbiBtLXQtMTAgcC1sLTUgcC0wIFwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvSGlkZGVuLnRzICovIDIzKSkuY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbGxhcHNlZCA6IGRlcHRoMCksdHJ1ZSx7XCJuYW1lXCI6XCJIaWRkZW5cIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgIHJvbGU9XFxcImdyb3VwXFxcIj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhY2V0VmFsdWVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICBcIlxuICAgICsgKChzdGFjazEgPSBfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvU2hvd01vcmVMZXNzTGluay50cyAqLyAyNCkpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCksKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLm5vT2ZGYWNldFRvU2hvdyA6IGRlcHRoc1sxXSkse1wibmFtZVwiOlwiU2hvd01vcmVMZXNzTGlua1wiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcclxcbjwvdWw+XCI7XG59LFwidXNlRGF0YVwiOnRydWUsXCJ1c2VEZXB0aHNcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9Gb3JtYXRMYWJlbEJ5VHlwZS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIG1vbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIG1vbWVudCAqLyA5KTtcclxudmFyIGZvcm1hdExhYmVsQnlUeXBlID0gZnVuY3Rpb24gKHR5cGUsIHZhbHVlKSB7XHJcbiAgICBpZiAobW9tZW50ICYmIHR5cGUgPT09IFwiRWRtLkRhdGVUaW1lT2Zmc2V0XCIpIHtcclxuICAgICAgICByZXR1cm4gbW9tZW50LnV0Yyh2YWx1ZSkuZm9ybWF0KFwiREQtTU1NLVlZWVkgaGg6bW0gYVwiKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gXCJBc3NpZ25lZFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkNvbW1pdHRlZFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgPT09IFwiQ29tcGxldGVcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJBc3NpZ25lZFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGZvcm1hdExhYmVsQnlUeXBlO1xyXG5cblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIGV4dGVybmFsIFwibW9tZW50XCIgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fO1xuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvYTExeS9Eb21VdGlscy50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRG9tVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb21VdGlscygpIHtcclxuICAgIH1cclxuICAgIERvbVV0aWxzLmlzRGVzY2VuZGFudCA9IGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBjaGlsZC5wYXJlbnROb2RlO1xyXG4gICAgICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUgPT09IHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLmlzU2VsZk9yRGVzY2VuZGFudCA9IGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkKSB7XHJcbiAgICAgICAgaWYgKHBhcmVudCA9PT0gY2hpbGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBEb21VdGlscy5pc0Rlc2NlbmRhbnQocGFyZW50LCBjaGlsZCk7XHJcbiAgICB9O1xyXG4gICAgRG9tVXRpbHMuaXNIaWRkZW4gPSBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGUub2Zmc2V0UGFyZW50ID09PSBudWxsO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLmlzQXJpYUhpZGRlbiA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIikgPT09IFwidHJ1ZVwiO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLnNldEFyaWFIaWRkZW4gPSBmdW5jdGlvbiAobm9kZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJEb21VdGlscy5zZXRBcmlhSGlkZGVuIC0gTm9kZSBjYW5ub3QgYmUgb2YgbnVsbCBvciB1bmRlZmluZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLmlzQXJpYUV4cGFuZGVkID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIpID09PSBcInRydWVcIjtcclxuICAgIH07XHJcbiAgICBEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQgPSBmdW5jdGlvbiAobm9kZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQgLSBOb2RlIGNhbm5vdCBiZSBvZiBudWxsIG9yIHVuZGVmaW5lZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBEb21VdGlscy5zaG93ID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJEb21VdGlscy5zaG93IC0gTm9kZSBjYW5ub3QgYmUgb2YgbnVsbCBvciB1bmRlZmluZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZShcImd1aS1oaWRkZW5cIik7XHJcbiAgICB9O1xyXG4gICAgRG9tVXRpbHMuaGlkZSA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiRG9tVXRpbHMuaGlkZSAtIE5vZGUgY2Fubm90IGJlIG9mIG51bGwgb3IgdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLnRvZ2dsZUxhYmVsID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJEb21VdGlscy50b2dnbGVMYWJlbCAtIE5vZGUgY2Fubm90IGJlIG9mIG51bGwgb3IgdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9ySWQgPSBub2RlLmh0bWxGb3I7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcklkKSB8fCBub2RlLmZpcnN0RWxlbWVudENoaWxkKTtcclxuICAgICAgICBpbnB1dC5jaGVja2VkID0gIWlucHV0LmNoZWNrZWQ7XHJcbiAgICAgICAgcmV0dXJuIGlucHV0LmNoZWNrZWQ7XHJcbiAgICB9O1xyXG4gICAgRG9tVXRpbHMub2ZmID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICB2YXIgbmV3Tm9kZSA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgbm9kZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvbVV0aWxzO1xyXG59KCkpO1xyXG5leHBvcnRzLkRvbVV0aWxzID0gRG9tVXRpbHM7XHJcblxuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9jb25maWcvRmFjZXRDb25zdGFudHMudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmFjZXRDb25zdGFudHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldENvbnN0YW50cygpIHtcclxuICAgIH1cclxuICAgIEZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSA9IDM4O1xyXG4gICAgRmFjZXRDb25zdGFudHMuRG93bktleUNvZGUgPSA0MDtcclxuICAgIEZhY2V0Q29uc3RhbnRzLkVudGVyS2V5Q29kZSA9IDEzO1xyXG4gICAgRmFjZXRDb25zdGFudHMuU3BhY2VLZXlDb2RlID0gMjg7XHJcbiAgICByZXR1cm4gRmFjZXRDb25zdGFudHM7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjZXRDb25zdGFudHMgPSBGYWNldENvbnN0YW50cztcclxuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZU1hbmFnZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTaG93SGlkZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9TaG93SGlkZSAqLyAyKTtcclxudmFyIEV4cGFuZENvbGxhcHNlTWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV4cGFuZENvbGxhcHNlTWFuYWdlcigpIHtcclxuICAgIH1cclxuICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgc2hvd0hpZGUsIG5hbWUpIHtcclxuICAgICAgICB2YXIgaWNvbkVsZW1lbnQgPSB0YXJnZXQuZmluZChcIi5leHBhbnNpb24taWNvblwiKTtcclxuICAgICAgICB2YXIgY3VycmVudGx5VmlzaWJsZSA9IGljb25FbGVtZW50Lmhhc0NsYXNzKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICBpZiAoU2hvd0hpZGVfMS5TaG93SGlkZS5Ub2dnbGUgIT09IHNob3dIaWRlICYmICgoY3VycmVudGx5VmlzaWJsZSAmJiBzaG93SGlkZSA9PT0gU2hvd0hpZGVfMS5TaG93SGlkZS5TaG93KSB8fFxyXG4gICAgICAgICAgICAoIWN1cnJlbnRseVZpc2libGUgJiYgc2hvd0hpZGUgPT09IFNob3dIaWRlXzEuU2hvd0hpZGUuSGlkZSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFjdXJyZW50bHlWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5maW5kKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIikuc2xpZGVEb3duKDIwMCk7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5hZGRDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsIFwidHJ1ZVwiKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJhcmlhLWxhYmVsXCIsIFwiUHJlc3MgZW50ZXIgb3Igc3BhY2UgdG8gY29sbGFwc2UgZmlsdGVyIHZhbHVlcyBmb3IgXCIgKyBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5maW5kKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIikuc2xpZGVVcCgyMDApO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5yZW1vdmVDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LmFkZENsYXNzKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCBcImZhbHNlXCIpXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcImFyaWEtbGFiZWxcIiwgXCJQcmVzcyBlbnRlciBvciBzcGFjZSB0byBleHBhbmQgZmlsdGVyIHZhbHVlcyBmb3IgXCIgKyBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4cGFuZENvbGxhcHNlTWFuYWdlcjtcclxufSgpKTtcclxuZXhwb3J0cy5FeHBhbmRDb2xsYXBzZU1hbmFnZXIgPSBFeHBhbmRDb2xsYXBzZU1hbmFnZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbm9kZV9tb2R1bGVzL3Rocm90dGxlLWRlYm91bmNlL3Rocm90dGxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWZpbmVkLG5vLXBhcmFtLXJlYXNzaWduLG5vLXNoYWRvdyAqL1xuXG4vKipcbiAqIFRocm90dGxlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBFc3BlY2lhbGx5IHVzZWZ1bCBmb3IgcmF0ZSBsaW1pdGluZ1xuICogZXhlY3V0aW9uIG9mIGhhbmRsZXJzIG9uIGV2ZW50cyBsaWtlIHJlc2l6ZSBhbmQgc2Nyb2xsLlxuICpcbiAqIEBwYXJhbSAge051bWJlcn0gICAgZGVsYXkgICAgICAgICAgQSB6ZXJvLW9yLWdyZWF0ZXIgZGVsYXkgaW4gbWlsbGlzZWNvbmRzLiBGb3IgZXZlbnQgY2FsbGJhY2tzLCB2YWx1ZXMgYXJvdW5kIDEwMCBvciAyNTAgKG9yIGV2ZW4gaGlnaGVyKSBhcmUgbW9zdCB1c2VmdWwuXG4gKiBAcGFyYW0gIHtCb29sZWFufSAgIG5vVHJhaWxpbmcgICAgIE9wdGlvbmFsLCBkZWZhdWx0cyB0byBmYWxzZS4gSWYgbm9UcmFpbGluZyBpcyB0cnVlLCBjYWxsYmFjayB3aWxsIG9ubHkgZXhlY3V0ZSBldmVyeSBgZGVsYXlgIG1pbGxpc2Vjb25kcyB3aGlsZSB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3R0bGVkLWZ1bmN0aW9uIGlzIGJlaW5nIGNhbGxlZC4gSWYgbm9UcmFpbGluZyBpcyBmYWxzZSBvciB1bnNwZWNpZmllZCwgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCBvbmUgZmluYWwgdGltZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlciB0aGUgbGFzdCB0aHJvdHRsZWQtZnVuY3Rpb24gY2FsbC4gKEFmdGVyIHRoZSB0aHJvdHRsZWQtZnVuY3Rpb24gaGFzIG5vdCBiZWVuIGNhbGxlZCBmb3IgYGRlbGF5YCBtaWxsaXNlY29uZHMsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBpbnRlcm5hbCBjb3VudGVyIGlzIHJlc2V0KVxuICogQHBhcmFtICB7RnVuY3Rpb259ICBjYWxsYmFjayAgICAgICBBIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIGRlbGF5IG1pbGxpc2Vjb25kcy4gVGhlIGB0aGlzYCBjb250ZXh0IGFuZCBhbGwgYXJndW1lbnRzIGFyZSBwYXNzZWQgdGhyb3VnaCwgYXMtaXMsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGBjYWxsYmFja2Agd2hlbiB0aGUgdGhyb3R0bGVkLWZ1bmN0aW9uIGlzIGV4ZWN1dGVkLlxuICogQHBhcmFtICB7Qm9vbGVhbn0gICBkZWJvdW5jZU1vZGUgICBJZiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIHNjaGVkdWxlIGBjbGVhcmAgdG8gZXhlY3V0ZSBhZnRlciBgZGVsYXlgIG1zLiBJZiBgZGVib3VuY2VNb2RlYCBpcyBmYWxzZSAoYXQgZW5kKSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGUgYGNhbGxiYWNrYCB0byBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuXG4gKlxuICogQHJldHVybiB7RnVuY3Rpb259ICBBIG5ldywgdGhyb3R0bGVkLCBmdW5jdGlvbi5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoIGRlbGF5LCBub1RyYWlsaW5nLCBjYWxsYmFjaywgZGVib3VuY2VNb2RlICkge1xuXG5cdC8vIEFmdGVyIHdyYXBwZXIgaGFzIHN0b3BwZWQgYmVpbmcgY2FsbGVkLCB0aGlzIHRpbWVvdXQgZW5zdXJlcyB0aGF0XG5cdC8vIGBjYWxsYmFja2AgaXMgZXhlY3V0ZWQgYXQgdGhlIHByb3BlciB0aW1lcyBpbiBgdGhyb3R0bGVgIGFuZCBgZW5kYFxuXHQvLyBkZWJvdW5jZSBtb2Rlcy5cblx0dmFyIHRpbWVvdXRJRDtcblxuXHQvLyBLZWVwIHRyYWNrIG9mIHRoZSBsYXN0IHRpbWUgYGNhbGxiYWNrYCB3YXMgZXhlY3V0ZWQuXG5cdHZhciBsYXN0RXhlYyA9IDA7XG5cblx0Ly8gYG5vVHJhaWxpbmdgIGRlZmF1bHRzIHRvIGZhbHN5LlxuXHRpZiAoIHR5cGVvZiBub1RyYWlsaW5nICE9PSAnYm9vbGVhbicgKSB7XG5cdFx0ZGVib3VuY2VNb2RlID0gY2FsbGJhY2s7XG5cdFx0Y2FsbGJhY2sgPSBub1RyYWlsaW5nO1xuXHRcdG5vVHJhaWxpbmcgPSB1bmRlZmluZWQ7XG5cdH1cblxuXHQvLyBUaGUgYHdyYXBwZXJgIGZ1bmN0aW9uIGVuY2Fwc3VsYXRlcyBhbGwgb2YgdGhlIHRocm90dGxpbmcgLyBkZWJvdW5jaW5nXG5cdC8vIGZ1bmN0aW9uYWxpdHkgYW5kIHdoZW4gZXhlY3V0ZWQgd2lsbCBsaW1pdCB0aGUgcmF0ZSBhdCB3aGljaCBgY2FsbGJhY2tgXG5cdC8vIGlzIGV4ZWN1dGVkLlxuXHRmdW5jdGlvbiB3cmFwcGVyICgpIHtcblxuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHR2YXIgZWxhcHNlZCA9IE51bWJlcihuZXcgRGF0ZSgpKSAtIGxhc3RFeGVjO1xuXHRcdHZhciBhcmdzID0gYXJndW1lbnRzO1xuXG5cdFx0Ly8gRXhlY3V0ZSBgY2FsbGJhY2tgIGFuZCB1cGRhdGUgdGhlIGBsYXN0RXhlY2AgdGltZXN0YW1wLlxuXHRcdGZ1bmN0aW9uIGV4ZWMgKCkge1xuXHRcdFx0bGFzdEV4ZWMgPSBOdW1iZXIobmV3IERhdGUoKSk7XG5cdFx0XHRjYWxsYmFjay5hcHBseShzZWxmLCBhcmdzKTtcblx0XHR9XG5cblx0XHQvLyBJZiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbikgdGhpcyBpcyB1c2VkIHRvIGNsZWFyIHRoZSBmbGFnXG5cdFx0Ly8gdG8gYWxsb3cgZnV0dXJlIGBjYWxsYmFja2AgZXhlY3V0aW9ucy5cblx0XHRmdW5jdGlvbiBjbGVhciAoKSB7XG5cdFx0XHR0aW1lb3V0SUQgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0aWYgKCBkZWJvdW5jZU1vZGUgJiYgIXRpbWVvdXRJRCApIHtcblx0XHRcdC8vIFNpbmNlIGB3cmFwcGVyYCBpcyBiZWluZyBjYWxsZWQgZm9yIHRoZSBmaXJzdCB0aW1lIGFuZFxuXHRcdFx0Ly8gYGRlYm91bmNlTW9kZWAgaXMgdHJ1ZSAoYXQgYmVnaW4pLCBleGVjdXRlIGBjYWxsYmFja2AuXG5cdFx0XHRleGVjKCk7XG5cdFx0fVxuXG5cdFx0Ly8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVvdXQuXG5cdFx0aWYgKCB0aW1lb3V0SUQgKSB7XG5cdFx0XHRjbGVhclRpbWVvdXQodGltZW91dElEKTtcblx0XHR9XG5cblx0XHRpZiAoIGRlYm91bmNlTW9kZSA9PT0gdW5kZWZpbmVkICYmIGVsYXBzZWQgPiBkZWxheSApIHtcblx0XHRcdC8vIEluIHRocm90dGxlIG1vZGUsIGlmIGBkZWxheWAgdGltZSBoYXMgYmVlbiBleGNlZWRlZCwgZXhlY3V0ZVxuXHRcdFx0Ly8gYGNhbGxiYWNrYC5cblx0XHRcdGV4ZWMoKTtcblxuXHRcdH0gZWxzZSBpZiAoIG5vVHJhaWxpbmcgIT09IHRydWUgKSB7XG5cdFx0XHQvLyBJbiB0cmFpbGluZyB0aHJvdHRsZSBtb2RlLCBzaW5jZSBgZGVsYXlgIHRpbWUgaGFzIG5vdCBiZWVuXG5cdFx0XHQvLyBleGNlZWRlZCwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0byBleGVjdXRlIGBkZWxheWAgbXMgYWZ0ZXIgbW9zdFxuXHRcdFx0Ly8gcmVjZW50IGV4ZWN1dGlvbi5cblx0XHRcdC8vXG5cdFx0XHQvLyBJZiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIHNjaGVkdWxlIGBjbGVhcmAgdG8gZXhlY3V0ZVxuXHRcdFx0Ly8gYWZ0ZXIgYGRlbGF5YCBtcy5cblx0XHRcdC8vXG5cdFx0XHQvLyBJZiBgZGVib3VuY2VNb2RlYCBpcyBmYWxzZSAoYXQgZW5kKSwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0b1xuXHRcdFx0Ly8gZXhlY3V0ZSBhZnRlciBgZGVsYXlgIG1zLlxuXHRcdFx0dGltZW91dElEID0gc2V0VGltZW91dChkZWJvdW5jZU1vZGUgPyBjbGVhciA6IGV4ZWMsIGRlYm91bmNlTW9kZSA9PT0gdW5kZWZpbmVkID8gZGVsYXkgLSBlbGFwc2VkIDogZGVsYXkpO1xuXHRcdH1cblxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSB3cmFwcGVyIGZ1bmN0aW9uLlxuXHRyZXR1cm4gd3JhcHBlcjtcblxufTtcblxuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvbWFpbi9FbnRyeS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9GYWNldCAqLyAxNSkpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0ZpbHRlciAqLyAzMCkpO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL21haW4vRmFjZXQudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZhY2V0VGVtcGxhdGVTZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXJ2aWNlcy9GYWNldFRlbXBsYXRlU2VydmljZSAqLyAxNik7XHJcbnZhciBGYWNldFRyZWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vLi4vYTExeS9GYWNldFRyZWUgKi8gMjYpO1xyXG52YXIgRmFjZXRDb25maWdTdG9yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9jb25maWcvRmFjZXRDb25maWdTdG9yZSAqLyAyOSk7XHJcbnZhciBGYWNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZhY2V0KG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluID0gW107XHJcbiAgICAgICAgdGhpcy5iaW5kID0gZnVuY3Rpb24gKGZhY2V0cykge1xyXG4gICAgICAgICAgICBfdGhpcy50ZW1wbGF0ZVNlcnZpY2Uuc2V0RGF0YShmYWNldHMpO1xyXG4gICAgICAgICAgICBfdGhpcy5yZVJlbmRlcigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IF90aGlzLnRlbXBsYXRlU2VydmljZS5nZXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnVsbEZhY2V0ID0gX3RoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5mYWNldEVsZW1lbnQuaW5uZXJIVE1MID0gZnVsbEZhY2V0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyZWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3JvbGU9XCJ0cmVlXCJdJyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5mYWNldFRyZWUgPSBuZXcgRmFjZXRUcmVlXzEuRmFjZXRUcmVlKF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29udGFpbmVyRWxlbWVudCwgX3RoaXMsIF90aGlzLmNvbmZpZ1N0b3JlKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZhY2V0VHJlZS5pbml0KCk7XHJcbiAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRGYWNldENvbmZpZyA9IGZ1bmN0aW9uIChmYWNldENvbmZpZykge1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnID0gZmFjZXRDb25maWc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmZhY2V0VHJlZS5kZXN0cm95KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gbmV3IEZhY2V0Q29uZmlnU3RvcmVfMS5GYWNldENvbmZpZ1N0b3JlKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZmFjZXRFbGVtZW50ID0gb3B0aW9ucy5jb250YWluZXJFbGVtZW50O1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlID0gbmV3IEZhY2V0VGVtcGxhdGVTZXJ2aWNlXzEuRmFjZXRUZW1wbGF0ZVNlcnZpY2UodGhpcy5jb25maWdTdG9yZSk7XHJcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LFxyXG4gICAgICAgIC8vICAgICB0aGlzLmNvbmZpZ1N0b3JlLCB0aGlzLnRlbXBsYXRlU2VydmljZSkpO1xyXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEZhY2V0QWN0aW9uSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xyXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEZhY2V0U2VhcmNoSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xyXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgSG90S2V5c0ZhY2V0SGFuZGxlcigpKTtcclxuICAgICAgICAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBQaW5VbnBpbkV2ZW50SGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSwgdGhpcy50ZW1wbGF0ZVNlcnZpY2UpKTtcclxuICAgICAgICAvLyAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBTaG93TW9yZUxlc3NIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgLy8gLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50KSk7XHJcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xyXG4gICAgICAgIC8vICAgICBoYW5kbGVyLlJlZ2lzdGVyRG9tSGFuZGxlcigpO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZhY2V0O1xyXG59KCkpO1xyXG5leHBvcnRzLkZhY2V0ID0gRmFjZXQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL3NlcnZpY2VzL0ZhY2V0VGVtcGxhdGVTZXJ2aWNlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmFjZXRNYWluID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi8uLi9oYnMvZmFjZXQtbWFpbi5oYnMgKi8gMTcpO1xyXG52YXIgRmFjZXRUZW1wbGF0ZVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldFRlbXBsYXRlU2VydmljZShjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YSA9IGZ1bmN0aW9uIChmYWNldHMpIHtcclxuICAgICAgICAgICAgX3RoaXMuZGF0YSA9IGZhY2V0cztcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRhdGE7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbXBhcmVGbiA9IGZ1bmN0aW9uIChwcmV2LCBuZXh0KSB7XHJcbiAgICAgICAgICAgIGlmIChwcmV2Lm9yZGVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV4dC5vcmRlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJldi5vcmRlciAtIG5leHQub3JkZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm1lcmdlV2l0aEZhY2V0Q29uZmlnID0gZnVuY3Rpb24gKGZhY2V0cykge1xyXG4gICAgICAgICAgICB2YXIgbWVyZ2VkQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBmYWNldHNfMSA9IGZhY2V0czsgX2kgPCBmYWNldHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBmYWNldCA9IGZhY2V0c18xW19pXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWNldENvbmZpZyA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZXRDb25maWcuaWQgPT09IGZhY2V0LmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkOiBmYWNldENvbmZpZy5jb2xsYXBzZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldFJhbmdlczogZmFjZXQuZmFjZXRSYW5nZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlczogZmFjZXQuZmFjZXRWYWx1ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZmFjZXRDb25maWcuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmYWNldENvbmZpZy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IGZhY2V0Q29uZmlnLm9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlubmVkOiBmYWNldENvbmZpZy5waW5uZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBmYWNldENvbmZpZy50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZXJnZWRBcnJheTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRNYWluID0gRmFjZXRNYWluO1xyXG4gICAgfVxyXG4gICAgRmFjZXRUZW1wbGF0ZVNlcnZpY2UucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZmFjZXRzKSB7XHJcbiAgICAgICAgdmFyIGNvbGxhcHNlZCA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2xsYXBzZWQ7XHJcbiAgICAgICAgdmFyIG1lcmdlZEZhY2V0cyA9IHRoaXMubWVyZ2VXaXRoRmFjZXRDb25maWcoZmFjZXRzKTtcclxuICAgICAgICB2YXIgZmF2b3JpdGVzID0gbWVyZ2VkRmFjZXRzLmZpbHRlcihmdW5jdGlvbiAoZikgeyByZXR1cm4gZi5waW5uZWQgIT09IHVuZGVmaW5lZCAmJiBmLnBpbm5lZDsgfSk7XHJcbiAgICAgICAgdmFyIG5vbkZhdm9yaXRlcyA9IG1lcmdlZEZhY2V0cy5maWx0ZXIoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGYucGlubmVkID09PSB1bmRlZmluZWQgfHwgIWYucGlubmVkOyB9KTtcclxuICAgICAgICBmYXZvcml0ZXMuc29ydCh0aGlzLmNvbXBhcmVGbik7XHJcbiAgICAgICAgbm9uRmF2b3JpdGVzLnNvcnQodGhpcy5jb21wYXJlRm4pO1xyXG4gICAgICAgIHZhciBub09mRmFjZXRUb1Nob3cgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMubm9PZkZhY2V0VG9TaG93O1xyXG4gICAgICAgIHZhciBpZFByZWZpeCA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5pZFByZWZpeDtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW4oeyBpZFByZWZpeDogaWRQcmVmaXgsIGZhdm9yaXRlczogZmF2b3JpdGVzLCBub25GYXZvcml0ZXM6IG5vbkZhdm9yaXRlcywgbm9PZkZhY2V0VG9TaG93OiBub09mRmFjZXRUb1Nob3cgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZhY2V0VGVtcGxhdGVTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLkZhY2V0VGVtcGxhdGVTZXJ2aWNlID0gRmFjZXRUZW1wbGF0ZVNlcnZpY2U7XHJcblxuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvZmFjZXQtbWFpbi5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIiAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1ib2R5IGd1aSBmbHVpZC1oIG9mLWhpZGRlbiBndWktaGlkZGVuXFxcIj5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvZmFjZXQtYm9keS5oYnMgKi8gMyksZGVwdGgwLHtcIm5hbWVcIjpcImZhY2V0LWJvZHlcIixcImRhdGFcIjpkYXRhLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L2Rpdj5cXG5cIjtcbn0sXCIzXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIiAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1ib2R5IGd1aSBmbHVpZC1oIG9mLWhpZGRlblxcXCI+XCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2ZhY2V0LWJvZHkuaGJzICovIDMpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC1ib2R5XCIsXCJkYXRhXCI6ZGF0YSxcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC9kaXY+XFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJndWkgZmx1aWQtaCBcXFwiPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbGxhcHNlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCksXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC9kaXY+XCI7XG59LFwidXNlUGFydGlhbFwiOnRydWUsXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9mYWNldC1waW5uZWQuaGJzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIjxsaSBjbGFzcz1cXFwiZ3VpIG0tMCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTEwXFxcIiBcXHJcXG4gICAgYXJpYS1sYWJlbD1cXFwiUGlubmVkIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci12YWx1ZT1cXFwiUGlubmVkIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci1pZ25vcmVGb3JTZWFyY2g9XFxcInRydWVcXFwiXFxyXFxuICAgIGFyaWEtZXhwYW5kZWQ9XFxcInRydWVcXFwiXFxyXFxuICAgIHJvbGU9XFxcInRyZWVpdGVtXFxcIlxcclxcbiAgICBpZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLXBpbm5lZC1mYWNldHMtY29udGFpbmVyXFxcIj5cXHJcXG4gICAgPGg2IGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMiBjYXBzIGJvbGQtNTAwIGZsZXggbS1iLTEwIGpjLXNiXFxcIj5cXHJcXG4gICAgICAgIFBJTk5FRCBGSUxURVJTXFxyXFxuICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgZ3VpLWljb24tY2hldnJvbi11cCBleHBhbnNpb24taWNvbiBtLXQtNSBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiPjwvaT5cXHJcXG4gICAgPC9oNj5cXHJcXG4gICAgPHVsIGFyaWEtbGFiZWxsZWRieT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLXBpbm5lZC1mYWNldHMtY29udGFpbmVyXFxcIiBjbGFzcz1cXFwiZ3VpIG0tMCBwLTBcXFwiIHJvbGU9XFxcImdyb3VwXFxcIj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYXZvcml0ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMiwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgIDwvdWw+XFxyXFxuPC9saT5cXHJcXG5cIjtcbn0sXCIyXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uLCBhbGlhczM9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCIgICAgICAgIDxsaSBhcmlhLWxhYmVsPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICBjbGFzcz1cXFwiZ3VpIGl0ZW0gZmFjZXQtaXRlbSBib3JkZXItYm90dG9tIGxpZ2h0IHAtci0xMCBwLXQtNSBwLWItNSBwLWwtNSBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9Db2xsYXBzZWQudHMgKi8gNCkpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkNvbGxhcHNlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgIHJvbGU9XFxcInRyZWVpdGVtXFxcIlxcclxcbiAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL0Jvb2xlYW4udHMgKi8gNSkpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkJvb2xlYW5cIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgZGF0YS1hdHRyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtaXRlbS1oZWFkZXIgZmx1aWQgZ3VpIGl0ZW0gZmxleCBqYy1zYlxcXCIgaWQ9XFxcImZhY2V0LWl0ZW0taGVhZGVyLVwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkYXRhICYmIGRhdGEuaW5kZXgpLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIHByaW1hcnkgZ3VpLXN1YmhlYWRpbmctMSBjYXBzIG0tMCBjdXJzb3ItcG9pbnRlclxcXCIgdGl0bGU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiIFwiXG4gICAgKyAoKHN0YWNrMSA9IF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9TZWxlY3RlZEZpbHRlcnNDb3VudC50cyAqLyA2KSkuY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhY2V0VmFsdWVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJTZWxlY3RlZEZpbHRlcnNDb3VudFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDxzcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGkgIGRhdGEtYXR0ci1pZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgcGluLXVucGluLXNlbGVjdG9yIGd1aS1pY29uLXVucGluIG0tdC01IG0tci0xMCB1bnBpbi1pY29uIGN1cnNvci1wb2ludGVyXFxcIiBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJQcmVzcyBlbnRlciBvciBzcGFjZSB0byB1bnBpbiBmaWx0ZXIgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XFxcIjBcXFwiPjwvaT5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbGxhcHNlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLnByb2dyYW0oNSwgZGF0YSwgMCksXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvZmFjZXQtbGFiZWwuaGJzICovIDcpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC1sYWJlbFwiLFwiZGF0YVwiOmRhdGEsXCJpbmRlbnRcIjpcIiAgICAgICAgICAgIFwiLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgIDwvbGk+XFxyXFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tdXAgZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIj48L2k+XFxyXFxuXCI7XG59LFwiNVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tZG93biBleHBhbnNpb24taWNvbiBtLXQtNSBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiPjwvaT5cXHJcXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmF2b3JpdGVzIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5sZW5ndGggOiBzdGFjazEpLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpO1xufSxcInVzZVBhcnRpYWxcIjp0cnVlLFwidXNlRGF0YVwiOnRydWV9KTtcblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9DaGVja0xlbmd0aC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNoZWNrTGVuZ3RoID0gZnVuY3Rpb24gKGluZGV4LCB2Mikge1xyXG4gICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQgJiYgaW5kZXggKyAxID4gdjIpIHtcclxuICAgICAgICByZXR1cm4gXCJndWktaGlkZGVuIGV4dHJhLWZpbHRlclwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiXCI7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGNoZWNrTGVuZ3RoO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9BcHBseVJlbW92ZS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEFwcGx5UmVtb3ZlID0gZnVuY3Rpb24gKGJvb2wpIHtcclxuICAgIHJldHVybiBib29sID8gXCIgcmVtb3ZlIFwiIDogXCIgYXBwbHkgXCI7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IEFwcGx5UmVtb3ZlO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyMSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9oZWxwZXJzL0NoZWNrZWQudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNoZWNrZWQgPSBmdW5jdGlvbiAoYm9vbCkge1xyXG4gICAgcmV0dXJuIGJvb2wgPyBcImNoZWNrZWRcIiA6IFwiXCI7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGNoZWNrZWQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDIyICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9oZWxwZXJzL0Rpc2FibGVkLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgZGlzYWJsZWQgPSBmdW5jdGlvbiAoYm9vbCkge1xyXG4gICAgcmV0dXJuIGJvb2wgPyBcImRpc2FibGVkXCIgOiBcIlwiO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBkaXNhYmxlZDtcclxuXG5cbi8qKiovIH0pLFxuLyogMjMgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9oZWxwZXJzL0hpZGRlbi50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBoaWRkZW4gPSBmdW5jdGlvbiAodmFsdWUsIGludmVydCkge1xyXG4gICAgdmFyIGhpZGU7XHJcbiAgICBpZiAoaW52ZXJ0KSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICBoaWRlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhpZGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaGlkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoaWRlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhpZGUgPyBcIiBndWktaGlkZGVuIFwiIDogXCIgXCI7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGhpZGRlbjtcclxuXG5cbi8qKiovIH0pLFxuLyogMjQgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9TaG93TW9yZUxlc3NMaW5rLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTaG93TW9yZUxlc3NMaW5rID0gZnVuY3Rpb24gKGluZGV4LCB2Miwgb3B0aW9ucykge1xyXG4gICAgaWYgKGluZGV4Lmxlbmd0aCA+IHYyKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiPGxpIGNsYXNzPVxcXCJndWkgbS1iLTUgbS10LTVcXFwiPlwiXHJcbiAgICAgICAgICAgICsgXCI8YSB0YWJpbmRleD1cXFwiMFxcXCIgcm9sZT1cXFwidHJlZWl0ZW1cXFwiIFwiXHJcbiAgICAgICAgICAgICsgXCJhcmlhLWxhYmVsPVxcXCJQcmVzcyBlbnRlciB0byBzaG93IFwiICsgKGluZGV4Lmxlbmd0aCAtIHYyKSArIFwiIG1vcmUgdmFsdWVzXFxcIiBcIlxyXG4gICAgICAgICAgICArIFwiY2xhc3M9XFxcImd1aSBjYXBzIGd1aS1ib2R5LTIgc2ltcGxlIHNob3ctbW9yZS1saW5rIGN1cnNvci1wb2ludGVyIHAtMCBtLXQtM1xcXCI+XCJcclxuICAgICAgICAgICAgKyAoaW5kZXgubGVuZ3RoIC0gdjIpXHJcbiAgICAgICAgICAgICsgXCIgTW9yZSA8L2E+PC9saT5cIlxyXG4gICAgICAgICAgICArIFwiPGxpIGNsYXNzPVxcXCJndWkgbS1iLTUgbS10LTUgZ3VpLWhpZGRlblxcXCI+XCJcclxuICAgICAgICAgICAgKyBcIjxhIHRhYmluZGV4PVxcXCIwXFxcIiByb2xlPVxcXCJ0cmVlaXRlbVxcXCIgXCJcclxuICAgICAgICAgICAgKyBcImFyaWEtbGFiZWw9XFxcIlByZXNzIGVudGVyIHRvIHNob3cgbGVzcyB2YWx1ZXNcXFwiIFwiXHJcbiAgICAgICAgICAgICsgXCJjbGFzcz1cXFwiZ3VpIGNhcHMgZ3VpLWJvZHktMiBzaW1wbGUgc2hvdy1sZXNzLWxpbmsgY3Vyc29yLXBvaW50ZXIgcC0wIG0tdC0zXFxcIj5cIlxyXG4gICAgICAgICAgICArIFwiU2hvdyBMZXNzPC9hPjwvbGk+XCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gU2hvd01vcmVMZXNzTGluaztcclxuXG5cbi8qKiovIH0pLFxuLyogMjUgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvZmFjZXQtdW5waW5uZWQuaGJzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgSGFuZGxlYmFycyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGhhbmRsZWJhcnMgKi8gMCk7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcIjFcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiPGxpIGNsYXNzPVxcXCJndWkgbS0wIHAtci0xMCBwLXQtNSBwLWItNSBwLWwtMTBcXFwiIFxcclxcbiAgICBhcmlhLWxhYmVsPVxcXCJBbGwgRmlsdGVyc1xcXCJcXHJcXG4gICAgZGF0YS1hdHRyLXZhbHVlPVxcXCJBbGwgRmlsdGVyc1xcXCJcXHJcXG4gICAgZGF0YS1hdHRyLWlnbm9yZUZvclNlYXJjaD1cXFwidHJ1ZVxcXCJcXHJcXG4gICAgYXJpYS1leHBhbmRlZD1cXFwidHJ1ZVxcXCJcXHJcXG4gICAgcm9sZT1cXFwidHJlZWl0ZW1cXFwiXFxyXFxuICAgIGlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItdW5waW5uZWQtZmFjZXRzLWNvbnRhaW5lclxcXCI+XFxyXFxuICAgIDxoNiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTIgY2FwcyBib2xkLTUwMCBtLWItMTAgZmxleCBqYy1zYlxcXCI+XFxyXFxuICAgICAgICBBbGwgRklMVEVSU1xcclxcbiAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tdXAgZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIj48L2k+XFxyXFxuICAgIDwvaDY+XFxyXFxuICAgIDx1bCBhcmlhLWxhYmVsbGVkYnk9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi11bnBpbm5lZC1mYWNldHMtY29udGFpbmVyXFxcIiBjbGFzcz1cXFwiZ3VpIG0tMCBwLTBcXFwiIHJvbGU9XFxcImdyb3VwXFxcIj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5ub25GYXZvcml0ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMiwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgIDwvdWw+XFxyXFxuPC9saT5cXHJcXG5cIjtcbn0sXCIyXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uLCBhbGlhczM9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCIgICAgICAgIDxsaSBhcmlhLWxhYmVsPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICBjbGFzcz1cXFwiZ3VpIGl0ZW0gZmFjZXQtaXRlbSBib3JkZXItYm90dG9tIGxpZ2h0IHAtci0xMCBwLXQtNSBwLWItNSBwLWwtNSBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9Db2xsYXBzZWQudHMgKi8gNCkpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkNvbGxhcHNlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgIHJvbGU9XFxcInRyZWVpdGVtXFxcIlxcclxcbiAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL0Jvb2xlYW4udHMgKi8gNSkpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkJvb2xlYW5cIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgZGF0YS1hdHRyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtaXRlbS1oZWFkZXIgZmx1aWQgZ3VpIGl0ZW0gZmxleCBqYy1zYlxcXCIgaWQ9XFxcImZhY2V0LWl0ZW0taGVhZGVyLVwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkYXRhICYmIGRhdGEuaW5kZXgpLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIHByaW1hcnkgZ3VpLXN1YmhlYWRpbmctMSBjYXBzIG0tMCBjdXJzb3ItcG9pbnRlclxcXCIgdGl0bGU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiIFwiXG4gICAgKyAoKHN0YWNrMSA9IF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9TZWxlY3RlZEZpbHRlcnNDb3VudC50cyAqLyA2KSkuY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhY2V0VmFsdWVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJTZWxlY3RlZEZpbHRlcnNDb3VudFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDxzcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPGkgIGRhdGEtYXR0ci1pZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgcGluLXVucGluLXNlbGVjdG9yIGd1aS1pY29uLXBpbiBtLXQtNSBtLXItMTAgcGluLWljb24gY3Vyc29yLXBvaW50ZXJcXFwiIFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIlByZXNzIGVudGVyIG9yIHNwYWNlIHRvIHBpbiBmaWx0ZXIgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XFxcIjBcXFwiPjwvaT5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbGxhcHNlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLnByb2dyYW0oNSwgZGF0YSwgMCksXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvZmFjZXQtbGFiZWwuaGJzICovIDcpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC1sYWJlbFwiLFwiZGF0YVwiOmRhdGEsXCJpbmRlbnRcIjpcIiAgICAgICAgICAgIFwiLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgIDwvbGk+XFxyXFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tdXAgZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIj48L2k+XFxyXFxuXCI7XG59LFwiNVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tZG93biBleHBhbnNpb24taWNvbiBtLXQtNSBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiPjwvaT5cXHJcXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubm9uRmF2b3JpdGVzIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5sZW5ndGggOiBzdGFjazEpLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpO1xufSxcInVzZVBhcnRpYWxcIjp0cnVlLFwidXNlRGF0YVwiOnRydWV9KTtcblxuLyoqKi8gfSksXG4vKiAyNiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9hMTF5L0ZhY2V0VHJlZS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZpbHRlckFjdGlvblR5cGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUgKi8gMSk7XHJcbnZhciBEb21VdGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9Eb21VdGlscyAqLyAxMCk7XHJcbnZhciBGYWNldFRyZWVJdGVtXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0ZhY2V0VHJlZUl0ZW0gKi8gMjcpO1xyXG52YXIgRmFjZXRUcmVlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmFjZXRUcmVlKG5vZGUsIGZhY2V0LCBjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gTG9jYWxcclxuICAgICAgICB0aGlzLmxhc3RJbnB1dFZhbHVlID0gXCJcIjtcclxuICAgICAgICB0aGlzLmZpbmRUcmVlaXRlbXMgPSBmdW5jdGlvbiAobm9kZSwgdHJlZSwgZ3JvdXApIHtcclxuICAgICAgICAgICAgdmFyIGVsZW0gPSBub2RlLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgICAgICB2YXIgdGkgPSBncm91cDtcclxuICAgICAgICAgICAgd2hpbGUgKGVsZW0pIHtcclxuICAgICAgICAgICAgICAgIHZhciByb2xlID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJyb2xlXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJvbGUgJiYgcm9sZS50b0xvd2VyQ2FzZSgpID09PSBcInRyZWVpdGVtXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aSA9IG5ldyBGYWNldFRyZWVJdGVtXzEuRmFjZXRUcmVlSXRlbShlbGVtLCB0cmVlLCBncm91cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGkuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVpdGVtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAucHVzaCh0aSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmlyc3RDaGFyc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAucHVzaCh0aS5sYWJlbC5zdWJzdHJpbmcoMCwgMSkudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5maXJzdEVsZW1lbnRDaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmZpbmRUcmVlaXRlbXMoZWxlbSwgdHJlZSwgdGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxlbSA9IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vIGluaXRpYWxpemUgcG9wIHVwIG1lbnVzXHJcbiAgICAgICAgICAgIGlmICghX3RoaXMudHJlZURvbU5vZGUuZ2V0QXR0cmlidXRlKFwicm9sZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAudHJlZURvbU5vZGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInRyZWVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gUG9wdWxhdGUgYWxsIFRyZWUgSXRlbXNcclxuICAgICAgICAgICAgX3RoaXMuZmluZFRyZWVpdGVtcyhfdGhpcy50cmVlRG9tTm9kZSwgX3RoaXMsIGZhbHNlKTtcclxuICAgICAgICAgICAgLy8gVXBkYXRlIFZpc2libGUgVHJlZSBJdGVtc1xyXG4gICAgICAgICAgICBfdGhpcy51cGRhdGVWaXNpYmxlVHJlZWl0ZW1zKCk7XHJcbiAgICAgICAgICAgIC8vIFNldCB0YWIgSW5kZXggb2YgZmlyc3QgdHJlZSBpdGVtLlxyXG4gICAgICAgICAgICBfdGhpcy5maXJzdFRyZWVpdGVtLnRyZWVJdGVtRG9tTm9kZS50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIC8vIEV2ZW50IEhhbmRsZXJzXHJcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlQWxsTm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX3RoaXMuY29sbGFwc2VBbGxJdGVtcyk7XHJcbiAgICAgICAgICAgIF90aGlzLmV4cGFuZEFsbE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF90aGlzLmV4cGFuZEFsbEl0ZW1zKTtcclxuICAgICAgICAgICAgX3RoaXMuc2VhcmNoQm94Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgX3RoaXMuaGFuZGxlU2VhcmNoRm9yRmlsdGVycyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIF90aGlzLnNldEZvY3VzVG9TZWFyY2hCb3gpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLm9mZihfdGhpcy5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgX3RoaXMuc2V0Rm9jdXNUb1NlYXJjaEJveCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldEZvY3VzVG9TZWFyY2hCb3ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXkgPT09IFwiZlwiKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2VhcmNoQm94Tm9kZS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldEZvY3VzVG9JdGVtID0gZnVuY3Rpb24gKHRyZWVpdGVtLCBkb250U2V0Zm9jdXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aSA9PT0gdHJlZWl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aS50cmVlSXRlbURvbU5vZGUudGFiSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZG9udFNldGZvY3VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aS50cmVlSXRlbURvbU5vZGUudGFiSW5kZXggPSAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c1RvRmlyc3RWaXNpYmxlID0gZnVuY3Rpb24gKGRvbnRTZXRmb2N1cykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMudHJlZWl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldEZvY3VzVG9JdGVtKHRpLCBkb250U2V0Zm9jdXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldEZvY3VzVG9OZXh0SXRlbSA9IGZ1bmN0aW9uIChjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgbmV4dEl0ZW07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAoX3RoaXMudHJlZWl0ZW1zLmxlbmd0aCAtIDEpOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpID0gX3RoaXMudHJlZWl0ZW1zW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpID09PSBjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRJdGVtID0gdGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5leHRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRGb2N1c1RvSXRlbShuZXh0SXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNUb1ByZXZpb3VzSXRlbSA9IGZ1bmN0aW9uIChjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgcHJldkl0ZW07XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy50cmVlaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGkgPT09IGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGkuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkl0ZW0gPSB0aTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocHJldkl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldEZvY3VzVG9JdGVtKHByZXZJdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c1RvUGFyZW50SXRlbSA9IGZ1bmN0aW9uIChjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEl0ZW0uZ3JvdXBUcmVlaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0Rm9jdXNUb0l0ZW0oY3VycmVudEl0ZW0uZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNUb0ZpcnN0SXRlbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0Rm9jdXNUb0l0ZW0oX3RoaXMuZmlyc3RUcmVlaXRlbSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldEZvY3VzVG9MYXN0SXRlbSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2V0Rm9jdXNUb0l0ZW0oX3RoaXMubGFzdFRyZWVpdGVtKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXhwYW5kVHJlZWl0ZW0gPSBmdW5jdGlvbiAoY3VycmVudEl0ZW0sIG5vdGlmeSkge1xyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBUcmVlIEl0ZW0gaXMgZXhwYW5kYWJsZVxyXG4gICAgICAgICAgICBpZiAoY3VycmVudEl0ZW0uaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLnNldEFyaWFFeHBhbmRlZChjdXJyZW50SXRlbS50cmVlSXRlbURvbU5vZGUsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZUV4cGFuc2lvbkljb24oY3VycmVudEl0ZW0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcyhub3RpZnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlQWxsTm9kZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgX3RoaXMuZXhwYW5kQWxsTm9kZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXhwYW5kQWxsU2libGluZ0l0ZW1zID0gZnVuY3Rpb24gKGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy50cmVlaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoKHRpLmdyb3VwVHJlZWl0ZW0gPT09IGN1cnJlbnRJdGVtLmdyb3VwVHJlZWl0ZW0pICYmIHRpLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cGFuZFRyZWVpdGVtKHRpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5ub3RpZnlDb2xsYXBzZUFuZEV4cGFuc2lvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxJdGVtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5leHBhbmRUcmVlaXRlbSh0aSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICBfdGhpcy5leHBhbmRBbGxOb2RlLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VBbGxOb2RlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIF90aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbGxhcHNlQWxsSXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy50cmVlaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VUcmVlaXRlbSh0aSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuZXhwYW5kQWxsTm9kZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VBbGxOb2RlLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgX3RoaXMuZXhwYW5kQWxsTm9kZS5mb2N1cygpO1xyXG4gICAgICAgICAgICBfdGhpcy5ub3RpZnlDb2xsYXBzZUFuZEV4cGFuc2lvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUFsbFNpYmxpbmdJdGVtcyA9IGZ1bmN0aW9uIChjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMudHJlZWl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKCh0aS5ncm91cFRyZWVpdGVtID09PSBjdXJyZW50SXRlbS5ncm91cFRyZWVpdGVtKSAmJiB0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2xsYXBzZVRyZWVpdGVtKHRpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5ub3RpZnlDb2xsYXBzZUFuZEV4cGFuc2lvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZVRyZWVpdGVtID0gZnVuY3Rpb24gKGN1cnJlbnRJdGVtLCBub3RpZnkpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwVHJlZWl0ZW07XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbS5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwVHJlZWl0ZW0gPSBjdXJyZW50SXRlbTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdyb3VwVHJlZWl0ZW0gPSBjdXJyZW50SXRlbS5ncm91cFRyZWVpdGVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChncm91cFRyZWVpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLnNldEFyaWFFeHBhbmRlZChncm91cFRyZWVpdGVtLnRyZWVJdGVtRG9tTm9kZSwgXCJmYWxzZVwiKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRvZ2dsZUV4cGFuc2lvbkljb24oZ3JvdXBUcmVlaXRlbSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcyhub3RpZnkpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0Rm9jdXNUb0l0ZW0oZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICBfdGhpcy5leHBhbmRBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy50b2dnbGVFeHBhbnNpb25JY29uID0gZnVuY3Rpb24gKGdyb3VwVHJlZWl0ZW0sIGN1cnJlbnRFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICB2YXIgaWNvbk5vZGVMaXN0ID0gZ3JvdXBUcmVlaXRlbS50cmVlSXRlbURvbU5vZGUucXVlcnlTZWxlY3RvckFsbChcIi5leHBhbnNpb24taWNvblwiKTtcclxuICAgICAgICAgICAgdmFyIGljb25Ob2RlO1xyXG4gICAgICAgICAgICBpZiAoaWNvbk5vZGVMaXN0ICYmIGljb25Ob2RlTGlzdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGljb25Ob2RlID0gaWNvbk5vZGVMaXN0WzBdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghY3VycmVudEV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpY29uTm9kZS5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICAgICAgICAgIGljb25Ob2RlLmNsYXNzTGlzdC5hZGQoXCJndWktaWNvbi1jaGV2cm9uLWRvd25cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpY29uTm9kZS5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICAgICAgaWNvbk5vZGUuY2xhc3NMaXN0LmFkZChcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcyA9IGZ1bmN0aW9uIChub3RpZnkpIHtcclxuICAgICAgICAgICAgX3RoaXMuZmlyc3RUcmVlaXRlbSA9IF90aGlzLnRyZWVpdGVtc1swXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRfMSA9IHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aS50cmVlSXRlbURvbU5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ3VpLWhpZGRlblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHx8IHBhcmVudF8xLmNsYXNzTGlzdC5jb250YWlucyhcImd1aS1oaWRkZW5cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHdoaWxlIChwYXJlbnRfMSAmJiAocGFyZW50XzEgIT09IF90aGlzLnRyZWVEb21Ob2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRfMS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIpID09PSBcImZhbHNlXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudF8xID0gcGFyZW50XzEucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5sYXN0VHJlZWl0ZW0gPSB0aTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobm90aWZ5KSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5ub3RpZnlDb2xsYXBzZUFuZEV4cGFuc2lvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldEZvY3VzQnlGaXJzdENoYXJhY3RlciA9IGZ1bmN0aW9uIChjdXJyZW50SXRlbSwgY2hhcikge1xyXG4gICAgICAgICAgICB2YXIgc3RhcnQ7XHJcbiAgICAgICAgICAgIHZhciBpbmRleDtcclxuICAgICAgICAgICAgY2hhciA9IGNoYXIudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgLy8gR2V0IHN0YXJ0IGluZGV4IGZvciBzZWFyY2ggYmFzZWQgb24gcG9zaXRpb24gb2YgY3VycmVudEl0ZW1cclxuICAgICAgICAgICAgc3RhcnQgPSBfdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVpdGVtc1xyXG4gICAgICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudEl0ZW0pICsgMTtcclxuICAgICAgICAgICAgaWYgKHN0YXJ0ID09PSBfdGhpcy50cmVlaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydCA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2hlY2sgcmVtYWluaW5nIHNsb3RzIGluIHRoZSBtZW51XHJcbiAgICAgICAgICAgIGluZGV4ID0gX3RoaXMuZ2V0SW5kZXhGaXJzdENoYXJzKHN0YXJ0LCBjaGFyKTtcclxuICAgICAgICAgICAgLy8gSWYgbm90IGZvdW5kIGluIHJlbWFpbmluZyBzbG90cywgY2hlY2sgZnJvbSBiZWdpbm5pbmdcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBfdGhpcy5nZXRJbmRleEZpcnN0Q2hhcnMoMCwgY2hhcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgbWF0Y2ggd2FzIGZvdW5kLi4uXHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRGb2N1c1RvSXRlbShfdGhpcy50cmVlaXRlbXNbaW5kZXhdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5nZXRJbmRleEZpcnN0Q2hhcnMgPSBmdW5jdGlvbiAoc3RhcnRJbmRleCwgY2hhcikge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA8IF90aGlzLmZpcnN0Q2hhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy50cmVlaXRlbXNbaV0uaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09IF90aGlzLmZpcnN0Q2hhcnNbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2hvd01vcmVWYWx1ZXMgPSBmdW5jdGlvbiAoZ3JvdXBJdGVtKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy50cmVlaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzIgPSB0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmICh0aS5ncm91cFRyZWVpdGVtID09PSBncm91cEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRfMi5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aS5pc1Nob3dMZXNzTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRfMi5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGkudHJlZUl0ZW1Eb21Ob2RlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aS5pc1Nob3dNb3JlTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRfMi5jbGFzc0xpc3QuYWRkKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVZpc2libGVUcmVlaXRlbXMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2hvd0xlc3NWYWx1ZXMgPSBmdW5jdGlvbiAoZ3JvdXBJdGVtKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy50cmVlaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyZW50XzMgPSB0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmICh0aS5ncm91cFRyZWVpdGVtID09PSBncm91cEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50XzMuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZXh0cmEtZmlsdGVyXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudF8zLmNsYXNzTGlzdC5hZGQoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpLmlzU2hvd0xlc3NMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudF8zLmNsYXNzTGlzdC5hZGQoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpLmlzU2hvd01vcmVMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudF8zLmNsYXNzTGlzdC5yZW1vdmUoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS50cmVlSXRlbURvbU5vZGUuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVMYWJlbENoYW5nZSA9IGZ1bmN0aW9uIChjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgY2hlY2tlZCA9IERvbVV0aWxzXzEuRG9tVXRpbHMudG9nZ2xlTGFiZWwoY3VycmVudEl0ZW0udHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGNoZWNrZWQgPyBGaWx0ZXJBY3Rpb25UeXBlXzEuRmlsdGVyQWN0aW9uVHlwZS5BZGQgOiBGaWx0ZXJBY3Rpb25UeXBlXzEuRmlsdGVyQWN0aW9uVHlwZS5NaW51cztcclxuICAgICAgICAgICAgY3VycmVudEl0ZW0udHJlZUl0ZW1Eb21Ob2RlLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgY2hlY2tlZC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkZpbHRlckNoYW5nZShjdXJyZW50SXRlbS5pZCwgY3VycmVudEl0ZW0ubGFiZWwsIGFjdGlvbiwgY3VycmVudEl0ZW0uZGF0YVR5cGUsIGN1cnJlbnRJdGVtLmlzUmFuZ2UpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5ub3RpZnlDb2xsYXBzZUFuZEV4cGFuc2lvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnO1xyXG4gICAgICAgICAgICB2YXIgcHVibGlzaCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMudHJlZWl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9iID0gMCwgZGF0YV8xID0gZGF0YTsgX2IgPCBkYXRhXzEubGVuZ3RoOyBfYisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmYWNldCA9IGRhdGFfMVtfYl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWNldC5pZCA9PT0gdGkuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0LmNvbGxhcHNlZCA9ICF0aS5pc0V4cGFuZGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwdWJsaXNoLnB1c2goeyBrZXk6IGZhY2V0LmlkLCBjb2xsYXBzZWQ6IGZhY2V0LmNvbGxhcHNlZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25Db2xsYXBzZVRvZ2dsZShwdWJsaXNoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlUGluVW5waW4gPSBmdW5jdGlvbiAoZXZlbnQsIHBpbiwgaWQpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRhdGFfMiA9IGRhdGE7IF9pIDwgZGF0YV8yLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZhY2V0ID0gZGF0YV8yW19pXTtcclxuICAgICAgICAgICAgICAgIGlmIChmYWNldC5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldC5waW5uZWQgPSBwaW47XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuZmFjZXQucmVSZW5kZXIoKTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vblBpblVucGluKGlkLCBwaW4pO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlU2VhcmNoRm9yRmlsdGVycyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICB2YXIgdmFsID0gaW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgaWYgKHZhbCA9PT0gX3RoaXMubGFzdElucHV0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5sYXN0SW5wdXRWYWx1ZSA9IHZhbDtcclxuICAgICAgICAgICAgdmFyIGlucHV0VmFsdWVCbGFuayA9IGZhbHNlO1xyXG4gICAgICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09IG51bGwgfHwgdmFsLnRyaW0oKSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgaW5wdXRWYWx1ZUJsYW5rID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlTm90QmxhbmtJbnB1dFNlYXJjaCh2YWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlQmxhbmtJbnB1dFNlYXJjaCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcygpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0Rm9jdXNUb0ZpcnN0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IG1hdGNoZWRHcm91cEl0ZW06IEZhY2V0VHJlZUl0ZW1bXSA9IFtdO1xyXG4gICAgICAgICAgICAvLyBjb25zdCBub3RNYXRjaGVkR3JvdXBJdGVtOiBGYWNldFRyZWVJdGVtW10gPSBbXTtcclxuICAgICAgICAgICAgLy8gZm9yIChjb25zdCB0aSBvZiB0aGlzLnRyZWVpdGVtcykge1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKHRpLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGlmICh0aS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIG1hdGNoZWRHcm91cEl0ZW0ucHVzaCh0aSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgbm90TWF0Y2hlZEdyb3VwSXRlbS5wdXNoKHRpKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAodGkuaXNTaG93TGVzc0xpbmsgfHwgdGkuaXNTaG93TW9yZUxpbmsgKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgRG9tVXRpbHMuaGlkZSh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gZm9yIChjb25zdCB0aSBvZiB0aGlzLnRyZWVpdGVtcykge1xyXG4gICAgICAgICAgICAvLyAgICAgaWYgKHRpLmlzU2hvd0xlc3NMaW5rIHx8IHRpLmlzU2hvd01vcmVMaW5rKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoIG1hdGNoZWRHcm91cEl0ZW0uaW5kZXhPZih0aSkgPiAtMSB8fCBtYXRjaGVkR3JvdXBJdGVtLmluZGV4T2YodGkuZ3JvdXBUcmVlaXRlbSkgPiAtMSApIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIERvbVV0aWxzLnNob3codGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBpZiAoIXRpLmlzRXhwYW5kYWJsZSApIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgaWYgKHRpLnZhbHVlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWwpID4gLTEgKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZEdyb3VwSXRlbS5pbmRleE9mKHRpLmdyb3VwVHJlZWl0ZW0pIDw9IC0xICkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWRHcm91cEl0ZW0ucHVzaCh0aS5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNvbnN0IG5vdE1hdGNoZWRJbmRleCA9IG5vdE1hdGNoZWRHcm91cEl0ZW0uaW5kZXhPZih0aS5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChub3RNYXRjaGVkSW5kZXggPiAtMSApIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICBub3RNYXRjaGVkR3JvdXBJdGVtLnNsaWNlKG5vdE1hdGNoZWRJbmRleCwgbm90TWF0Y2hlZEluZGV4ICsgMSk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIERvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vIGZvciAoY29uc3QgbWcgb2YgbWF0Y2hlZEdyb3VwSXRlbSkge1xyXG4gICAgICAgICAgICAvLyAgICAgbWcuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgLy8gICAgIERvbVV0aWxzLnNldEFyaWFFeHBhbmRlZChtZy50cmVlSXRlbURvbU5vZGUsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgLy8gICAgIERvbVV0aWxzLnNob3cobWcudHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBmb3IgKGNvbnN0IG5tZyBvZiBub3RNYXRjaGVkR3JvdXBJdGVtKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBubWcuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vICAgICBEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQobm1nLnRyZWVJdGVtRG9tTm9kZSwgXCJmYWxzZVwiKTtcclxuICAgICAgICAgICAgLy8gICAgIERvbVV0aWxzLmhpZGUobm1nLnRyZWVJdGVtRG9tTm9kZSk7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQmxhbmtJbnB1dFNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gSGFuZGxlIGJsYW5rIFNlYXJjaCBoZXJlXHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy50cmVlaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGkuaWdub3JlRm9yU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBleHBhbmRhYmxlXHJcbiAgICAgICAgICAgICAgICBpZiAodGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLnNob3codGkudHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkudHJlZUl0ZW1Eb21Ob2RlLmNsYXNzTGlzdC5jb250YWlucyhcImNvbGxhcHNlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLnNldEFyaWFFeHBhbmRlZCh0aS50cmVlSXRlbURvbU5vZGUsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKHRpLnRyZWVJdGVtRG9tTm9kZSwgXCJmYWxzZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRpLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGkuaXNTaG93TW9yZUxpbmsgJiYgIXRpLmlzU2hvd0xlc3NMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRfNCA9IHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXNFeHRyYUZpbHRlciA9IHBhcmVudF80LmNsYXNzTGlzdC5jb250YWlucyhcImV4dHJhLWZpbHRlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRXh0cmFGaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLnNob3codGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkuaXNTaG93TW9yZUxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5zaG93KHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aS5pc1Nob3dMZXNzTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZU5vdEJsYW5rSW5wdXRTZWFyY2ggPSBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgIHZhciBncm91cEl0ZW07XHJcbiAgICAgICAgICAgIHZhciBncm91cEl0ZW1NYXRjaGVkO1xyXG4gICAgICAgICAgICB2YXIgY2hpbGRJdGVtTWF0Y2hlZDtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aS5pZ25vcmVGb3JTZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGV4cGFuZGFibGVcclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgZ3JvdXAgbGV2ZWwgVmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJdGVtID0gdGk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJdGVtTWF0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkSXRlbU1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLnNldEFyaWFFeHBhbmRlZCh0aS50cmVlSXRlbURvbU5vZGUsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZ3JvdXAgaXMgbWF0Y2hpbmdcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cEl0ZW1NYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBncm91cCBpcyBtYXRjaGluZyBleHBhbmQgdGhlIGdyb3VwXHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBJdGVtTWF0Y2hlZCB8fCBjaGlsZEl0ZW1NYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJdGVtLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5zZXRBcmlhRXhwYW5kZWQoZ3JvdXBJdGVtLnRyZWVJdGVtRG9tTm9kZSwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2hvdyhncm91cEl0ZW0udHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZvciBDaGlsZCBMaW5rc1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aS5pc0V4cGFuZGFibGUgJiYgdGkuZ3JvdXBUcmVlaXRlbSA9PT0gZ3JvdXBJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgZ3JvdXAgbWF0Y2hlcyBzZXQgdGhlIHZpc2libGl0eSB0byB0cnVlIGV4Y2VwdCBzaG93IG1vcmUgb3IgbGVzcyBsaW5rc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChncm91cEl0ZW1NYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aS5pc1Nob3dMZXNzTGluayB8fCB0aS5pc1Nob3dNb3JlTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIGdyb3VwIG5vdCBtYXRjaGVkIGNoZWNrIGlmIGNoaWxkIG1hdGNoZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcHAgU2hvdyBtb3JlIG9yIGxlc3MgbGlua3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRpLmlzU2hvd01vcmVMaW5rIHx8IHRpLmlzU2hvd0xlc3NMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGkubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZEl0ZW1NYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IG5vZGU7XHJcbiAgICAgICAgdGhpcy5mYWNldCA9IGZhY2V0O1xyXG4gICAgICAgIHRoaXMudHJlZURvbU5vZGUgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltyb2xlPXRyZWVdXCIpWzBdO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VBbGxOb2RlID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29sbGFwc2UtYWxsXCIpWzBdO1xyXG4gICAgICAgIHRoaXMuZXhwYW5kQWxsTm9kZSA9IHRoaXMucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmV4cGFuZC1hbGxcIilbMF07XHJcbiAgICAgICAgdGhpcy5zZWFyY2hCb3hOb2RlID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmlsdGVyLXNlYXJjaC1pbnB1dFwiKVswXTtcclxuICAgICAgICB0aGlzLnRyZWVpdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZmlyc3RDaGFycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZmlyc3RUcmVlaXRlbSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sYXN0VHJlZWl0ZW0gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZhY2V0VHJlZTtcclxufSgpKTtcclxuZXhwb3J0cy5GYWNldFRyZWUgPSBGYWNldFRyZWU7XHJcblxuXG4vKioqLyB9KSxcbi8qIDI3ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9hMTF5L0ZhY2V0VHJlZUl0ZW0udHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRG9tVXRpbHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRG9tVXRpbHMgKi8gMTApO1xyXG52YXIgS2V5Q29kZXNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vS2V5Q29kZXMgKi8gMjgpO1xyXG52YXIgRmFjZXRUcmVlSXRlbSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZhY2V0VHJlZUl0ZW0obm9kZSwgdHJlZSwgZ3JvdXApIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMudHJlZUl0ZW1Eb21Ob2RlLnRhYkluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIGlmICghX3RoaXMudHJlZUl0ZW1Eb21Ob2RlLmdldEF0dHJpYnV0ZShcInJvbGVcIikpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwidHJlZWl0ZW1cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBfdGhpcy5oYW5kbGVLZXlkb3duLmJpbmQoX3RoaXMpKTtcclxuICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX3RoaXMuaGFuZGxlQ2xpY2suYmluZChfdGhpcykpO1xyXG4gICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCBfdGhpcy5oYW5kbGVGb2N1cy5iaW5kKF90aGlzKSk7XHJcbiAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgX3RoaXMuaGFuZGxlQmx1ci5iaW5kKF90aGlzKSk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIC5maXJzdEVsZW1lbnRDaGlsZFxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIF90aGlzLmhhbmRsZU1vdXNlT3Zlci5iaW5kKF90aGlzKSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgICAgICAgICAuZmlyc3RFbGVtZW50Q2hpbGRcclxuICAgICAgICAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIF90aGlzLmhhbmRsZU1vdXNlT3V0LmJpbmQoX3RoaXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIF90aGlzLmhhbmRsZU1vdXNlT3Zlci5iaW5kKF90aGlzKSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIF90aGlzLmhhbmRsZU1vdXNlT3V0LmJpbmQoX3RoaXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX3RoaXMucGluVW5QaW5Eb21Ob2RlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5waW5VblBpbkRvbU5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIF90aGlzLmhhbmRsZVVuUGluQ2xpY2spO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMucGluVW5QaW5Eb21Ob2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIF90aGlzLmhhbmRsZVVuUGluS2V5dXApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdOb2RlID0gX3RoaXMudHJlZUl0ZW1Eb21Ob2RlLmNsb25lTm9kZSh0cnVlKTtcclxuICAgICAgICAgICAgX3RoaXMudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld05vZGUsIF90aGlzLnRyZWVJdGVtRG9tTm9kZSk7XHJcbiAgICAgICAgICAgIF90aGlzLnRyZWVJdGVtRG9tTm9kZSA9IG51bGw7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmlzRXhwYW5kZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBEb21VdGlsc18xLkRvbVV0aWxzLmlzQXJpYUV4cGFuZGVkKF90aGlzLnRyZWVJdGVtRG9tTm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVVblBpbkNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidW5waW4taWNvblwiKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudHJlZS5oYW5kbGVQaW5VbnBpbihldmVudCwgZmFsc2UsIF90aGlzLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRyZWUuaGFuZGxlUGluVW5waW4oZXZlbnQsIHRydWUsIF90aGlzLmlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVVblBpbktleXVwID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlc18xLktleUNvZGVzLlNQQUNFOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlc18xLktleUNvZGVzLlJFVFVSTjpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInVucGluLWljb25cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJlZS5oYW5kbGVQaW5VbnBpbihldmVudCwgZmFsc2UsIF90aGlzLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnRyZWUuaGFuZGxlUGluVW5waW4oZXZlbnQsIHRydWUsIF90aGlzLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlkb3duID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0Z3QgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgICAgICB2YXIgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgY2hhciA9IGV2ZW50LmtleTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gaXNQcmludGFibGVDaGFyYWN0ZXIoc3RyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyLmxlbmd0aCA9PT0gMSAmJiBzdHIubWF0Y2goL1xcUy8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHByaW50YWJsZUNoYXJhY3RlcihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gXCIqXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5leHBhbmRBbGxTaWJsaW5nSXRlbXMoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQcmludGFibGVDaGFyYWN0ZXIoY2hhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c0J5Rmlyc3RDaGFyYWN0ZXIoaXRlbSwgY2hhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5zdG9wRGVmYXVsdENsaWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5hbHRLZXkgfHwgZXZlbnQuY3RybEtleSB8fCBldmVudC5tZXRhS2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gS2V5Q29kZXNfMS5LZXlDb2Rlcy5TUEFDRSB8fCBldmVudC5rZXlDb2RlID09PSBLZXlDb2Rlc18xLktleUNvZGVzLlJFVFVSTikge1xyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnN0b3BEZWZhdWx0Q2xpY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJpbnRhYmxlQ2hhcmFjdGVyKGNoYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50YWJsZUNoYXJhY3RlcihfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlc18xLktleUNvZGVzLlNQQUNFOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXNfMS5LZXlDb2Rlcy5SRVRVUk46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNFeHBhbmRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbGxhcHNlVHJlZWl0ZW0oX3RoaXMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4cGFuZFRyZWVpdGVtKF90aGlzLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1Nob3dNb3JlTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93TW9yZVZhbHVlcyhfdGhpcy5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1Nob3dMZXNzTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93TGVzc1ZhbHVlcyhfdGhpcy5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhhbmRsZUxhYmVsQ2hhbmdlKF90aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzXzEuS2V5Q29kZXMuVVA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzVG9QcmV2aW91c0l0ZW0oX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlc18xLktleUNvZGVzLkRPV046XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzVG9OZXh0SXRlbShfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzXzEuS2V5Q29kZXMuUklHSFQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Rm9jdXNUb05leHRJdGVtKF90aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5leHBhbmRUcmVlaXRlbShfdGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXNfMS5LZXlDb2Rlcy5MRUZUOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNFeHBhbmRhYmxlICYmIF90aGlzLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsYXBzZVRyZWVpdGVtKF90aGlzLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmluR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Rm9jdXNUb1BhcmVudEl0ZW0oX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXNfMS5LZXlDb2Rlcy5IT01FOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c1RvRmlyc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzXzEuS2V5Q29kZXMuRU5EOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c1RvTGFzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ByaW50YWJsZUNoYXJhY3RlcihjaGFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRhYmxlQ2hhcmFjdGVyKF90aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZUNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIG9ubHkgcHJvY2VzcyBjbGljayBldmVudHMgdGhhdCBkaXJlY3RseSBoYXBwZW5lZCBvbiB0aGlzIHRyZWVpdGVtXHJcbiAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IF90aGlzLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgJiYgIURvbVV0aWxzXzEuRG9tVXRpbHMuaXNTZWxmT3JEZXNjZW5kYW50KF90aGlzLnRyZWVJdGVtRG9tTm9kZS5maXJzdEVsZW1lbnRDaGlsZCwgZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY29sbGFwc2VUcmVlaXRlbShfdGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZXhwYW5kVHJlZWl0ZW0oX3RoaXMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNTaG93TW9yZUxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2hvd01vcmVWYWx1ZXMoX3RoaXMuZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNTaG93TGVzc0xpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2hvd0xlc3NWYWx1ZXMoX3RoaXMuZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaXNMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oYW5kbGVMYWJlbENoYW5nZShfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlRm9jdXMgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBfdGhpcy50cmVlSXRlbURvbU5vZGU7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGVcclxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3RcclxuICAgICAgICAgICAgICAgIC5hZGQoXCJmb2N1c1wiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQmx1ciA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMudHJlZUl0ZW1Eb21Ob2RlO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGVcclxuICAgICAgICAgICAgICAgIC5jbGFzc0xpc3RcclxuICAgICAgICAgICAgICAgIC5yZW1vdmUoXCJmb2N1c1wiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlTW91c2VPdmVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImhvdmVyXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU91dCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldDtcclxuICAgICAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJob3ZlclwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIG5vZGUudGFiSW5kZXggPSAtMTtcclxuICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBUcmVlaXRlbSA9IGdyb3VwO1xyXG4gICAgICAgIHRoaXMudHJlZUl0ZW1Eb21Ob2RlID0gbm9kZTtcclxuICAgICAgICAvLyB0aGlzLmxhYmVsID0gbm9kZVxyXG4gICAgICAgIC8vICAgICAudGV4dENvbnRlbnRcclxuICAgICAgICAvLyAgICAgLnRyaW0oKTtcclxuICAgICAgICB0aGlzLnN0b3BEZWZhdWx0Q2xpY2sgPSBmYWxzZTtcclxuICAgICAgICAvLyBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubGFiZWwgPSBub2RlXHJcbiAgICAgICAgLy8gICAgICAgICAuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKVxyXG4gICAgICAgIC8vICAgICAgICAgLnRyaW0oKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgdGhpcy5waW5VblBpbkRvbU5vZGUgPSB0aGlzLnRyZWVJdGVtRG9tTm9kZS5maXJzdEVsZW1lbnRDaGlsZC5xdWVyeVNlbGVjdG9yKFwiLnBpbi11bnBpbi1zZWxlY3RvclwiKTtcclxuICAgICAgICB0aGlzLmlkID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF0dHItaWRcIik7XHJcbiAgICAgICAgdGhpcy5sYWJlbCA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdHRyLXZhbHVlXCIpO1xyXG4gICAgICAgIHRoaXMuZGF0YVR5cGUgPSBub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtYXR0ci10eXBlXCIpO1xyXG4gICAgICAgIHRoaXMuaXNSYW5nZSA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdHRyLWlzUmFuZ2VcIikgPT09IFwidHJ1ZVwiO1xyXG4gICAgICAgIHRoaXMuaWdub3JlRm9yU2VhcmNoID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF0dHItaWdub3JlRm9yU2VhcmNoXCIpID09PSBcInRydWVcIjtcclxuICAgICAgICB0aGlzLmlzU2hvd01vcmVMaW5rID0gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93LW1vcmUtbGlua1wiKTtcclxuICAgICAgICB0aGlzLmlzU2hvd0xlc3NMaW5rID0gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93LWxlc3MtbGlua1wiKTtcclxuICAgICAgICB0aGlzLmlzTGFiZWwgPSBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJsYWJlbFwiO1xyXG4gICAgICAgIHRoaXMuaXNFeHBhbmRhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmluR3JvdXAgPSBmYWxzZTtcclxuICAgICAgICBpZiAoZ3JvdXApIHtcclxuICAgICAgICAgICAgdGhpcy5pbkdyb3VwID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVsZW0gPSBub2RlLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgIHdoaWxlIChlbGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJ1bFwiKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJncm91cFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNFeHBhbmRhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsZW0gPSBlbGVtLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRmFjZXRUcmVlSXRlbTtcclxufSgpKTtcclxuZXhwb3J0cy5GYWNldFRyZWVJdGVtID0gRmFjZXRUcmVlSXRlbTtcclxuXG5cbi8qKiovIH0pLFxuLyogMjggKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9hMTF5L0tleUNvZGVzLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuS2V5Q29kZXMgPSBPYmplY3QuZnJlZXplKHtcclxuICAgIFJFVFVSTjogMTMsXHJcbiAgICBTUEFDRTogMzIsXHJcbiAgICBQQUdFVVA6IDMzLFxyXG4gICAgUEFHRURPV046IDM0LFxyXG4gICAgRU5EOiAzNSxcclxuICAgIEhPTUU6IDM2LFxyXG4gICAgTEVGVDogMzcsXHJcbiAgICBVUDogMzgsXHJcbiAgICBSSUdIVDogMzksXHJcbiAgICBET1dOOiA0MCxcclxufSk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDI5ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2NvbmZpZy9GYWNldENvbmZpZ1N0b3JlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmFjZXRDb25maWdTdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZhY2V0Q29uZmlnU3RvcmUob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0RmFjZXRPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRpb25UaW1lOiAyMDAsXHJcbiAgICAgICAgICAgIGNvbGxhcHNlZDogZmFsc2UsXHJcbiAgICAgICAgICAgIGNvbnRhaW5lckVsZW1lbnQ6IG51bGwsXHJcbiAgICAgICAgICAgIGZhY2V0Q29uZmlnOiBbXSxcclxuICAgICAgICAgICAgaWRQcmVmaXg6IE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDAwMCkudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgbm9PZkZhY2V0VG9TaG93OiA1LFxyXG4gICAgICAgICAgICAvLyBmYWNldHM6IFtdLFxyXG4gICAgICAgICAgICBvbkNvbGxhcHNlVG9nZ2xlOiBmdW5jdGlvbiAoY29sbGFwc2VDb25maWcpIHtcclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkZpbHRlckNoYW5nZTogZnVuY3Rpb24gKGtleSwgdmFsdWUsIGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gSWdub3JlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uUGluVW5waW46IGZ1bmN0aW9uIChrZXksIHBpbikge1xyXG4gICAgICAgICAgICAgICAgLy8gSWdub3JlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmV4dGVuZE9wdGlvbnMgPSBmdW5jdGlvbiAoaW5wdXRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5vcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwgX3RoaXMuZGVmYXVsdEZhY2V0T3B0aW9ucywgaW5wdXRPcHRpb25zKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kT3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5jb250YWluZXJFbGVtZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBQcm92aWRlIGEgdmFsaWQgY29udGFpbmVyIEVsZW1lbnQgb2JqZWN0XCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGYWNldENvbmZpZ1N0b3JlLnByb3RvdHlwZSwgXCJPcHRpb25zXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXMub3B0aW9uczsgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gRmFjZXRDb25maWdTdG9yZTtcclxufSgpKTtcclxuZXhwb3J0cy5GYWNldENvbmZpZ1N0b3JlID0gRmFjZXRDb25maWdTdG9yZTtcclxuXG5cbi8qKiovIH0pLFxuLyogMzAgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvbWFpbi9GaWx0ZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBIb3RLZXlzRmlsdGVyc0hhbmRsZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2V2ZW50aGFuZGxlcnMvSG90S2V5c0ZpbHRlcnNIYW5kbGVyICovIDMxKTtcclxudmFyIEZpbHRlclRlbXBsYXRlU2VydmljZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vc2VydmljZXMvRmlsdGVyVGVtcGxhdGVTZXJ2aWNlICovIDMyKTtcclxudmFyIEZpbHRlckNvbmZpZ1N0b3JlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLy4uL2NvbmZpZy9GaWx0ZXJDb25maWdTdG9yZSAqLyAzNSk7XHJcbnZhciBldmVudGhhbmRsZXJzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLy4uL2V2ZW50aGFuZGxlcnMgKi8gMzYpO1xyXG52YXIgRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlsdGVyKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluID0gW107XHJcbiAgICAgICAgdGhpcy5iaW5kID0gZnVuY3Rpb24gKGZpbHRlcnMpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmFjZXRTdWJIZWFkZXIgPSBfdGhpcy50ZW1wbGF0ZVNlcnZpY2UuYmluZChmaWx0ZXJzKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZpbHRlckVsZW1lbnQuaHRtbChmYWNldFN1YkhlYWRlcik7XHJcbiAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuZmlsdGVyRWxlbWVudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5maWx0ZXJFbGVtZW50Lm9mZigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZXJDaGFpbi5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlciAhPT0gdW5kZWZpbmVkICYmIGhhbmRsZXIuZGVyZWdpc3RlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5kZXJlZ2lzdGVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IG5ldyBGaWx0ZXJDb25maWdTdG9yZV8xLkZpbHRlckNvbmZpZ1N0b3JlKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudCA9IGpRdWVyeShvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlID0gbmV3IEZpbHRlclRlbXBsYXRlU2VydmljZV8xLkZpbHRlclRlbXBsYXRlU2VydmljZSh0aGlzLmNvbmZpZ1N0b3JlKTtcclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBldmVudGhhbmRsZXJzXzEuRmlsdGVyQWN0aW9uSGFuZGxlcih0aGlzLmZpbHRlckVsZW1lbnQsIHRoaXMuY29uZmlnU3RvcmUpKTtcclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBIb3RLZXlzRmlsdGVyc0hhbmRsZXJfMS5Ib3RLZXlzRmlsdGVyc0hhbmRsZXIoKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgICBoYW5kbGVyLlJlZ2lzdGVyRG9tSGFuZGxlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZpbHRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5GaWx0ZXIgPSBGaWx0ZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDMxICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvSG90S2V5c0ZpbHRlcnNIYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgSG90S2V5c0ZpbHRlcnNIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSG90S2V5c0ZpbHRlcnNIYW5kbGVyKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5SZWdpc3RlckRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeShkb2N1bWVudCkub24oXCJrZXlkb3duXCIsIF90aGlzLmZvY3VzT25TZWFyY2gpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRlUmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGpRdWVyeShkb2N1bWVudCkub2ZmKFwia2V5ZG93blwiLCBfdGhpcy5mb2N1c09uU2VhcmNoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZm9jdXNPblNlYXJjaCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleSA9PT0gXCJyXCIpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkoXCIuZmFjZXQtc3ViaGVhZGVyIC5yZW1vdmUtYWxsXCIpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEhvdEtleXNGaWx0ZXJzSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Ib3RLZXlzRmlsdGVyc0hhbmRsZXIgPSBIb3RLZXlzRmlsdGVyc0hhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDMyICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9zZXJ2aWNlcy9GaWx0ZXJUZW1wbGF0ZVNlcnZpY2UudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmFjZXRTdWJIZWFkZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLy4uLy4uL2hicy9mYWNldC1hcHBsaWVkLWZpbHRlcnMuaGJzICovIDMzKTtcclxudmFyIEZpbHRlclRlbXBsYXRlU2VydmljZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpbHRlclRlbXBsYXRlU2VydmljZShjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMubWVyZ2VXaXRoRmFjZXRDb25maWcgPSBmdW5jdGlvbiAoZmlsdGVycykge1xyXG4gICAgICAgICAgICB2YXIgbWVyZ2VkQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBmaWx0ZXJzXzEgPSBmaWx0ZXJzOyBfaSA8IGZpbHRlcnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBmYWNldCA9IGZpbHRlcnNfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYSA9IDAsIF9iID0gX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5maWx0ZXJDb25maWc7IF9hIDwgX2IubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhY2V0Q29uZmlnID0gX2JbX2FdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWNldENvbmZpZy5pZCA9PT0gZmFjZXQuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VkQXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xsYXBzZWQ6IGZhY2V0Q29uZmlnLmNvbGxhcHNlZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0UmFuZ2VzOiBmYWNldC5mYWNldFJhbmdlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWVzOiBmYWNldC5mYWNldFZhbHVlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBmYWNldENvbmZpZy5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGZhY2V0Q29uZmlnLm5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcjogZmFjZXRDb25maWcub3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaW5uZWQ6IGZhY2V0Q29uZmlnLnBpbm5lZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGZhY2V0Q29uZmlnLnR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG1lcmdlZEFycmF5O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlciA9IEZhY2V0U3ViSGVhZGVyO1xyXG4gICAgfVxyXG4gICAgRmlsdGVyVGVtcGxhdGVTZXJ2aWNlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGZpbHRlcnMpIHtcclxuICAgICAgICB2YXIgbWVyZ2VkRmlsdGVycyA9IHRoaXMubWVyZ2VXaXRoRmFjZXRDb25maWcoZmlsdGVycyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRTdWJIZWFkZXIoeyBmaWx0ZXJzOiBtZXJnZWRGaWx0ZXJzIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2U7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmlsdGVyVGVtcGxhdGVTZXJ2aWNlID0gRmlsdGVyVGVtcGxhdGVTZXJ2aWNlO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzMyAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvZmFjZXQtYXBwbGllZC1maWx0ZXJzLmhicyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBIYW5kbGViYXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgaGFuZGxlYmFycyAqLyAwKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQgZmFjZXQtc3ViaGVhZGVyIGd1aSBmbHVpZC13IGJhc2ljIGN1cnZlZCBwLTVcXFwiIGFyaWEtbGFiZWw9XFxcIkFwcGxpZWQgRmlsdGVyc1xcXCI+XFxuICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMiBjYXBzXFxcIj5BcHBsaWVkIEZpbHRlcnM8L3NwYW4+XFxuICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBtLWwtNSByZW1vdmUtYWxsXFxcIiBhcmlhLWxhYmVsPVxcXCJDbGVhciBBbGwgRmlsdGVyc1xcXCI+XFxuICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gZ3VpLWljb24tY2FuY2VsXFxcIj48L2k+XFxuICAgICAgICA8c3Bhbj5DbGVhciBBbGw8L3NwYW4+XFxuICAgIDwvYnV0dG9uPlxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG0tbC0xMFxcXCI+XFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmlsdGVycyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgyLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgPC9zcGFuPlxcbjwvc2VjdGlvbj5cXG5cIjtcbn0sXCIyXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG0tci01XFxcIj5cXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGxhcmdlIGxhYmVscyBmYWNldC1sYWJlbHNcXFwiPlxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTFcXFwiPlwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihjb250YWluZXIubGFtYmRhKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiPC9zcGFuPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFJhbmdlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSg1LCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICA8L3NwYW4+XFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICA8YnV0dG9uIGFyaWEtbGFiZWw9XFxcIkNsZWFyIGZpbHRlciBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgb2YgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBtLTAgbS10LTIgbS1yLTIgcC00IGxhYmVsIGN1cnNvci1wb2ludGVyIHN0cmlrZXRocm91Z2gtaG92ZXJcXFwiIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZmlsdGVyLWVudHJ5PVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9Gb3JtYXRMYWJlbEJ5VHlwZS50cyAqLyA4KSkuY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkZvcm1hdExhYmVsQnlUeXBlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jYW5jZWxcXFwiPjwvaT5cXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XFxuXCI7XG59LFwiNVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICA8YnV0dG9uIGFyaWEtbGFiZWw9XFxcIkNsZWFyIFJhbmdlIGZvciBmaWx0ZXIgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBtLTAgbS10LTIgbS1yLTIgcC00IGxhYmVsIGN1cnNvci1wb2ludGVyIHN0cmlrZXRocm91Z2gtaG92ZXJcXFwiIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZmlsdGVyLWVudHJ5PVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIjo6OnRydWVcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvUmFuZ2UudHMgKi8gMzQpKS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm1pbiA6IGRlcHRoMCksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm1heCA6IGRlcHRoMCksKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLHtcIm5hbWVcIjpcIlJhbmdlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jYW5jZWxcXFwiPjwvaT5cXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5maWx0ZXJzIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5sZW5ndGggOiBzdGFjazEpLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpO1xufSxcInVzZURhdGFcIjp0cnVlLFwidXNlRGVwdGhzXCI6dHJ1ZX0pO1xuXG4vKioqLyB9KSxcbi8qIDM0ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9oZWxwZXJzL1JhbmdlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgbW9tZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgbW9tZW50ICovIDkpO1xyXG52YXIgcmFuZ2UgPSBmdW5jdGlvbiAobWluLCBtYXgsIHR5cGUpIHtcclxuICAgIHZhciBzdHIgPSBcIlwiO1xyXG4gICAgdmFyIG1pblN0ciA9IG1pbjtcclxuICAgIHZhciBtYXhTdHIgPSBtYXg7XHJcbiAgICBpZiAodHlwZSA9PT0gXCJFZG0uRGF0ZVRpbWVPZmZzZXRcIikge1xyXG4gICAgICAgIGlmIChtaW4gIT09IHVuZGVmaW5lZCAmJiBtaW4gIT09IG51bGwgJiYgbWluICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIG1pblN0ciA9IG1vbWVudChtaW4pLmZvcm1hdChcIkRELU1NTS1ZWVlZXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWF4ICE9PSB1bmRlZmluZWQgJiYgbWF4ICE9PSBudWxsICYmIG1heCAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBtYXhTdHIgPSBtb21lbnQobWF4KS5mb3JtYXQoXCJERC1NTU0tWVlZWVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobWluU3RyICE9PSB1bmRlZmluZWQgJiYgbWluU3RyICE9PSBudWxsICYmIG1pblN0ciAhPT0gXCJcIikge1xyXG4gICAgICAgIHN0ciArPSBcIiBmcm9tOiBcIiArIG1pblN0cjtcclxuICAgIH1cclxuICAgIGlmIChtYXhTdHIgIT09IHVuZGVmaW5lZCAmJiBtYXhTdHIgIT09IG51bGwgJiYgbWF4U3RyICE9PSBcIlwiKSB7XHJcbiAgICAgICAgc3RyICs9IFwiIHRvOiBcIiArIG1heFN0cjtcclxuICAgIH1cclxuICAgIHJldHVybiBzdHI7XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IHJhbmdlO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzNSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvY29uZmlnL0ZpbHRlckNvbmZpZ1N0b3JlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZpbHRlckNvbmZpZ1N0b3JlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlsdGVyQ29uZmlnU3RvcmUob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0ZmlsdGVyT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uVGltZTogMjAwLFxyXG4gICAgICAgICAgICBjb250YWluZXJFbGVtZW50OiBudWxsLFxyXG4gICAgICAgICAgICBmaWx0ZXJDb25maWc6IFtdLFxyXG4gICAgICAgICAgICBvbkFsbEZpbHRlclJlbW92ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWdub3JlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlOiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kT3B0aW9ucyA9IGZ1bmN0aW9uIChpbnB1dE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChfdGhpcy5vcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwgX3RoaXMuZGVmYXVsdGZpbHRlck9wdGlvbnMsIGlucHV0T3B0aW9ucykpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5leHRlbmRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIFByb3ZpZGUgYSB2YWxpZCBjb250YWluZXIgRWxlbWVudCBvYmplY3QgZm9yIGZpbHRlcnNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbHRlckNvbmZpZ1N0b3JlLnByb3RvdHlwZSwgXCJPcHRpb25zXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBGaWx0ZXJDb25maWdTdG9yZTtcclxufSgpKTtcclxuZXhwb3J0cy5GaWx0ZXJDb25maWdTdG9yZSA9IEZpbHRlckNvbmZpZ1N0b3JlO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzNiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvaW5kZXgudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyICovIDM3KSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRmFjZXRBY3Rpb25IYW5kbGVyICovIDM4KSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRmFjZXRTZWFyY2hIYW5kbGVyICovIDM5KSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRmlsdGVyQWN0aW9uSGFuZGxlciAqLyA0MikpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0hpZGVGYWNldFNlY3Rpb25IYW5kbGVyICovIDQzKSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vUGluVW5waW5FdmVudEhhbmRsZXIgKi8gNDQpKTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9TaG93TW9yZUxlc3NIYW5kbGVyICovIDQ1KSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL2V2ZW50aGFuZGxlcnMvRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyICovIDQ2KSk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDM3ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmFjZXRDb25zdGFudHNfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vLi4vY29uZmlnL0ZhY2V0Q29uc3RhbnRzICovIDExKTtcclxudmFyIEV4cGFuZENvbGxhcHNlTWFuYWdlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9FeHBhbmRDb2xsYXBzZU1hbmFnZXIgKi8gMTIpO1xyXG52YXIgU2hvd0hpZGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vU2hvd0hpZGUgKi8gMik7XHJcbnZhciBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIoZWxlbWVudCwgY29uZmlnU3RvcmUsIHRlbXBsYXRlU2VydmljZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVNlcnZpY2UgPSB0ZW1wbGF0ZVNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5vbkZvY3VzSW5PZlRyZWVJdGVtID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBvVCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gb1QuaXMoXCJbcm9sZT10cmVlaXRlbV1cIikgPyBvVCA6IG9ULnBhcmVudHMoXCJbcm9sZT10cmVlaXRlbV1cIikuZmlyc3QoKTtcclxuICAgICAgICAgICAgdmFyIGxhYmVsSWQgPSBqUXVlcnkoXCIjXCIgKyB0YXJnZXQuYXR0cihcImFyaWEtbGFiZWxsZWRCeVwiKSk7XHJcbiAgICAgICAgICAgIGlmIChsYWJlbElkICYmIGxhYmVsSWQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbElkLmFkZENsYXNzKFwiZm9jdXNcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoXCJmb2N1c1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uRm9jdXNPdXRPZlRyZWVJdGVtID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBvVCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gb1QuaXMoXCJbcm9sZT10cmVlaXRlbV1cIikgPyBvVCA6IG9ULnBhcmVudHMoXCJbcm9sZT10cmVlaXRlbV1cIikuZmlyc3QoKTtcclxuICAgICAgICAgICAgdmFyIGxhYmVsSWQgPSBqUXVlcnkoXCIjXCIgKyB0YXJnZXQuYXR0cihcImFyaWEtbGFiZWxsZWRCeVwiKSk7XHJcbiAgICAgICAgICAgIGlmIChsYWJlbElkICYmIGxhYmVsSWQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBsYWJlbElkLnJlbW92ZUNsYXNzKFwiZm9jdXNcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlQ2xhc3MoXCJmb2N1c1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlS2V5RG93biA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkhhbmRsaW5nIEtleSBEb3duXCIpO1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmIChbRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5FbnRlcktleUNvZGUsIEZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuU3BhY2VLZXlDb2RlLFxyXG4gICAgICAgICAgICAgICAgRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5VcEtleUNvZGUsIEZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuRG93bktleUNvZGVdLmluZGV4T2YoY29kZSkgPD0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoW0ZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuRW50ZXJLZXlDb2RlLCBGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLlNwYWNlS2V5Q29kZV0uaW5kZXhPZihjb2RlKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVWaXNpYmlsaXR5T2ZPbmUoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChbRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5VcEtleUNvZGUsIEZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuRG93bktleUNvZGVdLmluZGV4T2YoY29kZSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlVXBBbmREb3duT2ZUcmVlSXRlbShldmVudCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlVXBBbmREb3duT2ZUcmVlSXRlbSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmIChbRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5VcEtleUNvZGUsIEZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuRG93bktleUNvZGVdLmluZGV4T2YoY29kZSkgPD0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkhhbmRsaW5nIFVwIGFuZCBEb3duXCIpO1xyXG4gICAgICAgICAgICB2YXIgb1QgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IG9ULmlzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpID8gb1QgOiBvVC5wYXJlbnRzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmIChGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSA9PT0gY29kZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRmlyc3QgTGV2ZWxcclxuICAgICAgICAgICAgICAgIHZhciBwcmV2U2libGluZyA9IHRhcmdldC5wcmV2QWxsKFwiOnZpc2libGVcIikuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIGlmIChwcmV2U2libGluZy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2U2libGluZy5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBwcmV2RGVlcFNpYmxpbmcgPSB0YXJnZXQucGFyZW50KCkucHJldkFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCkuZmluZChcIltyb2xlPXRyZWVpdGVtXVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChwcmV2RGVlcFNpYmxpbmcubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkRlZXBTaWJsaW5nLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudHMoXCJbcm9sZT10cmVlaXRlbV1cIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIHBhcmVudEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwID0galF1ZXJ5KHBhcmVudEdyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50Q2hpbGQgPSBncm91cC5wcmV2QWxsKFwiOnZpc2libGVcIikuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50Q2hpbGQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudENoaWxkLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5Eb3duS2V5Q29kZSA9PT0gY29kZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZpcnN0Q2hpbGQgPSB0YXJnZXQuZmluZChcIltyb2xlPXRyZWVpdGVtXTp2aXNpYmxlXCIpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlyc3RDaGlsZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBmaXJzdENoaWxkLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gRmlyc3QgTGV2ZWxcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0U2libGluZyA9IHRhcmdldC5uZXh0QWxsKFwiOnZpc2libGVcIikuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0U2libGluZy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0U2libGluZy5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFNlY29uZCBMZXZlbFxyXG4gICAgICAgICAgICAgICAgdmFyIG5leHREZWVwU2libGluZyA9IHRhcmdldC5wYXJlbnQoKS5uZXh0QWxsKFwiOnZpc2libGVcIikuZmlyc3QoKS5maW5kKFwiW3JvbGU9dHJlZWl0ZW1dXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHREZWVwU2libGluZy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0RGVlcFNpYmxpbmcuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQucGFyZW50cyhcIltyb2xlPXRyZWVpdGVtXVwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgcGFyZW50R3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JvdXAgPSBqUXVlcnkocGFyZW50R3JvdXApO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRDaGlsZCA9IGdyb3VwLm5leHRBbGwoXCI6dmlzaWJsZVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRDaGlsZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Q2hpbGQuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZVZpc2liaWxpdHlPZkFsbCA9IGZ1bmN0aW9uIChldmVudCwgaGlkZVNob3cpIHtcclxuICAgICAgICAgICAgdmFyIGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiICYmIChldmVudC50eXBlID09PSBcImtleXVwXCIgJiYgY29kZSAhPT0gRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5FbnRlcktleUNvZGVcclxuICAgICAgICAgICAgICAgICYmIGNvZGUgIT09IEZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuU3BhY2VLZXlDb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGhpZGVTaG93ID09PSBTaG93SGlkZV8xLlNob3dIaWRlLlNob3cgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuZmluZChcIi5mYWNldC1pdGVtLWhlYWRlclwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IGpRdWVyeShlbGVtZW50KS5wYXJlbnRzKFwiLmZhY2V0LWl0ZW1cIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IHBhcmVudC5hdHRyKFwiZGF0YS1hdHRyLW5hbWVcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuYWRkQ2xhc3MoXCJjb2xsYXBzZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMS5FeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihqUXVlcnkoZWxlbWVudCksIGhpZGVTaG93LCBuYW1lKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZztcclxuICAgICAgICAgICAgdmFyIHB1Ymxpc2ggPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhXzEgPSBkYXRhOyBfaSA8IGRhdGFfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBmYWNldCA9IGRhdGFfMVtfaV07XHJcbiAgICAgICAgICAgICAgICBmYWNldC5jb2xsYXBzZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHB1Ymxpc2gucHVzaCh7IGtleTogZmFjZXQuaWQsIGNvbGxhcHNlZDogZmFjZXQuY29sbGFwc2VkIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25Db2xsYXBzZVRvZ2dsZShwdWJsaXNoKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZVZpc2liaWxpdHlPZk9uZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgb1QgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IG9ULmlzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpID8gb1QgOiBvVC5wYXJlbnRzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIHZhciBpc0NvbGxhcHNpYmxlTm9kZSA9IHRhcmdldC5oYXNDbGFzcyhcImNvbGxhcHNpYmxlXCIpICYmIG9ULnBhcmVudHMoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIikubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAoIWlzQ29sbGFwc2libGVOb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG5hbWUgPSB0YXJnZXQuYXR0cihcImRhdGEtYXR0ci1uYW1lXCIpO1xyXG4gICAgICAgICAgICB2YXIgaWQgPSB0YXJnZXQuYXR0cihcImRhdGEtYXR0ci1pZFwiKTtcclxuICAgICAgICAgICAgdmFyIGlzQ29sbGFwc2VkID0gdGFyZ2V0Lmhhc0NsYXNzKFwiY29sbGFwc2VkXCIpO1xyXG4gICAgICAgICAgICBpZiAoIWlzQ29sbGFwc2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoXCJjb2xsYXBzZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnO1xyXG4gICAgICAgICAgICB2YXIgcHVibGlzaCA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRhdGFfMiA9IGRhdGE7IF9pIDwgZGF0YV8yLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZhY2V0ID0gZGF0YV8yW19pXTtcclxuICAgICAgICAgICAgICAgIGlmIChmYWNldC5pZCA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldC5jb2xsYXBzZWQgPSAhaXNDb2xsYXBzZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcHVibGlzaC5wdXNoKHsga2V5OiBmYWNldC5pZCwgY29sbGFwc2VkOiBmYWNldC5jb2xsYXBzZWQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkNvbGxhcHNlVG9nZ2xlKHB1Ymxpc2gpO1xyXG4gICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMS5FeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcih0YXJnZXQsIFNob3dIaWRlXzEuU2hvd0hpZGUuVG9nZ2xlLCBuYW1lKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlci5wcm90b3R5cGUuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZXhwYW5kLWFsbFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlVmlzaWJpbGl0eU9mQWxsKGV2ZW50LCBTaG93SGlkZV8xLlNob3dIaWRlLlNob3cpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLmV4cGFuZC1hbGxcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVZpc2liaWxpdHlPZkFsbChldmVudCwgU2hvd0hpZGVfMS5TaG93SGlkZS5TaG93KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5jb2xsYXBzZS1hbGxcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVZpc2liaWxpdHlPZkFsbChldmVudCwgU2hvd0hpZGVfMS5TaG93SGlkZS5IaWRlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5jb2xsYXBzZS1hbGxcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVZpc2liaWxpdHlPZkFsbChldmVudCwgU2hvd0hpZGVfMS5TaG93SGlkZS5IaWRlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIltyb2xlPXRyZWVpdGVtXVwiLCB0aGlzLmhhbmRsZVZpc2liaWxpdHlPZk9uZSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5ZG93blwiLCBcIltyb2xlPXRyZWVpdGVtXVwiLCB0aGlzLmhhbmRsZUtleURvd24pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImZvY3VzaW5cIiwgXCJbcm9sZT10cmVlaXRlbV1cIiwgdGhpcy5vbkZvY3VzSW5PZlRyZWVJdGVtKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJmb2N1c291dFwiLCBcIltyb2xlPXRyZWVpdGVtXVwiLCB0aGlzLm9uRm9jdXNPdXRPZlRyZWVJdGVtKTtcclxuICAgIH07XHJcbiAgICBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5FeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIgPSBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDM4ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmFjZXRBY3Rpb25IYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQWN0aW9uVHlwZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUgKi8gMSk7XHJcbnZhciBGYWNldEFjdGlvbkhhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldEFjdGlvbkhhbmRsZXIoZWxlbWVudCwgY29uZmlnU3RvcmUpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgIH1cclxuICAgIEZhY2V0QWN0aW9uSGFuZGxlci5wcm90b3R5cGUuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2hhbmdlXCIsIFwiLmZhY2V0LWJvZHkgLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb24gLmZhY2V0LXZhbHVlLWNoZWNrYm94XCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICB2YXIgdmFsU3RyID0gZWxlbWVudC52YWwoKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWxTdHIuc3BsaXQoXCI6OjpcIik7XHJcbiAgICAgICAgICAgIHZhciBjaGVja2VkID0gZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gY2hlY2tlZCA/IEZpbHRlckFjdGlvblR5cGVfMS5GaWx0ZXJBY3Rpb25UeXBlLkFkZCA6IEZpbHRlckFjdGlvblR5cGVfMS5GaWx0ZXJBY3Rpb25UeXBlLk1pbnVzO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uRmlsdGVyQ2hhbmdlKHZhbHVlWzBdLCB2YWx1ZVsxXSwgYWN0aW9uLCB2YWx1ZVsyXSwgZmFsc2UpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGYWNldEFjdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIEZhY2V0QWN0aW9uSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZhY2V0QWN0aW9uSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5GYWNldEFjdGlvbkhhbmRsZXIgPSBGYWNldEFjdGlvbkhhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDM5ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmFjZXRTZWFyY2hIYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdGhyb3R0bGVfZGVib3VuY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIHRocm90dGxlLWRlYm91bmNlICovIDQwKTtcclxudmFyIEV4cGFuZENvbGxhcHNlTWFuYWdlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9FeHBhbmRDb2xsYXBzZU1hbmFnZXIgKi8gMTIpO1xyXG52YXIgU2hvd0hpZGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vU2hvd0hpZGUgKi8gMik7XHJcbnZhciBGYWNldFNlYXJjaEhhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldFNlYXJjaEhhbmRsZXIoZWxlbWVudCwgY29uZmlnU3RvcmUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlU2VhcmNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkuYWRkQ2xhc3MoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICBlbGVtZW50Lm5leHQoKS5zaG93KCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAudmFsKClcclxuICAgICAgICAgICAgICAgICAgICAudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLmZhY2V0LWxpc3QgLmZhY2V0LWl0ZW1cIilcclxuICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaSwgZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWNldEl0ZW0gPSBqUXVlcnkoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBmYWNldEl0ZW0uYXR0cihcImRhdGEtYXR0ci1uYW1lXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWNldE5hbWVNYXRjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dFZhbHVlQmxhbmsgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB2YWx1ZSBpcyBlbXB0eVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09IG51bGwgfHwgdmFsLnRyaW0oKSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhbHVlQmxhbmsgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlIHZhbHVlIHdpdGggZmFjZXQgbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5wdXRWYWx1ZUJsYW5rICYmIGZhY2V0SXRlbS5hdHRyKFwiZGF0YS1hdHRyLW5hbWVcIikudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0TmFtZU1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0VmFsdWVCbGFuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnNob3ctbW9yZS1saW5rXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaW5kZXgsIHNod01vcmVFbGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHNod01vcmVFbGVtKS5oYXNDbGFzcyhcImd1aS1oaWRkZW5cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2h3TW9yZUVsZW0pLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShzaHdNb3JlRWxlbSkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LWxlc3MtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGluZGV4LCBzaG93TGVzc0xpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqUXVlcnkoc2hvd0xlc3NMaW5rKS5oYXNDbGFzcyhcImd1aS1oaWRkZW5cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2hvd0xlc3NMaW5rKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2hvd0xlc3NMaW5rKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LW1vcmUtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LWxlc3MtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB2YWx1ZXMgYWdhaW5zdCBjaGlsZCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmFjZXRDaGlsZE1hdGNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRJdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwibGFiZWxcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGosIGxhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbEVsZW0gPSBqUXVlcnkobGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFyZW50KFwiLmV4dHJhLWZpbHRlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFyZW50KFwiLmV4dHJhLWZpbHRlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhY2V0TmFtZU1hdGNoIHx8IGlucHV0VmFsdWVCbGFuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWxWYWx1ZSA9IGxhYmVsRWxlbS5hdHRyKFwiZGF0YS1hdHRyLXZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWxWYWx1ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldENoaWxkTWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3cgaGlkZSBGYWNldCBJdGVtIGl0c2VsZlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXJFbG1lbnQgPSBmYWNldEl0ZW0uZmluZChcIi5mYWNldC1pdGVtLWhlYWRlclwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sbGFwc2VkID0gZmFjZXRJdGVtLmhhc0NsYXNzKFwiY29sbGFwc2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWNldE5hbWVNYXRjaCB8fCBmYWNldENoaWxkTWF0Y2ggfHwgaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0SXRlbS5mYWRlSW4oX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0SXRlbS5mYWRlT3V0KF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4cGFuZCBDb2xsYXBzZSBGYWNldFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xsYXBzZWQgfHwgZmFjZXROYW1lTWF0Y2ggfHwgZmFjZXRDaGlsZE1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlcl8xLkV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGhlYWRlckVsbWVudCwgU2hvd0hpZGVfMS5TaG93SGlkZS5TaG93LCBuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlcl8xLkV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGhlYWRlckVsbWVudCwgU2hvd0hpZGVfMS5TaG93SGlkZS5IaWRlLCBuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkucmVtb3ZlQ2xhc3MoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5uZXh0KCkuaGlkZSgpO1xyXG4gICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIEZhY2V0U2VhcmNoSGFuZGxlci5wcm90b3R5cGUuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgLm9uKFwia2V5dXBcIiwgXCIuZmlsdGVyLXNlYXJjaC1pbnB1dFwiLCB0aHJvdHRsZV9kZWJvdW5jZV8xLmRlYm91bmNlKDI1MCwgdGhpcy5oYW5kbGVTZWFyY2gpKTtcclxuICAgIH07XHJcbiAgICBGYWNldFNlYXJjaEhhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIEZhY2V0U2VhcmNoSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZhY2V0U2VhcmNoSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5GYWNldFNlYXJjaEhhbmRsZXIgPSBGYWNldFNlYXJjaEhhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQwICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbm9kZV9tb2R1bGVzL3Rocm90dGxlLWRlYm91bmNlL2luZGV4LmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIHRocm90dGxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90aHJvdHRsZSAqLyAxMyk7XG52YXIgZGVib3VuY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2RlYm91bmNlICovIDQxKTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cdHRocm90dGxlOiB0aHJvdHRsZSxcblx0ZGVib3VuY2U6IGRlYm91bmNlXG59O1xuXG5cbi8qKiovIH0pLFxuLyogNDEgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9ub2RlX21vZHVsZXMvdGhyb3R0bGUtZGVib3VuY2UvZGVib3VuY2UuanMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZmluZWQgKi9cblxudmFyIHRocm90dGxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi90aHJvdHRsZSAqLyAxMyk7XG5cbi8qKlxuICogRGVib3VuY2UgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24uIERlYm91bmNpbmcsIHVubGlrZSB0aHJvdHRsaW5nLFxuICogZ3VhcmFudGVlcyB0aGF0IGEgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBhIHNpbmdsZSB0aW1lLCBlaXRoZXIgYXQgdGhlXG4gKiB2ZXJ5IGJlZ2lubmluZyBvZiBhIHNlcmllcyBvZiBjYWxscywgb3IgYXQgdGhlIHZlcnkgZW5kLlxuICpcbiAqIEBwYXJhbSAge051bWJlcn0gICBkZWxheSAgICAgICAgIEEgemVyby1vci1ncmVhdGVyIGRlbGF5IGluIG1pbGxpc2Vjb25kcy4gRm9yIGV2ZW50IGNhbGxiYWNrcywgdmFsdWVzIGFyb3VuZCAxMDAgb3IgMjUwIChvciBldmVuIGhpZ2hlcikgYXJlIG1vc3QgdXNlZnVsLlxuICogQHBhcmFtICB7Qm9vbGVhbn0gIGF0QmVnaW4gICAgICAgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBhdEJlZ2luIGlzIGZhbHNlIG9yIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgYGRlbGF5YCBtaWxsaXNlY29uZHNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIHRoZSBsYXN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLiBJZiBhdEJlZ2luIGlzIHRydWUsIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBhdCB0aGUgZmlyc3QgZGVib3VuY2VkLWZ1bmN0aW9uIGNhbGwuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW4gY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcywgdGhlIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpLlxuICogQHBhcmFtICB7RnVuY3Rpb259IGNhbGxiYWNrICAgICAgQSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkZWxheSBtaWxsaXNlY29uZHMuIFRoZSBgdGhpc2AgY29udGV4dCBhbmQgYWxsIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRocm91Z2gsIGFzLWlzLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYGNhbGxiYWNrYCB3aGVuIHRoZSBkZWJvdW5jZWQtZnVuY3Rpb24gaXMgZXhlY3V0ZWQuXG4gKlxuICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3LCBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCBkZWxheSwgYXRCZWdpbiwgY2FsbGJhY2sgKSB7XG5cdHJldHVybiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdGhyb3R0bGUoZGVsYXksIGF0QmVnaW4sIGZhbHNlKSA6IHRocm90dGxlKGRlbGF5LCBjYWxsYmFjaywgYXRCZWdpbiAhPT0gZmFsc2UpO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDQyICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZpbHRlckFjdGlvbkhhbmRsZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQWN0aW9uVHlwZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUgKi8gMSk7XHJcbnZhciBGaWx0ZXJBY3Rpb25IYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlsdGVyQWN0aW9uSGFuZGxlcihmaWx0ZXJFbGVtZW50LCBjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudCA9IGZpbHRlckVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgfVxyXG4gICAgRmlsdGVyQWN0aW9uSGFuZGxlci5wcm90b3R5cGUuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZmFjZXQtc3ViaGVhZGVyIC5mYWNldC1sYWJlbHMgLmxhYmVsXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQuaXMoXCIubGFiZWxcIikpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudHMoXCIubGFiZWxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHZhbFN0ciA9IGVsZW1lbnQuYXR0cihcImRhdGEtZmlsdGVyLWVudHJ5XCIpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHZhbFN0ci5zcGxpdChcIjo6OlwiKTtcclxuICAgICAgICAgICAgdmFyIGlzUmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gNCkge1xyXG4gICAgICAgICAgICAgICAgaXNSYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkZpbHRlckNoYW5nZSh2YWx1ZVswXSwgdmFsdWVbMV0sIEZpbHRlckFjdGlvblR5cGVfMS5GaWx0ZXJBY3Rpb25UeXBlLk1pbnVzLCB2YWx1ZVsyXSwgaXNSYW5nZSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmZhY2V0LXN1YmhlYWRlciAucmVtb3ZlLWFsbFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkFsbEZpbHRlclJlbW92ZSgpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaWx0ZXJBY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH07XHJcbiAgICBGaWx0ZXJBY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5vbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlsdGVyQWN0aW9uSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5GaWx0ZXJBY3Rpb25IYW5kbGVyID0gRmlsdGVyQWN0aW9uSGFuZGxlcjtcclxuXG5cbi8qKiovIH0pLFxuLyogNDMgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0hpZGVGYWNldFNlY3Rpb25IYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgICAgICB0aGlzLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmhpZGUtZmFjZXRcIiwgX3RoaXMuaGlkZUZhY2V0KTtcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnNob3ctZmFjZXRcIiwgX3RoaXMuc2hvd0ZhY2V0KTtcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLmhpZGUtZmFjZXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oaWRlRmFjZXQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLnNob3ctZmFjZXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zaG93RmFjZXQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGlkZUZhY2V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICQoXCIuZmFjZXQtYm9keVwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoXCIuZmFjZXQtY29sbGFwc2VkLWJvZHlcIikuZmFkZUluKF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sbGFwc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNob3dGYWNldCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAkKFwiLmZhY2V0LWNvbGxhcHNlZC1ib2R5XCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgJChcIi5mYWNldC1ib2R5XCIpLmZhZGVJbihfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbGxhcHNlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5vbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH07XHJcbiAgICByZXR1cm4gSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXIgPSBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlcjtcclxuXG5cbi8qKiovIH0pLFxuLyogNDQgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL1BpblVucGluRXZlbnRIYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBQaW5VbnBpbkV2ZW50SGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBpblVucGluRXZlbnRIYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlLCB0ZW1wbGF0ZVNlcnZpY2UpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZSA9IHRlbXBsYXRlU2VydmljZTtcclxuICAgIH1cclxuICAgIFBpblVucGluRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5SZWdpc3RlckRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5waW4taWNvblwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlUGluVW5waW4oZXZlbnQsIHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnVucGluLWljb25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIucGluLWljb25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlUGluVW5waW4oZXZlbnQsIHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLnVucGluLWljb25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlUGluVW5waW4oZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBQaW5VbnBpbkV2ZW50SGFuZGxlci5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9O1xyXG4gICAgUGluVW5waW5FdmVudEhhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIFBpblVucGluRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5oYW5kbGVQaW5VbnBpbiA9IGZ1bmN0aW9uIChldmVudCwgcGluKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIHZhciBpZCA9IGVsZW1lbnQuYXR0cihcImRhdGEtYXR0ci1pZFwiKTtcclxuICAgICAgICB2YXIgZGF0YSA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZztcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRhdGFfMSA9IGRhdGE7IF9pIDwgZGF0YV8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmFjZXQgPSBkYXRhXzFbX2ldO1xyXG4gICAgICAgICAgICBpZiAoZmFjZXQuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICBmYWNldC5waW5uZWQgPSBwaW47XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5odG1sKF90aGlzLnRlbXBsYXRlU2VydmljZS5iaW5kKF90aGlzLnRlbXBsYXRlU2VydmljZS5nZXREYXRhKCkpKTtcclxuICAgICAgICB9LCAxKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25QaW5VbnBpbihpZCwgcGluKTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUGluVW5waW5FdmVudEhhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuUGluVW5waW5FdmVudEhhbmRsZXIgPSBQaW5VbnBpbkV2ZW50SGFuZGxlcjtcclxuXG5cbi8qKiovIH0pLFxuLyogNDUgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvU2hvd01vcmVMZXNzSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTaG93TW9yZUxlc3NIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2hvd01vcmVMZXNzSGFuZGxlcihlbGVtZW50LCBjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgfVxyXG4gICAgU2hvd01vcmVMZXNzSGFuZGxlci5wcm90b3R5cGUuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJjbGlja1wiLCBcIi5zaG93LW1vcmUtbGlua1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2hvd01vcmVMZXNzRmlsdGVycyhldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJjbGlja1wiLCBcIi5zaG93LWxlc3MtbGlua1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2hvd01vcmVMZXNzRmlsdGVycyhldmVudCwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgLm9uKFwia2V5dXBcIiwgXCIuc2hvdy1tb3JlLWxpbmtcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuc2hvd01vcmVMZXNzRmlsdGVycyhldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJrZXl1cFwiLCBcIi5zaG93LWxlc3MtbGlua1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5zaG93TW9yZUxlc3NGaWx0ZXJzKGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2hvd01vcmVMZXNzSGFuZGxlci5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9O1xyXG4gICAgU2hvd01vcmVMZXNzSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9O1xyXG4gICAgU2hvd01vcmVMZXNzSGFuZGxlci5wcm90b3R5cGUuc2hvd01vcmVMZXNzRmlsdGVycyA9IGZ1bmN0aW9uIChldmVudCwgc2hvd01vcmUpIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIGlmIChzaG93TW9yZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAucGFyZW50cyhcIi5mYWNldC1pdGVtLWRlc2NyaXB0aW9uXCIpXHJcbiAgICAgICAgICAgICAgICAuZmluZChcIi5leHRyYS1maWx0ZXJcIilcclxuICAgICAgICAgICAgICAgIC5mYWRlSW4odGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5uZXh0KCkuc2hvdygpLmZpbmQoXCJhXCIpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgLnBhcmVudHMoXCIuZmFjZXQtaXRlbS1kZXNjcmlwdGlvblwiKVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAuZmFkZU91dCh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5wcmV2KCkuc2hvdygpLmZpbmQoXCJhXCIpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTaG93TW9yZUxlc3NIYW5kbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLlNob3dNb3JlTGVzc0hhbmRsZXIgPSBTaG93TW9yZUxlc3NIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiA0NiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZhY2V0Q29uc3RhbnRzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLy4uL2NvbmZpZy9GYWNldENvbnN0YW50cyAqLyAxMSk7XHJcbnZhciBGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmRlUmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQub2ZmKFwia2V5ZG93blwiLCBcIi5hcnJvd2tleXMtYXdhcmVcIiwgX3RoaXMuaGFuZGxlQXJyb3dLZXlzKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQXJyb3dLZXlzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmIChjb2RlICE9PSBGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSAmJiBjb2RlICE9PSBGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLkRvd25LZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmlzKFwiLmFycm93a2V5cy1hd2FyZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGZvY3VzYWJsZTtcclxuICAgICAgICAgICAgdmFyIGRpdiA9IGVsZW1lbnQucGFyZW50KCk7XHJcbiAgICAgICAgICAgIGlmIChjb2RlID09PSBGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgZm9jdXNhYmxlID0gZGl2LnByZXYoKS5maW5kKFwiLmFycm93a2V5cy1hd2FyZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY29kZSA9PT0gRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5Eb3duS2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgZm9jdXNhYmxlID0gZGl2Lm5leHQoKS5maW5kKFwiLmFycm93a2V5cy1hd2FyZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZm9jdXNhYmxlICYmIGZvY3VzYWJsZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnZpZXcuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZm9jdXNhYmxlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2hvd01vcmUgPSBkaXYubmV4dCgpLmZpbmQoXCJzaG93LW1vcmUtbGlua1wiKSB8fCBkaXYubmV4dCgpLmZpbmQoXCJzaG93LWxlc3MtbGlua1wiKTtcclxuICAgICAgICAgICAgICAgIGlmIChzaG93TW9yZSAmJiBzaG93TW9yZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93TW9yZS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIEZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlci5wcm90b3R5cGUuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleWRvd25cIiwgXCIuYXJyb3drZXlzLWF3YXJlXCIsIHRoaXMuaGFuZGxlQXJyb3dLZXlzKTtcclxuICAgIH07XHJcbiAgICBGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIEZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5GYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIgPSBGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXI7XHJcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gZmFjZXRvby5taW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxNCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgYmVkMWY0NWMyMmU1Njc0MzVlYmMiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIkhhbmRsZWJhcnNcIixcImFtZFwiOlwiaGFuZGxlYmFycy5ydW50aW1lXCIsXCJjb21tb25qczJcIjpcImhhbmRsZWJhcnMvcnVudGltZVwiLFwiY29tbW9uanNcIjpcImhhbmRsZWJhcnMvcnVudGltZVwifVxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImV4cG9ydCBlbnVtIEZpbHRlckFjdGlvblR5cGUge1xuICAgIEFkZCA9IFwiQWRkXCIsXG4gICAgTWludXMgPSBcIk1pbnVzXCIsXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlLnRzIiwiZXhwb3J0IGVudW0gU2hvd0hpZGUge1xyXG4gICAgU2hvdyxcclxuICAgIEhpZGUsXHJcbiAgICBUb2dnbGUsXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL1Nob3dIaWRlLnRzIiwidmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGFuZGxlYmFyc1wiKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJndWkgb2YtaGlkZGVuIG1pbi13LTUwIHctYXV0byBmbHVpZC1oIGZsZXggY29sdW1uIGNvbnRhaW5lclxcXCIgaWQ9XFxcIlwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihjb250YWluZXIubGFtYmRhKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1mYWNldC1jb250YWluZXJcXFwiPlxcbiAgICA8c2VjdGlvbiBjbGFzcz1cXFwiZ3VpIGgtYXV0byBndWktc3ViaGVhZGluZy0xIG0tMCBib3JkZXItYm90dG9tIGxpZ2h0IHAtci0xMCBwLXQtNSBwLWItNSBwLWwtMTBcXFwiPlxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIGN1cnNvci1wb2ludGVyIGV4cGFuZC1hbGxcXFwiIFxcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJFeHBhbmQgQWxsIEZpbHRlcnNcXFwiPlxcbiAgICAgICAgICAgIDxpICBjbGFzcz1cXFwiZ3VpLWljb24gc3BlY2lhbCByb3RhdGUtbGVmdCBndWktaWNvbi1jaGV2ZG91YmxlXFxcIj48L2k+XFxuICAgICAgICAgICAgRXhwYW5kIEFsbFxcbiAgICAgICAgPC9idXR0b24+XFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgY29sbGFwc2UtYWxsXFxcIiBcXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cXFwiQ29sbGFwc2UgQWxsIEZpbHRlcnNcXFwiPlxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBzcGVjaWFsIHJvdGF0ZS1yaWdodCBndWktaWNvbi1jaGV2ZG91YmxlXFxcIj48L2k+XFxuICAgICAgICAgICAgQ29sbGFwc2UgQWxsXFxuICAgICAgICA8L2J1dHRvbj5cXG4gICAgPC9zZWN0aW9uPlxcbiAgICA8c2VjdGlvbiBjbGFzcz1cXFwiZ3VpIGJvcmRlci1ib3R0b20gbGlnaHQgcC1yLTEwIHAtdC01IHAtYi01IHAtbC0xMFxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJndWkgZ3VpLWljb24gaW5wdXQgZmx1aWQtdyBoLTMwXFxcIj5cXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcImd1aSBpbnB1dCBmbHVpZC13IGd1aS1zdWJoZWFkaW5nLTIgZmlsdGVyLXNlYXJjaC1pbnB1dFxcXCJcXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIlNlYXJjaCBGaWx0ZXJzLiBTaG9ydGN1dCBBbHQgKyBGIFxcXCIgLz5cXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIGd1aS1pY29uLXNlYXJjaCBndWktaGlkZGVuXFxcIj48L2k+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9zZWN0aW9uPlxcbiAgICA8dWwgY2xhc3M9XFxcImd1aSBmbHVpZC1oIGZhY2V0LWxpc3Qgb2YtYXV0byBvZngtaGlkZGVuIG0tMCBwLTBcXFwiIFxcbiAgICAgICAgcm9sZT1cXFwidHJlZVxcXCJcXG4gICAgICAgIGFyaWEtbGl2ZT1cXFwicG9saXRlXFxcIj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcZmFjZXQtcGlubmVkLmhic1wiKSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtcGlubmVkXCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICBcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGZhY2V0LXVucGlubmVkLmhic1wiKSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtdW5waW5uZWRcIixcImRhdGFcIjpkYXRhLFwiaW5kZW50XCI6XCIgICAgICAgIFwiLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgPC91bD5cXG48L2Rpdj5cIjtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGJzL2ZhY2V0LWJvZHkuaGJzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiY29uc3QgY29sbGFwc2VkID0gKHZhbHVlOiBib29sZWFuKTogc3RyaW5nID0+IHtcclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBcIiBjb2xsYXBzZWQgXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbGxhcHNlZDtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9oYnMvaGVscGVycy9Db2xsYXBzZWQudHMiLCJjb25zdCBCb29sZWFuVmFsdWUgPSAoYm9vbDogYm9vbGVhbik6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gYm9vbCA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQm9vbGVhblZhbHVlO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL0Jvb2xlYW4udHMiLCJpbXBvcnQgeyBJRmFjZXRWYWx1ZSB9IGZyb20gXCIuLi8uLi8uLi9pbmRleFwiO1xyXG5cclxuY29uc3Qgc2VsZWN0ZWRGaWx0ZXJzQ291bnQgPSAoZmFjZXRWYWx1ZXM6IElGYWNldFZhbHVlW10pOiBzdHJpbmcgPT4ge1xyXG4gICAgbGV0IGluZGV4ID0gMDtcclxuICAgIGlmIChmYWNldFZhbHVlcyAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgJiYgZmFjZXRWYWx1ZXMgIT09IG51bGxcclxuICAgICAgICAmJiBmYWNldFZhbHVlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZmFjZXRWYWx1ZSBvZiBmYWNldFZhbHVlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZhY2V0VmFsdWUuc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaW5kZXggPT09IDAgPyBcIlwiIDogXCI8c3BhbiBjbGFzcz1cXFwiZ3VpLWJvZHktMlxcXCI+KFwiICsgaW5kZXggKyBcIik8L3NwYW4+XCI7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBzZWxlY3RlZEZpbHRlcnNDb3VudDtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9oYnMvaGVscGVycy9TZWxlY3RlZEZpbHRlcnNDb3VudC50cyIsInZhciBIYW5kbGViYXJzID0gcmVxdWlyZShcImhhbmRsZWJhcnNcIik7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcIjFcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWNvbnRhaW5lci5sYW1iZGE7XG5cbiAgcmV0dXJuIFwiICAgIDxsaSBjbGFzcz1cXFwiZ3VpIGl0ZW0gXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ2hlY2tMZW5ndGgudHNcIikpLmNhbGwoYWxpYXMxLChkYXRhICYmIGRhdGEuaW5kZXgpLChkZXB0aHNbMl0gIT0gbnVsbCA/IGRlcHRoc1syXS5ub09mRmFjZXRUb1Nob3cgOiBkZXB0aHNbMl0pLHtcIm5hbWVcIjpcIkNoZWNrTGVuZ3RoXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICBhcmlhLWxhYmVsPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgPGxhYmVsICBkYXRhLWF0dHItdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgICAgIGRhdGEtYXR0ci1pZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgICAgICBkYXRhLWF0dHItdHlwZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgICAgIHRhYmluZGV4PVxcXCIwXFxcIlxcclxcbiAgICAgICAgICAgICAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgdGl0bGU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIihcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIpXFxcIlxcclxcbiAgICAgICAgICAgICAgICBmb3I9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1cIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCItXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRhdGEgJiYgZGF0YS5pbmRleCksIGRlcHRoMCkpXG4gICAgKyBcIi1jaGVja2JveFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cXFwiRmlsdGVyIFwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIiBpbiBcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0ubmFtZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIiBoYXMgXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvdW50IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiIHJlY29yZHMuIFByZXNzIHNwYWNlYmFyIHRvIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXEFwcGx5UmVtb3ZlLnRzXCIpKS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuc2VsZWN0ZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkFwcGx5UmVtb3ZlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCIgdGhpcyBmaWx0ZXIuXFxcIlxcclxcbiAgICAgICAgICAgICAgICBjbGFzcz1cXFwiZ3VpIGN1cnNvci1wb2ludGVyIGd1aS1zdWJoZWFkaW5nLTEgbm8td3JhcCB0ZXh0LXNob3J0ZW4gbS0wXFxcIj5cXHJcXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcImd1aSBmYWNldC12YWx1ZS1jaGVja2JveCBjdXJzb3ItcG9pbnRlciBtLWwtMFxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICBpZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLVwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5pZCA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIi1cIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGF0YSAmJiBkYXRhLmluZGV4KSwgZGVwdGgwKSlcbiAgICArIFwiLWNoZWNrYm94XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ2hlY2tlZC50c1wiKSkuY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnNlbGVjdGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDaGVja2VkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXERpc2FibGVkLnRzXCIpKS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZGlzYWJsZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkRpc2FibGVkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVxcXCItMVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICB0eXBlPVxcXCJjaGVja2JveFxcXCIgLz5cXHJcXG4gICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXEZvcm1hdExhYmVsQnlUeXBlLnRzXCIpKS5jYWxsKGFsaWFzMSwoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJGb3JtYXRMYWJlbEJ5VHlwZVwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0xIG0tMFxcXCI+KFwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIik8L3NwYW4+XFxyXFxuICAgICAgICA8L2xhYmVsPlxcclxcbiAgICA8L2xpPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCI8dWwgY2xhc3M9XFxcImRlc2NyaXB0aW9uIGd1aSBmYWNldC1pdGVtLWRlc2NyaXB0aW9uIG0tdC0xMCBwLWwtNSBwLTAgXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxIaWRkZW4udHNcIikpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHRydWUse1wibmFtZVwiOlwiSGlkZGVuXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICByb2xlPVxcXCJncm91cFxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgXCJcbiAgICArICgoc3RhY2sxID0gX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXFNob3dNb3JlTGVzc0xpbmsudHNcIikpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCksKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLm5vT2ZGYWNldFRvU2hvdyA6IGRlcHRoc1sxXSkse1wibmFtZVwiOlwiU2hvd01vcmVMZXNzTGlua1wiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcclxcbjwvdWw+XCI7XG59LFwidXNlRGF0YVwiOnRydWUsXCJ1c2VEZXB0aHNcIjp0cnVlfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGJzL2ZhY2V0LWxhYmVsLmhic1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImltcG9ydCAqIGFzIG1vbWVudCBmcm9tIFwibW9tZW50XCI7XHJcbmNvbnN0IGZvcm1hdExhYmVsQnlUeXBlID0gKHR5cGU6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKG1vbWVudCAmJiB0eXBlID09PSBcIkVkbS5EYXRlVGltZU9mZnNldFwiKSB7XHJcbiAgICAgICAgcmV0dXJuIG1vbWVudC51dGModmFsdWUpLmZvcm1hdChcIkRELU1NTS1ZWVlZIGhoOm1tIGFcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICggdmFsdWUgPT09IFwiQXNzaWduZWRcIiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiQ29tbWl0dGVkXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdmFsdWUgPT09IFwiQ29tcGxldGVcIiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiQXNzaWduZWRcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZm9ybWF0TGFiZWxCeVR5cGU7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvRm9ybWF0TGFiZWxCeVR5cGUudHMiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwibW9tZW50XCJcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJpbXBvcnQgeyBlcnJvciB9IGZyb20gXCJ1dGlsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9tVXRpbHMge1xyXG4gICAgcHVibGljIHN0YXRpYyBpc0Rlc2NlbmRhbnQgPSAocGFyZW50LCBjaGlsZCkgPT4ge1xyXG4gICAgICAgIGxldCBub2RlID0gY2hpbGQucGFyZW50Tm9kZTtcclxuICAgICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlID09PSBwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaXNTZWxmT3JEZXNjZW5kYW50ID0gKHBhcmVudCwgY2hpbGQpID0+IHtcclxuICAgICAgICBpZiAoIHBhcmVudCA9PT0gY2hpbGQgKSB7cmV0dXJuIHRydWU7IH1cclxuICAgICAgICByZXR1cm4gRG9tVXRpbHMuaXNEZXNjZW5kYW50KHBhcmVudCwgY2hpbGQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBpc0hpZGRlbiA9IChub2RlOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghbm9kZSkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gICAgICAgIHJldHVybiBub2RlLm9mZnNldFBhcmVudCA9PT0gbnVsbDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaXNBcmlhSGlkZGVuID0gKG5vZGU6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIHJldHVybiBub2RlLmdldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpID09PSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0QXJpYUhpZGRlbiA9IChub2RlOiBIVE1MRWxlbWVudCwgdmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGlmICghbm9kZSkgeyB0aHJvdyBFcnJvcihcIkRvbVV0aWxzLnNldEFyaWFIaWRkZW4gLSBOb2RlIGNhbm5vdCBiZSBvZiBudWxsIG9yIHVuZGVmaW5lZFwiKTsgfVxyXG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBpc0FyaWFFeHBhbmRlZCA9IChub2RlOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghbm9kZSkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIpID09PSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0QXJpYUV4cGFuZGVkID0gKG5vZGU6IEhUTUxFbGVtZW50LCB2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7IHRocm93IEVycm9yKFwiRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkIC0gTm9kZSBjYW5ub3QgYmUgb2YgbnVsbCBvciB1bmRlZmluZWRcIik7IH1cclxuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBzaG93ID0gKG5vZGU6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7IHRocm93IEVycm9yKFwiRG9tVXRpbHMuc2hvdyAtIE5vZGUgY2Fubm90IGJlIG9mIG51bGwgb3IgdW5kZWZpbmVkXCIpOyB9XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaGlkZSA9IChub2RlOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghbm9kZSkgeyB0aHJvdyBFcnJvcihcIkRvbVV0aWxzLmhpZGUgLSBOb2RlIGNhbm5vdCBiZSBvZiBudWxsIG9yIHVuZGVmaW5lZFwiKTsgfVxyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChcImd1aS1oaWRkZW5cIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHRvZ2dsZUxhYmVsID0gKG5vZGU6IEhUTUxMYWJlbEVsZW1lbnQpOiBib29sZWFuID0+IHtcclxuICAgICAgICBpZiAoIW5vZGUpIHsgdGhyb3cgRXJyb3IoXCJEb21VdGlscy50b2dnbGVMYWJlbCAtIE5vZGUgY2Fubm90IGJlIG9mIG51bGwgb3IgdW5kZWZpbmVkXCIpOyB9XHJcbiAgICAgICAgY29uc3QgZm9ySWQgPSBub2RlLmh0bWxGb3I7XHJcbiAgICAgICAgY29uc3QgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ySWQpIHx8IG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgaW5wdXQuY2hlY2tlZCA9ICFpbnB1dC5jaGVja2VkO1xyXG4gICAgICAgIHJldHVybiBpbnB1dC5jaGVja2VkO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBvZmYgPSAobm9kZTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb25zdCBuZXdOb2RlID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdOb2RlLCBub2RlKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2ExMXkvRG9tVXRpbHMudHMiLCJleHBvcnQgY2xhc3MgRmFjZXRDb25zdGFudHMge1xyXG4gICAgcHVibGljIHN0YXRpYyBVcEtleUNvZGU6IG51bWJlciA9IDM4O1xyXG4gICAgcHVibGljIHN0YXRpYyBEb3duS2V5Q29kZTogbnVtYmVyID0gNDA7XHJcbiAgICBwdWJsaWMgc3RhdGljIEVudGVyS2V5Q29kZTogbnVtYmVyID0gMTM7XHJcbiAgICBwdWJsaWMgc3RhdGljIFNwYWNlS2V5Q29kZTogbnVtYmVyID0gMjg7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9jb25maWcvRmFjZXRDb25zdGFudHMudHMiLCJpbXBvcnQgeyBTaG93SGlkZSB9IGZyb20gXCIuL1Nob3dIaWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIENvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIgPSAodGFyZ2V0OiBKUXVlcnksIHNob3dIaWRlOiBTaG93SGlkZSwgbmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWNvbkVsZW1lbnQgPSB0YXJnZXQuZmluZChcIi5leHBhbnNpb24taWNvblwiKSA7XHJcbiAgICAgICAgY29uc3QgY3VycmVudGx5VmlzaWJsZSA9IGljb25FbGVtZW50Lmhhc0NsYXNzKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICBpZiAoU2hvd0hpZGUuVG9nZ2xlICE9PSBzaG93SGlkZSAmJiAoKGN1cnJlbnRseVZpc2libGUgJiYgc2hvd0hpZGUgPT09IFNob3dIaWRlLlNob3cpIHx8XHJcbiAgICAgICAgICAgICghY3VycmVudGx5VmlzaWJsZSAmJiBzaG93SGlkZSA9PT0gU2hvd0hpZGUuSGlkZSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFjdXJyZW50bHlWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5maW5kKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIikuc2xpZGVEb3duKDIwMCk7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5hZGRDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJ0cnVlXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiYXJpYS1sYWJlbFwiLCBcIlByZXNzIGVudGVyIG9yIHNwYWNlIHRvIGNvbGxhcHNlIGZpbHRlciB2YWx1ZXMgZm9yIFwiICsgbmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFyZ2V0LmZpbmQoXCIuZmFjZXQtaXRlbS1kZXNjcmlwdGlvblwiKS5zbGlkZVVwKDIwMCk7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICAgICAgaWNvbkVsZW1lbnQuYWRkQ2xhc3MoXCJndWktaWNvbi1jaGV2cm9uLWRvd25cIik7XHJcbiAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJmYWxzZVwiKVxyXG4gICAgICAgICAgICAuYXR0cihcImFyaWEtbGFiZWxcIiwgXCJQcmVzcyBlbnRlciBvciBzcGFjZSB0byBleHBhbmQgZmlsdGVyIHZhbHVlcyBmb3IgXCIgKyBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZU1hbmFnZXIudHMiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZmluZWQsbm8tcGFyYW0tcmVhc3NpZ24sbm8tc2hhZG93ICovXG5cbi8qKlxuICogVGhyb3R0bGUgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24uIEVzcGVjaWFsbHkgdXNlZnVsIGZvciByYXRlIGxpbWl0aW5nXG4gKiBleGVjdXRpb24gb2YgaGFuZGxlcnMgb24gZXZlbnRzIGxpa2UgcmVzaXplIGFuZCBzY3JvbGwuXG4gKlxuICogQHBhcmFtICB7TnVtYmVyfSAgICBkZWxheSAgICAgICAgICBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudCBjYWxsYmFja3MsIHZhbHVlcyBhcm91bmQgMTAwIG9yIDI1MCAob3IgZXZlbiBoaWdoZXIpIGFyZSBtb3N0IHVzZWZ1bC5cbiAqIEBwYXJhbSAge0Jvb2xlYW59ICAgbm9UcmFpbGluZyAgICAgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBub1RyYWlsaW5nIGlzIHRydWUsIGNhbGxiYWNrIHdpbGwgb25seSBleGVjdXRlIGV2ZXJ5IGBkZWxheWAgbWlsbGlzZWNvbmRzIHdoaWxlIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdHRsZWQtZnVuY3Rpb24gaXMgYmVpbmcgY2FsbGVkLiBJZiBub1RyYWlsaW5nIGlzIGZhbHNlIG9yIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIG9uZSBmaW5hbCB0aW1lXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIHRoZSBsYXN0IHRocm90dGxlZC1mdW5jdGlvbiBjYWxsLiAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW4gY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gIGNhbGxiYWNrICAgICAgIEEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZGVsYXkgbWlsbGlzZWNvbmRzLiBUaGUgYHRoaXNgIGNvbnRleHQgYW5kIGFsbCBhcmd1bWVudHMgYXJlIHBhc3NlZCB0aHJvdWdoLCBhcy1pcyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYGNhbGxiYWNrYCB3aGVuIHRoZSB0aHJvdHRsZWQtZnVuY3Rpb24gaXMgZXhlY3V0ZWQuXG4gKiBAcGFyYW0gIHtCb29sZWFufSAgIGRlYm91bmNlTW9kZSAgIElmIGBkZWJvdW5jZU1vZGVgIGlzIHRydWUgKGF0IGJlZ2luKSwgc2NoZWR1bGUgYGNsZWFyYCB0byBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuIElmIGBkZWJvdW5jZU1vZGVgIGlzIGZhbHNlIChhdCBlbmQpLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZSBgY2FsbGJhY2tgIHRvIGV4ZWN1dGUgYWZ0ZXIgYGRlbGF5YCBtcy5cbiAqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gIEEgbmV3LCB0aHJvdHRsZWQsIGZ1bmN0aW9uLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICggZGVsYXksIG5vVHJhaWxpbmcsIGNhbGxiYWNrLCBkZWJvdW5jZU1vZGUgKSB7XG5cblx0Ly8gQWZ0ZXIgd3JhcHBlciBoYXMgc3RvcHBlZCBiZWluZyBjYWxsZWQsIHRoaXMgdGltZW91dCBlbnN1cmVzIHRoYXRcblx0Ly8gYGNhbGxiYWNrYCBpcyBleGVjdXRlZCBhdCB0aGUgcHJvcGVyIHRpbWVzIGluIGB0aHJvdHRsZWAgYW5kIGBlbmRgXG5cdC8vIGRlYm91bmNlIG1vZGVzLlxuXHR2YXIgdGltZW91dElEO1xuXG5cdC8vIEtlZXAgdHJhY2sgb2YgdGhlIGxhc3QgdGltZSBgY2FsbGJhY2tgIHdhcyBleGVjdXRlZC5cblx0dmFyIGxhc3RFeGVjID0gMDtcblxuXHQvLyBgbm9UcmFpbGluZ2AgZGVmYXVsdHMgdG8gZmFsc3kuXG5cdGlmICggdHlwZW9mIG5vVHJhaWxpbmcgIT09ICdib29sZWFuJyApIHtcblx0XHRkZWJvdW5jZU1vZGUgPSBjYWxsYmFjaztcblx0XHRjYWxsYmFjayA9IG5vVHJhaWxpbmc7XG5cdFx0bm9UcmFpbGluZyA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdC8vIFRoZSBgd3JhcHBlcmAgZnVuY3Rpb24gZW5jYXBzdWxhdGVzIGFsbCBvZiB0aGUgdGhyb3R0bGluZyAvIGRlYm91bmNpbmdcblx0Ly8gZnVuY3Rpb25hbGl0eSBhbmQgd2hlbiBleGVjdXRlZCB3aWxsIGxpbWl0IHRoZSByYXRlIGF0IHdoaWNoIGBjYWxsYmFja2Bcblx0Ly8gaXMgZXhlY3V0ZWQuXG5cdGZ1bmN0aW9uIHdyYXBwZXIgKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdHZhciBlbGFwc2VkID0gTnVtYmVyKG5ldyBEYXRlKCkpIC0gbGFzdEV4ZWM7XG5cdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cblx0XHQvLyBFeGVjdXRlIGBjYWxsYmFja2AgYW5kIHVwZGF0ZSB0aGUgYGxhc3RFeGVjYCB0aW1lc3RhbXAuXG5cdFx0ZnVuY3Rpb24gZXhlYyAoKSB7XG5cdFx0XHRsYXN0RXhlYyA9IE51bWJlcihuZXcgRGF0ZSgpKTtcblx0XHRcdGNhbGxiYWNrLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH1cblxuXHRcdC8vIElmIGBkZWJvdW5jZU1vZGVgIGlzIHRydWUgKGF0IGJlZ2luKSB0aGlzIGlzIHVzZWQgdG8gY2xlYXIgdGhlIGZsYWdcblx0XHQvLyB0byBhbGxvdyBmdXR1cmUgYGNhbGxiYWNrYCBleGVjdXRpb25zLlxuXHRcdGZ1bmN0aW9uIGNsZWFyICgpIHtcblx0XHRcdHRpbWVvdXRJRCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHRpZiAoIGRlYm91bmNlTW9kZSAmJiAhdGltZW91dElEICkge1xuXHRcdFx0Ly8gU2luY2UgYHdyYXBwZXJgIGlzIGJlaW5nIGNhbGxlZCBmb3IgdGhlIGZpcnN0IHRpbWUgYW5kXG5cdFx0XHQvLyBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIGV4ZWN1dGUgYGNhbGxiYWNrYC5cblx0XHRcdGV4ZWMoKTtcblx0XHR9XG5cblx0XHQvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZW91dC5cblx0XHRpZiAoIHRpbWVvdXRJRCApIHtcblx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SUQpO1xuXHRcdH1cblxuXHRcdGlmICggZGVib3VuY2VNb2RlID09PSB1bmRlZmluZWQgJiYgZWxhcHNlZCA+IGRlbGF5ICkge1xuXHRcdFx0Ly8gSW4gdGhyb3R0bGUgbW9kZSwgaWYgYGRlbGF5YCB0aW1lIGhhcyBiZWVuIGV4Y2VlZGVkLCBleGVjdXRlXG5cdFx0XHQvLyBgY2FsbGJhY2tgLlxuXHRcdFx0ZXhlYygpO1xuXG5cdFx0fSBlbHNlIGlmICggbm9UcmFpbGluZyAhPT0gdHJ1ZSApIHtcblx0XHRcdC8vIEluIHRyYWlsaW5nIHRocm90dGxlIG1vZGUsIHNpbmNlIGBkZWxheWAgdGltZSBoYXMgbm90IGJlZW5cblx0XHRcdC8vIGV4Y2VlZGVkLCBzY2hlZHVsZSBgY2FsbGJhY2tgIHRvIGV4ZWN1dGUgYGRlbGF5YCBtcyBhZnRlciBtb3N0XG5cdFx0XHQvLyByZWNlbnQgZXhlY3V0aW9uLlxuXHRcdFx0Ly9cblx0XHRcdC8vIElmIGBkZWJvdW5jZU1vZGVgIGlzIHRydWUgKGF0IGJlZ2luKSwgc2NoZWR1bGUgYGNsZWFyYCB0byBleGVjdXRlXG5cdFx0XHQvLyBhZnRlciBgZGVsYXlgIG1zLlxuXHRcdFx0Ly9cblx0XHRcdC8vIElmIGBkZWJvdW5jZU1vZGVgIGlzIGZhbHNlIChhdCBlbmQpLCBzY2hlZHVsZSBgY2FsbGJhY2tgIHRvXG5cdFx0XHQvLyBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuXG5cdFx0XHR0aW1lb3V0SUQgPSBzZXRUaW1lb3V0KGRlYm91bmNlTW9kZSA/IGNsZWFyIDogZXhlYywgZGVib3VuY2VNb2RlID09PSB1bmRlZmluZWQgPyBkZWxheSAtIGVsYXBzZWQgOiBkZWxheSk7XG5cdFx0fVxuXG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIHdyYXBwZXIgZnVuY3Rpb24uXG5cdHJldHVybiB3cmFwcGVyO1xuXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvdGhyb3R0bGUtZGVib3VuY2UvdGhyb3R0bGUuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiZXhwb3J0ICogZnJvbSBcIi4vRmFjZXRcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vRmlsdGVyXCI7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvbWFpbi9FbnRyeS50cyIsImltcG9ydCB7IEhvdEtleXNGYWNldEhhbmRsZXIgfSBmcm9tIFwiLi4vZXZlbnRoYW5kbGVycy9Ib3RLZXlzRmFjZXRIYW5kbGVyXCI7XG5pbXBvcnQgeyBJRmFjZXQgfSBmcm9tIFwiLi4vbW9kZWxzL0lGYWNldFwiO1xuaW1wb3J0IHsgSUZhY2V0Q29uZmlnIH0gZnJvbSBcIi4uL21vZGVscy9JRmFjZXRDb25maWdcIjtcbmltcG9ydCB7IElGYWNldFZhbHVlIH0gZnJvbSBcIi4uL21vZGVscy9JRmFjZXRWYWx1ZVwiO1xuaW1wb3J0IHsgRmFjZXRUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcbmltcG9ydCB7IElGYWNldFRlbXBsYXRlU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9JRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcbmltcG9ydCB7IEZhY2V0VHJlZSB9IGZyb20gXCIuLy4uL2ExMXkvRmFjZXRUcmVlXCI7XG5pbXBvcnQgeyBGYWNldENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcbmltcG9ydCB7IElGYWNldE9wdGlvbnMgfSBmcm9tIFwiLi8uLi9jb25maWcvSUZhY2V0T3B0aW9uc1wiO1xuaW1wb3J0IHsgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyICwgRmFjZXRBY3Rpb25IYW5kbGVyLFxuICAgIEZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlciwgRmFjZXRTZWFyY2hIYW5kbGVyLFxuICAgIEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyLCBJRXZlbnRIYW5kbGVyLCBQaW5VbnBpbkV2ZW50SGFuZGxlciwgU2hvd01vcmVMZXNzSGFuZGxlciB9IGZyb20gXCIuLy4uL2V2ZW50aGFuZGxlcnNcIjtcbmV4cG9ydCBjbGFzcyBGYWNldCB7XG4gICAgcHJpdmF0ZSBjb25maWdTdG9yZTogRmFjZXRDb25maWdTdG9yZTtcbiAgICBwcml2YXRlIHRlbXBsYXRlU2VydmljZTogSUZhY2V0VGVtcGxhdGVTZXJ2aWNlO1xuICAgIHByaXZhdGUgZmFjZXRFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGhhbmRsZXJDaGFpbjogSUV2ZW50SGFuZGxlcltdID0gW107XG4gICAgcHJpdmF0ZSBmYWNldFRyZWU6IEZhY2V0VHJlZTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJRmFjZXRPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSAgbmV3IEZhY2V0Q29uZmlnU3RvcmUob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZmFjZXRFbGVtZW50ID0gb3B0aW9ucy5jb250YWluZXJFbGVtZW50O1xuICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZSA9IG5ldyBGYWNldFRlbXBsYXRlU2VydmljZSh0aGlzLmNvbmZpZ1N0b3JlKTtcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LFxuICAgICAgICAvLyAgICAgdGhpcy5jb25maWdTdG9yZSwgdGhpcy50ZW1wbGF0ZVNlcnZpY2UpKTtcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRmFjZXRBY3Rpb25IYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XG4gICAgICAgIC8vIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEZhY2V0U2VhcmNoSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xuICAgICAgICAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xuICAgICAgICAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBIb3RLZXlzRmFjZXRIYW5kbGVyKCkpO1xuICAgICAgICAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBQaW5VbnBpbkV2ZW50SGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSwgdGhpcy50ZW1wbGF0ZVNlcnZpY2UpKTtcbiAgICAgICAgLy8gLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgU2hvd01vcmVMZXNzSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xuICAgICAgICAvLyAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIodGhpcy5mYWNldEVsZW1lbnQpKTtcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAvLyAgICAgaGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcbiAgICAgICAgLy8gfSk7XG4gICAgfVxuICAgIHB1YmxpYyBiaW5kID0gIChmYWNldHM6IElGYWNldFtdKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlLnNldERhdGEoZmFjZXRzKTtcbiAgICAgICAgdGhpcy5yZVJlbmRlcigpO1xuICAgIH1cbiAgICBwdWJsaWMgcmVSZW5kZXIgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmdldERhdGEoKTtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxGYWNldCA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLmZhY2V0RWxlbWVudC5pbm5lckhUTUwgPSBmdWxsRmFjZXQ7XG4gICAgICAgICAgICBjb25zdCB0cmVlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyb2xlPVwidHJlZVwiXScpO1xuICAgICAgICAgICAgdGhpcy5mYWNldFRyZWUgPSBuZXcgRmFjZXRUcmVlKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50LCB0aGlzLCB0aGlzLmNvbmZpZ1N0b3JlKTtcbiAgICAgICAgICAgIHRoaXMuZmFjZXRUcmVlLmluaXQoKTtcbiAgICAgICAgfSwgMSApO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0RmFjZXRDb25maWcgPSAoZmFjZXRDb25maWc6IElGYWNldENvbmZpZ1tdKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZyA9IGZhY2V0Q29uZmlnO1xuICAgIH1cbiAgICBwdWJsaWMgZGVzdHJveSA9ICAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuZmFjZXRUcmVlLmRlc3Ryb3koKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL21haW4vRmFjZXQudHMiLCJpbXBvcnQgKiBhcyBIYW5kbGViYXJzIGZyb20gXCJoYW5kbGViYXJzXCI7XG5pbXBvcnQge0lGYWNldH0gZnJvbSBcIi4uL21vZGVscy9JRmFjZXRcIjtcbmltcG9ydCAqIGFzIEZhY2V0TWFpbiBmcm9tIFwiLi8uLi8uLi9oYnMvZmFjZXQtbWFpbi5oYnNcIjtcbmltcG9ydCB7RmFjZXRDb25maWdTdG9yZX0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcbmltcG9ydCB7SUZhY2V0VGVtcGxhdGVTZXJ2aWNlfSBmcm9tIFwiLi9JRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcblxuZXhwb3J0IGNsYXNzIEZhY2V0VGVtcGxhdGVTZXJ2aWNlIGltcGxlbWVudHMgSUZhY2V0VGVtcGxhdGVTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBkYXRhOiBJRmFjZXRbXTtcbiAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW46IGFueTtcbiAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEhlYWRlcjogYW55O1xuICBwcml2YXRlIHRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyOiBhbnk7XG4gIHByaXZhdGUgdGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRCb2R5OiBhbnk7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmUpIHtcbiAgICB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbiA9IEZhY2V0TWFpbjtcbiAgfVxuICBwdWJsaWMgYmluZChmYWNldHM6IElGYWNldFtdKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb2xsYXBzZWQ6IGJvb2xlYW4gPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sbGFwc2VkO1xuICAgIGNvbnN0IG1lcmdlZEZhY2V0cyA9IHRoaXMubWVyZ2VXaXRoRmFjZXRDb25maWcoZmFjZXRzKTtcbiAgICBjb25zdCBmYXZvcml0ZXMgPSBtZXJnZWRGYWNldHMuZmlsdGVyKChmKSA9PiBmLnBpbm5lZCAhPT0gdW5kZWZpbmVkICYmIGYucGlubmVkKTtcbiAgICBjb25zdCBub25GYXZvcml0ZXMgPSBtZXJnZWRGYWNldHMuZmlsdGVyKChmKSA9PiBmLnBpbm5lZCA9PT0gdW5kZWZpbmVkIHx8ICFmLnBpbm5lZCk7XG4gICAgZmF2b3JpdGVzLnNvcnQodGhpcy5jb21wYXJlRm4pO1xuICAgIG5vbkZhdm9yaXRlcy5zb3J0KHRoaXMuY29tcGFyZUZuKTtcbiAgICBjb25zdCBub09mRmFjZXRUb1Nob3cgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMubm9PZkZhY2V0VG9TaG93O1xuICAgIGNvbnN0IGlkUHJlZml4ID0gdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmlkUHJlZml4O1xuICAgIHJldHVybiB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbih7aWRQcmVmaXgsIGZhdm9yaXRlcywgbm9uRmF2b3JpdGVzLCBub09mRmFjZXRUb1Nob3d9KTtcbiAgfVxuICBwdWJsaWMgc2V0RGF0YSA9IChmYWNldHM6IElGYWNldFtdKTogdm9pZCA9PiB7XG4gICAgdGhpcy5kYXRhID0gZmFjZXRzO1xuICB9XG4gIHB1YmxpYyBnZXREYXRhID0gKCk6IElGYWNldFtdID0+IHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9XG4gIHByaXZhdGUgY29tcGFyZUZuID0gKHByZXY6IGFueSwgbmV4dDogYW55KSA9PiB7XG4gICAgaWYgKHByZXYub3JkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpZiAobmV4dC5vcmRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgcmV0dXJuIHByZXYub3JkZXIgLSBuZXh0Lm9yZGVyO1xuICB9XG4gIHByaXZhdGUgbWVyZ2VXaXRoRmFjZXRDb25maWcgPSAoZmFjZXRzOiBJRmFjZXRbXSkgPT4ge1xuICAgIGNvbnN0IG1lcmdlZEFycmF5OiBhbnlbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgZmFjZXQgb2YgZmFjZXRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGZhY2V0Q29uZmlnIG9mIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZykge1xuICAgICAgICBpZiAoZmFjZXRDb25maWcuaWQgPT09IGZhY2V0LmlkKSB7XG4gICAgICAgICAgbWVyZ2VkQXJyYXkucHVzaCh7XG4gICAgICAgICAgICBjb2xsYXBzZWQ6IGZhY2V0Q29uZmlnLmNvbGxhcHNlZCxcbiAgICAgICAgICAgIGZhY2V0UmFuZ2VzOiBmYWNldC5mYWNldFJhbmdlcyxcbiAgICAgICAgICAgIGZhY2V0VmFsdWVzOiBmYWNldC5mYWNldFZhbHVlcyxcbiAgICAgICAgICAgIGlkOiBmYWNldENvbmZpZy5pZCxcbiAgICAgICAgICAgIG5hbWU6IGZhY2V0Q29uZmlnLm5hbWUsXG4gICAgICAgICAgICBvcmRlcjogZmFjZXRDb25maWcub3JkZXIsXG4gICAgICAgICAgICBwaW5uZWQ6IGZhY2V0Q29uZmlnLnBpbm5lZCxcbiAgICAgICAgICAgIHR5cGU6IGZhY2V0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZEFycmF5O1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL3NlcnZpY2VzL0ZhY2V0VGVtcGxhdGVTZXJ2aWNlLnRzIiwidmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGFuZGxlYmFyc1wiKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCIgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtYm9keSBndWkgZmx1aWQtaCBvZi1oaWRkZW4gZ3VpLWhpZGRlblxcXCI+XCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGZhY2V0LWJvZHkuaGJzXCIpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC1ib2R5XCIsXCJkYXRhXCI6ZGF0YSxcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC9kaXY+XFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCIgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtYm9keSBndWkgZmx1aWQtaCBvZi1oaWRkZW5cXFwiPlwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxmYWNldC1ib2R5Lmhic1wiKSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtYm9keVwiLFwiZGF0YVwiOmRhdGEsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIjwvZGl2PlxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiZ3VpIGZsdWlkLWggXFxcIj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDApLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIjwvZGl2PlwiO1xufSxcInVzZVBhcnRpYWxcIjp0cnVlLFwidXNlRGF0YVwiOnRydWV9KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oYnMvZmFjZXQtbWFpbi5oYnNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGFuZGxlYmFyc1wiKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCI8bGkgY2xhc3M9XFxcImd1aSBtLTAgcC1yLTEwIHAtdC01IHAtYi01IHAtbC0xMFxcXCIgXFxyXFxuICAgIGFyaWEtbGFiZWw9XFxcIlBpbm5lZCBGaWx0ZXJzXFxcIlxcclxcbiAgICBkYXRhLWF0dHItdmFsdWU9XFxcIlBpbm5lZCBGaWx0ZXJzXFxcIlxcclxcbiAgICBkYXRhLWF0dHItaWdub3JlRm9yU2VhcmNoPVxcXCJ0cnVlXFxcIlxcclxcbiAgICBhcmlhLWV4cGFuZGVkPVxcXCJ0cnVlXFxcIlxcclxcbiAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1waW5uZWQtZmFjZXRzLWNvbnRhaW5lclxcXCI+XFxyXFxuICAgIDxoNiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTIgY2FwcyBib2xkLTUwMCBmbGV4IG0tYi0xMCBqYy1zYlxcXCI+XFxyXFxuICAgICAgICBQSU5ORUQgRklMVEVSU1xcclxcbiAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tdXAgZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIj48L2k+XFxyXFxuICAgIDwvaDY+XFxyXFxuICAgIDx1bCBhcmlhLWxhYmVsbGVkYnk9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1waW5uZWQtZmFjZXRzLWNvbnRhaW5lclxcXCIgY2xhc3M9XFxcImd1aSBtLTAgcC0wXFxcIiByb2xlPVxcXCJncm91cFxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmF2b3JpdGVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDIsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICA8L3VsPlxcclxcbjwvbGk+XFxyXFxuXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICA8bGkgYXJpYS1sYWJlbD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBpdGVtIGZhY2V0LWl0ZW0gYm9yZGVyLWJvdHRvbSBsaWdodCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTUgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ29sbGFwc2VkLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDb2xsYXBzZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVxcXCJcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxCb29sZWFuLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJCb29sZWFuXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgZGF0YS1hdHRyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICAgICAgICAgIGRhdGEtYXR0ci12YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZhY2V0LWl0ZW0taGVhZGVyIGZsdWlkIGd1aSBpdGVtIGZsZXggamMtc2JcXFwiIGlkPVxcXCJmYWNldC1pdGVtLWhlYWRlci1cIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGF0YSAmJiBkYXRhLmluZGV4KSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBwcmltYXJ5IGd1aS1zdWJoZWFkaW5nLTEgY2FwcyBtLTAgY3Vyc29yLXBvaW50ZXJcXFwiIHRpdGxlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIiBcIlxuICAgICsgKChzdGFjazEgPSBfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcU2VsZWN0ZWRGaWx0ZXJzQ291bnQudHNcIikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiU2VsZWN0ZWRGaWx0ZXJzQ291bnRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8c3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIHBpbi11bnBpbi1zZWxlY3RvciBndWktaWNvbi11bnBpbiBtLXQtNSBtLXItMTAgdW5waW4taWNvbiBjdXJzb3ItcG9pbnRlclxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cXFwiUHJlc3MgZW50ZXIgb3Igc3BhY2UgdG8gdW5waW4gZmlsdGVyIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVxcXCIwXFxcIj48L2k+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5wcm9ncmFtKDUsIGRhdGEsIDApLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGZhY2V0LWxhYmVsLmhic1wiKSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtbGFiZWxcIixcImRhdGFcIjpkYXRhLFwiaW5kZW50XCI6XCIgICAgICAgICAgICBcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICA8L2xpPlxcclxcblwiO1xufSxcIjNcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLXVwIGV4cGFuc2lvbi1pY29uIG0tdC01IG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCI+PC9pPlxcclxcblwiO1xufSxcIjVcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLWRvd24gZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIj48L2k+XFxyXFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhdm9yaXRlcyA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubGVuZ3RoIDogc3RhY2sxKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGJzL2ZhY2V0LXBpbm5lZC5oYnNcbi8vIG1vZHVsZSBpZCA9IDE4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiY29uc3QgY2hlY2tMZW5ndGggPSAoaW5kZXgsIHYyKTogc3RyaW5nID0+IHtcclxuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkICYmIGluZGV4ICsgMSA+IHYyKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiZ3VpLWhpZGRlbiBleHRyYS1maWx0ZXJcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBcIlwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2hlY2tMZW5ndGg7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tMZW5ndGgudHMiLCJjb25zdCBBcHBseVJlbW92ZSA9IChib29sOiBib29sZWFuKTogc3RyaW5nID0+IHtcclxuICAgIHJldHVybiBib29sID8gXCIgcmVtb3ZlIFwiIDogXCIgYXBwbHkgXCI7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcHBseVJlbW92ZTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9oYnMvaGVscGVycy9BcHBseVJlbW92ZS50cyIsImNvbnN0IGNoZWNrZWQgPSAoYm9vbDogYm9vbGVhbik6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gYm9vbCA/IFwiY2hlY2tlZFwiIDogXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNoZWNrZWQ7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tlZC50cyIsImNvbnN0IGRpc2FibGVkID0gKGJvb2w6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xyXG4gICAgcmV0dXJuIGJvb2wgPyBcImRpc2FibGVkXCIgOiBcIlwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGlzYWJsZWQ7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvRGlzYWJsZWQudHMiLCJjb25zdCBoaWRkZW4gPSAodmFsdWU6IGJvb2xlYW4sIGludmVydDogYm9vbGVhbik6IHN0cmluZyA9PiB7XHJcbiAgICBsZXQgaGlkZTtcclxuICAgIGlmIChpbnZlcnQpIHtcclxuICAgICAgICBpZiAoIXZhbHVlKSB7XHJcbiAgICAgICAgICAgIGhpZGUgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGhpZGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBoaWRlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoaWRlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGhpZGUgPyBcIiBndWktaGlkZGVuIFwiIDogXCIgXCI7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBoaWRkZW47XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvSGlkZGVuLnRzIiwiY29uc3QgU2hvd01vcmVMZXNzTGluayA9IChpbmRleCwgdjIsIG9wdGlvbnMpOiBzdHJpbmcgPT4ge1xyXG4gICAgaWYgKGluZGV4Lmxlbmd0aCA+IHYyKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiPGxpIGNsYXNzPVxcXCJndWkgbS1iLTUgbS10LTVcXFwiPlwiXHJcbiAgICAgICAgKyBcIjxhIHRhYmluZGV4PVxcXCIwXFxcIiByb2xlPVxcXCJ0cmVlaXRlbVxcXCIgXCJcclxuICAgICAgICArIFwiYXJpYS1sYWJlbD1cXFwiUHJlc3MgZW50ZXIgdG8gc2hvdyBcIiArIChpbmRleC5sZW5ndGggLSB2MikgKyBcIiBtb3JlIHZhbHVlc1xcXCIgXCJcclxuICAgICAgICArIFwiY2xhc3M9XFxcImd1aSBjYXBzIGd1aS1ib2R5LTIgc2ltcGxlIHNob3ctbW9yZS1saW5rIGN1cnNvci1wb2ludGVyIHAtMCBtLXQtM1xcXCI+XCJcclxuICAgICAgICArIChpbmRleC5sZW5ndGggLSB2MilcclxuICAgICAgICArIFwiIE1vcmUgPC9hPjwvbGk+XCJcclxuICAgICAgICArIFwiPGxpIGNsYXNzPVxcXCJndWkgbS1iLTUgbS10LTUgZ3VpLWhpZGRlblxcXCI+XCJcclxuICAgICAgICArIFwiPGEgdGFiaW5kZXg9XFxcIjBcXFwiIHJvbGU9XFxcInRyZWVpdGVtXFxcIiBcIlxyXG4gICAgICAgICsgXCJhcmlhLWxhYmVsPVxcXCJQcmVzcyBlbnRlciB0byBzaG93IGxlc3MgdmFsdWVzXFxcIiBcIlxyXG4gICAgICAgICsgXCJjbGFzcz1cXFwiZ3VpIGNhcHMgZ3VpLWJvZHktMiBzaW1wbGUgc2hvdy1sZXNzLWxpbmsgY3Vyc29yLXBvaW50ZXIgcC0wIG0tdC0zXFxcIj5cIlxyXG4gICAgICAgICsgXCJTaG93IExlc3M8L2E+PC9saT5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTaG93TW9yZUxlc3NMaW5rO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL1Nob3dNb3JlTGVzc0xpbmsudHMiLCJ2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIjxsaSBjbGFzcz1cXFwiZ3VpIG0tMCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTEwXFxcIiBcXHJcXG4gICAgYXJpYS1sYWJlbD1cXFwiQWxsIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci12YWx1ZT1cXFwiQWxsIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci1pZ25vcmVGb3JTZWFyY2g9XFxcInRydWVcXFwiXFxyXFxuICAgIGFyaWEtZXhwYW5kZWQ9XFxcInRydWVcXFwiXFxyXFxuICAgIHJvbGU9XFxcInRyZWVpdGVtXFxcIlxcclxcbiAgICBpZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLXVucGlubmVkLWZhY2V0cy1jb250YWluZXJcXFwiPlxcclxcbiAgICA8aDYgY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0yIGNhcHMgYm9sZC01MDAgbS1iLTEwIGZsZXggamMtc2JcXFwiPlxcclxcbiAgICAgICAgQWxsIEZJTFRFUlNcXHJcXG4gICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLXVwIGV4cGFuc2lvbi1pY29uIG0tdC01IG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCI+PC9pPlxcclxcbiAgICA8L2g2PlxcclxcbiAgICA8dWwgYXJpYS1sYWJlbGxlZGJ5PVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItdW5waW5uZWQtZmFjZXRzLWNvbnRhaW5lclxcXCIgY2xhc3M9XFxcImd1aSBtLTAgcC0wXFxcIiByb2xlPVxcXCJncm91cFxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubm9uRmF2b3JpdGVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDIsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICA8L3VsPlxcclxcbjwvbGk+XFxyXFxuXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICA8bGkgYXJpYS1sYWJlbD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBpdGVtIGZhY2V0LWl0ZW0gYm9yZGVyLWJvdHRvbSBsaWdodCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTUgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ29sbGFwc2VkLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDb2xsYXBzZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVxcXCJcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxCb29sZWFuLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJCb29sZWFuXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgZGF0YS1hdHRyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICAgICAgICAgIGRhdGEtYXR0ci12YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZhY2V0LWl0ZW0taGVhZGVyIGZsdWlkIGd1aSBpdGVtIGZsZXggamMtc2JcXFwiIGlkPVxcXCJmYWNldC1pdGVtLWhlYWRlci1cIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGF0YSAmJiBkYXRhLmluZGV4KSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBwcmltYXJ5IGd1aS1zdWJoZWFkaW5nLTEgY2FwcyBtLTAgY3Vyc29yLXBvaW50ZXJcXFwiIHRpdGxlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIiBcIlxuICAgICsgKChzdGFjazEgPSBfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcU2VsZWN0ZWRGaWx0ZXJzQ291bnQudHNcIikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiU2VsZWN0ZWRGaWx0ZXJzQ291bnRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8c3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIHBpbi11bnBpbi1zZWxlY3RvciBndWktaWNvbi1waW4gbS10LTUgbS1yLTEwIHBpbi1pY29uIGN1cnNvci1wb2ludGVyXFxcIiBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJQcmVzcyBlbnRlciBvciBzcGFjZSB0byBwaW4gZmlsdGVyIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVxcXCIwXFxcIj48L2k+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5wcm9ncmFtKDUsIGRhdGEsIDApLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGZhY2V0LWxhYmVsLmhic1wiKSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtbGFiZWxcIixcImRhdGFcIjpkYXRhLFwiaW5kZW50XCI6XCIgICAgICAgICAgICBcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICA8L2xpPlxcclxcblwiO1xufSxcIjNcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLXVwIGV4cGFuc2lvbi1pY29uIG0tdC01IG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCI+PC9pPlxcclxcblwiO1xufSxcIjVcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLWRvd24gZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIj48L2k+XFxyXFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5vbkZhdm9yaXRlcyA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubGVuZ3RoIDogc3RhY2sxKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGJzL2ZhY2V0LXVucGlubmVkLmhic1xuLy8gbW9kdWxlIGlkID0gMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJpbXBvcnQgeyBGYWNldENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9GYWNldENvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7IEZhY2V0IH0gZnJvbSBcIi4uL21haW4vRmFjZXRcIjtcclxuaW1wb3J0IHsgRmlsdGVyQWN0aW9uVHlwZSB9IGZyb20gXCIuLy4uL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlXCI7XHJcbmltcG9ydCB7IERvbVV0aWxzIH0gZnJvbSBcIi4vRG9tVXRpbHNcIjtcclxuaW1wb3J0IHsgRmFjZXRUcmVlSXRlbSB9IGZyb20gXCIuL0ZhY2V0VHJlZUl0ZW1cIjtcclxuaW1wb3J0IHsgS2V5Q29kZXMgfSBmcm9tIFwiLi9LZXlDb2Rlc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZhY2V0VHJlZSB7XHJcbiAgICAvLyBGYWNldCBPYmplY3RcclxuICAgIHByaXZhdGUgZmFjZXQ6IEZhY2V0O1xyXG4gICAgLy8gRG9tIE5vZGVzXHJcbiAgICBwcml2YXRlIHBhcmVudEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSB0cmVlRG9tTm9kZTogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNlYXJjaEJveE5vZGU6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBleHBhbmRBbGxOb2RlOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgY29sbGFwc2VBbGxOb2RlOiBIVE1MRWxlbWVudDtcclxuXHJcbiAgICAvLyBEYXRhIFN0cnVjdHVyZXMgZm9yIGVhc3kgYWNjZXNzXHJcbiAgICBwcml2YXRlIHRyZWVpdGVtczogRmFjZXRUcmVlSXRlbVtdO1xyXG4gICAgcHJpdmF0ZSBmaXJzdENoYXJzOiBzdHJpbmdbXTtcclxuICAgIHByaXZhdGUgZmlyc3RUcmVlaXRlbTogRmFjZXRUcmVlSXRlbTtcclxuICAgIHByaXZhdGUgbGFzdFRyZWVpdGVtOiBGYWNldFRyZWVJdGVtO1xyXG5cclxuICAgIC8vIENvbmZpZyBTdG9yZXNcclxuICAgIHByaXZhdGUgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmU7XHJcblxyXG4gICAgLy8gTG9jYWxcclxuICAgIHByaXZhdGUgbGFzdElucHV0VmFsdWU6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgY29uc3RydWN0b3Iobm9kZTogSFRNTEVsZW1lbnQsIGZhY2V0OiBGYWNldCwgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmUpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gbm9kZTtcclxuICAgICAgICB0aGlzLmZhY2V0ID0gZmFjZXQ7XHJcbiAgICAgICAgdGhpcy50cmVlRG9tTm9kZSA9IHRoaXMucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW3JvbGU9dHJlZV1cIilbMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUFsbE5vZGUgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb2xsYXBzZS1hbGxcIilbMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxOb2RlID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZXhwYW5kLWFsbFwiKVswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB0aGlzLnNlYXJjaEJveE5vZGUgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5maWx0ZXItc2VhcmNoLWlucHV0XCIpWzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHRoaXMudHJlZWl0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5maXJzdENoYXJzID0gW107XHJcbiAgICAgICAgdGhpcy5maXJzdFRyZWVpdGVtID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxhc3RUcmVlaXRlbSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGZpbmRUcmVlaXRlbXMgPSAobm9kZSwgdHJlZSwgZ3JvdXApID0+IHtcclxuICAgICAgICBsZXQgZWxlbTogYW55ID0gbm9kZS5maXJzdEVsZW1lbnRDaGlsZDtcclxuICAgICAgICBsZXQgdGkgPSBncm91cDtcclxuICAgICAgICB3aGlsZSAoZWxlbSkge1xyXG4gICAgICAgICAgICBjb25zdCByb2xlID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJyb2xlXCIpO1xyXG4gICAgICAgICAgICBpZiAocm9sZSAmJiByb2xlLnRvTG93ZXJDYXNlKCkgPT09IFwidHJlZWl0ZW1cIikge1xyXG4gICAgICAgICAgICAgICAgdGkgPSBuZXcgRmFjZXRUcmVlSXRlbShlbGVtLCB0cmVlLCBncm91cCk7XHJcbiAgICAgICAgICAgICAgICB0aS5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICB0cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVpdGVtc1xyXG4gICAgICAgICAgICAgICAgICAgIC5wdXNoKHRpKTtcclxuICAgICAgICAgICAgICAgIHRyZWVcclxuICAgICAgICAgICAgICAgICAgICAuZmlyc3RDaGFyc1xyXG4gICAgICAgICAgICAgICAgICAgIC5wdXNoKHRpLmxhYmVsLnN1YnN0cmluZygwLCAxKS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZWxlbS5maXJzdEVsZW1lbnRDaGlsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5maW5kVHJlZWl0ZW1zKGVsZW0sIHRyZWUsIHRpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbGVtID0gZWxlbS5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpbml0ID0gKCkgPT4ge1xyXG4gICAgICAgIC8vIGluaXRpYWxpemUgcG9wIHVwIG1lbnVzXHJcbiAgICAgICAgaWYgKCF0aGlzLnRyZWVEb21Ob2RlLmdldEF0dHJpYnV0ZShcInJvbGVcIikpIHtcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVEb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInRyZWVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBvcHVsYXRlIGFsbCBUcmVlIEl0ZW1zXHJcbiAgICAgICAgdGhpcy5maW5kVHJlZWl0ZW1zKHRoaXMudHJlZURvbU5vZGUsIHRoaXMsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIFZpc2libGUgVHJlZSBJdGVtc1xyXG4gICAgICAgIHRoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcygpO1xyXG5cclxuICAgICAgICAvLyBTZXQgdGFiIEluZGV4IG9mIGZpcnN0IHRyZWUgaXRlbS5cclxuICAgICAgICB0aGlzLmZpcnN0VHJlZWl0ZW0udHJlZUl0ZW1Eb21Ob2RlLnRhYkluZGV4ID0gMDtcclxuXHJcbiAgICAgICAgLy8gRXZlbnQgSGFuZGxlcnNcclxuICAgICAgICB0aGlzLmNvbGxhcHNlQWxsTm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jb2xsYXBzZUFsbEl0ZW1zKTtcclxuICAgICAgICB0aGlzLmV4cGFuZEFsbE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuZXhwYW5kQWxsSXRlbXMpO1xyXG4gICAgICAgIHRoaXMuc2VhcmNoQm94Tm9kZS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5oYW5kbGVTZWFyY2hGb3JGaWx0ZXJzKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLnNldEZvY3VzVG9TZWFyY2hCb3gpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGRlc3Ryb3kgPSAoKSA9PiB7XHJcbiAgICAgICAgRG9tVXRpbHMub2ZmKHRoaXMucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5zZXRGb2N1c1RvU2VhcmNoQm94KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRGb2N1c1RvU2VhcmNoQm94ID0gKGV2ZW50OiBIVE1MRWxlbWVudEV2ZW50TWFwW1wia2V5ZG93blwiXSkgPT4ge1xyXG4gICAgICAgIGlmIChldmVudC5hbHRLZXkgICYmICBldmVudC5rZXkgPT09IFwiZlwiKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoQm94Tm9kZS5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRGb2N1c1RvSXRlbSA9ICh0cmVlaXRlbTogRmFjZXRUcmVlSXRlbSwgZG9udFNldGZvY3VzPzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgdGkgb2YgdGhpcy50cmVlaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKHRpID09PSB0cmVlaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdGkudHJlZUl0ZW1Eb21Ob2RlLnRhYkluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIGlmICghZG9udFNldGZvY3VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlcclxuICAgICAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aS50cmVlSXRlbURvbU5vZGUudGFiSW5kZXggPSAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRGb2N1c1RvRmlyc3RWaXNpYmxlID0gKGRvbnRTZXRmb2N1cz86IGJvb2xlYW4pID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICh0aS5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNUb0l0ZW0odGksIGRvbnRTZXRmb2N1cyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBzZXRGb2N1c1RvTmV4dEl0ZW0gPSAoY3VycmVudEl0ZW06IEZhY2V0VHJlZUl0ZW0pID0+IHtcclxuICAgICAgICBsZXQgbmV4dEl0ZW07XHJcbiAgICAgICAgZm9yIChsZXQgaSA9ICh0aGlzLnRyZWVpdGVtcy5sZW5ndGggLSAxKTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgdGkgPSB0aGlzLnRyZWVpdGVtc1tpXTtcclxuICAgICAgICAgICAgaWYgKHRpID09PSBjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRpLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgbmV4dEl0ZW0gPSB0aTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmV4dEl0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGb2N1c1RvSXRlbShuZXh0SXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRGb2N1c1RvUHJldmlvdXNJdGVtID0gKGN1cnJlbnRJdGVtOiBGYWNldFRyZWVJdGVtKSA9PiB7XHJcbiAgICAgICAgbGV0IHByZXZJdGVtO1xyXG4gICAgICAgIGZvciAoY29uc3QgdGkgb2YgdGhpcy50cmVlaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKHRpID09PSBjdXJyZW50SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRpLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcHJldkl0ZW0gPSB0aTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJldkl0ZW0pIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGb2N1c1RvSXRlbShwcmV2SXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRGb2N1c1RvUGFyZW50SXRlbSA9IChjdXJyZW50SXRlbTogRmFjZXRUcmVlSXRlbSkgPT4ge1xyXG4gICAgICAgIGlmIChjdXJyZW50SXRlbS5ncm91cFRyZWVpdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNUb0l0ZW0oY3VycmVudEl0ZW0uZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRGb2N1c1RvRmlyc3RJdGVtID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNUb0l0ZW0odGhpcy5maXJzdFRyZWVpdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Rm9jdXNUb0xhc3RJdGVtID0gKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNUb0l0ZW0odGhpcy5sYXN0VHJlZWl0ZW0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBleHBhbmRUcmVlaXRlbSA9IChjdXJyZW50SXRlbTogRmFjZXRUcmVlSXRlbSwgbm90aWZ5PzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIFRyZWUgSXRlbSBpcyBleHBhbmRhYmxlXHJcbiAgICAgICAgaWYgKGN1cnJlbnRJdGVtLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICBEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQoY3VycmVudEl0ZW0udHJlZUl0ZW1Eb21Ob2RlLCBcInRydWVcIik7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRXhwYW5zaW9uSWNvbihjdXJyZW50SXRlbSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcyhub3RpZnkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbGxhcHNlQWxsTm9kZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB0aGlzLmV4cGFuZEFsbE5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGV4cGFuZEFsbFNpYmxpbmdJdGVtcyA9IChjdXJyZW50SXRlbTogRmFjZXRUcmVlSXRlbSkgPT4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgdGkgb2YgdGhpcy50cmVlaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKCh0aS5ncm91cFRyZWVpdGVtID09PSBjdXJyZW50SXRlbS5ncm91cFRyZWVpdGVtKSAmJiB0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kVHJlZWl0ZW0odGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm90aWZ5Q29sbGFwc2VBbmRFeHBhbnNpb24oKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBleHBhbmRBbGxJdGVtcyA9ICgpID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICh0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhwYW5kVHJlZWl0ZW0odGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29sbGFwc2VBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIHRoaXMuZXhwYW5kQWxsTm9kZS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUFsbE5vZGUuZm9jdXMoKTtcclxuICAgICAgICB0aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY29sbGFwc2VBbGxJdGVtcyA9ICgpID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICh0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VUcmVlaXRlbSh0aSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VBbGxOb2RlLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwidHJ1ZVwiKTtcclxuICAgICAgICB0aGlzLmV4cGFuZEFsbE5vZGUuZm9jdXMoKTtcclxuICAgICAgICB0aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY29sbGFwc2VBbGxTaWJsaW5nSXRlbXMgPSAoY3VycmVudEl0ZW06IEZhY2V0VHJlZUl0ZW0pID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICgodGkuZ3JvdXBUcmVlaXRlbSA9PT0gY3VycmVudEl0ZW0uZ3JvdXBUcmVlaXRlbSkgJiYgdGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlVHJlZWl0ZW0odGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm90aWZ5Q29sbGFwc2VBbmRFeHBhbnNpb24oKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjb2xsYXBzZVRyZWVpdGVtID0gKGN1cnJlbnRJdGVtOiBGYWNldFRyZWVJdGVtLCBub3RpZnk/OiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgbGV0IGdyb3VwVHJlZWl0ZW06IEZhY2V0VHJlZUl0ZW07XHJcbiAgICAgICAgaWYgKGN1cnJlbnRJdGVtLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICBncm91cFRyZWVpdGVtID0gY3VycmVudEl0ZW07XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ3JvdXBUcmVlaXRlbSA9IGN1cnJlbnRJdGVtLmdyb3VwVHJlZWl0ZW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZ3JvdXBUcmVlaXRlbSkge1xyXG4gICAgICAgICAgICBEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQoZ3JvdXBUcmVlaXRlbS50cmVlSXRlbURvbU5vZGUsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlRXhwYW5zaW9uSWNvbihncm91cFRyZWVpdGVtLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcyhub3RpZnkpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzVG9JdGVtKGdyb3VwVHJlZWl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbGxhcHNlQWxsTm9kZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB0aGlzLmV4cGFuZEFsbE5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgdG9nZ2xlRXhwYW5zaW9uSWNvbiA9IChncm91cFRyZWVpdGVtOiBGYWNldFRyZWVJdGVtLCBjdXJyZW50RXhwYW5kZWQ6IGJvb2xlYW4pID0+IHtcclxuICAgICAgICBjb25zdCBpY29uTm9kZUxpc3QgPSBncm91cFRyZWVpdGVtLnRyZWVJdGVtRG9tTm9kZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmV4cGFuc2lvbi1pY29uXCIpO1xyXG4gICAgICAgIGxldCBpY29uTm9kZTogSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKCBpY29uTm9kZUxpc3QgJiYgaWNvbk5vZGVMaXN0Lmxlbmd0aCApIHtcclxuICAgICAgICAgICAgaWNvbk5vZGUgPSBpY29uTm9kZUxpc3RbMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY3VycmVudEV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgIGljb25Ob2RlLmNsYXNzTGlzdC5yZW1vdmUoXCJndWktaWNvbi1jaGV2cm9uLXVwXCIpO1xyXG4gICAgICAgICAgICBpY29uTm9kZS5jbGFzc0xpc3QuYWRkKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGljb25Ob2RlLmNsYXNzTGlzdC5yZW1vdmUoXCJndWktaWNvbi1jaGV2cm9uLWRvd25cIik7XHJcbiAgICAgICAgICAgIGljb25Ob2RlLmNsYXNzTGlzdC5hZGQoXCJndWktaWNvbi1jaGV2cm9uLXVwXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyB1cGRhdGVWaXNpYmxlVHJlZWl0ZW1zID0gKG5vdGlmeT86IGJvb2xlYW4pID0+IHtcclxuICAgICAgICB0aGlzLmZpcnN0VHJlZWl0ZW0gPSB0aGlzLnRyZWVpdGVtc1swXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSB0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKCB0aS50cmVlSXRlbURvbU5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ3VpLWhpZGRlblwiKVxyXG4gICAgICAgICAgICAgICAgfHwgcGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhcImd1aS1oaWRkZW5cIikpIHtcclxuICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdoaWxlIChwYXJlbnQgJiYgKHBhcmVudCAhPT0gdGhpcy50cmVlRG9tTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnQuZ2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiKSA9PT0gXCJmYWxzZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGkuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RUcmVlaXRlbSA9IHRpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggbm90aWZ5ICkge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXRGb2N1c0J5Rmlyc3RDaGFyYWN0ZXIgPSAoY3VycmVudEl0ZW0sIGNoYXIpID0+IHtcclxuICAgICAgICBsZXQgc3RhcnQ7XHJcbiAgICAgICAgbGV0IGluZGV4O1xyXG4gICAgICAgIGNoYXIgPSBjaGFyLnRvTG93ZXJDYXNlKCk7XHJcblxyXG4gICAgICAgIC8vIEdldCBzdGFydCBpbmRleCBmb3Igc2VhcmNoIGJhc2VkIG9uIHBvc2l0aW9uIG9mIGN1cnJlbnRJdGVtXHJcbiAgICAgICAgc3RhcnQgPSB0aGlzXHJcbiAgICAgICAgICAgIC50cmVlaXRlbXNcclxuICAgICAgICAgICAgLmluZGV4T2YoY3VycmVudEl0ZW0pICsgMTtcclxuICAgICAgICBpZiAoc3RhcnQgPT09IHRoaXMudHJlZWl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzdGFydCA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayByZW1haW5pbmcgc2xvdHMgaW4gdGhlIG1lbnVcclxuICAgICAgICBpbmRleCA9IHRoaXMuZ2V0SW5kZXhGaXJzdENoYXJzKHN0YXJ0LCBjaGFyKTtcclxuXHJcbiAgICAgICAgLy8gSWYgbm90IGZvdW5kIGluIHJlbWFpbmluZyBzbG90cywgY2hlY2sgZnJvbSBiZWdpbm5pbmdcclxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5nZXRJbmRleEZpcnN0Q2hhcnMoMCwgY2hhcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiBtYXRjaCB3YXMgZm91bmQuLi5cclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzVG9JdGVtKHRoaXMudHJlZWl0ZW1zW2luZGV4XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRJbmRleEZpcnN0Q2hhcnMgPSAoc3RhcnRJbmRleDogbnVtYmVyLCBjaGFyOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBmb3IgKGxldCBpID0gc3RhcnRJbmRleDsgaSA8IHRoaXMuZmlyc3RDaGFycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy50cmVlaXRlbXNbaV0uaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gdGhpcy5maXJzdENoYXJzW2ldKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNob3dNb3JlVmFsdWVzID0gKGdyb3VwSXRlbTogRmFjZXRUcmVlSXRlbSkgPT4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgdGkgb2YgdGhpcy50cmVlaXRlbXMpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmICggdGkuZ3JvdXBUcmVlaXRlbSA9PT0gZ3JvdXBJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShcImd1aS1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmlzU2hvd0xlc3NMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLnRyZWVJdGVtRG9tTm9kZS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmlzU2hvd01vcmVMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5hZGQoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcygpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNob3dMZXNzVmFsdWVzID0gKGdyb3VwSXRlbTogRmFjZXRUcmVlSXRlbSkgPT4ge1xyXG4gICAgICAgIGZvciAoY29uc3QgdGkgb2YgdGhpcy50cmVlaXRlbXMpIHtcclxuICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmICggdGkuZ3JvdXBUcmVlaXRlbSA9PT0gZ3JvdXBJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmNsYXNzTGlzdC5jb250YWlucyhcImV4dHJhLWZpbHRlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc1Nob3dMZXNzTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc1Nob3dNb3JlTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aS50cmVlSXRlbURvbU5vZGUuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVUcmVlaXRlbXMoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBoYW5kbGVMYWJlbENoYW5nZSA9IChjdXJyZW50SXRlbTogRmFjZXRUcmVlSXRlbSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNoZWNrZWQgPSBEb21VdGlscy50b2dnbGVMYWJlbChjdXJyZW50SXRlbS50cmVlSXRlbURvbU5vZGUgYXMgIEhUTUxMYWJlbEVsZW1lbnQpO1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbiA9IGNoZWNrZWQgPyBGaWx0ZXJBY3Rpb25UeXBlLkFkZCA6IEZpbHRlckFjdGlvblR5cGUuTWludXM7XHJcbiAgICAgICAgY3VycmVudEl0ZW0udHJlZUl0ZW1Eb21Ob2RlLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgY2hlY2tlZC50b1N0cmluZygpKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25GaWx0ZXJDaGFuZ2UoY3VycmVudEl0ZW0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtLmxhYmVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJdGVtLmRhdGFUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5pc1JhbmdlKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBub3RpZnlDb2xsYXBzZUFuZEV4cGFuc2lvbiA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnO1xyXG4gICAgICAgIGNvbnN0IHB1Ymxpc2g6IEFycmF5PHtrZXk6IHN0cmluZywgY29sbGFwc2VkOiBib29sZWFufT4gPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICggdGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhY2V0IG9mIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGZhY2V0LmlkID09PSB0aS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldC5jb2xsYXBzZWQgPSAhdGkuaXNFeHBhbmRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwdWJsaXNoLnB1c2goe2tleTogZmFjZXQuaWQsIGNvbGxhcHNlZDogZmFjZXQuY29sbGFwc2VkfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25Db2xsYXBzZVRvZ2dsZShwdWJsaXNoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBoYW5kbGVQaW5VbnBpbiA9IChldmVudDogYW55LCBwaW46IGJvb2xlYW4sIGlkOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnO1xyXG4gICAgICAgIGZvciAoY29uc3QgZmFjZXQgb2YgZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAoIGZhY2V0LmlkID09PSBpZCApIHtcclxuICAgICAgICAgICAgICAgIGZhY2V0LnBpbm5lZCA9IHBpbjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmFjZXQucmVSZW5kZXIoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25QaW5VbnBpbihpZCwgcGluKTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBoYW5kbGVTZWFyY2hGb3JGaWx0ZXJzID0gKGV2ZW50OiBIVE1MRWxlbWVudEV2ZW50TWFwW1wia2V5dXBcIl0pID0+IHtcclxuICAgICAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHBhcmVudCA9IGlucHV0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgY29uc3QgdmFsID0gaW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICBpZiAoIHZhbCA9PT0gdGhpcy5sYXN0SW5wdXRWYWx1ZSApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxhc3RJbnB1dFZhbHVlID0gdmFsO1xyXG4gICAgICAgIGxldCBpbnB1dFZhbHVlQmxhbmsgPSBmYWxzZTtcclxuICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZChcImxvYWRpbmdcIik7XHJcbiAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbCA9PT0gbnVsbCB8fCB2YWwudHJpbSgpID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIGlucHV0VmFsdWVCbGFuayA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoICFpbnB1dFZhbHVlQmxhbmsgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU5vdEJsYW5rSW5wdXRTZWFyY2godmFsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlQmxhbmtJbnB1dFNlYXJjaCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcygpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzVG9GaXJzdFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKFwibG9hZGluZ1wiKTtcclxuICAgICAgICB9LCAxKTtcclxuICAgICAgICAvLyBjb25zdCBtYXRjaGVkR3JvdXBJdGVtOiBGYWNldFRyZWVJdGVtW10gPSBbXTtcclxuICAgICAgICAvLyBjb25zdCBub3RNYXRjaGVkR3JvdXBJdGVtOiBGYWNldFRyZWVJdGVtW10gPSBbXTtcclxuICAgICAgICAvLyBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAvLyAgICAgICAgIGlmICh0aS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSA+IC0xKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgbWF0Y2hlZEdyb3VwSXRlbS5wdXNoKHRpKTtcclxuICAgICAgICAvLyAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgbm90TWF0Y2hlZEdyb3VwSXRlbS5wdXNoKHRpKTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBpZiAodGkuaXNTaG93TGVzc0xpbmsgfHwgdGkuaXNTaG93TW9yZUxpbmsgKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAvLyAgICAgICAgIERvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGZvciAoY29uc3QgdGkgb2YgdGhpcy50cmVlaXRlbXMpIHtcclxuICAgICAgICAvLyAgICAgaWYgKHRpLmlzU2hvd0xlc3NMaW5rIHx8IHRpLmlzU2hvd01vcmVMaW5rKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBpZiAoIG1hdGNoZWRHcm91cEl0ZW0uaW5kZXhPZih0aSkgPiAtMSB8fCBtYXRjaGVkR3JvdXBJdGVtLmluZGV4T2YodGkuZ3JvdXBUcmVlaXRlbSkgPiAtMSApIHtcclxuICAgICAgICAvLyAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgICAgICBEb21VdGlscy5zaG93KHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAvLyAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyAgICAgICAgIGlmICghdGkuaXNFeHBhbmRhYmxlICkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGlmICh0aS52YWx1ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSA+IC0xICkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlZEdyb3VwSXRlbS5pbmRleE9mKHRpLmdyb3VwVHJlZWl0ZW0pIDw9IC0xICkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZEdyb3VwSXRlbS5wdXNoKHRpLmdyb3VwVHJlZWl0ZW0pO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGNvbnN0IG5vdE1hdGNoZWRJbmRleCA9IG5vdE1hdGNoZWRHcm91cEl0ZW0uaW5kZXhPZih0aS5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKG5vdE1hdGNoZWRJbmRleCA+IC0xICkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbm90TWF0Y2hlZEdyb3VwSXRlbS5zbGljZShub3RNYXRjaGVkSW5kZXgsIG5vdE1hdGNoZWRJbmRleCArIDEpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIERvbVV0aWxzLnNob3codGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBEb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZm9yIChjb25zdCBtZyBvZiBtYXRjaGVkR3JvdXBJdGVtKSB7XHJcbiAgICAgICAgLy8gICAgIG1nLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgLy8gICAgIERvbVV0aWxzLnNldEFyaWFFeHBhbmRlZChtZy50cmVlSXRlbURvbU5vZGUsIFwidHJ1ZVwiKTtcclxuICAgICAgICAvLyAgICAgRG9tVXRpbHMuc2hvdyhtZy50cmVlSXRlbURvbU5vZGUpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBmb3IgKGNvbnN0IG5tZyBvZiBub3RNYXRjaGVkR3JvdXBJdGVtKSB7XHJcbiAgICAgICAgLy8gICAgIG5tZy5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAvLyAgICAgRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKG5tZy50cmVlSXRlbURvbU5vZGUsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgLy8gICAgIERvbVV0aWxzLmhpZGUobm1nLnRyZWVJdGVtRG9tTm9kZSk7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBoYW5kbGVCbGFua0lucHV0U2VhcmNoID0gKCkgPT4ge1xyXG4gICAgICAgIC8vIEhhbmRsZSBibGFuayBTZWFyY2ggaGVyZVxyXG4gICAgICAgIGZvciAoY29uc3QgdGkgb2YgdGhpcy50cmVlaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKHRpLmlnbm9yZUZvclNlYXJjaCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZXhwYW5kYWJsZVxyXG4gICAgICAgICAgICBpZiAodGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCB0aS50cmVlSXRlbURvbU5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29sbGFwc2VkXCIpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIERvbVV0aWxzLnNldEFyaWFFeHBhbmRlZCh0aS50cmVlSXRlbURvbU5vZGUsIFwidHJ1ZVwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKHRpLnRyZWVJdGVtRG9tTm9kZSwgXCJmYWxzZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoISB0aS5pc0V4cGFuZGFibGUgKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoICF0aS5pc1Nob3dNb3JlTGluayAmJiAhdGkuaXNTaG93TGVzc0xpbmsgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50ID0gdGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNFeHRyYUZpbHRlciA9IHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJleHRyYS1maWx0ZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRXh0cmFGaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERvbVV0aWxzLnNob3codGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICggdGkuaXNTaG93TW9yZUxpbmsgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBEb21VdGlscy5zaG93KHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICggdGkuaXNTaG93TGVzc0xpbmsgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHMuaGlkZSh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGhhbmRsZU5vdEJsYW5rSW5wdXRTZWFyY2ggPSAodmFsOiBzdHJpbmcpID0+IHtcclxuICAgICAgICBsZXQgZ3JvdXBJdGVtOiBGYWNldFRyZWVJdGVtO1xyXG4gICAgICAgIGxldCBncm91cEl0ZW1NYXRjaGVkOiBib29sZWFuO1xyXG4gICAgICAgIGxldCBjaGlsZEl0ZW1NYXRjaGVkOiBib29sZWFuO1xyXG4gICAgICAgIGZvciAoY29uc3QgdGkgb2YgdGhpcy50cmVlaXRlbXMpIHtcclxuICAgICAgICAgICAgaWYgKHRpLmlnbm9yZUZvclNlYXJjaCkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZXhwYW5kYWJsZVxyXG4gICAgICAgICAgICBpZiAodGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgZ3JvdXAgbGV2ZWwgVmFsdWVzXHJcbiAgICAgICAgICAgICAgICBncm91cEl0ZW0gPSB0aTtcclxuICAgICAgICAgICAgICAgIGdyb3VwSXRlbU1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNoaWxkSXRlbU1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKHRpLnRyZWVJdGVtRG9tTm9kZSwgXCJmYWxzZVwiKTtcclxuICAgICAgICAgICAgICAgIERvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBncm91cCBpcyBtYXRjaGluZ1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWwpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBncm91cEl0ZW1NYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBncm91cCBpcyBtYXRjaGluZyBleHBhbmQgdGhlIGdyb3VwXHJcbiAgICAgICAgICAgIGlmICggZ3JvdXBJdGVtTWF0Y2hlZCB8fCBjaGlsZEl0ZW1NYXRjaGVkICkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJdGVtLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQoZ3JvdXBJdGVtLnRyZWVJdGVtRG9tTm9kZSwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgRG9tVXRpbHMuc2hvdyhncm91cEl0ZW0udHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBGb3IgQ2hpbGQgTGlua3NcclxuICAgICAgICAgICAgaWYgKCAhdGkuaXNFeHBhbmRhYmxlICYmIHRpLmdyb3VwVHJlZWl0ZW0gPT09IGdyb3VwSXRlbSApIHtcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGdyb3VwIG1hdGNoZXMgc2V0IHRoZSB2aXNpYmxpdHkgdG8gdHJ1ZSBleGNlcHQgc2hvdyBtb3JlIG9yIGxlc3MgbGlua3NcclxuICAgICAgICAgICAgICAgIGlmICggZ3JvdXBJdGVtTWF0Y2hlZCApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkuaXNTaG93TGVzc0xpbmsgfHwgdGkuaXNTaG93TW9yZUxpbmsgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlscy5zaG93KHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGdyb3VwIG5vdCBtYXRjaGVkIGNoZWNrIGlmIGNoaWxkIG1hdGNoZXNcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2tpcHAgU2hvdyBtb3JlIG9yIGxlc3MgbGlua3NcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkuaXNTaG93TW9yZUxpbmsgfHwgdGkuaXNTaG93TGVzc0xpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSA+IC0xICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlscy5zaG93KHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGRJdGVtTWF0Y2hlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2ExMXkvRmFjZXRUcmVlLnRzIiwiaW1wb3J0IHsgRmFjZXRDb25maWdTdG9yZSB9IGZyb20gXCIuLy4uL2NvbmZpZy9GYWNldENvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7IERvbVV0aWxzIH0gZnJvbSBcIi4vRG9tVXRpbHNcIjtcclxuaW1wb3J0IHsgRmFjZXRUcmVlIH0gZnJvbSBcIi4vRmFjZXRUcmVlXCI7XHJcbmltcG9ydCB7IEtleUNvZGVzIH0gZnJvbSBcIi4vS2V5Q29kZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGYWNldFRyZWVJdGVtIHtcclxuICAgIHB1YmxpYyB0cmVlOiBGYWNldFRyZWU7XHJcbiAgICBwdWJsaWMgZ3JvdXBUcmVlaXRlbTogRmFjZXRUcmVlSXRlbTtcclxuICAgIHB1YmxpYyBwaW5VblBpbkRvbU5vZGU6IEhUTUxFbGVtZW50O1xyXG4gICAgcHVibGljIHRyZWVJdGVtRG9tTm9kZTogSFRNTEVsZW1lbnQ7XHJcbiAgICBwdWJsaWMgbGFiZWw6IHN0cmluZztcclxuICAgIHB1YmxpYyBzdG9wRGVmYXVsdENsaWNrOiBib29sZWFuO1xyXG4gICAgcHVibGljIGlzRXhwYW5kYWJsZTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc1Zpc2libGU6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaW5Hcm91cDogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpZDogc3RyaW5nO1xyXG4gICAgLy8gcHVibGljIHZhbHVlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgZGF0YVR5cGU6IHN0cmluZztcclxuICAgIHB1YmxpYyBpc1JhbmdlOiBib29sZWFuO1xyXG4gICAgcHVibGljIGlzU2hvd01vcmVMaW5rOiBib29sZWFuO1xyXG4gICAgcHVibGljIGlzU2hvd0xlc3NMaW5rOiBib29sZWFuO1xyXG4gICAgcHVibGljIGlzTGFiZWw6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaWdub3JlRm9yU2VhcmNoOiBib29sZWFuO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5vZGU6IEhUTUxFbGVtZW50LCB0cmVlOiBGYWNldFRyZWUsIGdyb3VwOiBGYWNldFRyZWVJdGVtKSB7XHJcbiAgICAgICAgbm9kZS50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XHJcbiAgICAgICAgdGhpcy5ncm91cFRyZWVpdGVtID0gZ3JvdXA7XHJcbiAgICAgICAgdGhpcy50cmVlSXRlbURvbU5vZGUgPSBub2RlO1xyXG4gICAgICAgIC8vIHRoaXMubGFiZWwgPSBub2RlXHJcbiAgICAgICAgLy8gICAgIC50ZXh0Q29udGVudFxyXG4gICAgICAgIC8vICAgICAudHJpbSgpO1xyXG4gICAgICAgIHRoaXMuc3RvcERlZmF1bHRDbGljayA9IGZhbHNlO1xyXG4gICAgICAgIC8vIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIikpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5sYWJlbCA9IG5vZGVcclxuICAgICAgICAvLyAgICAgICAgIC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpXHJcbiAgICAgICAgLy8gICAgICAgICAudHJpbSgpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICB0aGlzLnBpblVuUGluRG9tTm9kZSA9IHRoaXMudHJlZUl0ZW1Eb21Ob2RlLmZpcnN0RWxlbWVudENoaWxkLnF1ZXJ5U2VsZWN0b3IoXCIucGluLXVucGluLXNlbGVjdG9yXCIpO1xyXG4gICAgICAgIHRoaXMuaWQgPSBub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtYXR0ci1pZFwiKTtcclxuICAgICAgICB0aGlzLmxhYmVsID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF0dHItdmFsdWVcIik7XHJcbiAgICAgICAgdGhpcy5kYXRhVHlwZSA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdHRyLXR5cGVcIik7XHJcbiAgICAgICAgdGhpcy5pc1JhbmdlID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF0dHItaXNSYW5nZVwiKSA9PT0gXCJ0cnVlXCI7XHJcbiAgICAgICAgdGhpcy5pZ25vcmVGb3JTZWFyY2ggPSBub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtYXR0ci1pZ25vcmVGb3JTZWFyY2hcIikgPT09IFwidHJ1ZVwiO1xyXG4gICAgICAgIHRoaXMuaXNTaG93TW9yZUxpbmsgPSBub2RlLmNsYXNzTGlzdC5jb250YWlucyhcInNob3ctbW9yZS1saW5rXCIpO1xyXG4gICAgICAgIHRoaXMuaXNTaG93TGVzc0xpbmsgPSBub2RlLmNsYXNzTGlzdC5jb250YWlucyhcInNob3ctbGVzcy1saW5rXCIpO1xyXG4gICAgICAgIHRoaXMuaXNMYWJlbCA9IG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImxhYmVsXCI7XHJcbiAgICAgICAgdGhpcy5pc0V4cGFuZGFibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaW5Hcm91cCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChncm91cCkge1xyXG4gICAgICAgICAgICB0aGlzLmluR3JvdXAgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZWxlbSA9IG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICAgICAgd2hpbGUgKGVsZW0pIHtcclxuICAgICAgICAgICAgaWYgKGVsZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInVsXCIpIHtcclxuICAgICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcImdyb3VwXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc0V4cGFuZGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxlbSA9IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdCA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnRyZWVJdGVtRG9tTm9kZS50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgIGlmICghdGhpcy50cmVlSXRlbURvbU5vZGUuZ2V0QXR0cmlidXRlKFwicm9sZVwiKSkge1xyXG4gICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAuc2V0QXR0cmlidXRlKFwicm9sZVwiLCBcInRyZWVpdGVtXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlS2V5ZG93bi5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMuaGFuZGxlRm9jdXMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzLmhhbmRsZUJsdXIuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAuZmlyc3RFbGVtZW50Q2hpbGRcclxuICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIHRoaXMuaGFuZGxlTW91c2VPdmVyLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAuZmlyc3RFbGVtZW50Q2hpbGRcclxuICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgdGhpcy5oYW5kbGVNb3VzZU91dC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLmhhbmRsZU1vdXNlT3Zlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCB0aGlzLmhhbmRsZU1vdXNlT3V0LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5waW5VblBpbkRvbU5vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5waW5VblBpbkRvbU5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuaGFuZGxlVW5QaW5DbGljayk7XHJcbiAgICAgICAgICAgIHRoaXMucGluVW5QaW5Eb21Ob2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuaGFuZGxlVW5QaW5LZXl1cCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG5ld05vZGUgPSB0aGlzLnRyZWVJdGVtRG9tTm9kZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgdGhpcy50cmVlSXRlbURvbU5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgdGhpcy50cmVlSXRlbURvbU5vZGUpO1xyXG4gICAgICAgIHRoaXMudHJlZUl0ZW1Eb21Ob2RlID0gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNFeHBhbmRlZCA9ICgpID0+IHtcclxuICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIERvbVV0aWxzLmlzQXJpYUV4cGFuZGVkKHRoaXMudHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGhhbmRsZVVuUGluQ2xpY2sgPSAoZXZlbnQ6IEhUTUxFbGVtZW50RXZlbnRNYXBbXCJjbGlja1wiXSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInVucGluLWljb25cIikpIHtcclxuICAgICAgICAgICAgdGhpcy50cmVlLmhhbmRsZVBpblVucGluKGV2ZW50LCBmYWxzZSwgdGhpcy5pZCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy50cmVlLmhhbmRsZVBpblVucGluKGV2ZW50LCB0cnVlLCB0aGlzLmlkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaGFuZGxlVW5QaW5LZXl1cCA9IChldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtcImtleWRvd25cIl0pID0+IHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZXMuU1BBQ0U6XHJcbiAgICAgICAgICAgIGNhc2UgS2V5Q29kZXMuUkVUVVJOOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ1bnBpbi1pY29uXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmVlLmhhbmRsZVBpblVucGluKGV2ZW50LCBmYWxzZSwgdGhpcy5pZCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZS5oYW5kbGVQaW5VbnBpbihldmVudCwgdHJ1ZSwgdGhpcy5pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBoYW5kbGVLZXlkb3duID0gKGV2ZW50OiBIVE1MRWxlbWVudEV2ZW50TWFwW1wia2V5ZG93blwiXSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRndCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgbGV0IGZsYWcgPSBmYWxzZTtcclxuICAgICAgICBjb25zdCBjaGFyID0gZXZlbnQua2V5O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc1ByaW50YWJsZUNoYXJhY3RlcihzdHIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ci5sZW5ndGggPT09IDEgJiYgc3RyLm1hdGNoKC9cXFMvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gcHJpbnRhYmxlQ2hhcmFjdGVyKGl0ZW06IEZhY2V0VHJlZUl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKGNoYXIgPT09IFwiKlwiKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAuZXhwYW5kQWxsU2libGluZ0l0ZW1zKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNQcmludGFibGVDaGFyYWN0ZXIoY2hhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c0J5Rmlyc3RDaGFyYWN0ZXIoaXRlbSwgY2hhcik7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcERlZmF1bHRDbGljayA9IGZhbHNlO1xyXG5cclxuICAgICAgICBpZiAoZXZlbnQuYWx0S2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQubWV0YUtleSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEtleUNvZGVzLlNQQUNFIHx8IGV2ZW50LmtleUNvZGUgPT09IEtleUNvZGVzLlJFVFVSTikge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3BEZWZhdWx0Q2xpY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzUHJpbnRhYmxlQ2hhcmFjdGVyKGNoYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpbnRhYmxlQ2hhcmFjdGVyKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzLlNQQUNFOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlcy5SRVRVUk46XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbGxhcHNlVHJlZWl0ZW0odGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhwYW5kVHJlZWl0ZW0odGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuaXNTaG93TW9yZUxpbmsgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2hvd01vcmVWYWx1ZXModGhpcy5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuaXNTaG93TGVzc0xpbmsgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2hvd0xlc3NWYWx1ZXModGhpcy5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIHRoaXMuaXNMYWJlbCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oYW5kbGVMYWJlbENoYW5nZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzLlVQOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzVG9QcmV2aW91c0l0ZW0odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlcy5ET1dOOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzVG9OZXh0SXRlbSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzLlJJR0hUOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c1RvTmV4dEl0ZW0odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhwYW5kVHJlZWl0ZW0odGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlcy5MRUZUOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRXhwYW5kYWJsZSAmJiB0aGlzLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbGxhcHNlVHJlZWl0ZW0odGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmluR3JvdXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c1RvUGFyZW50SXRlbSh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXMuSE9NRTpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c1RvRmlyc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlcy5FTkQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Rm9jdXNUb0xhc3RJdGVtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQcmludGFibGVDaGFyYWN0ZXIoY2hhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRhYmxlQ2hhcmFjdGVyKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhbmRsZUNsaWNrID0gKGV2ZW50OiBIVE1MRWxlbWVudEV2ZW50TWFwW1wiY2xpY2tcIl0pID0+IHtcclxuXHJcbiAgICAgICAgLy8gb25seSBwcm9jZXNzIGNsaWNrIGV2ZW50cyB0aGF0IGRpcmVjdGx5IGhhcHBlbmVkIG9uIHRoaXMgdHJlZWl0ZW1cclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSB0aGlzLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAmJiAhIERvbVV0aWxzLmlzU2VsZk9yRGVzY2VuZGFudCh0aGlzLnRyZWVJdGVtRG9tTm9kZS5maXJzdEVsZW1lbnRDaGlsZCwgZXZlbnQudGFyZ2V0KSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNFeHBhbmRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAuY29sbGFwc2VUcmVlaXRlbSh0aGlzLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgIC5leHBhbmRUcmVlaXRlbSh0aGlzLCB0cnVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaXNTaG93TW9yZUxpbmsgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAuc2hvd01vcmVWYWx1ZXModGhpcy5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaXNTaG93TGVzc0xpbmsgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAuc2hvd0xlc3NWYWx1ZXModGhpcy5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIHRoaXMuaXNMYWJlbCApIHtcclxuICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgIC5oYW5kbGVMYWJlbENoYW5nZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhbmRsZUZvY3VzID0gKGV2ZW50OiBIVE1MRWxlbWVudEV2ZW50TWFwW1wiZm9jdXNcIl0pID0+IHtcclxuICAgICAgICBsZXQgbm9kZTogRWxlbWVudCA9IHRoaXMudHJlZUl0ZW1Eb21Ob2RlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICBub2RlID0gbm9kZS5maXJzdEVsZW1lbnRDaGlsZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm9kZVxyXG4gICAgICAgICAgICAuY2xhc3NMaXN0XHJcbiAgICAgICAgICAgIC5hZGQoXCJmb2N1c1wiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFuZGxlQmx1ciA9IGZ1bmN0aW9uKGV2ZW50OiBIVE1MRWxlbWVudEV2ZW50TWFwW1wiYmx1clwiXSkge1xyXG4gICAgICAgIGxldCBub2RlID0gdGhpcy50cmVlSXRlbURvbU5vZGU7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub2RlXHJcbiAgICAgICAgICAgIC5jbGFzc0xpc3RcclxuICAgICAgICAgICAgLnJlbW92ZShcImZvY3VzXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgaGFuZGxlTW91c2VPdmVyID0gKGV2ZW50OiBIVE1MRWxlbWVudEV2ZW50TWFwW1wibW91c2VvdmVyXCJdKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZChcImhvdmVyXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYW5kbGVNb3VzZU91dCA9IChldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtcIm1vdXNlb3V0XCJdKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldCBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhvdmVyXCIpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvYTExeS9GYWNldFRyZWVJdGVtLnRzIiwiZXhwb3J0IGNvbnN0IEtleUNvZGVzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBSRVRVUk46IDEzLFxyXG4gICAgU1BBQ0U6IDMyLFxyXG4gICAgUEFHRVVQOiAzMyxcclxuICAgIFBBR0VET1dOOiAzNCxcclxuICAgIEVORDogMzUsXHJcbiAgICBIT01FOiAzNixcclxuICAgIExFRlQ6IDM3LFxyXG4gICAgVVA6IDM4LFxyXG4gICAgUklHSFQ6IDM5LFxyXG4gICAgRE9XTjogNDAsXHJcbn0pO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2ExMXkvS2V5Q29kZXMudHMiLCJpbXBvcnQge0ZpbHRlckFjdGlvblR5cGV9IGZyb20gXCIuLi9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZVwiO1xuaW1wb3J0IHtJRmFjZXRPcHRpb25zfSBmcm9tIFwiLi9JRmFjZXRPcHRpb25zXCI7XG5cbmV4cG9ydCBjbGFzcyBGYWNldENvbmZpZ1N0b3JlIHtcbiAgICBwcml2YXRlIG9wdGlvbnM6IElGYWNldE9wdGlvbnM7XG4gICAgcHJpdmF0ZSBkZWZhdWx0RmFjZXRPcHRpb25zOiBJRmFjZXRPcHRpb25zID0ge1xuICAgICAgICBhbmltYXRpb25UaW1lOiAyMDAsXG4gICAgICAgIGNvbGxhcHNlZDogZmFsc2UsXG4gICAgICAgIGNvbnRhaW5lckVsZW1lbnQ6IG51bGwsXG4gICAgICAgIGZhY2V0Q29uZmlnOiBbXSxcbiAgICAgICAgaWRQcmVmaXg6IE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDAwMCkudG9TdHJpbmcoKSxcbiAgICAgICAgbm9PZkZhY2V0VG9TaG93OiA1LFxuICAgICAgICAvLyBmYWNldHM6IFtdLFxuICAgICAgICBvbkNvbGxhcHNlVG9nZ2xlOiAoY29sbGFwc2VDb25maWc6IFt7a2V5OiBzdHJpbmcsIGNvbGxhcHNlZDogYm9vbGVhbn1dKSA9PiB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfSxcbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U6IChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYWN0aW9uOiBGaWx0ZXJBY3Rpb25UeXBlKTogdm9pZCA9PiB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfSxcbiAgICAgICAgb25QaW5VbnBpbjogKGtleTogc3RyaW5nLCBwaW46IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9LFxuICAgIH07XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogSUZhY2V0T3B0aW9ucykge1xuICAgICAgICB0aGlzLmV4dGVuZE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBQcm92aWRlIGEgdmFsaWQgY29udGFpbmVyIEVsZW1lbnQgb2JqZWN0XCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgT3B0aW9ucygpOiBJRmFjZXRPcHRpb25zIHtyZXR1cm4gdGhpcy5vcHRpb25zOyB9XG4gICAgcHJpdmF0ZSBleHRlbmRPcHRpb25zID0gKGlucHV0T3B0aW9uczogSUZhY2V0T3B0aW9ucyk6IElGYWNldE9wdGlvbnMgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0RmFjZXRPcHRpb25zLCBpbnB1dE9wdGlvbnMpO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmUudHMiLCJpbXBvcnQgeyBJRmlsdGVyT3B0aW9ucyB9IGZyb20gXCIuLi9jb25maWcvSUZpbHRlck9wdGlvbnNcIjtcclxuaW1wb3J0IHsgSG90S2V5c0ZpbHRlcnNIYW5kbGVyIH0gZnJvbSBcIi4uL2V2ZW50aGFuZGxlcnMvSG90S2V5c0ZpbHRlcnNIYW5kbGVyXCI7XHJcbmltcG9ydCB7IElGYWNldCB9IGZyb20gXCIuLi9tb2RlbHMvSUZhY2V0XCI7XHJcbmltcG9ydCB7IEZpbHRlclRlbXBsYXRlU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9GaWx0ZXJUZW1wbGF0ZVNlcnZpY2VcIjtcclxuaW1wb3J0IHsgSUZpbHRlclRlbXBsYXRlU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9JRmlsdGVyVGVtcGxhdGVTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IEZpbHRlckNvbmZpZ1N0b3JlIH0gZnJvbSBcIi4vLi4vY29uZmlnL0ZpbHRlckNvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7IEZpbHRlckFjdGlvbkhhbmRsZXIsIElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi8uLi9ldmVudGhhbmRsZXJzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsdGVyIHtcclxuICAgIHByaXZhdGUgY29uZmlnU3RvcmU6IEZpbHRlckNvbmZpZ1N0b3JlO1xyXG4gICAgcHJpdmF0ZSB0ZW1wbGF0ZVNlcnZpY2U6IElGaWx0ZXJUZW1wbGF0ZVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGZpbHRlckVsZW1lbnQ6IEpRdWVyeTtcclxuICAgIHByaXZhdGUgaGFuZGxlckNoYWluOiBJRXZlbnRIYW5kbGVyW10gPSBbXTtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElGaWx0ZXJPcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9ICBuZXcgRmlsdGVyQ29uZmlnU3RvcmUob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJFbGVtZW50ID0galF1ZXJ5KG9wdGlvbnMuY29udGFpbmVyRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVNlcnZpY2UgPSBuZXcgRmlsdGVyVGVtcGxhdGVTZXJ2aWNlKHRoaXMuY29uZmlnU3RvcmUpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEZpbHRlckFjdGlvbkhhbmRsZXIodGhpcy5maWx0ZXJFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgSG90S2V5c0ZpbHRlcnNIYW5kbGVyKCkpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLmZvckVhY2goKGhhbmRsZXIpID0+IHtcclxuICAgICAgICAgICAgaGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBiaW5kID0gIChmaWx0ZXJzOiBJRmFjZXRbXSk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBmYWNldFN1YkhlYWRlciA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZmlsdGVycyk7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudC5odG1sKGZhY2V0U3ViSGVhZGVyKTtcclxuICAgICAgICB9LCAxICk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZGVzdHJveSA9ICAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmZpbHRlckVsZW1lbnQgIT09IHVuZGVmaW5lZCApIHtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJFbGVtZW50Lm9mZigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbi5mb3JFYWNoKChoYW5kbGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgaGFuZGxlci5kZXJlZ2lzdGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXIuZGVyZWdpc3RlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9tYWluL0ZpbHRlci50cyIsImltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XHJcbmNsYXNzIEhvdEtleXNGaWx0ZXJzSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG5cclxuICAgIHB1YmxpYyBSZWdpc3RlckRvbUhhbmRsZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgdGhpcy5mb2N1c09uU2VhcmNoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2sgPSAoZXZlbnQ6IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmdcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVSZWdpc3RlciA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9mZihcImtleWRvd25cIiwgdGhpcy5mb2N1c09uU2VhcmNoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZvY3VzT25TZWFyY2ggPSAoZXZlbnQpID0+IHtcclxuICAgICAgICBpZiAoZXZlbnQuYWx0S2V5ICAmJiAgZXZlbnQua2V5ID09PSBcInJcIikge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBqUXVlcnkoXCIuZmFjZXQtc3ViaGVhZGVyIC5yZW1vdmUtYWxsXCIpLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0hvdEtleXNGaWx0ZXJzSGFuZGxlcn07XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9Ib3RLZXlzRmlsdGVyc0hhbmRsZXIudHMiLCJpbXBvcnQgKiBhcyBIYW5kbGViYXJzIGZyb20gXCJoYW5kbGViYXJzXCI7XHJcbmltcG9ydCB7IElGYWNldCB9IGZyb20gXCIuLi9tb2RlbHMvSUZhY2V0XCI7XHJcbmltcG9ydCAqIGFzIEZhY2V0U3ViSGVhZGVyIGZyb20gXCIuLy4uLy4uL2hicy9mYWNldC1hcHBsaWVkLWZpbHRlcnMuaGJzXCI7XHJcbmltcG9ydCB7IEZpbHRlckNvbmZpZ1N0b3JlIH0gZnJvbSBcIi4vLi4vY29uZmlnL0ZpbHRlckNvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7IElGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi9JRmlsdGVyVGVtcGxhdGVTZXJ2aWNlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsdGVyVGVtcGxhdGVTZXJ2aWNlIGltcGxlbWVudHMgSUZpbHRlclRlbXBsYXRlU2VydmljZSB7XHJcbiAgICBwcml2YXRlIHRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbjogYW55O1xyXG4gICAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEhlYWRlcjogYW55O1xyXG4gICAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlcjogYW55O1xyXG4gICAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEJvZHk6IGFueTtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY29uZmlnU3RvcmU6IEZpbHRlckNvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlciA9IEZhY2V0U3ViSGVhZGVyO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGJpbmQoZmlsdGVyczogSUZhY2V0W10pOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IG1lcmdlZEZpbHRlcnMgPSB0aGlzLm1lcmdlV2l0aEZhY2V0Q29uZmlnKGZpbHRlcnMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyKHtmaWx0ZXJzOiBtZXJnZWRGaWx0ZXJzfSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG1lcmdlV2l0aEZhY2V0Q29uZmlnID0gKGZpbHRlcnM6IElGYWNldFtdKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWVyZ2VkQXJyYXk6IGFueVtdID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBmYWNldCBvZiBmaWx0ZXJzKSB7XHJcbiAgICAgICAgICBmb3IgKGNvbnN0IGZhY2V0Q29uZmlnIG9mIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5maWx0ZXJDb25maWcpIHtcclxuICAgICAgICAgICAgaWYgKGZhY2V0Q29uZmlnLmlkID09PSBmYWNldC5pZCkge1xyXG4gICAgICAgICAgICAgIG1lcmdlZEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgY29sbGFwc2VkOiBmYWNldENvbmZpZy5jb2xsYXBzZWQsXHJcbiAgICAgICAgICAgICAgICBmYWNldFJhbmdlczogZmFjZXQuZmFjZXRSYW5nZXMsXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlczogZmFjZXQuZmFjZXRWYWx1ZXMsXHJcbiAgICAgICAgICAgICAgICBpZDogZmFjZXRDb25maWcuaWQsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBmYWNldENvbmZpZy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgb3JkZXI6IGZhY2V0Q29uZmlnLm9yZGVyLFxyXG4gICAgICAgICAgICAgICAgcGlubmVkOiBmYWNldENvbmZpZy5waW5uZWQsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBmYWNldENvbmZpZy50eXBlLFxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtZXJnZWRBcnJheTtcclxuICAgICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvc2VydmljZXMvRmlsdGVyVGVtcGxhdGVTZXJ2aWNlLnRzIiwidmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGFuZGxlYmFyc1wiKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiPHNlY3Rpb24gY2xhc3M9XFxcImNvbnRlbnQgZmFjZXQtc3ViaGVhZGVyIGd1aSBmbHVpZC13IGJhc2ljIGN1cnZlZCBwLTVcXFwiIGFyaWEtbGFiZWw9XFxcIkFwcGxpZWQgRmlsdGVyc1xcXCI+XFxuICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMiBjYXBzXFxcIj5BcHBsaWVkIEZpbHRlcnM8L3NwYW4+XFxuICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBtLWwtNSByZW1vdmUtYWxsXFxcIiBhcmlhLWxhYmVsPVxcXCJDbGVhciBBbGwgRmlsdGVyc1xcXCI+XFxuICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gZ3VpLWljb24tY2FuY2VsXFxcIj48L2k+XFxuICAgICAgICA8c3Bhbj5DbGVhciBBbGw8L3NwYW4+XFxuICAgIDwvYnV0dG9uPlxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG0tbC0xMFxcXCI+XFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmlsdGVycyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgyLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgPC9zcGFuPlxcbjwvc2VjdGlvbj5cXG5cIjtcbn0sXCIyXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG0tci01XFxcIj5cXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGxhcmdlIGxhYmVscyBmYWNldC1sYWJlbHNcXFwiPlxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTFcXFwiPlwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihjb250YWluZXIubGFtYmRhKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiPC9zcGFuPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFJhbmdlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSg1LCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICA8L3NwYW4+XFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICA8YnV0dG9uIGFyaWEtbGFiZWw9XFxcIkNsZWFyIGZpbHRlciBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgb2YgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBtLTAgbS10LTIgbS1yLTIgcC00IGxhYmVsIGN1cnNvci1wb2ludGVyIHN0cmlrZXRocm91Z2gtaG92ZXJcXFwiIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZmlsdGVyLWVudHJ5PVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxGb3JtYXRMYWJlbEJ5VHlwZS50c1wiKSkuY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkZvcm1hdExhYmVsQnlUeXBlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jYW5jZWxcXFwiPjwvaT5cXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XFxuXCI7XG59LFwiNVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICA8YnV0dG9uIGFyaWEtbGFiZWw9XFxcIkNsZWFyIFJhbmdlIGZvciBmaWx0ZXIgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBtLTAgbS10LTIgbS1yLTIgcC00IGxhYmVsIGN1cnNvci1wb2ludGVyIHN0cmlrZXRocm91Z2gtaG92ZXJcXFwiIFxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtZmlsdGVyLWVudHJ5PVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCI6OjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIjo6OnRydWVcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcUmFuZ2UudHNcIikpLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubWluIDogZGVwdGgwKSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubWF4IDogZGVwdGgwKSwoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSkse1wibmFtZVwiOlwiUmFuZ2VcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcbiAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aS1pY29uIGd1aS1pY29uLWNhbmNlbFxcXCI+PC9pPlxcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZpbHRlcnMgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLmxlbmd0aCA6IHN0YWNrMSkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIik7XG59LFwidXNlRGF0YVwiOnRydWUsXCJ1c2VEZXB0aHNcIjp0cnVlfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGJzL2ZhY2V0LWFwcGxpZWQtZmlsdGVycy5oYnNcbi8vIG1vZHVsZSBpZCA9IDMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiaW1wb3J0ICogYXMgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuY29uc3QgcmFuZ2UgPSAobWluLCBtYXgsIHR5cGUpID0+IHtcclxuICAgIGxldCBzdHIgPSBcIlwiO1xyXG4gICAgbGV0IG1pblN0ciA9IG1pbjtcclxuICAgIGxldCBtYXhTdHIgPSBtYXg7XHJcbiAgICBpZiAodHlwZSA9PT0gXCJFZG0uRGF0ZVRpbWVPZmZzZXRcIikge1xyXG4gICAgICAgIGlmIChtaW4gIT09IHVuZGVmaW5lZCAmJiBtaW4gIT09IG51bGwgJiYgbWluICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgIG1pblN0ciA9IG1vbWVudChtaW4pLmZvcm1hdChcIkRELU1NTS1ZWVlZXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobWF4ICE9PSB1bmRlZmluZWQgJiYgbWF4ICE9PSBudWxsICYmIG1heCAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBtYXhTdHIgPSBtb21lbnQobWF4KS5mb3JtYXQoXCJERC1NTU0tWVlZWVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobWluU3RyICE9PSB1bmRlZmluZWQgJiYgbWluU3RyICE9PSBudWxsICYmIG1pblN0ciAhPT0gXCJcIikge1xyXG4gICAgICAgIHN0ciArPSBcIiBmcm9tOiBcIiArIG1pblN0cjtcclxuICAgIH1cclxuICAgIGlmIChtYXhTdHIgIT09IHVuZGVmaW5lZCAmJiBtYXhTdHIgIT09IG51bGwgJiYgbWF4U3RyICE9PSBcIlwiKSB7XHJcbiAgICAgICAgc3RyICs9IFwiIHRvOiBcIiArIG1heFN0cjtcclxuICAgIH1cclxuICAgIHJldHVybiBzdHI7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCByYW5nZTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9oYnMvaGVscGVycy9SYW5nZS50cyIsImltcG9ydCB7IEZpbHRlckFjdGlvblR5cGUgfSBmcm9tIFwiLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGVcIjtcclxuaW1wb3J0IHsgSUZpbHRlck9wdGlvbnMgfSBmcm9tIFwiLi9JRmlsdGVyT3B0aW9uc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpbHRlckNvbmZpZ1N0b3JlIHtcclxuICAgIHByaXZhdGUgb3B0aW9uczogSUZpbHRlck9wdGlvbnM7XHJcbiAgICBwcml2YXRlIGRlZmF1bHRmaWx0ZXJPcHRpb25zOiBJRmlsdGVyT3B0aW9ucyA9IHtcclxuICAgICAgICBhbmltYXRpb25UaW1lOiAyMDAsXHJcbiAgICAgICAgY29udGFpbmVyRWxlbWVudDogbnVsbCxcclxuICAgICAgICBmaWx0ZXJDb25maWc6IFtdLFxyXG4gICAgICAgIG9uQWxsRmlsdGVyUmVtb3ZlOiAoKSA9PiB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvbkZpbHRlckNoYW5nZTogKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nLCBhY3Rpb246IEZpbHRlckFjdGlvblR5cGUpOiB2b2lkID0+IHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElGaWx0ZXJPcHRpb25zKSB7XHJcbiAgICAgICAgdGhpcy5leHRlbmRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIFByb3ZpZGUgYSB2YWxpZCBjb250YWluZXIgRWxlbWVudCBvYmplY3QgZm9yIGZpbHRlcnNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGdldCBPcHRpb25zKCk6IElGaWx0ZXJPcHRpb25zIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBleHRlbmRPcHRpb25zID0gKGlucHV0T3B0aW9uczogSUZpbHRlck9wdGlvbnMpOiBJRmlsdGVyT3B0aW9ucyA9PiB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm9wdGlvbnMgPSBqUXVlcnkuZXh0ZW5kKHt9LCB0aGlzLmRlZmF1bHRmaWx0ZXJPcHRpb25zLCBpbnB1dE9wdGlvbnMpKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2NvbmZpZy9GaWx0ZXJDb25maWdTdG9yZS50cyIsImV4cG9ydCAqIGZyb20gXCIuL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlclwiO1xyXG5leHBvcnQgKiBmcm9tICBcIi4vRmFjZXRBY3Rpb25IYW5kbGVyXCI7XHJcbmV4cG9ydCAqIGZyb20gIFwiLi9GYWNldFNlYXJjaEhhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSAgXCIuL0ZpbHRlckFjdGlvbkhhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSAgXCIuL0hpZGVGYWNldFNlY3Rpb25IYW5kbGVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vUGluVW5waW5FdmVudEhhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vU2hvd01vcmVMZXNzSGFuZGxlclwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi4vZXZlbnRoYW5kbGVycy9GYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXJcIjtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL2luZGV4LnRzIiwiaW1wb3J0IHsgRmFjZXRDb25maWdTdG9yZSB9IGZyb20gXCIuLy4uL2NvbmZpZy9GYWNldENvbmZpZ1N0b3JlXCI7XG5pbXBvcnQgeyBGYWNldENvbnN0YW50cyB9IGZyb20gXCIuLy4uL2NvbmZpZy9GYWNldENvbnN0YW50c1wiO1xuaW1wb3J0IHsgSUZhY2V0VGVtcGxhdGVTZXJ2aWNlIH0gZnJvbSBcIi4vLi4vc2VydmljZXMvSUZhY2V0VGVtcGxhdGVTZXJ2aWNlXCI7XG5pbXBvcnQgeyBFeHBhbmRDb2xsYXBzZU1hbmFnZXIgfSBmcm9tIFwiLi9FeHBhbmRDb2xsYXBzZU1hbmFnZXJcIjtcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XG5pbXBvcnQgeyBTaG93SGlkZSB9IGZyb20gXCIuL1Nob3dIaWRlXCI7XG5cbmV4cG9ydCBjbGFzcyBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnQ6IEpRdWVyeSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlLFxuICAgICAgICAgICAgICAgIHByaXZhdGUgdGVtcGxhdGVTZXJ2aWNlOiBJRmFjZXRUZW1wbGF0ZVNlcnZpY2UpIHt9XG5cbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5leHBhbmQtYWxsXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVWaXNpYmlsaXR5T2ZBbGwoZXZlbnQsIFNob3dIaWRlLlNob3cpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuZXhwYW5kLWFsbFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eU9mQWxsKGV2ZW50LCBTaG93SGlkZS5TaG93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmNvbGxhcHNlLWFsbFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eU9mQWxsKGV2ZW50LCBTaG93SGlkZS5IaWRlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLmNvbGxhcHNlLWFsbFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eU9mQWxsKGV2ZW50LCBTaG93SGlkZS5IaWRlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiW3JvbGU9dHJlZWl0ZW1dXCIsIHRoaXMuaGFuZGxlVmlzaWJpbGl0eU9mT25lKTtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5ZG93blwiLCBcIltyb2xlPXRyZWVpdGVtXVwiLCB0aGlzLmhhbmRsZUtleURvd24pO1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJmb2N1c2luXCIsIFwiW3JvbGU9dHJlZWl0ZW1dXCIsIHRoaXMub25Gb2N1c0luT2ZUcmVlSXRlbSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImZvY3Vzb3V0XCIsIFwiW3JvbGU9dHJlZWl0ZW1dXCIsIHRoaXMub25Gb2N1c091dE9mVHJlZUl0ZW0pO1xuICAgIH1cbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuICAgIHByaXZhdGUgb25Gb2N1c0luT2ZUcmVlSXRlbSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBvVCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBvVC5pcyhcIltyb2xlPXRyZWVpdGVtXVwiKSA/IG9UIDogb1QucGFyZW50cyhcIltyb2xlPXRyZWVpdGVtXVwiKS5maXJzdCgpO1xuICAgICAgICBjb25zdCBsYWJlbElkID0galF1ZXJ5KFwiI1wiICsgdGFyZ2V0LmF0dHIoXCJhcmlhLWxhYmVsbGVkQnlcIikpO1xuICAgICAgICBpZiAoIGxhYmVsSWQgJiYgbGFiZWxJZC5sZW5ndGggKSB7XG4gICAgICAgICAgICBsYWJlbElkLmFkZENsYXNzKFwiZm9jdXNcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoXCJmb2N1c1wiKTtcbiAgICAgICAgfVxuICAgICAgICBldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIHByaXZhdGUgb25Gb2N1c091dE9mVHJlZUl0ZW0gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3Qgb1QgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gb1QuaXMoXCJbcm9sZT10cmVlaXRlbV1cIikgPyBvVCA6IG9ULnBhcmVudHMoXCJbcm9sZT10cmVlaXRlbV1cIikuZmlyc3QoKTtcbiAgICAgICAgY29uc3QgbGFiZWxJZCA9IGpRdWVyeShcIiNcIiArIHRhcmdldC5hdHRyKFwiYXJpYS1sYWJlbGxlZEJ5XCIpKTtcbiAgICAgICAgaWYgKCBsYWJlbElkICYmIGxhYmVsSWQubGVuZ3RoICkge1xuICAgICAgICAgICAgbGFiZWxJZC5yZW1vdmVDbGFzcyhcImZvY3VzXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUNsYXNzKFwiZm9jdXNcIik7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIHByaXZhdGUgaGFuZGxlS2V5RG93biA9IChldmVudCkgPT4ge1xuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmxvZyhcIkhhbmRsaW5nIEtleSBEb3duXCIpO1xuICAgICAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcbiAgICAgICAgaWYgKCBbRmFjZXRDb25zdGFudHMuRW50ZXJLZXlDb2RlLCBGYWNldENvbnN0YW50cy5TcGFjZUtleUNvZGUsXG4gICAgICAgICAgICAgICAgRmFjZXRDb25zdGFudHMuVXBLZXlDb2RlLCBGYWNldENvbnN0YW50cy5Eb3duS2V5Q29kZSBdLmluZGV4T2YoY29kZSkgPD0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoW0ZhY2V0Q29uc3RhbnRzLkVudGVyS2V5Q29kZSwgRmFjZXRDb25zdGFudHMuU3BhY2VLZXlDb2RlXS5pbmRleE9mKGNvZGUpID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eU9mT25lKGV2ZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoW0ZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSwgRmFjZXRDb25zdGFudHMuRG93bktleUNvZGVdLmluZGV4T2YoY29kZSkgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVVcEFuZERvd25PZlRyZWVJdGVtKGV2ZW50KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIGhhbmRsZVVwQW5kRG93bk9mVHJlZUl0ZW0gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XG4gICAgICAgIGlmIChbRmFjZXRDb25zdGFudHMuVXBLZXlDb2RlLCBGYWNldENvbnN0YW50cy5Eb3duS2V5Q29kZV0uaW5kZXhPZihjb2RlKSA8PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1jb25zb2xlXG4gICAgICAgIGNvbnNvbGUubG9nKFwiSGFuZGxpbmcgVXAgYW5kIERvd25cIik7XG4gICAgICAgIGNvbnN0IG9UID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IG9ULmlzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpID8gb1QgOiBvVC5wYXJlbnRzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpLmZpcnN0KCk7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICggRmFjZXRDb25zdGFudHMuVXBLZXlDb2RlID09PSBjb2RlICkge1xuICAgICAgICAgICAgLy8gRmlyc3QgTGV2ZWxcbiAgICAgICAgICAgIGNvbnN0IHByZXZTaWJsaW5nID0gdGFyZ2V0LnByZXZBbGwoXCI6dmlzaWJsZVwiKS5maXJzdCgpO1xuICAgICAgICAgICAgaWYgKCBwcmV2U2libGluZy5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgcHJldlNpYmxpbmcuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwcmV2RGVlcFNpYmxpbmcgPSB0YXJnZXQucGFyZW50KCkucHJldkFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCkuZmluZChcIltyb2xlPXRyZWVpdGVtXVwiKTtcbiAgICAgICAgICAgIGlmICggcHJldkRlZXBTaWJsaW5nLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICBwcmV2RGVlcFNpYmxpbmcuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXJnZXQucGFyZW50cyhcIltyb2xlPXRyZWVpdGVtXVwiKS5lYWNoKChpbmRleDogbnVtYmVyLCBwYXJlbnRHcm91cDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBqUXVlcnkocGFyZW50R3JvdXApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudENoaWxkID0gZ3JvdXAucHJldkFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgaWYgKCBwYXJlbnRDaGlsZC5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudENoaWxkLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIEZhY2V0Q29uc3RhbnRzLkRvd25LZXlDb2RlID09PSBjb2RlICkge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RDaGlsZCA9IHRhcmdldC5maW5kKFwiW3JvbGU9dHJlZWl0ZW1dOnZpc2libGVcIikuZmlyc3QoKTtcbiAgICAgICAgICAgIGlmICggZmlyc3RDaGlsZC5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgZmlyc3RDaGlsZC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZpcnN0IExldmVsXG4gICAgICAgICAgICBjb25zdCBuZXh0U2libGluZyA9IHRhcmdldC5uZXh0QWxsKFwiOnZpc2libGVcIikuZmlyc3QoKTtcbiAgICAgICAgICAgIGlmICggbmV4dFNpYmxpbmcubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgIG5leHRTaWJsaW5nLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gU2Vjb25kIExldmVsXG4gICAgICAgICAgICBjb25zdCBuZXh0RGVlcFNpYmxpbmcgPSB0YXJnZXQucGFyZW50KCkubmV4dEFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCkuZmluZChcIltyb2xlPXRyZWVpdGVtXVwiKTtcbiAgICAgICAgICAgIGlmICggbmV4dERlZXBTaWJsaW5nLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICBuZXh0RGVlcFNpYmxpbmcuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXJnZXQucGFyZW50cyhcIltyb2xlPXRyZWVpdGVtXVwiKS5lYWNoKChpbmRleDogbnVtYmVyLCBwYXJlbnRHcm91cDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBqUXVlcnkocGFyZW50R3JvdXApO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudENoaWxkID0gZ3JvdXAubmV4dEFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgaWYgKCBwYXJlbnRDaGlsZC5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudENoaWxkLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIGhhbmRsZVZpc2liaWxpdHlPZkFsbCA9IChldmVudCwgaGlkZVNob3c6IFNob3dIaWRlKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xuICAgICAgICBpZiAoIGV2ZW50LnR5cGUgIT09IFwiY2xpY2tcIiAmJiAoZXZlbnQudHlwZSA9PT0gXCJrZXl1cFwiICYmIGNvZGUgIT09IEZhY2V0Q29uc3RhbnRzLkVudGVyS2V5Q29kZVxuICAgICAgICAgICAgICYmIGNvZGUgIT09IEZhY2V0Q29uc3RhbnRzLlNwYWNlS2V5Q29kZSkgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdmFsdWUgPSBoaWRlU2hvdyA9PT0gU2hvd0hpZGUuU2hvdyA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5lbGVtZW50LmZpbmQoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIikuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IGpRdWVyeShlbGVtZW50KS5wYXJlbnRzKFwiLmZhY2V0LWl0ZW1cIik7XG4gICAgICAgICAgICBjb25zdCBuYW1lID0gcGFyZW50LmF0dHIoXCJkYXRhLWF0dHItbmFtZVwiKTtcbiAgICAgICAgICAgIGlmICggdmFsdWUgKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKFwiY29sbGFwc2VkXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihqUXVlcnkoZWxlbWVudCksIGhpZGVTaG93LCBuYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuZmFjZXRDb25maWc7XG4gICAgICAgIGNvbnN0IHB1Ymxpc2g6IEFycmF5PHtrZXk6IHN0cmluZywgY29sbGFwc2VkOiBib29sZWFufT4gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBmYWNldCBvZiBkYXRhKSB7XG4gICAgICAgICAgICBmYWNldC5jb2xsYXBzZWQgPSB2YWx1ZTtcbiAgICAgICAgICAgIHB1Ymxpc2gucHVzaCh7a2V5OiBmYWNldC5pZCwgY29sbGFwc2VkOiBmYWNldC5jb2xsYXBzZWR9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25Db2xsYXBzZVRvZ2dsZShwdWJsaXNoKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIHByaXZhdGUgaGFuZGxlVmlzaWJpbGl0eU9mT25lID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG9UID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IG9ULmlzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpID8gb1QgOiBvVC5wYXJlbnRzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpLmZpcnN0KCk7XG4gICAgICAgIGNvbnN0IGlzQ29sbGFwc2libGVOb2RlID0gdGFyZ2V0Lmhhc0NsYXNzKFwiY29sbGFwc2libGVcIikgJiYgb1QucGFyZW50cyhcIi5mYWNldC1pdGVtLWhlYWRlclwiKS5sZW5ndGg7XG4gICAgICAgIGlmICggIWlzQ29sbGFwc2libGVOb2RlICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0YXJnZXQuYXR0cihcImRhdGEtYXR0ci1uYW1lXCIpO1xuICAgICAgICBjb25zdCBpZCA9IHRhcmdldC5hdHRyKFwiZGF0YS1hdHRyLWlkXCIpO1xuICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IHRhcmdldC5oYXNDbGFzcyhcImNvbGxhcHNlZFwiKTtcbiAgICAgICAgaWYgKCAhaXNDb2xsYXBzZWQgKSB7XG4gICAgICAgICAgICB0YXJnZXQuYWRkQ2xhc3MoXCJjb2xsYXBzZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlQ2xhc3MoXCJjb2xsYXBzZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZztcbiAgICAgICAgY29uc3QgcHVibGlzaDogQXJyYXk8e2tleTogc3RyaW5nLCBjb2xsYXBzZWQ6IGJvb2xlYW59PiA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGZhY2V0IG9mIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChmYWNldC5pZCA9PT0gaWQgKSB7XG4gICAgICAgICAgICAgICAgZmFjZXQuY29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xuICAgICAgICAgICAgICAgIHB1Ymxpc2gucHVzaCh7a2V5OiBmYWNldC5pZCwgY29sbGFwc2VkOiBmYWNldC5jb2xsYXBzZWR9KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25Db2xsYXBzZVRvZ2dsZShwdWJsaXNoKTtcbiAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIodGFyZ2V0LCBTaG93SGlkZS5Ub2dnbGUsIG5hbWUpO1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyLnRzIiwiaW1wb3J0IHsgRmFjZXRDb25maWdTdG9yZSB9IGZyb20gXCIuLi9jb25maWcvRmFjZXRDb25maWdTdG9yZVwiO1xuaW1wb3J0IHsgRmlsdGVyQWN0aW9uVHlwZSB9IGZyb20gXCIuLi9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZVwiO1xuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcblxuZXhwb3J0IGNsYXNzIEZhY2V0QWN0aW9uSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBKUXVlcnksIHByaXZhdGUgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmUpIHt9XG5cbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjaGFuZ2VcIiwgXCIuZmFjZXQtYm9keSAuZmFjZXQtaXRlbS1kZXNjcmlwdGlvbiAuZmFjZXQtdmFsdWUtY2hlY2tib3hcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICBjb25zdCB2YWxTdHIgPSBlbGVtZW50LnZhbCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbFN0ci5zcGxpdChcIjo6OlwiKTtcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrZWQgPSBlbGVtZW50LmlzKFwiOmNoZWNrZWRcIik7XG4gICAgICAgICAgICBjb25zdCBhY3Rpb24gPSBjaGVja2VkID8gRmlsdGVyQWN0aW9uVHlwZS5BZGQgOiBGaWx0ZXJBY3Rpb25UeXBlLk1pbnVzO1xuICAgICAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uRmlsdGVyQ2hhbmdlKHZhbHVlWzBdLCB2YWx1ZVsxXSwgYWN0aW9uLCB2YWx1ZVsyXSwgZmFsc2UpO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxuXG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmFjZXRBY3Rpb25IYW5kbGVyLnRzIiwiaW1wb3J0IHtkZWJvdW5jZX0gZnJvbSBcInRocm90dGxlLWRlYm91bmNlXCI7XHJcbmltcG9ydCB7RmFjZXRDb25maWdTdG9yZX0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcclxuaW1wb3J0IHtFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXJ9IGZyb20gXCIuL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlclwiO1xyXG5pbXBvcnQge0V4cGFuZENvbGxhcHNlTWFuYWdlcn0gZnJvbSBcIi4vRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXCI7XHJcbmltcG9ydCB7SUV2ZW50SGFuZGxlcn0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQge1Nob3dIaWRlfSBmcm9tIFwiLi9TaG93SGlkZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZhY2V0U2VhcmNoSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBKUXVlcnksIHByaXZhdGUgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmUpIHt9XHJcblxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImtleXVwXCIsIFwiLmZpbHRlci1zZWFyY2gtaW5wdXRcIiwgZGVib3VuY2UoMjUwLCB0aGlzLmhhbmRsZVNlYXJjaCkpO1xyXG5cclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBoYW5kbGVTZWFyY2ggPSAoZXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5hZGRDbGFzcyhcImxvYWRpbmdcIik7XHJcbiAgICAgICAgZWxlbWVudC5uZXh0KCkuc2hvdygpO1xyXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAudmFsKClcclxuICAgICAgICAgICAgICAgIC50b1N0cmluZygpXHJcbiAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmZhY2V0LWxpc3QgLmZhY2V0LWl0ZW1cIilcclxuICAgICAgICAgICAgICAgIC5lYWNoKChpOiBudW1iZXIsIGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWNldEl0ZW0gPSBqUXVlcnkoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9IGZhY2V0SXRlbS5hdHRyKFwiZGF0YS1hdHRyLW5hbWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZhY2V0TmFtZU1hdGNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGlucHV0VmFsdWVCbGFuayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHZhbHVlIGlzIGVtcHR5XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbCA9PT0gbnVsbCB8fCB2YWwudHJpbSgpID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWVCbGFuayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbXBhcmUgdmFsdWUgd2l0aCBmYWNldCBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbnB1dFZhbHVlQmxhbmsgJiYgZmFjZXRJdGVtLmF0dHIoXCJkYXRhLWF0dHItbmFtZVwiKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXROYW1lTWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LW1vcmUtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVhY2goKGluZGV4OiBudW1iZXIsIHNod01vcmVFbGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpRdWVyeShzaHdNb3JlRWxlbSkuaGFzQ2xhc3MoXCJndWktaGlkZGVuXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShzaHdNb3JlRWxlbSkuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShzaHdNb3JlRWxlbSkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LWxlc3MtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVhY2goKGluZGV4OiBudW1iZXIsIHNob3dMZXNzTGluaykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqUXVlcnkoc2hvd0xlc3NMaW5rKS5oYXNDbGFzcyhcImd1aS1oaWRkZW5cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHNob3dMZXNzTGluaykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShzaG93TGVzc0xpbmspLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LW1vcmUtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnNob3ctbGVzcy1saW5rXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlIHZhbHVlcyBhZ2FpbnN0IGNoaWxkIHZhbHVlc1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmYWNldENoaWxkTWF0Y2g6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCJsYWJlbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWFjaCgoajogbnVtYmVyLCBsYWJlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWxFbGVtID0galF1ZXJ5KGxhYmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlQmxhbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhcmVudChcIi5leHRyYS1maWx0ZXJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZXROYW1lTWF0Y2ggfHwgaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbFZhbHVlID0gbGFiZWxFbGVtLmF0dHIoXCJkYXRhLWF0dHItdmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWxWYWx1ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW0uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldENoaWxkTWF0Y2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2hvdyBoaWRlIEZhY2V0IEl0ZW0gaXRzZWxmXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyRWxtZW50ID0gZmFjZXRJdGVtLmZpbmQoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sbGFwc2VkID0gZmFjZXRJdGVtLmhhc0NsYXNzKFwiY29sbGFwc2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmYWNldE5hbWVNYXRjaCB8fCBmYWNldENoaWxkTWF0Y2ggfHwgaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0SXRlbS5mYWRlSW4odGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0SXRlbS5mYWRlT3V0KHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhwYW5kIENvbGxhcHNlIEZhY2V0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbGxhcHNlZCB8fCBmYWNldE5hbWVNYXRjaCB8fCBmYWNldENoaWxkTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoaGVhZGVyRWxtZW50LCBTaG93SGlkZS5TaG93LCBuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihoZWFkZXJFbG1lbnQsIFNob3dIaWRlLkhpZGUsIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLnJlbW92ZUNsYXNzKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgZWxlbWVudC5uZXh0KCkuaGlkZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIDEpO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9GYWNldFNlYXJjaEhhbmRsZXIudHMiLCJ2YXIgdGhyb3R0bGUgPSByZXF1aXJlKCcuL3Rocm90dGxlJyk7XG52YXIgZGVib3VuY2UgPSByZXF1aXJlKCcuL2RlYm91bmNlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHR0aHJvdHRsZTogdGhyb3R0bGUsXG5cdGRlYm91bmNlOiBkZWJvdW5jZVxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3Rocm90dGxlLWRlYm91bmNlL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA0MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmaW5lZCAqL1xuXG52YXIgdGhyb3R0bGUgPSByZXF1aXJlKCcuL3Rocm90dGxlJyk7XG5cbi8qKlxuICogRGVib3VuY2UgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24uIERlYm91bmNpbmcsIHVubGlrZSB0aHJvdHRsaW5nLFxuICogZ3VhcmFudGVlcyB0aGF0IGEgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBhIHNpbmdsZSB0aW1lLCBlaXRoZXIgYXQgdGhlXG4gKiB2ZXJ5IGJlZ2lubmluZyBvZiBhIHNlcmllcyBvZiBjYWxscywgb3IgYXQgdGhlIHZlcnkgZW5kLlxuICpcbiAqIEBwYXJhbSAge051bWJlcn0gICBkZWxheSAgICAgICAgIEEgemVyby1vci1ncmVhdGVyIGRlbGF5IGluIG1pbGxpc2Vjb25kcy4gRm9yIGV2ZW50IGNhbGxiYWNrcywgdmFsdWVzIGFyb3VuZCAxMDAgb3IgMjUwIChvciBldmVuIGhpZ2hlcikgYXJlIG1vc3QgdXNlZnVsLlxuICogQHBhcmFtICB7Qm9vbGVhbn0gIGF0QmVnaW4gICAgICAgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBhdEJlZ2luIGlzIGZhbHNlIG9yIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgYGRlbGF5YCBtaWxsaXNlY29uZHNcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIHRoZSBsYXN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLiBJZiBhdEJlZ2luIGlzIHRydWUsIGNhbGxiYWNrIHdpbGwgYmUgZXhlY3V0ZWQgb25seSBhdCB0aGUgZmlyc3QgZGVib3VuY2VkLWZ1bmN0aW9uIGNhbGwuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW4gY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcywgdGhlIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpLlxuICogQHBhcmFtICB7RnVuY3Rpb259IGNhbGxiYWNrICAgICAgQSBmdW5jdGlvbiB0byBiZSBleGVjdXRlZCBhZnRlciBkZWxheSBtaWxsaXNlY29uZHMuIFRoZSBgdGhpc2AgY29udGV4dCBhbmQgYWxsIGFyZ3VtZW50cyBhcmUgcGFzc2VkIHRocm91Z2gsIGFzLWlzLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYGNhbGxiYWNrYCB3aGVuIHRoZSBkZWJvdW5jZWQtZnVuY3Rpb24gaXMgZXhlY3V0ZWQuXG4gKlxuICogQHJldHVybiB7RnVuY3Rpb259IEEgbmV3LCBkZWJvdW5jZWQgZnVuY3Rpb24uXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKCBkZWxheSwgYXRCZWdpbiwgY2FsbGJhY2sgKSB7XG5cdHJldHVybiBjYWxsYmFjayA9PT0gdW5kZWZpbmVkID8gdGhyb3R0bGUoZGVsYXksIGF0QmVnaW4sIGZhbHNlKSA6IHRocm90dGxlKGRlbGF5LCBjYWxsYmFjaywgYXRCZWdpbiAhPT0gZmFsc2UpO1xufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3Rocm90dGxlLWRlYm91bmNlL2RlYm91bmNlLmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImltcG9ydCB7IEZpbHRlckNvbmZpZ1N0b3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9GaWx0ZXJDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBGaWx0ZXJBY3Rpb25UeXBlIH0gZnJvbSBcIi4uL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlXCI7XHJcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsdGVyQWN0aW9uSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZmlsdGVyRWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGaWx0ZXJDb25maWdTdG9yZSkge31cclxuXHJcbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmZhY2V0LXN1YmhlYWRlciAuZmFjZXQtbGFiZWxzIC5sYWJlbFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmlzKFwiLmxhYmVsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRzKFwiLmxhYmVsXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbFN0ciA9IGVsZW1lbnQuYXR0cihcImRhdGEtZmlsdGVyLWVudHJ5XCIpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsU3RyLnNwbGl0KFwiOjo6XCIpO1xyXG4gICAgICAgICAgICBsZXQgaXNSYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSA0ICkge1xyXG4gICAgICAgICAgICAgICAgaXNSYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uRmlsdGVyQ2hhbmdlKHZhbHVlWzBdLCB2YWx1ZVsxXSwgRmlsdGVyQWN0aW9uVHlwZS5NaW51cywgdmFsdWVbMl0sIGlzUmFuZ2UpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmZpbHRlckVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5mYWNldC1zdWJoZWFkZXIgLnJlbW92ZS1hbGxcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkFsbEZpbHRlclJlbW92ZSgpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmlsdGVyQWN0aW9uSGFuZGxlci50cyIsImltcG9ydCB7IEZhY2V0Q29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcclxuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBKUXVlcnksIHByaXZhdGUgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmUpIHt9XHJcblxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlciA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5oaWRlLWZhY2V0XCIsIHRoaXMuaGlkZUZhY2V0KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5zaG93LWZhY2V0XCIsIHRoaXMuc2hvd0ZhY2V0KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5oaWRlLWZhY2V0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKCBjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMiApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmhpZGVGYWNldChldmVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuc2hvdy1mYWNldFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmICggY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zaG93RmFjZXQoZXZlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayhldmVudDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaGlkZUZhY2V0ID0gKGV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgJChcIi5mYWNldC1ib2R5XCIpLmhpZGUoKTtcclxuICAgICAgICAkKFwiLmZhY2V0LWNvbGxhcHNlZC1ib2R5XCIpLmZhZGVJbih0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbGxhcHNlZCA9IHRydWU7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2hvd0ZhY2V0ID0gKGV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgJChcIi5mYWNldC1jb2xsYXBzZWQtYm9keVwiKS5oaWRlKCk7XHJcbiAgICAgICAgJChcIi5mYWNldC1ib2R5XCIpLmZhZGVJbih0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbGxhcHNlZCA9IGZhbHNlO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9IaWRlRmFjZXRTZWN0aW9uSGFuZGxlci50cyIsImltcG9ydCB7IEZhY2V0Q29uZmlnU3RvcmUgfSBmcm9tIFwiLi8uLi9jb25maWcvRmFjZXRDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBJRmFjZXRUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi8uLi9zZXJ2aWNlcy9JRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcclxuaW1wb3J0IHsgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyIH0gZnJvbSBcIi4vRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyXCI7XHJcbmltcG9ydCB7IEV4cGFuZENvbGxhcHNlTWFuYWdlciB9IGZyb20gXCIuL0V4cGFuZENvbGxhcHNlTWFuYWdlclwiO1xyXG5pbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBTaG93SGlkZSB9IGZyb20gXCIuL1Nob3dIaWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGluVW5waW5FdmVudEhhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlLFxyXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0ZW1wbGF0ZVNlcnZpY2U6IElGYWNldFRlbXBsYXRlU2VydmljZSkge31cclxuXHJcbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnBpbi1pY29uXCIsIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi51bnBpbi1pY29uXCIsIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIucGluLWljb25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoIGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUGluVW5waW4oZXZlbnQsIHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLnVucGluLWljb25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoIGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUGluVW5waW4oZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBoYW5kbGVQaW5VbnBpbihldmVudDogYW55LCBwaW46IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgY29uc3QgaWQgPSBlbGVtZW50LmF0dHIoXCJkYXRhLWF0dHItaWRcIik7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZztcclxuICAgICAgICBmb3IgKGNvbnN0IGZhY2V0IG9mIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCBmYWNldC5pZCA9PT0gaWQgKSB7XHJcbiAgICAgICAgICAgICAgICBmYWNldC5waW5uZWQgPSBwaW47XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50Lmh0bWwodGhpcy50ZW1wbGF0ZVNlcnZpY2UuYmluZCh0aGlzLnRlbXBsYXRlU2VydmljZS5nZXREYXRhKCkpKTtcclxuICAgICAgICB9LCAxKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25QaW5VbnBpbihpZCwgcGluKTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvUGluVW5waW5FdmVudEhhbmRsZXIudHMiLCJpbXBvcnQge0ZhY2V0Q29uZmlnU3RvcmV9IGZyb20gXCIuLy4uL2NvbmZpZy9GYWNldENvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7SUZhY2V0VGVtcGxhdGVTZXJ2aWNlfSBmcm9tIFwiLi8uLi9zZXJ2aWNlcy9JRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcclxuaW1wb3J0IHtFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXJ9IGZyb20gXCIuL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlclwiO1xyXG5pbXBvcnQge0V4cGFuZENvbGxhcHNlTWFuYWdlcn0gZnJvbSBcIi4vRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXCI7XHJcbmltcG9ydCB7SUV2ZW50SGFuZGxlcn0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQge1Nob3dIaWRlfSBmcm9tIFwiLi9TaG93SGlkZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNob3dNb3JlTGVzc0hhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlKSB7fVxyXG5cclxuICAgIHB1YmxpYyBSZWdpc3RlckRvbUhhbmRsZXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJjbGlja1wiLCBcIi5zaG93LW1vcmUtbGlua1wiLCAoZXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01vcmVMZXNzRmlsdGVycyhldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgXCIuc2hvdy1sZXNzLWxpbmtcIiwgKGV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNb3JlTGVzc0ZpbHRlcnMoZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJrZXl1cFwiLCBcIi5zaG93LW1vcmUtbGlua1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TW9yZUxlc3NGaWx0ZXJzKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJrZXl1cFwiLCBcIi5zaG93LWxlc3MtbGlua1wiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TW9yZUxlc3NGaWx0ZXJzKGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayhldmVudDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9XHJcbiAgICBwcml2YXRlIHNob3dNb3JlTGVzc0ZpbHRlcnMoZXZlbnQ6IGFueSwgc2hvd01vcmU6IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgaWYgKHNob3dNb3JlKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC5wYXJlbnRzKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIilcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmV4dHJhLWZpbHRlclwiKVxyXG4gICAgICAgICAgICAgICAgLmZhZGVJbih0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkubmV4dCgpLnNob3coKS5maW5kKFwiYVwiKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgLnBhcmVudHMoXCIuZmFjZXQtaXRlbS1kZXNjcmlwdGlvblwiKVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAuZmFkZU91dCh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkucHJldigpLnNob3coKS5maW5kKFwiYVwiKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9TaG93TW9yZUxlc3NIYW5kbGVyLnRzIiwiaW1wb3J0IHsgRmFjZXRDb25zdGFudHMgfSBmcm9tIFwiLi8uLi9jb25maWcvRmFjZXRDb25zdGFudHNcIjtcclxuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gXCIuL2luZGV4XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyIGltcGxlbWVudHMgSUV2ZW50SGFuZGxlciB7XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBKUXVlcnkpIHt9XHJcblxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXlkb3duXCIsIFwiLmFycm93a2V5cy1hd2FyZVwiLCB0aGlzLmhhbmRsZUFycm93S2V5cyk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBkZVJlZ2lzdGVyID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vZmYoXCJrZXlkb3duXCIsIFwiLmFycm93a2V5cy1hd2FyZVwiLCB0aGlzLmhhbmRsZUFycm93S2V5cyk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGhhbmRsZUFycm93S2V5cyA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC53aGljaDtcclxuICAgICAgICBpZiAoIGNvZGUgIT09IEZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSAmJiBjb2RlICE9PSBGYWNldENvbnN0YW50cy5Eb3duS2V5Q29kZSApIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIGlmICggIWVsZW1lbnQuaXMoXCIuYXJyb3drZXlzLWF3YXJlXCIpKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZm9jdXNhYmxlO1xyXG4gICAgICAgIGNvbnN0IGRpdiA9IGVsZW1lbnQucGFyZW50KCk7XHJcbiAgICAgICAgaWYgKCBjb2RlID09PSBGYWNldENvbnN0YW50cy5VcEtleUNvZGUgKSB7XHJcbiAgICAgICAgICAgIGZvY3VzYWJsZSA9IGRpdi5wcmV2KCkuZmluZChcIi5hcnJvd2tleXMtYXdhcmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggY29kZSA9PT0gRmFjZXRDb25zdGFudHMuRG93bktleUNvZGUgKSB7XHJcbiAgICAgICAgICAgIGZvY3VzYWJsZSA9IGRpdi5uZXh0KCkuZmluZChcIi5hcnJvd2tleXMtYXdhcmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggZm9jdXNhYmxlICYmIGZvY3VzYWJsZS5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnZpZXcuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGZvY3VzYWJsZS5mb2N1cygpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNob3dNb3JlID0gZGl2Lm5leHQoKS5maW5kKFwic2hvdy1tb3JlLWxpbmtcIikgfHwgZGl2Lm5leHQoKS5maW5kKFwic2hvdy1sZXNzLWxpbmtcIik7XHJcbiAgICAgICAgICAgIGlmICggc2hvd01vcmUgJiYgc2hvd01vcmUubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgc2hvd01vcmUuZm9jdXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==