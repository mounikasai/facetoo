!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("handlebars/runtime")):"function"==typeof define&&define.amd?define(["handlebars.runtime"],n):"object"==typeof exports?exports.Facetoo=n(require("handlebars/runtime")):e.Facetoo=n(e.Handlebars)}("undefined"!=typeof self?self:this,function(e){return function(e){function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var t={};return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=11)}([function(n,t){n.exports=e},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return e?"checked":""};n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return e?"disabled":""};n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide",e[e.Toggle=2]="Toggle"}(n.ShowHide||(n.ShowHide={}))},function(e,n,t){var i=t(0);e.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(e,n,i,a,o){var l;return'<div class="gui of-hidden min-w-50 w-auto fluid-h flex column container">\n    <div class="gui h-auto flex m-t-10">\n        <button class="gui cursor-pointer gui-subheading-1 m-0 expand-all">\n            <i class="gui-icon special rotate-right gui-icon-chevdouble"></i>\n            Expand All\n        </button>\n        <div class="gui m-r-5 m-l-5"></div>\n        <button class="gui cursor-pointer gui-subheading-1 m-0 collapse-all">\n            <i class="gui-icon special rotate-right gui-icon-chevdouble"></i>\n            Collapse All\n        </button>\n    </div>\n    <div class="gui input fluid-w p-t-5 p-r-5 p-b-5 p-l-1 m-t-10">\n        <input class="gui input p-5 h-30 fluid-w gui-subheading-2 filter-search-input" placeholder="Search Filters" />\n    </div>\n    <div class="gui fluid-h facet-list of-auto m-t-10">\n        '+(null!=(l=e.invokePartial(t(16),n,{name:"facet-pinned",data:o,helpers:i,partials:a,decorators:e.decorators}))?l:"")+" "+(null!=(l=e.invokePartial(t(17),n,{name:"facet-unpinned",data:o,helpers:i,partials:a,decorators:e.decorators}))?l:"")+"\n    </div>\n\n</div>"},usePartial:!0,useData:!0})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){var n=0;if(void 0!==e&&null!==e&&e.length>0)for(var t=0,i=e;t<i.length;t++){var a=i[t];a.selected&&n++}return 0===n?"":'<span class="gui-body-2">('+n+")</span>"};n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,n,t){return e.length>n?'<a tabindex="0" class="gui simple show-more-link cursor-pointer p-0 m-t-3">Show '+(e.length-n)+' More </a><a tabindex="0" class="gui simple show-less-link cursor-pointer gui-hidden p-0 m-t-3">Show Less</a>':""};n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e,n){return void 0!==e&&e+1>n?"gui-hidden extra-filter":""};n.default=i},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(21)),i(t(22)),i(t(23)),i(t(24)),i(t(25)),i(t(26)),i(t(27))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(3),a=function(){function e(){}return e.ControlVisibilityOfFilter=function(e,n){var t=e.children("span").children(".expansion-icon"),a=t.hasClass("gui-icon-chevron-up");i.ShowHide.Toggle!==n&&(a&&n===i.ShowHide.Show||!a&&n===i.ShowHide.Hide)||(a?(e.parents(".facet-item").find(".facet-item-description").slideUp(200),t.removeClass("gui-icon-chevron-up"),t.addClass("gui-icon-chevron-down")):(e.parents(".facet-item").find(".facet-item-description").slideDown(200),t.removeClass("gui-icon-chevron-down"),t.addClass("gui-icon-chevron-up")))},e}();n.ExpandCollapseManager=a},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});!function(e){e.Add="Add",e.Minus="Minus"}(n.FilterActionType||(n.FilterActionType={}))},function(e,n,t){"use strict";function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(12)),i(t(28))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(13),a=t(14),o=t(20),l=t(8),r=function(){function e(e){var n=this;this.handlerChain=[],this.bind=function(e){n.templateService.setData(e);var t=n.templateService.bind(e);n.facetElement.html(t)},this.hide=function(){n.facetElement.find(".facet-body").fadeOut(n.configStore.Options.animationTime),n.configStore.Options.collapsed=!0},this.show=function(){n.facetElement.find(".facet-body").fadeIn(n.configStore.Options.animationTime),n.configStore.Options.collapsed=!1},this.destroy=function(){void 0!==n.facetElement&&n.facetElement.off(),n.handlerChain.forEach(function(e){void 0!==e&&void 0!==e.deregister&&e.deregister()})},this.configStore=new o.FacetConfigStore(e),this.facetElement=jQuery(e.containerElement),this.templateService=new a.FacetTemplateService(this.configStore),this.handlerChain.push(new l.ExpandCollapseFacetsHandler(this.facetElement,this.configStore)),this.handlerChain.push(new l.FacetActionHandler(this.facetElement,this.configStore)),this.handlerChain.push(new l.FacetSearchHandler(this.facetElement,this.configStore)),this.handlerChain.push(new l.HideFacetSectionHandler(this.facetElement,this.configStore)),this.handlerChain.push(new i.HotKeysFacetHandler),this.handlerChain.push(new l.PinUnpinEventHandler(this.facetElement,this.configStore,this.templateService)),this.handlerChain.push(new l.ShowMoreLessHandler(this.facetElement,this.configStore)),this.handlerChain.forEach(function(e){e.RegisterDomHandler()})}return e}();n.Facet=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.RegisterDomHandler=function(){jQuery(document).on("keydown",e.focusOnSearch)},this.onResize=function(){throw new Error("Method not implemented.")},this.onDocumentClick=function(e){},this.deRegister=function(){jQuery(document).off("keydown",e.focusOnSearch)},this.focusOnSearch=function(e){e.altKey&&"f"===e.key&&(e.preventDefault(),jQuery(".filter-search-input").focus())}}return e}();n.HotKeysFacetHandler=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(15),a=function(){function e(e){var n=this;this.configStore=e,this.setData=function(e){n.data=e},this.getData=function(){return n.data},this.compareFn=function(e,n){return void 0===e.order?-1:void 0===n.order?1:e.order-n.order},this.tempateFunctionForFacetMain=i}return e.prototype.bind=function(e){var n=(this.configStore.Options.collapsed,e.filter(function(e){return void 0!==e.pinned&&e.pinned})),t=e.filter(function(e){return void 0===e.pinned||!e.pinned});n.sort(this.compareFn),t.sort(this.compareFn);var i=this.configStore.Options.noOfFacetToShow;return this.tempateFunctionForFacetMain({favorites:n,nonFavorites:t,noOfFacetToShow:i})},e}();n.FacetTemplateService=a},function(e,n,t){var i=t(0);e.exports=(i.default||i).template({1:function(e,n,i,a,o){var l;return'    <div class="facet-body gui fluid-h of-hidden gui-hidden">'+(null!=(l=e.invokePartial(t(4),n,{name:"facet-body",data:o,helpers:i,partials:a,decorators:e.decorators}))?l:"")+"</div>\n"},3:function(e,n,i,a,o){var l;return'    <div class="facet-body gui fluid-h of-hidden">'+(null!=(l=e.invokePartial(t(4),n,{name:"facet-body",data:o,helpers:i,partials:a,decorators:e.decorators}))?l:"")+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,n,t,i,a){var o;return'<div class="gui fluid-h ">\n'+(null!=(o=t.if.call(null!=n?n:e.nullContext||{},null!=n?n.collapsed:n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.program(3,a,0),data:a}))?o:"")+"</div>"},usePartial:!0,useData:!0})},function(e,n,t){function i(e){return e&&(e.__esModule?e.default:e)}var a=t(0);e.exports=(a.default||a).template({1:function(e,n,t,i,a,o,l){var r;return" "+(null!=(r=t.each.call(null!=n?n:e.nullContext||{},null!=n?n.favorites:n,{name:"each",hash:{},fn:e.program(2,a,0,o,l),inverse:e.noop,data:a}))?r:"")},2:function(e,n,a,o,l,r,s){var u,c=e.lambda,d=e.escapeExpression,f=null!=n?n:e.nullContext||{};return'\r\n<div class="item facet-item collapsed gui m-t-6" data-attr-name="'+d(c(null!=n?n.name:n,n))+'">\r\n    <div class="content">\r\n        <div class="facet-item-header fluid gui item flex jc-sb">\r\n            <span class="gui gui-subheading-1 primary m-0 expansion-icon cursor-pointer" tabindex="0">\r\n                '+d(c(null!=n?n.name:n,n))+" "+(null!=(u=i(t(5)).call(f,null!=n?n.facetValues:n,{name:"SelectedFiltersCount",hash:{},data:l}))?u:"")+'\r\n            </span>\r\n            <span>\r\n                <i data-attr-id="'+d(c(null!=n?n.id:n,n))+'" class="gui gui-icon selectable primary gui-icon-unpin m-t-5 m-r-10 unpin-icon cursor-pointer" tabindex="0"></i>\r\n                <i class="gui gui-icon selectable gui-icon-chevron-up primary expansion-icon m-t-5 m-r-10 cursor-pointer" tabindex="0"></i>\r\n            </span>\r\n        </div>\r\n        <div class="clear"></div>\r\n        <div class="description gui facet-item-description m-t-2 m-l-5">\r\n            <div class="gui fluid-w m-0 p-0">\r\n'+(null!=(u=a.each.call(f,null!=n?n.facetValues:n,{name:"each",hash:{},fn:e.program(3,l,0,r,s),inverse:e.noop,data:l}))?u:"")+"                "+(null!=(u=i(t(6)).call(f,null!=n?n.facetValues:n,null!=s[1]?s[1].noOfFacetToShow:s[1],{name:"ShowMoreLessLink",hash:{},data:l}))?u:"")+"\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"},3:function(e,n,a,o,l,r,s){var u,c=null!=n?n:e.nullContext||{};return'                <div class="gui item '+e.escapeExpression(i(t(7)).call(c,l&&l.index,null!=s[2]?s[2].noOfFacetToShow:s[2],{name:"CheckLength",hash:{},data:l}))+'">\r\n'+(null!=(u=a.if.call(c,null!=n?n.selected:n,{name:"if",hash:{},fn:e.program(4,l,0,r,s),inverse:e.program(6,l,0,r,s),data:l}))?u:"")+"                </div>\r\n"},4:function(e,n,a,o,l,r,s){var u=e.lambda,c=e.escapeExpression,d=null!=n?n:e.nullContext||{};return'                    <label data-attr-value="'+c(u(null!=n?n.label:n,n))+'" title="'+c(u(null!=n?n.label:n,n))+"("+c(u(null!=n?n.count:n,n))+')" class="gui cursor-pointer no-wrap primary text-shorten m-0">\r\n                        <input class="gui facet-value-checkbox cursor-pointer m-l-0" id="'+c(u(null!=n?n.label:n,n))+"-"+c(u(l&&l.index,n))+'" '+c(i(t(1)).call(d,null!=n?n.selected:n,{name:"Checked",hash:{},data:l}))+" "+c(i(t(2)).call(d,null!=n?n.disabled:n,{name:"Disabled",hash:{},data:l}))+'\r\n                            value="'+c(u(null!=s[1]?s[1].id:s[1],n))+":"+c(u(null!=n?n.label:n,n))+":"+c(u(null!=s[1]?s[1].type:s[1],n))+'" type="checkbox" /> '+c(u(null!=n?n.label:n,n))+'\r\n                        <span class="gui gui-subheading-1 m-0">('+c(u(null!=n?n.count:n,n))+")</span>\r\n                    </label>\r\n"},6:function(e,n,a,o,l,r,s){var u=e.lambda,c=e.escapeExpression,d=null!=n?n:e.nullContext||{};return'                    <label data-attr-value="'+c(u(null!=n?n.label:n,n))+'" title="'+c(u(null!=n?n.label:n,n))+"("+c(u(null!=n?n.count:n,n))+')" class="gui cursor-pointer no-wrap text-shorten m-0">\r\n                        <input class="gui facet-value-checkbox cursor-pointer m-l-0" id="'+c(u(null!=n?n.label:n,n))+"-"+c(u(l&&l.index,n))+'" '+c(i(t(1)).call(d,null!=n?n.selected:n,{name:"Checked",hash:{},data:l}))+" "+c(i(t(2)).call(d,null!=n?n.disabled:n,{name:"Disabled",hash:{},data:l}))+'\r\n                            value="'+c(u(null!=s[1]?s[1].id:s[1],n))+":"+c(u(null!=n?n.label:n,n))+":"+c(u(null!=s[1]?s[1].type:s[1],n))+'" type="checkbox" /> '+c(u(null!=n?n.label:n,n))+'\r\n                        <span class="gui gui-subheading-1 m-0">('+c(u(null!=n?n.count:n,n))+")</span>\r\n                    </label>\r\n"},8:function(e,n,t,i,a){return'<div class="gui m-t-10">\r\n    \r\n</div>\r\n'},compiler:[7,">= 4.0.0"],main:function(e,n,t,i,a,o,l){var r;return'<div class="gui m-b-5 m-t-5">\r\n    <span class="gui gui-subheading-1">\r\n        PINNED FILTERS\r\n    </span>\r\n</div>\r\n'+(null!=(r=t.if.call(null!=n?n:e.nullContext||{},null!=(r=null!=n?n.favorites:n)?r.length:r,{name:"if",hash:{},fn:e.program(1,a,0,o,l),inverse:e.program(8,a,0,o,l),data:a}))?r:"")},useData:!0,useDepths:!0})},function(e,n,t){function i(e){return e&&(e.__esModule?e.default:e)}var a=t(0);e.exports=(a.default||a).template({1:function(e,n,a,o,l,r,s){var u,c=null!=n?n:e.nullContext||{},d=e.escapeExpression,f=e.lambda;return'<div class="item facet-item gui m-t-6 '+d(i(t(18)).call(c,null!=n?n.collapsed:n,{name:"Collapsed",hash:{},data:l}))+'" data-attr-id="'+d(f(null!=n?n.id:n,n))+'" data-attr-name="'+d(f(null!=n?n.name:n,n))+'">\r\n    <div class="content">\r\n        <div class="facet-item-header fluid gui item flex jc-sb">\r\n            <span class="gui gui-subheading-1 primary m-0 expansion-icon cursor-pointer" tabindex="0">\r\n                '+d(f(null!=n?n.name:n,n))+" "+(null!=(u=i(t(5)).call(c,null!=n?n.facetValues:n,{name:"SelectedFiltersCount",hash:{},data:l}))?u:"")+'\r\n            </span>\r\n            <span>\r\n                <i data-attr-id="'+d(f(null!=n?n.id:n,n))+'" class="gui gui-icon selectable primary gui-icon-pin m-t-5 pin-icon m-r-10 cursor-pointer" tabindex="0"></i>\r\n                <i class="gui gui-icon selectable gui-icon-chevron-down primary expansion-icon m-t-5 m-r-10 cursor-pointer" tabindex="0"></i>\r\n            </span>\r\n        </div>\r\n        <div class="clear"></div>\r\n        <div class="description gui '+d(i(t(19)).call(c,null!=n?n.collapsed:n,{name:"Hidden",hash:{},data:l}))+' facet-item-description m-t-2 m-l-5">\r\n            <div class="gui fluid-w m-0 p-0">\r\n'+(null!=(u=a.each.call(c,null!=n?n.facetValues:n,{name:"each",hash:{},fn:e.program(2,l,0,r,s),inverse:e.noop,data:l}))?u:"")+"                "+(null!=(u=i(t(6)).call(c,null!=n?n.facetValues:n,null!=s[1]?s[1].noOfFacetToShow:s[1],{name:"ShowMoreLessLink",hash:{},data:l}))?u:"")+"\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n"},2:function(e,n,a,o,l,r,s){var u,c=null!=n?n:e.nullContext||{};return'                <div class="gui item '+e.escapeExpression(i(t(7)).call(c,l&&l.index,null!=s[2]?s[2].noOfFacetToShow:s[2],{name:"CheckLength",hash:{},data:l}))+'">\r\n'+(null!=(u=a.if.call(c,null!=n?n.selected:n,{name:"if",hash:{},fn:e.program(3,l,0,r,s),inverse:e.program(5,l,0,r,s),data:l}))?u:"")+"                </div>\r\n"},3:function(e,n,a,o,l,r,s){var u=e.lambda,c=e.escapeExpression,d=null!=n?n:e.nullContext||{};return'                    <label data-attr-value="'+c(u(null!=n?n.label:n,n))+'" title="'+c(u(null!=n?n.label:n,n))+"("+c(u(null!=n?n.count:n,n))+')" class="gui cursor-pointer no-wrap primary text-shorten m-0">\r\n                        <input class="gui facet-value-checkbox cursor-pointer m-l-0" id="'+c(u(null!=n?n.label:n,n))+"-"+c(u(l&&l.index,n))+'" '+c(i(t(1)).call(d,null!=n?n.selected:n,{name:"Checked",hash:{},data:l}))+" "+c(i(t(2)).call(d,null!=n?n.disabled:n,{name:"Disabled",hash:{},data:l}))+'\r\n                            value="'+c(u(null!=s[1]?s[1].id:s[1],n))+":"+c(u(null!=n?n.label:n,n))+":"+c(u(null!=s[1]?s[1].type:s[1],n))+'" type="checkbox" /> '+c(u(null!=n?n.label:n,n))+'\r\n                        <span class="gui gui-subheading-1 m-0">('+c(u(null!=n?n.count:n,n))+")</span>\r\n                    </label>\r\n"},5:function(e,n,a,o,l,r,s){var u=e.lambda,c=e.escapeExpression,d=null!=n?n:e.nullContext||{};return'                    <label data-attr-value="'+c(u(null!=n?n.label:n,n))+'" title="'+c(u(null!=n?n.label:n,n))+"("+c(u(null!=n?n.count:n,n))+')" class="gui cursor-pointer no-wrap text-shorten m-0">\r\n                        <input class="gui facet-value-checkbox cursor-pointer m-l-0" id="'+c(u(null!=n?n.label:n,n))+"-"+c(u(l&&l.index,n))+'" '+c(i(t(1)).call(d,null!=n?n.selected:n,{name:"Checked",hash:{},data:l}))+" "+c(i(t(2)).call(d,null!=n?n.disabled:n,{name:"Disabled",hash:{},data:l}))+'\r\n                            value="'+c(u(null!=s[1]?s[1].id:s[1],n))+":"+c(u(null!=n?n.label:n,n))+":"+c(u(null!=s[1]?s[1].type:s[1],n))+'" type="checkbox" /> '+c(u(null!=n?n.label:n,n))+'\r\n                        <span class="gui gui-subheading-1 m-0">('+c(u(null!=n?n.count:n,n))+")</span>\r\n                    </label>\r\n"},compiler:[7,">= 4.0.0"],main:function(e,n,t,i,a,o,l){var r;return'<div class="gui m-b-5 m-t-10 ">\r\n    <span class="gui gui-subheading-1">\r\n        ALL FILTERS\r\n    </span>\r\n</div>\r\n'+(null!=(r=t.each.call(null!=n?n:e.nullContext||{},null!=n?n.nonFavorites:n,{name:"each",hash:{},fn:e.program(1,a,0,o,l),inverse:e.noop,data:a}))?r:"")},useData:!0,useDepths:!0})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return e?" collapsed ":""};n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){return e?" gui-hidden ":""};n.default=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e){var n=this;if(this.defaultFacetOptions={animationTime:200,collapsed:!1,containerElement:null,noOfFacetToShow:5,onFilterChange:function(e,n,t){},onPinUnpin:function(e,n){}},this.extendOptions=function(e){return n.options=jQuery.extend({},n.defaultFacetOptions,e)},this.extendOptions(e),null===e.containerElement)throw new Error("Please Provide a valid container Element object")}return Object.defineProperty(e.prototype,"Options",{get:function(){return this.options},enumerable:!0,configurable:!0}),e}();n.FacetConfigStore=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(9),a=t(3),o=function(){function e(e,n){this.element=e,this.configStore=n}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".expand-all",function(n){e.element.find(".facet-item-header").each(function(e,n){i.ExpandCollapseManager.ControlVisibilityOfFilter(jQuery(n),a.ShowHide.Show)}),n.stopPropagation()}),this.element.on("keyup",".expand-all",function(n){var t=n.keyCode||n.which;13!==t&&32!==t||(e.element.find(".facet-item-header").each(function(e,n){i.ExpandCollapseManager.ControlVisibilityOfFilter(jQuery(n),a.ShowHide.Show)}),n.stopPropagation())}),this.element.on("click",".collapse-all",function(n){e.element.find(".facet-item-header").each(function(e,n){i.ExpandCollapseManager.ControlVisibilityOfFilter(jQuery(n),a.ShowHide.Hide)}),n.stopPropagation()}),this.element.on("keyup",".collapse-all",function(n){var t=n.keyCode||n.which;13!==t&&32!==t||(e.element.find(".facet-item-header").each(function(e,n){i.ExpandCollapseManager.ControlVisibilityOfFilter(jQuery(n),a.ShowHide.Hide)}),n.stopPropagation())}),this.element.on("click",".facet-item-header .expansion-icon",function(e){var n=jQuery(e.target),t=n.parents(".facet-item-header");i.ExpandCollapseManager.ControlVisibilityOfFilter(t,a.ShowHide.Toggle),e.stopPropagation()}),this.element.on("keyup",".facet-item-header .expansion-icon",function(e){var n=e.keyCode||e.which;if(13===n||32===n){e.preventDefault();var t=jQuery(e.target),o=t.parents(".facet-item-header");i.ExpandCollapseManager.ControlVisibilityOfFilter(o,a.ShowHide.Toggle),e.stopPropagation()}})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.ExpandCollapseFacetsHandler=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(10),a=function(){function e(e,n){this.element=e,this.configStore=n}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("change",".facet-body .facet-item-description .facet-value-checkbox",function(n){var t=jQuery(n.target),a=t.val().toString(),o=a.split(":"),l=t.is(":checked"),r=l?i.FilterActionType.Add:i.FilterActionType.Minus;e.configStore.Options.onFilterChange(o[0],o[1],r,o[2]),n.stopPropagation()})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.FacetActionHandler=a},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(9),a=t(3),o=function(){function e(e,n){var t=this;this.element=e,this.configStore=n,this.handleSearch=function(e){var n=jQuery(e.target),o=n.val().toString().toLowerCase();t.element.find(".facet-list .facet-item").each(function(e,n){var l=jQuery(n),r=!1,s=!1;void 0!==o&&null!==o&&""!==o.trim()||(s=!0),s||-1===l.attr("data-attr-name").toLowerCase().indexOf(o)||(r=!0),s?(t.element.find(".show-more-link").each(function(e,n){jQuery(n).hasClass("gui-hidden")?jQuery(n).hide():jQuery(n).show()}),t.element.find(".show-less-link").each(function(e,n){jQuery(n).hasClass("gui-hidden")?jQuery(n).hide():jQuery(n).show()})):(t.element.find(".show-more-link").hide(),t.element.find(".show-less-link").hide());var u=!1;l.find("label").each(function(e,n){var t=jQuery(n);if(r||s)return void t.show();s?t.parent(".extra-filter").hide():t.parent(".extra-filter").show(),-1===t.attr("data-attr-value").toLowerCase().indexOf(o)?t.hide():(u=!0,t.show())});var c=l.find(".facet-item-header"),d=l.hasClass("collapsed");!d||r||u||s?l.fadeIn(t.configStore.Options.animationTime):l.fadeOut(t.configStore.Options.animationTime),d||r||u?i.ExpandCollapseManager.ControlVisibilityOfFilter(c,a.ShowHide.Show):i.ExpandCollapseManager.ControlVisibilityOfFilter(c,a.ShowHide.Hide)}),e.stopPropagation()}}return e.prototype.RegisterDomHandler=function(){this.element.on("keyup",".filter-search-input",this.handleSearch)},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.FacetSearchHandler=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(10),a=function(){function e(e,n){this.filterElement=e,this.configStore=n}return e.prototype.RegisterDomHandler=function(){var e=this;this.filterElement.on("click",".facet-subheader .facet-labels .label",function(n){var t=jQuery(n.target);t.is(".label")||(t=t.parents(".label"));var a=t.attr("data-filter-entry").toString(),o=a.split(":");e.configStore.Options.onFilterChange(o[0],o[1],i.FilterActionType.Minus,o[2]),n.stopPropagation()}),this.filterElement.on("click",".facet-subheader .remove-all",function(n){e.configStore.Options.onAllFilterRemove(),n.stopPropagation()})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.FilterActionHandler=a},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){var t=this;this.element=e,this.configStore=n,this.RegisterDomHandler=function(){t.element.on("click",".hide-facet",t.hideFacet),t.element.on("click",".show-facet",t.showFacet),t.element.on("keyup",".hide-facet",function(e){var n=e.keyCode||e.which;13!==n&&32!==n||t.hideFacet(e)}),t.element.on("keyup",".show-facet",function(e){var n=e.keyCode||e.which;13!==n&&32!==n||t.showFacet(e)})},this.hideFacet=function(e){$(".facet-body").hide(),$(".facet-collapsed-body").fadeIn(t.configStore.Options.animationTime),t.configStore.Options.collapsed=!0,e.stopPropagation()},this.showFacet=function(e){$(".facet-collapsed-body").hide(),$(".facet-body").fadeIn(t.configStore.Options.animationTime),t.configStore.Options.collapsed=!1,e.stopPropagation()}}return e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();n.HideFacetSectionHandler=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n,t){this.element=e,this.configStore=n,this.templateService=t}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".pin-icon",function(n){e.handlePinUnpin(n,!0)}),this.element.on("click",".unpin-icon",function(n){e.handlePinUnpin(n,!1)}),this.element.on("keyup",".pin-icon",function(n){var t=n.keyCode||n.which;13!==t&&32!==t||e.handlePinUnpin(n,!0)}),this.element.on("keyup",".unpin-icon",function(n){var t=n.keyCode||n.which;13!==t&&32!==t||e.handlePinUnpin(n,!1)})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e.prototype.handlePinUnpin=function(e,n){for(var t=jQuery(e.target),i=t.attr("data-attr-id"),a=this.templateService.getData(),o=0,l=a;o<l.length;o++){var r=l[o];if(r.id===i){r.pinned=n;break}}this.templateService.setData(a),this.element.html(this.templateService.bind(a)),this.configStore.Options.onPinUnpin(i,n),e.stopPropagation()},e}();n.PinUnpinEventHandler=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,n){this.element=e,this.configStore=n}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".show-more-link",function(n){e.showMoreLessFilters(n,!0)}),this.element.on("click",".show-less-link",function(n){e.showMoreLessFilters(n,!1)}),this.element.on("keyup",".show-more-link",function(n){var t=n.keyCode||n.which;13!==t&&32!==t||e.showMoreLessFilters(n,!0)}),this.element.on("keyup",".show-less-link",function(n){var t=n.keyCode||n.which;13!==t&&32!==t||e.showMoreLessFilters(n,!1)})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e.prototype.showMoreLessFilters=function(e,n){var t=jQuery(e.target);n?t.parent().find(".extra-filter").fadeIn(this.configStore.Options.animationTime,function(){t.hide(),t.siblings("a").show()}):t.parent().find(".extra-filter").fadeOut(this.configStore.Options.animationTime,function(){t.siblings("a").show(),t.hide()}),e.stopPropagation()},e}();n.ShowMoreLessHandler=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(29),a=t(30),o=t(32),l=t(8),r=function(){function e(e){var n=this;this.handlerChain=[],this.bind=function(e){var t=n.templateService.bind(e);n.filterElement.html(t)},this.destroy=function(){void 0!==n.filterElement&&n.filterElement.off(),n.handlerChain.forEach(function(e){void 0!==e&&void 0!==e.deregister&&e.deregister()})},this.configStore=new o.FilterConfigStore(e),this.filterElement=jQuery(e.containerElement),this.templateService=new a.FilterTemplateService,this.handlerChain.push(new l.FilterActionHandler(this.filterElement,this.configStore)),this.handlerChain.push(new i.HotKeysFiltersHandler),this.handlerChain.forEach(function(e){e.RegisterDomHandler()})}return e}();n.Filter=r},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.RegisterDomHandler=function(){jQuery(document).on("keydown",e.focusOnSearch)},this.onResize=function(){throw new Error("Method not implemented.")},this.onDocumentClick=function(e){},this.deRegister=function(){jQuery(document).off("keydown",e.focusOnSearch)},this.focusOnSearch=function(e){e.altKey&&"r"===e.key&&(e.preventDefault(),jQuery(".facet-subheader .remove-all").focus())}}return e}();n.HotKeysFiltersHandler=i},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t(31),a=function(){function e(){this.tempateFunctionForFacetSubHeader=i}return e.prototype.bind=function(e){return this.tempateFunctionForFacetSubHeader({filters:e})},e}();n.FilterTemplateService=a},function(e,n,t){var i=t(0);e.exports=(i.default||i).template({1:function(e,n,t,i,a,o,l){var r;return'<div class="content facet-subheader gui fluid-w basic curved p-5">\n    <span class="gui gui-subheading-2 caps">Applied Filters</span>\n    <button class="gui m-l-5 remove-all" >\n        <i class="gui-icon gui-icon-cancel"></i>\n        <span>Clear All</span>\n    </button>\n    <span class="gui m-l-10">\n'+(null!=(r=t.each.call(null!=n?n:e.nullContext||{},null!=n?n.filters:n,{name:"each",hash:{},fn:e.program(2,a,0,o,l),inverse:e.noop,data:a}))?r:"")+"    </span>\n</div>\n"},2:function(e,n,t,i,a,o,l){var r,s,u=null!=n?n:e.nullContext||{};return'        <span class="gui m-r-5">\n            <span class="gui large labels facet-labels">\n                <span class="gui gui-subheading-1">'+e.escapeExpression((s=null!=(s=t.name||(null!=n?n.name:n))?s:t.helperMissing,"function"==typeof s?s.call(u,{name:"name",hash:{},data:a}):s))+"</span>\n"+(null!=(r=t.each.call(u,null!=n?n.facetValues:n,{name:"each",hash:{},fn:e.program(3,a,0,o,l),inverse:e.noop,data:a}))?r:"")+(null!=(r=t.each.call(u,null!=n?n.facetRanges:n,{name:"each",hash:{},fn:e.program(5,a,0,o,l),inverse:e.noop,data:a}))?r:"")+"            </span>\n        </span>\n"},3:function(e,n,t,i,a,o,l){var r,s=e.lambda,u=e.escapeExpression;return'                <button class="gui m-0 m-t-2 m-r-2 p-4 label cursor-pointer strikethrough-hover" data-filter-entry="'+u(s(null!=l[1]?l[1].id:l[1],n))+":"+u(s(null!=n?n.label:n,n))+":"+u(s(null!=l[1]?l[1].type:l[1],n))+'">\n                    '+u((r=null!=(r=t.label||(null!=n?n.label:n))?r:t.helperMissing,"function"==typeof r?r.call(null!=n?n:e.nullContext||{},{name:"label",hash:{},data:a}):r))+'\n                    <i class="gui-icon gui-icon-cancel"></i>\n                </button>\n'},5:function(e,n,t,i,a,o,l){var r,s=e.lambda,u=e.escapeExpression,c=null!=n?n:e.nullContext||{},d=t.helperMissing;return'                <button class="gui m-0 m-t-2 m-r-2 p-4 label cursor-pointer strikethrough-hover" data-filter-entry="'+u(s(null!=l[1]?l[1].id:l[1],n))+":"+u(s(null!=n?n.label:n,n))+":"+u(s(null!=l[1]?l[1].type:l[1],n))+'">\n                    '+u((r=null!=(r=t.min||(null!=n?n.min:n))?r:d,"function"==typeof r?r.call(c,{name:"min",hash:{},data:a}):r))+" - "+u((r=null!=(r=t.max||(null!=n?n.max:n))?r:d,"function"==typeof r?r.call(c,{name:"max",hash:{},data:a}):r))+'\n                    <i class="gui-icon gui-icon-cancel"></i>\n                </button>\n'},compiler:[7,">= 4.0.0"],main:function(e,n,t,i,a,o,l){var r;return null!=(r=t.if.call(null!=n?n:e.nullContext||{},null!=(r=null!=n?n.filters:n)?r.length:r,{name:"if",hash:{},fn:e.program(1,a,0,o,l),inverse:e.noop,data:a}))?r:""},useData:!0,useDepths:!0})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e){var n=this;if(this.defaultfilterOptions={animationTime:200,containerElement:null,onAllFilterRemove:function(){},onFilterChange:function(e,n,t){}},this.extendOptions=function(e){return n.options=jQuery.extend({},n.defaultfilterOptions,e)},this.extendOptions(e),null===e.containerElement)throw new Error("Please Provide a valid container Element object for filters")}return Object.defineProperty(e.prototype,"Options",{get:function(){return this.options},enumerable:!0,configurable:!0}),e}();n.FilterConfigStore=i}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9mYWNldG9vLm1pbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgZmZiZWMyZDJmYmVlMzVjZGI2MzAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIkhhbmRsZWJhcnNcIixcImFtZFwiOlwiaGFuZGxlYmFycy5ydW50aW1lXCIsXCJjb21tb25qczJcIjpcImhhbmRsZWJhcnMvcnVudGltZVwiLFwiY29tbW9uanNcIjpcImhhbmRsZWJhcnMvcnVudGltZVwifSIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tlZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvRGlzYWJsZWQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvU2hvd0hpZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9mYWNldC1ib2R5LmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvU2VsZWN0ZWRGaWx0ZXJzQ291bnQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9oZWxwZXJzL1Nob3dNb3JlTGVzc0xpbmsudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9oZWxwZXJzL0NoZWNrTGVuZ3RoLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL0V4cGFuZENvbGxhcHNlTWFuYWdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL21haW4vRW50cnkudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL21haW4vRmFjZXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvSG90S2V5c0ZhY2V0SGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvc2VydmljZXMvRmFjZXRUZW1wbGF0ZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9mYWNldC1tYWluLmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2ZhY2V0LXBpbm5lZC5oYnMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9mYWNldC11bnBpbm5lZC5oYnMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9oZWxwZXJzL0NvbGxhcHNlZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvSGlkZGVuLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9jb25maWcvRmFjZXRDb25maWdTdG9yZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmFjZXRBY3Rpb25IYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0U2VhcmNoSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9GaWx0ZXJBY3Rpb25IYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL0hpZGVGYWNldFNlY3Rpb25IYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL1BpblVucGluRXZlbnRIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL1Nob3dNb3JlTGVzc0hhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL21haW4vRmlsdGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL0hvdEtleXNGaWx0ZXJzSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvc2VydmljZXMvRmlsdGVyVGVtcGxhdGVTZXJ2aWNlLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvZmFjZXQtYXBwbGllZC1maWx0ZXJzLmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvY29uZmlnL0ZpbHRlckNvbmZpZ1N0b3JlLnRzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJkZWZpbmUiLCJhbWQiLCJzZWxmIiwidGhpcyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidmFsdWUiLCJjaGVja2VkIiwiYm9vbCIsImRlZmF1bHQiLCJkaXNhYmxlZCIsIlNob3dIaWRlIiwiSGFuZGxlYmFycyIsInRlbXBsYXRlIiwiY29tcGlsZXIiLCJtYWluIiwiY29udGFpbmVyIiwiZGVwdGgwIiwiaGVscGVycyIsInBhcnRpYWxzIiwiZGF0YSIsInN0YWNrMSIsImludm9rZVBhcnRpYWwiLCJkZWNvcmF0b3JzIiwidXNlUGFydGlhbCIsInVzZURhdGEiLCJzZWxlY3RlZEZpbHRlcnNDb3VudCIsImZhY2V0VmFsdWVzIiwiaW5kZXgiLCJ1bmRlZmluZWQiLCJsZW5ndGgiLCJfaSIsImZhY2V0VmFsdWVzXzEiLCJmYWNldFZhbHVlIiwic2VsZWN0ZWQiLCJTaG93TW9yZUxlc3NMaW5rIiwidjIiLCJvcHRpb25zIiwiY2hlY2tMZW5ndGgiLCJfX2V4cG9ydCIsIlNob3dIaWRlXzEiLCJFeHBhbmRDb2xsYXBzZU1hbmFnZXIiLCJDb250cm9sVmlzaWJpbGl0eU9mRmlsdGVyIiwiaGVhZGVyRWxlbWVudCIsInNob3dIaWRlIiwiaWNvbkVsZW1lbnQiLCJjaGlsZHJlbiIsImN1cnJlbnRseVZpc2libGUiLCJoYXNDbGFzcyIsIlRvZ2dsZSIsIlNob3ciLCJIaWRlIiwicGFyZW50cyIsImZpbmQiLCJzbGlkZVVwIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInNsaWRlRG93biIsIkZpbHRlckFjdGlvblR5cGUiLCJIb3RLZXlzRmFjZXRIYW5kbGVyXzEiLCJGYWNldFRlbXBsYXRlU2VydmljZV8xIiwiRmFjZXRDb25maWdTdG9yZV8xIiwiZXZlbnRoYW5kbGVyc18xIiwiRmFjZXQiLCJfdGhpcyIsImhhbmRsZXJDaGFpbiIsImJpbmQiLCJmYWNldHMiLCJ0ZW1wbGF0ZVNlcnZpY2UiLCJzZXREYXRhIiwiZnVsbEZhY2V0IiwiZmFjZXRFbGVtZW50IiwiaHRtbCIsImhpZGUiLCJmYWRlT3V0IiwiY29uZmlnU3RvcmUiLCJPcHRpb25zIiwiYW5pbWF0aW9uVGltZSIsImNvbGxhcHNlZCIsInNob3ciLCJmYWRlSW4iLCJkZXN0cm95Iiwib2ZmIiwiZm9yRWFjaCIsImhhbmRsZXIiLCJkZXJlZ2lzdGVyIiwiRmFjZXRDb25maWdTdG9yZSIsImpRdWVyeSIsImNvbnRhaW5lckVsZW1lbnQiLCJGYWNldFRlbXBsYXRlU2VydmljZSIsInB1c2giLCJFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIiLCJGYWNldEFjdGlvbkhhbmRsZXIiLCJGYWNldFNlYXJjaEhhbmRsZXIiLCJIaWRlRmFjZXRTZWN0aW9uSGFuZGxlciIsIkhvdEtleXNGYWNldEhhbmRsZXIiLCJQaW5VbnBpbkV2ZW50SGFuZGxlciIsIlNob3dNb3JlTGVzc0hhbmRsZXIiLCJSZWdpc3RlckRvbUhhbmRsZXIiLCJkb2N1bWVudCIsIm9uIiwiZm9jdXNPblNlYXJjaCIsIm9uUmVzaXplIiwiRXJyb3IiLCJvbkRvY3VtZW50Q2xpY2siLCJldmVudCIsImRlUmVnaXN0ZXIiLCJhbHRLZXkiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsImZvY3VzIiwiRmFjZXRNYWluIiwiZ2V0RGF0YSIsImNvbXBhcmVGbiIsInByZXYiLCJuZXh0Iiwib3JkZXIiLCJ0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW4iLCJmYXZvcml0ZXMiLCJmaWx0ZXIiLCJmIiwicGlubmVkIiwibm9uRmF2b3JpdGVzIiwic29ydCIsIm5vT2ZGYWNldFRvU2hvdyIsIjEiLCIzIiwibnVsbENvbnRleHQiLCJoYXNoIiwiZm4iLCJwcm9ncmFtIiwiaW52ZXJzZSIsIl9fZGVmYXVsdCIsIm9iaiIsImJsb2NrUGFyYW1zIiwiZGVwdGhzIiwiZWFjaCIsIm5vb3AiLCIyIiwiYWxpYXMxIiwibGFtYmRhIiwiYWxpYXMyIiwiZXNjYXBlRXhwcmVzc2lvbiIsImFsaWFzMyIsImlkIiwiNCIsImxhYmVsIiwiY291bnQiLCJ0eXBlIiwiNiIsIjgiLCJ1c2VEZXB0aHMiLCI1IiwiaGlkZGVuIiwiZGVmYXVsdEZhY2V0T3B0aW9ucyIsIm9uRmlsdGVyQ2hhbmdlIiwiYWN0aW9uIiwib25QaW5VbnBpbiIsInBpbiIsImV4dGVuZE9wdGlvbnMiLCJpbnB1dE9wdGlvbnMiLCJleHRlbmQiLCJFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMSIsImVsZW1lbnQiLCJzdG9wUHJvcGFnYXRpb24iLCJjb2RlIiwia2V5Q29kZSIsIndoaWNoIiwidGFyZ2V0IiwiRmlsdGVyQWN0aW9uVHlwZV8xIiwidmFsU3RyIiwidmFsIiwidG9TdHJpbmciLCJzcGxpdCIsImlzIiwiQWRkIiwiTWludXMiLCJoYW5kbGVTZWFyY2giLCJ0b0xvd2VyQ2FzZSIsImUiLCJmYWNldEl0ZW0iLCJmYWNldE5hbWVNYXRjaCIsImlucHV0VmFsdWVCbGFuayIsInRyaW0iLCJhdHRyIiwiaW5kZXhPZiIsInNod01vcmVFbGVtIiwic2hvd0xlc3NMaW5rIiwiZmFjZXRDaGlsZE1hdGNoIiwiaiIsImxhYmVsRWxlbSIsInBhcmVudCIsImhlYWRlckVsbWVudCIsIkZpbHRlckFjdGlvbkhhbmRsZXIiLCJmaWx0ZXJFbGVtZW50Iiwib25BbGxGaWx0ZXJSZW1vdmUiLCJoaWRlRmFjZXQiLCJzaG93RmFjZXQiLCIkIiwiaGFuZGxlUGluVW5waW4iLCJkYXRhXzEiLCJmYWNldCIsInNob3dNb3JlTGVzc0ZpbHRlcnMiLCJzaG93TW9yZSIsInNpYmxpbmdzIiwiSG90S2V5c0ZpbHRlcnNIYW5kbGVyXzEiLCJGaWx0ZXJUZW1wbGF0ZVNlcnZpY2VfMSIsIkZpbHRlckNvbmZpZ1N0b3JlXzEiLCJGaWx0ZXIiLCJmaWx0ZXJzIiwiZmFjZXRTdWJIZWFkZXIiLCJGaWx0ZXJDb25maWdTdG9yZSIsIkZpbHRlclRlbXBsYXRlU2VydmljZSIsIkhvdEtleXNGaWx0ZXJzSGFuZGxlciIsIkZhY2V0U3ViSGVhZGVyIiwidGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRTdWJIZWFkZXIiLCJoZWxwZXIiLCJoZWxwZXJNaXNzaW5nIiwiZmFjZXRSYW5nZXMiLCJhbGlhczQiLCJtaW4iLCJtYXgiLCJkZWZhdWx0ZmlsdGVyT3B0aW9ucyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxnQkFBQUMsVUFBQSxnQkFBQUMsUUFDQUEsT0FBQUQsUUFBQUQsRUFBQUcsUUFBQSx1QkFDQSxrQkFBQUMsZ0JBQUFDLElBQ0FELFFBQUEsc0JBQUFKLEdBQ0EsZ0JBQUFDLFNBQ0FBLFFBQUEsUUFBQUQsRUFBQUcsUUFBQSx1QkFFQUosRUFBQSxRQUFBQyxFQUFBRCxFQUFBLGFBQ0MsbUJBQUFPLFdBQUFDLEtBQUEsU0FBQUMsR0FDRCxNQ0FnQixVQUFVQyxHQ04xQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQVYsT0FHQSxJQUFBQyxHQUFBVSxFQUFBRCxJQUNBRSxFQUFBRixFQUNBRyxHQUFBLEVBQ0FiLFdBVUEsT0FOQVEsR0FBQUUsR0FBQUksS0FBQWIsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQVMsR0FHQVIsRUFBQVksR0FBQSxFQUdBWixFQUFBRCxRQXZCQSxHQUFBVyxLQTREQSxPQWhDQUYsR0FB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QUMsZUFBV3lOLEVBQUFqTixVQUFBLFdsQ2kvQ1BMLElrQ2ovQ0osV0FDSSxNQUFPbkIsTUFBSzJELFNsQ20vQ1p6QyxZQUFZLEVBQ1pELGNBQWMsSWtDLytDdEJ3TixJQXhCYS9PLEdBQUErTyIsImZpbGUiOiJmYWNldG9vLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImhhbmRsZWJhcnMvcnVudGltZVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJoYW5kbGViYXJzLnJ1bnRpbWVcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiRmFjZXRvb1wiXSA9IGZhY3RvcnkocmVxdWlyZShcImhhbmRsZWJhcnMvcnVudGltZVwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiRmFjZXRvb1wiXSA9IGZhY3Rvcnkocm9vdFtcIkhhbmRsZWJhcnNcIl0pO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fKSB7XG5yZXR1cm4gXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImhhbmRsZWJhcnMvcnVudGltZVwiKSk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXCJoYW5kbGViYXJzLnJ1bnRpbWVcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiRmFjZXRvb1wiXSA9IGZhY3RvcnkocmVxdWlyZShcImhhbmRsZWJhcnMvcnVudGltZVwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiRmFjZXRvb1wiXSA9IGZhY3Rvcnkocm9vdFtcIkhhbmRsZWJhcnNcIl0pO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDExKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogZXh0ZXJuYWwge1wicm9vdFwiOlwiSGFuZGxlYmFyc1wiLFwiYW1kXCI6XCJoYW5kbGViYXJzLnJ1bnRpbWVcIixcImNvbW1vbmpzMlwiOlwiaGFuZGxlYmFycy9ydW50aW1lXCIsXCJjb21tb25qc1wiOlwiaGFuZGxlYmFycy9ydW50aW1lXCJ9ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXztcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tlZC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgY2hlY2tlZCA9IGZ1bmN0aW9uIChib29sKSB7XHJcbiAgICByZXR1cm4gYm9vbCA/IFwiY2hlY2tlZFwiIDogXCJcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gY2hlY2tlZDtcclxuXG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGRpc2FibGVkID0gZnVuY3Rpb24gKGJvb2wpIHtcclxuICAgIHJldHVybiBib29sID8gXCJkaXNhYmxlZFwiIDogXCJcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gZGlzYWJsZWQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL1Nob3dIaWRlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTaG93SGlkZTtcclxuKGZ1bmN0aW9uIChTaG93SGlkZSkge1xyXG4gICAgU2hvd0hpZGVbU2hvd0hpZGVbXCJTaG93XCJdID0gMF0gPSBcIlNob3dcIjtcclxuICAgIFNob3dIaWRlW1Nob3dIaWRlW1wiSGlkZVwiXSA9IDFdID0gXCJIaWRlXCI7XHJcbiAgICBTaG93SGlkZVtTaG93SGlkZVtcIlRvZ2dsZVwiXSA9IDJdID0gXCJUb2dnbGVcIjtcclxufSkoU2hvd0hpZGUgPSBleHBvcnRzLlNob3dIaWRlIHx8IChleHBvcnRzLlNob3dIaWRlID0ge30pKTtcclxuXG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2ZhY2V0LWJvZHkuaGJzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBIYW5kbGViYXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgaGFuZGxlYmFycyAqLyAwKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJndWkgb2YtaGlkZGVuIG1pbi13LTUwIHctYXV0byBmbHVpZC1oIGZsZXggY29sdW1uIGNvbnRhaW5lclxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcImd1aSBoLWF1dG8gZmxleCBtLXQtMTBcXFwiPlxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIGN1cnNvci1wb2ludGVyIGd1aS1zdWJoZWFkaW5nLTEgbS0wIGV4cGFuZC1hbGxcXFwiPlxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBzcGVjaWFsIHJvdGF0ZS1yaWdodCBndWktaWNvbi1jaGV2ZG91YmxlXFxcIj48L2k+XFxuICAgICAgICAgICAgRXhwYW5kIEFsbFxcbiAgICAgICAgPC9idXR0b24+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJndWkgbS1yLTUgbS1sLTVcXFwiPjwvZGl2PlxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIGN1cnNvci1wb2ludGVyIGd1aS1zdWJoZWFkaW5nLTEgbS0wIGNvbGxhcHNlLWFsbFxcXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aS1pY29uIHNwZWNpYWwgcm90YXRlLXJpZ2h0IGd1aS1pY29uLWNoZXZkb3VibGVcXFwiPjwvaT5cXG4gICAgICAgICAgICBDb2xsYXBzZSBBbGxcXG4gICAgICAgIDwvYnV0dG9uPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZ3VpIGlucHV0IGZsdWlkLXcgcC10LTUgcC1yLTUgcC1iLTUgcC1sLTEgbS10LTEwXFxcIj5cXG4gICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiZ3VpIGlucHV0IHAtNSBoLTMwIGZsdWlkLXcgZ3VpLXN1YmhlYWRpbmctMiBmaWx0ZXItc2VhcmNoLWlucHV0XFxcIiBwbGFjZWhvbGRlcj1cXFwiU2VhcmNoIEZpbHRlcnNcXFwiIC8+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJndWkgZmx1aWQtaCBmYWNldC1saXN0IG9mLWF1dG8gbS10LTEwXFxcIj5cXG4gICAgICAgIFwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9mYWNldC1waW5uZWQuaGJzICovIDE2KSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtcGlubmVkXCIsXCJkYXRhXCI6ZGF0YSxcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiIFwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9mYWNldC11bnBpbm5lZC5oYnMgKi8gMTcpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC11bnBpbm5lZFwiLFwiZGF0YVwiOmRhdGEsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcbiAgICA8L2Rpdj5cXG5cXG48L2Rpdj5cIjtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogNSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9TZWxlY3RlZEZpbHRlcnNDb3VudC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHNlbGVjdGVkRmlsdGVyc0NvdW50ID0gZnVuY3Rpb24gKGZhY2V0VmFsdWVzKSB7XHJcbiAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgaWYgKGZhY2V0VmFsdWVzICE9PSB1bmRlZmluZWRcclxuICAgICAgICAmJiBmYWNldFZhbHVlcyAhPT0gbnVsbFxyXG4gICAgICAgICYmIGZhY2V0VmFsdWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGZhY2V0VmFsdWVzXzEgPSBmYWNldFZhbHVlczsgX2kgPCBmYWNldFZhbHVlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmFjZXRWYWx1ZSA9IGZhY2V0VmFsdWVzXzFbX2ldO1xyXG4gICAgICAgICAgICBpZiAoZmFjZXRWYWx1ZS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBpbmRleCA9PT0gMCA/IFwiXCIgOiBcIjxzcGFuIGNsYXNzPVxcXCJndWktYm9keS0yXFxcIj4oXCIgKyBpbmRleCArIFwiKTwvc3Bhbj5cIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gc2VsZWN0ZWRGaWx0ZXJzQ291bnQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9TaG93TW9yZUxlc3NMaW5rLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTaG93TW9yZUxlc3NMaW5rID0gZnVuY3Rpb24gKGluZGV4LCB2Miwgb3B0aW9ucykge1xyXG4gICAgaWYgKGluZGV4Lmxlbmd0aCA+IHYyKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiPGEgdGFiaW5kZXg9XFxcIjBcXFwiIGNsYXNzPVxcXCJndWkgc2ltcGxlIHNob3ctbW9yZS1saW5rIGN1cnNvci1wb2ludGVyIHAtMCBtLXQtM1xcXCI+U2hvdyBcIlxyXG4gICAgICAgICAgICArIChpbmRleC5sZW5ndGggLSB2MilcclxuICAgICAgICAgICAgKyBcIiBNb3JlIDwvYT5cIlxyXG4gICAgICAgICAgICArIFwiPGEgdGFiaW5kZXg9XFxcIjBcXFwiIGNsYXNzPVxcXCJndWkgc2ltcGxlIHNob3ctbGVzcy1saW5rIGN1cnNvci1wb2ludGVyIGd1aS1oaWRkZW4gcC0wIG0tdC0zXFxcIj5cIlxyXG4gICAgICAgICAgICArIFwiU2hvdyBMZXNzPC9hPlwiO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFNob3dNb3JlTGVzc0xpbms7XHJcblxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tMZW5ndGgudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjaGVja0xlbmd0aCA9IGZ1bmN0aW9uIChpbmRleCwgdjIpIHtcclxuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkICYmIGluZGV4ICsgMSA+IHYyKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiZ3VpLWhpZGRlbiBleHRyYS1maWx0ZXJcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBcIlwiO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBjaGVja0xlbmd0aDtcclxuXG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvaW5kZXgudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyICovIDIxKSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRmFjZXRBY3Rpb25IYW5kbGVyICovIDIyKSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRmFjZXRTZWFyY2hIYW5kbGVyICovIDIzKSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRmlsdGVyQWN0aW9uSGFuZGxlciAqLyAyNCkpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0hpZGVGYWNldFNlY3Rpb25IYW5kbGVyICovIDI1KSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vUGluVW5waW5FdmVudEhhbmRsZXIgKi8gMjYpKTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9TaG93TW9yZUxlc3NIYW5kbGVyICovIDI3KSk7XHJcblxuXG4vKioqLyB9KSxcbi8qIDkgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZU1hbmFnZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTaG93SGlkZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9TaG93SGlkZSAqLyAzKTtcclxudmFyIEV4cGFuZENvbGxhcHNlTWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV4cGFuZENvbGxhcHNlTWFuYWdlcigpIHtcclxuICAgIH1cclxuICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyID0gZnVuY3Rpb24gKGhlYWRlckVsZW1lbnQsIHNob3dIaWRlKSB7XHJcbiAgICAgICAgdmFyIGljb25FbGVtZW50ID0gaGVhZGVyRWxlbWVudC5jaGlsZHJlbihcInNwYW5cIikuY2hpbGRyZW4oXCIuZXhwYW5zaW9uLWljb25cIik7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRseVZpc2libGUgPSBpY29uRWxlbWVudC5oYXNDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgaWYgKFNob3dIaWRlXzEuU2hvd0hpZGUuVG9nZ2xlICE9PSBzaG93SGlkZSAmJiAoKGN1cnJlbnRseVZpc2libGUgJiYgc2hvd0hpZGUgPT09IFNob3dIaWRlXzEuU2hvd0hpZGUuU2hvdykgfHxcclxuICAgICAgICAgICAgKCFjdXJyZW50bHlWaXNpYmxlICYmIHNob3dIaWRlID09PSBTaG93SGlkZV8xLlNob3dIaWRlLkhpZGUpKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghY3VycmVudGx5VmlzaWJsZSkge1xyXG4gICAgICAgICAgICBoZWFkZXJFbGVtZW50LnBhcmVudHMoXCIuZmFjZXQtaXRlbVwiKS5maW5kKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIikuc2xpZGVEb3duKDIwMCk7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5hZGRDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoZWFkZXJFbGVtZW50LnBhcmVudHMoXCIuZmFjZXQtaXRlbVwiKS5maW5kKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIikuc2xpZGVVcCgyMDApO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5yZW1vdmVDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LmFkZENsYXNzKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRXhwYW5kQ29sbGFwc2VNYW5hZ2VyO1xyXG59KCkpO1xyXG5leHBvcnRzLkV4cGFuZENvbGxhcHNlTWFuYWdlciA9IEV4cGFuZENvbGxhcHNlTWFuYWdlcjtcclxuXG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBGaWx0ZXJBY3Rpb25UeXBlO1xyXG4oZnVuY3Rpb24gKEZpbHRlckFjdGlvblR5cGUpIHtcclxuICAgIEZpbHRlckFjdGlvblR5cGVbXCJBZGRcIl0gPSBcIkFkZFwiO1xyXG4gICAgRmlsdGVyQWN0aW9uVHlwZVtcIk1pbnVzXCJdID0gXCJNaW51c1wiO1xyXG59KShGaWx0ZXJBY3Rpb25UeXBlID0gZXhwb3J0cy5GaWx0ZXJBY3Rpb25UeXBlIHx8IChleHBvcnRzLkZpbHRlckFjdGlvblR5cGUgPSB7fSkpO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxMSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL21haW4vRW50cnkudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRmFjZXQgKi8gMTIpKTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9GaWx0ZXIgKi8gMjgpKTtcclxuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9tYWluL0ZhY2V0LnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBIb3RLZXlzRmFjZXRIYW5kbGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9ldmVudGhhbmRsZXJzL0hvdEtleXNGYWNldEhhbmRsZXIgKi8gMTMpO1xyXG52YXIgRmFjZXRUZW1wbGF0ZVNlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NlcnZpY2VzL0ZhY2V0VGVtcGxhdGVTZXJ2aWNlICovIDE0KTtcclxudmFyIEZhY2V0Q29uZmlnU3RvcmVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmUgKi8gMjApO1xyXG52YXIgZXZlbnRoYW5kbGVyc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9ldmVudGhhbmRsZXJzICovIDgpO1xyXG52YXIgRmFjZXQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbiA9IFtdO1xyXG4gICAgICAgIHRoaXMuYmluZCA9IGZ1bmN0aW9uIChmYWNldHMpIHtcclxuICAgICAgICAgICAgX3RoaXMudGVtcGxhdGVTZXJ2aWNlLnNldERhdGEoZmFjZXRzKTtcclxuICAgICAgICAgICAgdmFyIGZ1bGxGYWNldCA9IF90aGlzLnRlbXBsYXRlU2VydmljZS5iaW5kKGZhY2V0cyk7XHJcbiAgICAgICAgICAgIF90aGlzLmZhY2V0RWxlbWVudC5odG1sKGZ1bGxGYWNldCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmZhY2V0RWxlbWVudC5maW5kKFwiLmZhY2V0LWJvZHlcIikuZmFkZU91dChfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbGxhcHNlZCA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmZhY2V0RWxlbWVudC5maW5kKFwiLmZhY2V0LWJvZHlcIikuZmFkZUluKF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sbGFwc2VkID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5mYWNldEVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmFjZXRFbGVtZW50Lm9mZigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZXJDaGFpbi5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlciAhPT0gdW5kZWZpbmVkICYmIGhhbmRsZXIuZGVyZWdpc3RlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlci5kZXJlZ2lzdGVyKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IG5ldyBGYWNldENvbmZpZ1N0b3JlXzEuRmFjZXRDb25maWdTdG9yZShvcHRpb25zKTtcclxuICAgICAgICB0aGlzLmZhY2V0RWxlbWVudCA9IGpRdWVyeShvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlID0gbmV3IEZhY2V0VGVtcGxhdGVTZXJ2aWNlXzEuRmFjZXRUZW1wbGF0ZVNlcnZpY2UodGhpcy5jb25maWdTdG9yZSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgZXZlbnRoYW5kbGVyc18xLkV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IGV2ZW50aGFuZGxlcnNfMS5GYWNldEFjdGlvbkhhbmRsZXIodGhpcy5mYWNldEVsZW1lbnQsIHRoaXMuY29uZmlnU3RvcmUpKTtcclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBldmVudGhhbmRsZXJzXzEuRmFjZXRTZWFyY2hIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgZXZlbnRoYW5kbGVyc18xLkhpZGVGYWNldFNlY3Rpb25IYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgSG90S2V5c0ZhY2V0SGFuZGxlcl8xLkhvdEtleXNGYWNldEhhbmRsZXIoKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgZXZlbnRoYW5kbGVyc18xLlBpblVucGluRXZlbnRIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlLCB0aGlzLnRlbXBsYXRlU2VydmljZSkpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IGV2ZW50aGFuZGxlcnNfMS5TaG93TW9yZUxlc3NIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgICBoYW5kbGVyLlJlZ2lzdGVyRG9tSGFuZGxlcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZhY2V0O1xyXG59KCkpO1xyXG5leHBvcnRzLkZhY2V0ID0gRmFjZXQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0hvdEtleXNGYWNldEhhbmRsZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgSG90S2V5c0ZhY2V0SGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhvdEtleXNGYWNldEhhbmRsZXIoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgX3RoaXMuZm9jdXNPblNlYXJjaCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vIERvIG5vdGhpbmdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZGVSZWdpc3RlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vZmYoXCJrZXlkb3duXCIsIF90aGlzLmZvY3VzT25TZWFyY2gpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5mb2N1c09uU2VhcmNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5hbHRLZXkgJiYgZXZlbnQua2V5ID09PSBcImZcIikge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGpRdWVyeShcIi5maWx0ZXItc2VhcmNoLWlucHV0XCIpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEhvdEtleXNGYWNldEhhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSG90S2V5c0ZhY2V0SGFuZGxlciA9IEhvdEtleXNGYWNldEhhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL3NlcnZpY2VzL0ZhY2V0VGVtcGxhdGVTZXJ2aWNlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmFjZXRNYWluID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi8uLi9oYnMvZmFjZXQtbWFpbi5oYnMgKi8gMTUpO1xyXG52YXIgRmFjZXRUZW1wbGF0ZVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldFRlbXBsYXRlU2VydmljZShjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YSA9IGZ1bmN0aW9uIChmYWNldHMpIHtcclxuICAgICAgICAgICAgX3RoaXMuZGF0YSA9IGZhY2V0cztcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRhdGE7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbXBhcmVGbiA9IGZ1bmN0aW9uIChwcmV2LCBuZXh0KSB7XHJcbiAgICAgICAgICAgIGlmIChwcmV2Lm9yZGVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV4dC5vcmRlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJldi5vcmRlciAtIG5leHQub3JkZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbiA9IEZhY2V0TWFpbjtcclxuICAgIH1cclxuICAgIEZhY2V0VGVtcGxhdGVTZXJ2aWNlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGZhY2V0cykge1xyXG4gICAgICAgIHZhciBjb2xsYXBzZWQgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sbGFwc2VkO1xyXG4gICAgICAgIHZhciBmYXZvcml0ZXMgPSBmYWNldHMuZmlsdGVyKGZ1bmN0aW9uIChmKSB7IHJldHVybiBmLnBpbm5lZCAhPT0gdW5kZWZpbmVkICYmIGYucGlubmVkOyB9KTtcclxuICAgICAgICB2YXIgbm9uRmF2b3JpdGVzID0gZmFjZXRzLmZpbHRlcihmdW5jdGlvbiAoZikgeyByZXR1cm4gZi5waW5uZWQgPT09IHVuZGVmaW5lZCB8fCAhZi5waW5uZWQ7IH0pO1xyXG4gICAgICAgIGZhdm9yaXRlcy5zb3J0KHRoaXMuY29tcGFyZUZuKTtcclxuICAgICAgICBub25GYXZvcml0ZXMuc29ydCh0aGlzLmNvbXBhcmVGbik7XHJcbiAgICAgICAgdmFyIG5vT2ZGYWNldFRvU2hvdyA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5ub09mRmFjZXRUb1Nob3c7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRNYWluKHsgZmF2b3JpdGVzOiBmYXZvcml0ZXMsIG5vbkZhdm9yaXRlczogbm9uRmF2b3JpdGVzLCBub09mRmFjZXRUb1Nob3c6IG5vT2ZGYWNldFRvU2hvdyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmFjZXRUZW1wbGF0ZVNlcnZpY2U7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjZXRUZW1wbGF0ZVNlcnZpY2UgPSBGYWNldFRlbXBsYXRlU2VydmljZTtcclxuXG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9mYWNldC1tYWluLmhicyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgSGFuZGxlYmFycyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGhhbmRsZWJhcnMgKi8gMCk7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcIjFcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiICAgIDxkaXYgY2xhc3M9XFxcImZhY2V0LWJvZHkgZ3VpIGZsdWlkLWggb2YtaGlkZGVuIGd1aS1oaWRkZW5cXFwiPlwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9mYWNldC1ib2R5LmhicyAqLyA0KSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtYm9keVwiLFwiZGF0YVwiOmRhdGEsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIjwvZGl2PlxcblwiO1xufSxcIjNcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiICAgIDxkaXYgY2xhc3M9XFxcImZhY2V0LWJvZHkgZ3VpIGZsdWlkLWggb2YtaGlkZGVuXFxcIj5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvZmFjZXQtYm9keS5oYnMgKi8gNCksZGVwdGgwLHtcIm5hbWVcIjpcImZhY2V0LWJvZHlcIixcImRhdGFcIjpkYXRhLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L2Rpdj5cXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIjxkaXYgY2xhc3M9XFxcImd1aSBmbHVpZC1oIFxcXCI+XFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIucHJvZ3JhbSgzLCBkYXRhLCAwKSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L2Rpdj5cIjtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogMTYgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2ZhY2V0LXBpbm5lZC5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgSGFuZGxlYmFycyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGhhbmRsZWJhcnMgKi8gMCk7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcIjFcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIiBcIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYXZvcml0ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMiwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIik7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24sIGFsaWFzMz1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIlxcclxcbjxkaXYgY2xhc3M9XFxcIml0ZW0gZmFjZXQtaXRlbSBjb2xsYXBzZWQgZ3VpIG0tdC02XFxcIiBkYXRhLWF0dHItbmFtZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50XFxcIj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImZhY2V0LWl0ZW0taGVhZGVyIGZsdWlkIGd1aSBpdGVtIGZsZXggamMtc2JcXFwiPlxcclxcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMSBwcmltYXJ5IG0tMCBleHBhbnNpb24taWNvbiBjdXJzb3ItcG9pbnRlclxcXCIgdGFiaW5kZXg9XFxcIjBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIiBcIlxuICAgICsgKChzdGFjazEgPSBfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvU2VsZWN0ZWRGaWx0ZXJzQ291bnQudHMgKi8gNSkpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiU2VsZWN0ZWRGaWx0ZXJzQ291bnRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgPHNwYW4+XFxyXFxuICAgICAgICAgICAgICAgIDxpIGRhdGEtYXR0ci1pZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgcHJpbWFyeSBndWktaWNvbi11bnBpbiBtLXQtNSBtLXItMTAgdW5waW4taWNvbiBjdXJzb3ItcG9pbnRlclxcXCIgdGFiaW5kZXg9XFxcIjBcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tdXAgcHJpbWFyeSBleHBhbnNpb24taWNvbiBtLXQtNSBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjbGVhclxcXCI+PC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJkZXNjcmlwdGlvbiBndWkgZmFjZXQtaXRlbS1kZXNjcmlwdGlvbiBtLXQtMiBtLWwtNVxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3VpIGZsdWlkLXcgbS0wIHAtMFxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgzLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICAgICAgXCJcbiAgICArICgoc3RhY2sxID0gX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL1Nob3dNb3JlTGVzc0xpbmsudHMgKi8gNikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCksKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLm5vT2ZGYWNldFRvU2hvdyA6IGRlcHRoc1sxXSkse1wibmFtZVwiOlwiU2hvd01vcmVMZXNzTGlua1wiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiO1xufSxcIjNcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3VpIGl0ZW0gXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9DaGVja0xlbmd0aC50cyAqLyA3KSkuY2FsbChhbGlhczEsKGRhdGEgJiYgZGF0YS5pbmRleCksKGRlcHRoc1syXSAhPSBudWxsID8gZGVwdGhzWzJdLm5vT2ZGYWNldFRvU2hvdyA6IGRlcHRoc1syXSkse1wibmFtZVwiOlwiQ2hlY2tMZW5ndGhcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zZWxlY3RlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oNCwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLnByb2dyYW0oNiwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcblwiO1xufSxcIjRcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZGF0YS1hdHRyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIHRpdGxlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIoXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvdW50IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKVxcXCIgY2xhc3M9XFxcImd1aSBjdXJzb3ItcG9pbnRlciBuby13cmFwIHByaW1hcnkgdGV4dC1zaG9ydGVuIG0tMFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJndWkgZmFjZXQtdmFsdWUtY2hlY2tib3ggY3Vyc29yLXBvaW50ZXIgbS1sLTBcXFwiIGlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRhdGEgJiYgZGF0YS5pbmRleCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tlZC50cyAqLyAxKSkuY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnNlbGVjdGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDaGVja2VkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvRGlzYWJsZWQudHMgKi8gMikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5kaXNhYmxlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiRGlzYWJsZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgdHlwZT1cXFwiY2hlY2tib3hcXFwiIC8+IFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMSBtLTBcXFwiPihcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIpPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG5cIjtcbn0sXCI2XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24sIGFsaWFzMz1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGRhdGEtYXR0ci12YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiB0aXRsZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIilcXFwiIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgbm8td3JhcCB0ZXh0LXNob3J0ZW4gbS0wXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcImd1aSBmYWNldC12YWx1ZS1jaGVja2JveCBjdXJzb3ItcG9pbnRlciBtLWwtMFxcXCIgaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1cIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGF0YSAmJiBkYXRhLmluZGV4KSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9DaGVja2VkLnRzICovIDEpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuc2VsZWN0ZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkNoZWNrZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIiBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyAqLyAyKSkuY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmRpc2FibGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJEaXNhYmxlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiOlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiB0eXBlPVxcXCJjaGVja2JveFxcXCIgLz4gXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0xIG0tMFxcXCI+KFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIik8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxcclxcblwiO1xufSxcIjhcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIjxkaXYgY2xhc3M9XFxcImd1aSBtLXQtMTBcXFwiPlxcclxcbiAgICBcXHJcXG48L2Rpdj5cXHJcXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJndWkgbS1iLTUgbS10LTVcXFwiPlxcclxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTFcXFwiPlxcclxcbiAgICAgICAgUElOTkVEIEZJTFRFUlNcXHJcXG4gICAgPC9zcGFuPlxcclxcbjwvZGl2PlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmF2b3JpdGVzIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5sZW5ndGggOiBzdGFjazEpLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5wcm9ncmFtKDgsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpO1xufSxcInVzZURhdGFcIjp0cnVlLFwidXNlRGVwdGhzXCI6dHJ1ZX0pO1xuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2ZhY2V0LXVucGlubmVkLmhicyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWNvbnRhaW5lci5sYW1iZGE7XG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiaXRlbSBmYWNldC1pdGVtIGd1aSBtLXQtNiBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9Db2xsYXBzZWQudHMgKi8gMTgpKS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDb2xsYXBzZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCIgZGF0YS1hdHRyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIGRhdGEtYXR0ci1uYW1lPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnRcXFwiPlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtaXRlbS1oZWFkZXIgZmx1aWQgZ3VpIGl0ZW0gZmxleCBqYy1zYlxcXCI+XFxyXFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0xIHByaW1hcnkgbS0wIGV4cGFuc2lvbi1pY29uIGN1cnNvci1wb2ludGVyXFxcIiB0YWJpbmRleD1cXFwiMFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiIFwiXG4gICAgKyAoKHN0YWNrMSA9IF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9TZWxlY3RlZEZpbHRlcnNDb3VudC50cyAqLyA1KSkuY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhY2V0VmFsdWVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJTZWxlY3RlZEZpbHRlcnNDb3VudFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICA8c3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgPGkgZGF0YS1hdHRyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBwcmltYXJ5IGd1aS1pY29uLXBpbiBtLXQtNSBwaW4taWNvbiBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLWRvd24gcHJpbWFyeSBleHBhbnNpb24taWNvbiBtLXQtNSBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjbGVhclxcXCI+PC9kaXY+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJkZXNjcmlwdGlvbiBndWkgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvSGlkZGVuLnRzICovIDE5KSkuY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbGxhcHNlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiSGlkZGVuXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCIgZmFjZXQtaXRlbS1kZXNjcmlwdGlvbiBtLXQtMiBtLWwtNVxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3VpIGZsdWlkLXcgbS0wIHAtMFxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgyLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICAgICAgXCJcbiAgICArICgoc3RhY2sxID0gX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL1Nob3dNb3JlTGVzc0xpbmsudHMgKi8gNikpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCksKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLm5vT2ZGYWNldFRvU2hvdyA6IGRlcHRoc1sxXSkse1wibmFtZVwiOlwiU2hvd01vcmVMZXNzTGlua1wiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiO1xufSxcIjJcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3VpIGl0ZW0gXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9DaGVja0xlbmd0aC50cyAqLyA3KSkuY2FsbChhbGlhczEsKGRhdGEgJiYgZGF0YS5pbmRleCksKGRlcHRoc1syXSAhPSBudWxsID8gZGVwdGhzWzJdLm5vT2ZGYWNldFRvU2hvdyA6IGRlcHRoc1syXSkse1wibmFtZVwiOlwiQ2hlY2tMZW5ndGhcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zZWxlY3RlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLnByb2dyYW0oNSwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgICAgIDwvZGl2PlxcclxcblwiO1xufSxcIjNcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZGF0YS1hdHRyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIHRpdGxlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIoXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvdW50IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKVxcXCIgY2xhc3M9XFxcImd1aSBjdXJzb3ItcG9pbnRlciBuby13cmFwIHByaW1hcnkgdGV4dC1zaG9ydGVuIG0tMFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJndWkgZmFjZXQtdmFsdWUtY2hlY2tib3ggY3Vyc29yLXBvaW50ZXIgbS1sLTBcXFwiIGlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRhdGEgJiYgZGF0YS5pbmRleCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tlZC50cyAqLyAxKSkuY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnNlbGVjdGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDaGVja2VkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvRGlzYWJsZWQudHMgKi8gMikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5kaXNhYmxlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiRGlzYWJsZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgdHlwZT1cXFwiY2hlY2tib3hcXFwiIC8+IFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMSBtLTBcXFwiPihcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIpPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG5cIjtcbn0sXCI1XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24sIGFsaWFzMz1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGRhdGEtYXR0ci12YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiB0aXRsZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIilcXFwiIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgbm8td3JhcCB0ZXh0LXNob3J0ZW4gbS0wXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcImd1aSBmYWNldC12YWx1ZS1jaGVja2JveCBjdXJzb3ItcG9pbnRlciBtLWwtMFxcXCIgaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1cIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGF0YSAmJiBkYXRhLmluZGV4KSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9DaGVja2VkLnRzICovIDEpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuc2VsZWN0ZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkNoZWNrZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIiBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyAqLyAyKSkuY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmRpc2FibGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJEaXNhYmxlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiOlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiB0eXBlPVxcXCJjaGVja2JveFxcXCIgLz4gXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0xIG0tMFxcXCI+KFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIik8L3NwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8L2xhYmVsPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIjxkaXYgY2xhc3M9XFxcImd1aSBtLWItNSBtLXQtMTAgXFxcIj5cXHJcXG4gICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0xXFxcIj5cXHJcXG4gICAgICAgIEFMTCBGSUxURVJTXFxyXFxuICAgIDwvc3Bhbj5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5ub25GYXZvcml0ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIik7XG59LFwidXNlRGF0YVwiOnRydWUsXCJ1c2VEZXB0aHNcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogMTggKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9oZWxwZXJzL0NvbGxhcHNlZC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjb2xsYXBzZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBcIiBjb2xsYXBzZWQgXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gY29sbGFwc2VkO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxOSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2hlbHBlcnMvSGlkZGVuLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGhpZGRlbiA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiIGd1aS1oaWRkZW4gXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gaGlkZGVuO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyMCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9jb25maWcvRmFjZXRDb25maWdTdG9yZS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZhY2V0Q29uZmlnU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldENvbmZpZ1N0b3JlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdEZhY2V0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uVGltZTogMjAwLFxyXG4gICAgICAgICAgICBjb2xsYXBzZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBjb250YWluZXJFbGVtZW50OiBudWxsLFxyXG4gICAgICAgICAgICBub09mRmFjZXRUb1Nob3c6IDUsXHJcbiAgICAgICAgICAgIC8vIGZhY2V0czogW10sXHJcbiAgICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlOiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSwgYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25QaW5VbnBpbjogZnVuY3Rpb24gKGtleSwgcGluKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kT3B0aW9ucyA9IGZ1bmN0aW9uIChpbnB1dE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLm9wdGlvbnMgPSBqUXVlcnkuZXh0ZW5kKHt9LCBfdGhpcy5kZWZhdWx0RmFjZXRPcHRpb25zLCBpbnB1dE9wdGlvbnMpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5leHRlbmRPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIFByb3ZpZGUgYSB2YWxpZCBjb250YWluZXIgRWxlbWVudCBvYmplY3RcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZhY2V0Q29uZmlnU3RvcmUucHJvdG90eXBlLCBcIk9wdGlvbnNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5vcHRpb25zOyB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBGYWNldENvbmZpZ1N0b3JlO1xyXG59KCkpO1xyXG5leHBvcnRzLkZhY2V0Q29uZmlnU3RvcmUgPSBGYWNldENvbmZpZ1N0b3JlO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyMSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEV4cGFuZENvbGxhcHNlTWFuYWdlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9FeHBhbmRDb2xsYXBzZU1hbmFnZXIgKi8gOSk7XHJcbnZhciBTaG93SGlkZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9TaG93SGlkZSAqLyAzKTtcclxudmFyIEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlcihlbGVtZW50LCBjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgfVxyXG4gICAgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyLnByb3RvdHlwZS5SZWdpc3RlckRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5leHBhbmQtYWxsXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50LmZpbmQoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlcl8xLkV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGpRdWVyeShlbGVtZW50KSwgU2hvd0hpZGVfMS5TaG93SGlkZS5TaG93KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLmV4cGFuZC1hbGxcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMS5FeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihqUXVlcnkoZWxlbWVudCksIFNob3dIaWRlXzEuU2hvd0hpZGUuU2hvdyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5jb2xsYXBzZS1hbGxcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuZmluZChcIi5mYWNldC1pdGVtLWhlYWRlclwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXzEuRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoalF1ZXJ5KGVsZW1lbnQpLCBTaG93SGlkZV8xLlNob3dIaWRlLkhpZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuY29sbGFwc2UtYWxsXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuZmluZChcIi5mYWNldC1pdGVtLWhlYWRlclwiKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXzEuRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoalF1ZXJ5KGVsZW1lbnQpLCBTaG93SGlkZV8xLlNob3dIaWRlLkhpZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZmFjZXQtaXRlbS1oZWFkZXIgLmV4cGFuc2lvbi1pY29uXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciBoZWFkZXJFbGVtZW50ID0gdGFyZ2V0LnBhcmVudHMoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIik7XHJcbiAgICAgICAgICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlcl8xLkV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGhlYWRlckVsZW1lbnQsIFNob3dIaWRlXzEuU2hvd0hpZGUuVG9nZ2xlKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuZmFjZXQtaXRlbS1oZWFkZXIgLmV4cGFuc2lvbi1pY29uXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIGhlYWRlckVsZW1lbnQgPSB0YXJnZXQucGFyZW50cyhcIi5mYWNldC1pdGVtLWhlYWRlclwiKTtcclxuICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXzEuRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoaGVhZGVyRWxlbWVudCwgU2hvd0hpZGVfMS5TaG93SGlkZS5Ub2dnbGUpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5FeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIgPSBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDIyICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmFjZXRBY3Rpb25IYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQWN0aW9uVHlwZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUgKi8gMTApO1xyXG52YXIgRmFjZXRBY3Rpb25IYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmFjZXRBY3Rpb25IYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICB9XHJcbiAgICBGYWNldEFjdGlvbkhhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNoYW5nZVwiLCBcIi5mYWNldC1ib2R5IC5mYWNldC1pdGVtLWRlc2NyaXB0aW9uIC5mYWNldC12YWx1ZS1jaGVja2JveFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIHZhbFN0ciA9IGVsZW1lbnQudmFsKCkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsU3RyLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICAgICAgdmFyIGNoZWNrZWQgPSBlbGVtZW50LmlzKFwiOmNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpb24gPSBjaGVja2VkID8gRmlsdGVyQWN0aW9uVHlwZV8xLkZpbHRlckFjdGlvblR5cGUuQWRkIDogRmlsdGVyQWN0aW9uVHlwZV8xLkZpbHRlckFjdGlvblR5cGUuTWludXM7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25GaWx0ZXJDaGFuZ2UodmFsdWVbMF0sIHZhbHVlWzFdLCBhY3Rpb24sIHZhbHVlWzJdKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmFjZXRBY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH07XHJcbiAgICBGYWNldEFjdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGYWNldEFjdGlvbkhhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjZXRBY3Rpb25IYW5kbGVyID0gRmFjZXRBY3Rpb25IYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyMyAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0U2VhcmNoSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEV4cGFuZENvbGxhcHNlTWFuYWdlcl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9FeHBhbmRDb2xsYXBzZU1hbmFnZXIgKi8gOSk7XHJcbnZhciBTaG93SGlkZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9TaG93SGlkZSAqLyAzKTtcclxudmFyIEZhY2V0U2VhcmNoSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZhY2V0U2VhcmNoSGFuZGxlcihlbGVtZW50LCBjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTZWFyY2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIHZhbCA9IGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC52YWwoKVxyXG4gICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmZhY2V0LWxpc3QgLmZhY2V0LWl0ZW1cIilcclxuICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChpLCBlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmFjZXRJdGVtID0galF1ZXJ5KGUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGZhY2V0TmFtZU1hdGNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXRWYWx1ZUJsYW5rID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB2YWx1ZSBpcyBlbXB0eVxyXG4gICAgICAgICAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbCA9PT0gbnVsbCB8fCB2YWwudHJpbSgpID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRWYWx1ZUJsYW5rID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENvbXBhcmUgdmFsdWUgd2l0aCBmYWNldCBuYW1lXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlucHV0VmFsdWVCbGFuayAmJiBmYWNldEl0ZW0uYXR0cihcImRhdGEtYXR0ci1uYW1lXCIpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWwpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0TmFtZU1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlQmxhbmspIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LW1vcmUtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaW5kZXgsIHNod01vcmVFbGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqUXVlcnkoc2h3TW9yZUVsZW0pLmhhc0NsYXNzKFwiZ3VpLWhpZGRlblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHNod01vcmVFbGVtKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2h3TW9yZUVsZW0pLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnNob3ctbGVzcy1saW5rXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChpbmRleCwgc2hvd0xlc3NMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqUXVlcnkoc2hvd0xlc3NMaW5rKS5oYXNDbGFzcyhcImd1aS1oaWRkZW5cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShzaG93TGVzc0xpbmspLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShzaG93TGVzc0xpbmspLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIuc2hvdy1tb3JlLWxpbmtcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LWxlc3MtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB2YWx1ZXMgYWdhaW5zdCBjaGlsZCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIHZhciBmYWNldENoaWxkTWF0Y2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZhY2V0SXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwibGFiZWxcIilcclxuICAgICAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoaiwgbGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWxFbGVtID0galF1ZXJ5KGxhYmVsKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZXROYW1lTWF0Y2ggfHwgaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0VmFsdWVCbGFuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFyZW50KFwiLmV4dHJhLWZpbHRlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsVmFsdWUgPSBsYWJlbEVsZW0uYXR0cihcImRhdGEtYXR0ci12YWx1ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGFiZWxWYWx1ZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0Q2hpbGRNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTaG93IGhpZGUgRmFjZXQgSXRlbSBpdHNlbGZcclxuICAgICAgICAgICAgICAgIHZhciBoZWFkZXJFbG1lbnQgPSBmYWNldEl0ZW0uZmluZChcIi5mYWNldC1pdGVtLWhlYWRlclwiKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb2xsYXBzZWQgPSBmYWNldEl0ZW0uaGFzQ2xhc3MoXCJjb2xsYXBzZWRcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNvbGxhcHNlZCB8fCBmYWNldE5hbWVNYXRjaCB8fCBmYWNldENoaWxkTWF0Y2ggfHwgaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRJdGVtLmZhZGVJbihfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRJdGVtLmZhZGVPdXQoX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEV4cGFuZCBDb2xsYXBzZSBGYWNldFxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbGxhcHNlZCB8fCBmYWNldE5hbWVNYXRjaCB8fCBmYWNldENoaWxkTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMS5FeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihoZWFkZXJFbG1lbnQsIFNob3dIaWRlXzEuU2hvd0hpZGUuU2hvdyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMS5FeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihoZWFkZXJFbG1lbnQsIFNob3dIaWRlXzEuU2hvd0hpZGUuSGlkZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgRmFjZXRTZWFyY2hIYW5kbGVyLnByb3RvdHlwZS5SZWdpc3RlckRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJrZXl1cFwiLCBcIi5maWx0ZXItc2VhcmNoLWlucHV0XCIsIHRoaXMuaGFuZGxlU2VhcmNoKTtcclxuICAgIH07XHJcbiAgICBGYWNldFNlYXJjaEhhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIEZhY2V0U2VhcmNoSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZhY2V0U2VhcmNoSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5GYWNldFNlYXJjaEhhbmRsZXIgPSBGYWNldFNlYXJjaEhhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZpbHRlckFjdGlvbkhhbmRsZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQWN0aW9uVHlwZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUgKi8gMTApO1xyXG52YXIgRmlsdGVyQWN0aW9uSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpbHRlckFjdGlvbkhhbmRsZXIoZmlsdGVyRWxlbWVudCwgY29uZmlnU3RvcmUpIHtcclxuICAgICAgICB0aGlzLmZpbHRlckVsZW1lbnQgPSBmaWx0ZXJFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgIH1cclxuICAgIEZpbHRlckFjdGlvbkhhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmZhY2V0LXN1YmhlYWRlciAuZmFjZXQtbGFiZWxzIC5sYWJlbFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmlzKFwiLmxhYmVsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRzKFwiLmxhYmVsXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB2YWxTdHIgPSBlbGVtZW50LmF0dHIoXCJkYXRhLWZpbHRlci1lbnRyeVwiKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWxTdHIuc3BsaXQoXCI6XCIpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uRmlsdGVyQ2hhbmdlKHZhbHVlWzBdLCB2YWx1ZVsxXSwgRmlsdGVyQWN0aW9uVHlwZV8xLkZpbHRlckFjdGlvblR5cGUuTWludXMsIHZhbHVlWzJdKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZmFjZXQtc3ViaGVhZGVyIC5yZW1vdmUtYWxsXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uQWxsRmlsdGVyUmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZpbHRlckFjdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIEZpbHRlckFjdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWx0ZXJBY3Rpb25IYW5kbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkZpbHRlckFjdGlvbkhhbmRsZXIgPSBGaWx0ZXJBY3Rpb25IYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyNSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXIoZWxlbWVudCwgY29uZmlnU3RvcmUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuaGlkZS1mYWNldFwiLCBfdGhpcy5oaWRlRmFjZXQpO1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuc2hvdy1mYWNldFwiLCBfdGhpcy5zaG93RmFjZXQpO1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuaGlkZS1mYWNldFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90aGlzLmhpZGVGYWNldChldmVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuc2hvdy1mYWNldFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF90aGlzLnNob3dGYWNldChldmVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oaWRlRmFjZXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgJChcIi5mYWNldC1ib2R5XCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgJChcIi5mYWNldC1jb2xsYXBzZWQtYm9keVwiKS5mYWRlSW4oX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2xsYXBzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2hvd0ZhY2V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICQoXCIuZmFjZXQtY29sbGFwc2VkLWJvZHlcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKFwiLmZhY2V0LWJvZHlcIikuZmFkZUluKF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sbGFwc2VkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlci5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9O1xyXG4gICAgSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIHJldHVybiBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5IaWRlRmFjZXRTZWN0aW9uSGFuZGxlciA9IEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyNiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvUGluVW5waW5FdmVudEhhbmRsZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFBpblVucGluRXZlbnRIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUGluVW5waW5FdmVudEhhbmRsZXIoZWxlbWVudCwgY29uZmlnU3RvcmUsIHRlbXBsYXRlU2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlID0gdGVtcGxhdGVTZXJ2aWNlO1xyXG4gICAgfVxyXG4gICAgUGluVW5waW5FdmVudEhhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnBpbi1pY29uXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVQaW5VbnBpbihldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIudW5waW4taWNvblwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlUGluVW5waW4oZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5waW4taWNvblwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVQaW5VbnBpbihldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIudW5waW4taWNvblwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVQaW5VbnBpbihldmVudCwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFBpblVucGluRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH07XHJcbiAgICBQaW5VbnBpbkV2ZW50SGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9O1xyXG4gICAgUGluVW5waW5FdmVudEhhbmRsZXIucHJvdG90eXBlLmhhbmRsZVBpblVucGluID0gZnVuY3Rpb24gKGV2ZW50LCBwaW4pIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIHZhciBpZCA9IGVsZW1lbnQuYXR0cihcImRhdGEtYXR0ci1pZFwiKTtcclxuICAgICAgICB2YXIgZGF0YSA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmdldERhdGEoKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGRhdGFfMSA9IGRhdGE7IF9pIDwgZGF0YV8xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZmFjZXQgPSBkYXRhXzFbX2ldO1xyXG4gICAgICAgICAgICBpZiAoZmFjZXQuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICBmYWNldC5waW5uZWQgPSBwaW47XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZS5zZXREYXRhKGRhdGEpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5odG1sKHRoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZGF0YSkpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vblBpblVucGluKGlkLCBwaW4pO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBQaW5VbnBpbkV2ZW50SGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5QaW5VbnBpbkV2ZW50SGFuZGxlciA9IFBpblVucGluRXZlbnRIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyNyAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9TaG93TW9yZUxlc3NIYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFNob3dNb3JlTGVzc0hhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaG93TW9yZUxlc3NIYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICB9XHJcbiAgICBTaG93TW9yZUxlc3NIYW5kbGVyLnByb3RvdHlwZS5SZWdpc3RlckRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIFwiLnNob3ctbW9yZS1saW5rXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zaG93TW9yZUxlc3NGaWx0ZXJzKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIFwiLnNob3ctbGVzcy1saW5rXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zaG93TW9yZUxlc3NGaWx0ZXJzKGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJrZXl1cFwiLCBcIi5zaG93LW1vcmUtbGlua1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5zaG93TW9yZUxlc3NGaWx0ZXJzKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImtleXVwXCIsIFwiLnNob3ctbGVzcy1saW5rXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLnNob3dNb3JlTGVzc0ZpbHRlcnMoZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTaG93TW9yZUxlc3NIYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH07XHJcbiAgICBTaG93TW9yZUxlc3NIYW5kbGVyLnByb3RvdHlwZS5vbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH07XHJcbiAgICBTaG93TW9yZUxlc3NIYW5kbGVyLnByb3RvdHlwZS5zaG93TW9yZUxlc3NGaWx0ZXJzID0gZnVuY3Rpb24gKGV2ZW50LCBzaG93TW9yZSkge1xyXG4gICAgICAgIHZhciBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgaWYgKHNob3dNb3JlKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAuZmFkZUluKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2libGluZ3MoXCJhXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNob3coKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAucGFyZW50KClcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmV4dHJhLWZpbHRlclwiKVxyXG4gICAgICAgICAgICAgICAgLmZhZGVPdXQodGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAuc2libGluZ3MoXCJhXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNob3coKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaGlkZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNob3dNb3JlTGVzc0hhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuU2hvd01vcmVMZXNzSGFuZGxlciA9IFNob3dNb3JlTGVzc0hhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDI4ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL21haW4vRmlsdGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgSG90S2V5c0ZpbHRlcnNIYW5kbGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9ldmVudGhhbmRsZXJzL0hvdEtleXNGaWx0ZXJzSGFuZGxlciAqLyAyOSk7XHJcbnZhciBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NlcnZpY2VzL0ZpbHRlclRlbXBsYXRlU2VydmljZSAqLyAzMCk7XHJcbnZhciBGaWx0ZXJDb25maWdTdG9yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9jb25maWcvRmlsdGVyQ29uZmlnU3RvcmUgKi8gMzIpO1xyXG52YXIgZXZlbnRoYW5kbGVyc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9ldmVudGhhbmRsZXJzICovIDgpO1xyXG52YXIgRmlsdGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmlsdGVyKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluID0gW107XHJcbiAgICAgICAgdGhpcy5iaW5kID0gZnVuY3Rpb24gKGZpbHRlcnMpIHtcclxuICAgICAgICAgICAgdmFyIGZhY2V0U3ViSGVhZGVyID0gX3RoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZmlsdGVycyk7XHJcbiAgICAgICAgICAgIF90aGlzLmZpbHRlckVsZW1lbnQuaHRtbChmYWNldFN1YkhlYWRlcik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5maWx0ZXJFbGVtZW50ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZpbHRlckVsZW1lbnQub2ZmKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuaGFuZGxlckNoYWluLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChoYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgaGFuZGxlci5kZXJlZ2lzdGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLmRlcmVnaXN0ZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gbmV3IEZpbHRlckNvbmZpZ1N0b3JlXzEuRmlsdGVyQ29uZmlnU3RvcmUob3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJFbGVtZW50ID0galF1ZXJ5KG9wdGlvbnMuY29udGFpbmVyRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVNlcnZpY2UgPSBuZXcgRmlsdGVyVGVtcGxhdGVTZXJ2aWNlXzEuRmlsdGVyVGVtcGxhdGVTZXJ2aWNlKCk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgZXZlbnRoYW5kbGVyc18xLkZpbHRlckFjdGlvbkhhbmRsZXIodGhpcy5maWx0ZXJFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgSG90S2V5c0ZpbHRlcnNIYW5kbGVyXzEuSG90S2V5c0ZpbHRlcnNIYW5kbGVyKCkpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgaGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBGaWx0ZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmlsdGVyID0gRmlsdGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyOSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0hvdEtleXNGaWx0ZXJzSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEhvdEtleXNGaWx0ZXJzSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhvdEtleXNGaWx0ZXJzSGFuZGxlcigpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCBfdGhpcy5mb2N1c09uU2VhcmNoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90aGluZ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kZVJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9mZihcImtleWRvd25cIiwgX3RoaXMuZm9jdXNPblNlYXJjaCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmZvY3VzT25TZWFyY2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXkgPT09IFwiclwiKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KFwiLmZhY2V0LXN1YmhlYWRlciAucmVtb3ZlLWFsbFwiKS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBIb3RLZXlzRmlsdGVyc0hhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSG90S2V5c0ZpbHRlcnNIYW5kbGVyID0gSG90S2V5c0ZpbHRlcnNIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzMCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvc2VydmljZXMvRmlsdGVyVGVtcGxhdGVTZXJ2aWNlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZhY2V0U3ViSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi8uLi9oYnMvZmFjZXQtYXBwbGllZC1maWx0ZXJzLmhicyAqLyAzMSk7XHJcbnZhciBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UoKSB7XHJcbiAgICAgICAgdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlciA9IEZhY2V0U3ViSGVhZGVyO1xyXG4gICAgfVxyXG4gICAgRmlsdGVyVGVtcGxhdGVTZXJ2aWNlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGZpbHRlcnMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlcih7IGZpbHRlcnM6IGZpbHRlcnMgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpbHRlclRlbXBsYXRlU2VydmljZTtcclxufSgpKTtcclxuZXhwb3J0cy5GaWx0ZXJUZW1wbGF0ZVNlcnZpY2UgPSBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2U7XHJcblxuXG4vKioqLyB9KSxcbi8qIDMxICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9mYWNldC1hcHBsaWVkLWZpbHRlcnMuaGJzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJjb250ZW50IGZhY2V0LXN1YmhlYWRlciBndWkgZmx1aWQtdyBiYXNpYyBjdXJ2ZWQgcC01XFxcIj5cXG4gICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0yIGNhcHNcXFwiPkFwcGxpZWQgRmlsdGVyczwvc3Bhbj5cXG4gICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIG0tbC01IHJlbW92ZS1hbGxcXFwiID5cXG4gICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jYW5jZWxcXFwiPjwvaT5cXG4gICAgICAgIDxzcGFuPkNsZWFyIEFsbDwvc3Bhbj5cXG4gICAgPC9idXR0b24+XFxuICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgbS1sLTEwXFxcIj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5maWx0ZXJzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDIsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICA8L3NwYW4+XFxuPC9kaXY+XFxuXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazEsIGhlbHBlciwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG0tci01XFxcIj5cXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGxhcmdlIGxhYmVscyBmYWNldC1sYWJlbHNcXFwiPlxcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTFcXFwiPlwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbigoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLm5hbWUgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogaGVscGVycy5oZWxwZXJNaXNzaW5nKSwodHlwZW9mIGhlbHBlciA9PT0gXCJmdW5jdGlvblwiID8gaGVscGVyLmNhbGwoYWxpYXMxLHtcIm5hbWVcIjpcIm5hbWVcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiPC9zcGFuPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFJhbmdlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSg1LCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICA8L3NwYW4+XFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBoZWxwZXIsIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBtLTAgbS10LTIgbS1yLTIgcC00IGxhYmVsIGN1cnNvci1wb2ludGVyIHN0cmlrZXRocm91Z2gtaG92ZXJcXFwiIGRhdGEtZmlsdGVyLWVudHJ5PVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiOlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5sYWJlbCB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogaGVscGVycy5oZWxwZXJNaXNzaW5nKSwodHlwZW9mIGhlbHBlciA9PT0gXCJmdW5jdGlvblwiID8gaGVscGVyLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSx7XCJuYW1lXCI6XCJsYWJlbFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jYW5jZWxcXFwiPjwvaT5cXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XFxuXCI7XG59LFwiNVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBoZWxwZXIsIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24sIGFsaWFzMz1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLCBhbGlhczQ9aGVscGVycy5oZWxwZXJNaXNzaW5nLCBhbGlhczU9XCJmdW5jdGlvblwiO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJndWkgbS0wIG0tdC0yIG0tci0yIHAtNCBsYWJlbCBjdXJzb3ItcG9pbnRlciBzdHJpa2V0aHJvdWdoLWhvdmVyXFxcIiBkYXRhLWZpbHRlci1lbnRyeT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMubWluIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5taW4gOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogYWxpYXM0KSwodHlwZW9mIGhlbHBlciA9PT0gYWxpYXM1ID8gaGVscGVyLmNhbGwoYWxpYXMzLHtcIm5hbWVcIjpcIm1pblwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCIgLSBcIlxuICAgICsgYWxpYXMyKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMubWF4IHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5tYXggOiBkZXB0aDApKSAhPSBudWxsID8gaGVscGVyIDogYWxpYXM0KSwodHlwZW9mIGhlbHBlciA9PT0gYWxpYXM1ID8gaGVscGVyLmNhbGwoYWxpYXMzLHtcIm5hbWVcIjpcIm1heFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSA6IGhlbHBlcikpKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jYW5jZWxcXFwiPjwvaT5cXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5maWx0ZXJzIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5sZW5ndGggOiBzdGFjazEpLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpO1xufSxcInVzZURhdGFcIjp0cnVlLFwidXNlRGVwdGhzXCI6dHJ1ZX0pO1xuXG4vKioqLyB9KSxcbi8qIDMyICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9jb25maWcvRmlsdGVyQ29uZmlnU3RvcmUudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQ29uZmlnU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWx0ZXJDb25maWdTdG9yZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmRlZmF1bHRmaWx0ZXJPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBhbmltYXRpb25UaW1lOiAyMDAsXHJcbiAgICAgICAgICAgIGNvbnRhaW5lckVsZW1lbnQ6IG51bGwsXHJcbiAgICAgICAgICAgIG9uQWxsRmlsdGVyUmVtb3ZlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25GaWx0ZXJDaGFuZ2U6IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5leHRlbmRPcHRpb25zID0gZnVuY3Rpb24gKGlucHV0T3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gKF90aGlzLm9wdGlvbnMgPSBqUXVlcnkuZXh0ZW5kKHt9LCBfdGhpcy5kZWZhdWx0ZmlsdGVyT3B0aW9ucywgaW5wdXRPcHRpb25zKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmV4dGVuZE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY29udGFpbmVyRWxlbWVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgUHJvdmlkZSBhIHZhbGlkIGNvbnRhaW5lciBFbGVtZW50IG9iamVjdCBmb3IgZmlsdGVyc1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmlsdGVyQ29uZmlnU3RvcmUucHJvdG90eXBlLCBcIk9wdGlvbnNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEZpbHRlckNvbmZpZ1N0b3JlO1xyXG59KCkpO1xyXG5leHBvcnRzLkZpbHRlckNvbmZpZ1N0b3JlID0gRmlsdGVyQ29uZmlnU3RvcmU7XHJcblxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG59KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gZmFjZXRvby5taW4uanMiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxMSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgZmZiZWMyZDJmYmVlMzVjZGI2MzAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMF9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIkhhbmRsZWJhcnNcIixcImFtZFwiOlwiaGFuZGxlYmFycy5ydW50aW1lXCIsXCJjb21tb25qczJcIjpcImhhbmRsZWJhcnMvcnVudGltZVwiLFwiY29tbW9uanNcIjpcImhhbmRsZWJhcnMvcnVudGltZVwifVxuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImNvbnN0IGNoZWNrZWQgPSAoYm9vbDogYm9vbGVhbik6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gYm9vbCA/IFwiY2hlY2tlZFwiIDogXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNoZWNrZWQ7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tlZC50cyIsImNvbnN0IGRpc2FibGVkID0gKGJvb2w6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xyXG4gICAgcmV0dXJuIGJvb2wgPyBcImRpc2FibGVkXCIgOiBcIlwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZGlzYWJsZWQ7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvRGlzYWJsZWQudHMiLCJleHBvcnQgZW51bSBTaG93SGlkZSB7XHJcbiAgICBTaG93LFxyXG4gICAgSGlkZSxcclxuICAgIFRvZ2dsZSxcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvU2hvd0hpZGUudHMiLCJ2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIjxkaXYgY2xhc3M9XFxcImd1aSBvZi1oaWRkZW4gbWluLXctNTAgdy1hdXRvIGZsdWlkLWggZmxleCBjb2x1bW4gY29udGFpbmVyXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZ3VpIGgtYXV0byBmbGV4IG0tdC0xMFxcXCI+XFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgZ3VpLXN1YmhlYWRpbmctMSBtLTAgZXhwYW5kLWFsbFxcXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aS1pY29uIHNwZWNpYWwgcm90YXRlLXJpZ2h0IGd1aS1pY29uLWNoZXZkb3VibGVcXFwiPjwvaT5cXG4gICAgICAgICAgICBFeHBhbmQgQWxsXFxuICAgICAgICA8L2J1dHRvbj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImd1aSBtLXItNSBtLWwtNVxcXCI+PC9kaXY+XFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgZ3VpLXN1YmhlYWRpbmctMSBtLTAgY29sbGFwc2UtYWxsXFxcIj5cXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gc3BlY2lhbCByb3RhdGUtcmlnaHQgZ3VpLWljb24tY2hldmRvdWJsZVxcXCI+PC9pPlxcbiAgICAgICAgICAgIENvbGxhcHNlIEFsbFxcbiAgICAgICAgPC9idXR0b24+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJndWkgaW5wdXQgZmx1aWQtdyBwLXQtNSBwLXItNSBwLWItNSBwLWwtMSBtLXQtMTBcXFwiPlxcbiAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJndWkgaW5wdXQgcC01IGgtMzAgZmx1aWQtdyBndWktc3ViaGVhZGluZy0yIGZpbHRlci1zZWFyY2gtaW5wdXRcXFwiIHBsYWNlaG9sZGVyPVxcXCJTZWFyY2ggRmlsdGVyc1xcXCIgLz5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImd1aSBmbHVpZC1oIGZhY2V0LWxpc3Qgb2YtYXV0byBtLXQtMTBcXFwiPlxcbiAgICAgICAgXCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGZhY2V0LXBpbm5lZC5oYnNcIiksZGVwdGgwLHtcIm5hbWVcIjpcImZhY2V0LXBpbm5lZFwiLFwiZGF0YVwiOmRhdGEsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiBcIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcZmFjZXQtdW5waW5uZWQuaGJzXCIpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC11bnBpbm5lZFwiLFwiZGF0YVwiOmRhdGEsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcbiAgICA8L2Rpdj5cXG5cXG48L2Rpdj5cIjtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGJzL2ZhY2V0LWJvZHkuaGJzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiaW1wb3J0IHsgSUZhY2V0VmFsdWUgfSBmcm9tIFwiLi4vLi4vLi4vaW5kZXhcIjtcclxuXHJcbmNvbnN0IHNlbGVjdGVkRmlsdGVyc0NvdW50ID0gKGZhY2V0VmFsdWVzOiBJRmFjZXRWYWx1ZVtdKTogc3RyaW5nID0+IHtcclxuICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICBpZiAoZmFjZXRWYWx1ZXMgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICYmIGZhY2V0VmFsdWVzICE9PSBudWxsXHJcbiAgICAgICAgJiYgZmFjZXRWYWx1ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGZhY2V0VmFsdWUgb2YgZmFjZXRWYWx1ZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmYWNldFZhbHVlLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluZGV4ID09PSAwID8gXCJcIiA6IFwiPHNwYW4gY2xhc3M9XFxcImd1aS1ib2R5LTJcXFwiPihcIiArIGluZGV4ICsgXCIpPC9zcGFuPlwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgc2VsZWN0ZWRGaWx0ZXJzQ291bnQ7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvU2VsZWN0ZWRGaWx0ZXJzQ291bnQudHMiLCJjb25zdCBTaG93TW9yZUxlc3NMaW5rID0gKGluZGV4LCB2Miwgb3B0aW9ucyk6IHN0cmluZyA9PiB7XHJcbiAgICBpZiAoaW5kZXgubGVuZ3RoID4gdjIpIHtcclxuICAgICAgICByZXR1cm4gXCI8YSB0YWJpbmRleD1cXFwiMFxcXCIgY2xhc3M9XFxcImd1aSBzaW1wbGUgc2hvdy1tb3JlLWxpbmsgY3Vyc29yLXBvaW50ZXIgcC0wIG0tdC0zXFxcIj5TaG93IFwiXHJcbiAgICAgICAgICAgICAgKyAoaW5kZXgubGVuZ3RoIC0gdjIpXHJcbiAgICAgICAgICAgICAgKyBcIiBNb3JlIDwvYT5cIlxyXG4gICAgICAgICAgICAgICsgXCI8YSB0YWJpbmRleD1cXFwiMFxcXCIgY2xhc3M9XFxcImd1aSBzaW1wbGUgc2hvdy1sZXNzLWxpbmsgY3Vyc29yLXBvaW50ZXIgZ3VpLWhpZGRlbiBwLTAgbS10LTNcXFwiPlwiXHJcbiAgICAgICAgICAgICAgKyBcIlNob3cgTGVzczwvYT5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTaG93TW9yZUxlc3NMaW5rO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL1Nob3dNb3JlTGVzc0xpbmsudHMiLCJjb25zdCBjaGVja0xlbmd0aCA9IChpbmRleCwgdjIpOiBzdHJpbmcgPT4ge1xyXG4gICAgaWYgKGluZGV4ICE9PSB1bmRlZmluZWQgJiYgaW5kZXggKyAxID4gdjIpIHtcclxuICAgICAgICByZXR1cm4gXCJndWktaGlkZGVuIGV4dHJhLWZpbHRlclwiO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFwiXCI7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjaGVja0xlbmd0aDtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9oYnMvaGVscGVycy9DaGVja0xlbmd0aC50cyIsImV4cG9ydCAqIGZyb20gXCIuL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlclwiO1xyXG5leHBvcnQgKiBmcm9tICBcIi4vRmFjZXRBY3Rpb25IYW5kbGVyXCI7XHJcbmV4cG9ydCAqIGZyb20gIFwiLi9GYWNldFNlYXJjaEhhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSAgXCIuL0ZpbHRlckFjdGlvbkhhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSAgXCIuL0hpZGVGYWNldFNlY3Rpb25IYW5kbGVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vUGluVW5waW5FdmVudEhhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vU2hvd01vcmVMZXNzSGFuZGxlclwiO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvaW5kZXgudHMiLCJpbXBvcnQgeyBTaG93SGlkZSB9IGZyb20gXCIuL1Nob3dIaWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIENvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIgPSAoaGVhZGVyRWxlbWVudDogSlF1ZXJ5LCBzaG93SGlkZTogU2hvd0hpZGUpID0+IHtcclxuICAgICAgICBjb25zdCBpY29uRWxlbWVudCA9IGhlYWRlckVsZW1lbnQuY2hpbGRyZW4oXCJzcGFuXCIpLmNoaWxkcmVuKFwiLmV4cGFuc2lvbi1pY29uXCIpIDtcclxuICAgICAgICBjb25zdCBjdXJyZW50bHlWaXNpYmxlID0gaWNvbkVsZW1lbnQuaGFzQ2xhc3MoXCJndWktaWNvbi1jaGV2cm9uLXVwXCIpO1xyXG4gICAgICAgIGlmIChTaG93SGlkZS5Ub2dnbGUgIT09IHNob3dIaWRlICYmICgoY3VycmVudGx5VmlzaWJsZSAmJiBzaG93SGlkZSA9PT0gU2hvd0hpZGUuU2hvdykgfHxcclxuICAgICAgICAgICAgKCFjdXJyZW50bHlWaXNpYmxlICYmIHNob3dIaWRlID09PSBTaG93SGlkZS5IaWRlKSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWN1cnJlbnRseVZpc2libGUpIHtcclxuICAgICAgICAgICAgaGVhZGVyRWxlbWVudC5wYXJlbnRzKFwiLmZhY2V0LWl0ZW1cIikuZmluZChcIi5mYWNldC1pdGVtLWRlc2NyaXB0aW9uXCIpLnNsaWRlRG93bigyMDApO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5yZW1vdmVDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tZG93blwiKTtcclxuICAgICAgICAgICAgaWNvbkVsZW1lbnQuYWRkQ2xhc3MoXCJndWktaWNvbi1jaGV2cm9uLXVwXCIpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGhlYWRlckVsZW1lbnQucGFyZW50cyhcIi5mYWNldC1pdGVtXCIpLmZpbmQoXCIuZmFjZXQtaXRlbS1kZXNjcmlwdGlvblwiKS5zbGlkZVVwKDIwMCk7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICAgICAgaWNvbkVsZW1lbnQuYWRkQ2xhc3MoXCJndWktaWNvbi1jaGV2cm9uLWRvd25cIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLnRzIiwiZXhwb3J0IGVudW0gRmlsdGVyQWN0aW9uVHlwZSB7XG4gICAgQWRkID0gXCJBZGRcIixcbiAgICBNaW51cyA9IFwiTWludXNcIixcbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUudHMiLCJleHBvcnQgKiBmcm9tIFwiLi9GYWNldFwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9GaWx0ZXJcIjtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9tYWluL0VudHJ5LnRzIiwiaW1wb3J0IHsgSG90S2V5c0ZhY2V0SGFuZGxlciB9IGZyb20gXCIuLi9ldmVudGhhbmRsZXJzL0hvdEtleXNGYWNldEhhbmRsZXJcIjtcbmltcG9ydCB7IElGYWNldCB9IGZyb20gXCIuLi9tb2RlbHMvSUZhY2V0XCI7XG5pbXBvcnQgeyBJRmFjZXRWYWx1ZSB9IGZyb20gXCIuLi9tb2RlbHMvSUZhY2V0VmFsdWVcIjtcbmltcG9ydCB7IEZhY2V0VGVtcGxhdGVTZXJ2aWNlIH0gZnJvbSBcIi4uL3NlcnZpY2VzL0ZhY2V0VGVtcGxhdGVTZXJ2aWNlXCI7XG5pbXBvcnQgeyBJRmFjZXRUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvSUZhY2V0VGVtcGxhdGVTZXJ2aWNlXCI7XG5pbXBvcnQgeyBGYWNldENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcbmltcG9ydCB7IElGYWNldE9wdGlvbnMgfSBmcm9tIFwiLi8uLi9jb25maWcvSUZhY2V0T3B0aW9uc1wiO1xuaW1wb3J0IHsgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyICwgRmFjZXRBY3Rpb25IYW5kbGVyLCBGYWNldFNlYXJjaEhhbmRsZXIsXG4gICAgICAgICBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlciwgSUV2ZW50SGFuZGxlciwgUGluVW5waW5FdmVudEhhbmRsZXIsIFNob3dNb3JlTGVzc0hhbmRsZXIgfSBmcm9tIFwiLi8uLi9ldmVudGhhbmRsZXJzXCI7XG5cbmV4cG9ydCBjbGFzcyBGYWNldCB7XG4gICAgcHJpdmF0ZSBjb25maWdTdG9yZTogRmFjZXRDb25maWdTdG9yZTtcbiAgICBwcml2YXRlIHRlbXBsYXRlU2VydmljZTogSUZhY2V0VGVtcGxhdGVTZXJ2aWNlO1xuICAgIHByaXZhdGUgZmFjZXRFbGVtZW50OiBKUXVlcnk7XG4gICAgcHJpdmF0ZSBoYW5kbGVyQ2hhaW46IElFdmVudEhhbmRsZXJbXSA9IFtdO1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElGYWNldE9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9ICBuZXcgRmFjZXRDb25maWdTdG9yZShvcHRpb25zKTtcbiAgICAgICAgdGhpcy5mYWNldEVsZW1lbnQgPSBqUXVlcnkob3B0aW9ucy5jb250YWluZXJFbGVtZW50KTtcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVNlcnZpY2UgPSBuZXcgRmFjZXRUZW1wbGF0ZVNlcnZpY2UodGhpcy5jb25maWdTdG9yZSk7XG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBGYWNldEFjdGlvbkhhbmRsZXIodGhpcy5mYWNldEVsZW1lbnQsIHRoaXMuY29uZmlnU3RvcmUpKTtcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRmFjZXRTZWFyY2hIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEhvdEtleXNGYWNldEhhbmRsZXIoKSk7XG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IFBpblVucGluRXZlbnRIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlLCB0aGlzLnRlbXBsYXRlU2VydmljZSkpO1xuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBTaG93TW9yZUxlc3NIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLmZvckVhY2goKGhhbmRsZXIpID0+IHtcbiAgICAgICAgICAgIGhhbmRsZXIuUmVnaXN0ZXJEb21IYW5kbGVyKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgYmluZCA9ICAoZmFjZXRzOiBJRmFjZXRbXSk6IHZvaWQgPT4ge1xuICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZS5zZXREYXRhKGZhY2V0cyk7XG4gICAgICAgIGNvbnN0IGZ1bGxGYWNldCA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZmFjZXRzKTtcbiAgICAgICAgdGhpcy5mYWNldEVsZW1lbnQuaHRtbChmdWxsRmFjZXQpO1xuICAgIH1cbiAgICBwdWJsaWMgaGlkZSA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5mYWNldEVsZW1lbnQuZmluZChcIi5mYWNldC1ib2R5XCIpLmZhZGVPdXQodGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sbGFwc2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgcHVibGljIHNob3cgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuZmFjZXRFbGVtZW50LmZpbmQoXCIuZmFjZXQtYm9keVwiKS5mYWRlSW4odGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sbGFwc2VkID0gZmFsc2U7XG4gICAgfVxuICAgIHB1YmxpYyBkZXN0cm95ID0gICgpOiB2b2lkID0+IHtcbiAgICAgICAgaWYgKCB0aGlzLmZhY2V0RWxlbWVudCAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgdGhpcy5mYWNldEVsZW1lbnQub2ZmKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAgICAgaWYgKGhhbmRsZXIgIT09IHVuZGVmaW5lZCAmJiBoYW5kbGVyLmRlcmVnaXN0ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIuZGVyZWdpc3RlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL21haW4vRmFjZXQudHMiLCJpbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5jbGFzcyBIb3RLZXlzRmFjZXRIYW5kbGVyIGltcGxlbWVudHMgSUV2ZW50SGFuZGxlciB7XHJcblxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlciA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCB0aGlzLmZvY3VzT25TZWFyY2gpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uUmVzaXplID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayA9IChldmVudDogYW55KTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZ1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBkZVJlZ2lzdGVyID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGpRdWVyeShkb2N1bWVudCkub2ZmKFwia2V5ZG93blwiLCB0aGlzLmZvY3VzT25TZWFyY2gpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZm9jdXNPblNlYXJjaCA9IChldmVudCkgPT4ge1xyXG4gICAgICAgIGlmIChldmVudC5hbHRLZXkgICYmICBldmVudC5rZXkgPT09IFwiZlwiKSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGpRdWVyeShcIi5maWx0ZXItc2VhcmNoLWlucHV0XCIpLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0hvdEtleXNGYWNldEhhbmRsZXJ9O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvSG90S2V5c0ZhY2V0SGFuZGxlci50cyIsImltcG9ydCAqIGFzIEhhbmRsZWJhcnMgZnJvbSBcImhhbmRsZWJhcnNcIjtcbmltcG9ydCB7IElGYWNldCB9IGZyb20gXCIuLi9tb2RlbHMvSUZhY2V0XCI7XG5pbXBvcnQgKiBhcyBGYWNldE1haW4gZnJvbSBcIi4vLi4vLi4vaGJzL2ZhY2V0LW1haW4uaGJzXCI7XG5pbXBvcnQgeyBGYWNldENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcbmltcG9ydCB7IElGYWNldFRlbXBsYXRlU2VydmljZSB9IGZyb20gXCIuL0lGYWNldFRlbXBsYXRlU2VydmljZVwiO1xuXG5leHBvcnQgY2xhc3MgRmFjZXRUZW1wbGF0ZVNlcnZpY2UgaW1wbGVtZW50cyBJRmFjZXRUZW1wbGF0ZVNlcnZpY2Uge1xuICBwcml2YXRlIGRhdGE6IElGYWNldFtdO1xuICBwcml2YXRlIHRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbjogYW55O1xuICBwcml2YXRlIHRlbXBhdGVGdW5jdGlvbkZvckZhY2V0SGVhZGVyOiBhbnk7XG4gIHByaXZhdGUgdGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRTdWJIZWFkZXI6IGFueTtcbiAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEJvZHk6IGFueTtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWdTdG9yZTogRmFjZXRDb25maWdTdG9yZSkge1xuICAgIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRNYWluID0gRmFjZXRNYWluO1xuICB9XG4gIHB1YmxpYyBiaW5kKGZhY2V0czogSUZhY2V0W10pOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbGxhcHNlZDogYm9vbGVhbiA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2xsYXBzZWQ7XG4gICAgY29uc3QgZmF2b3JpdGVzID0gZmFjZXRzLmZpbHRlciggKGYpID0+IGYucGlubmVkICE9PSB1bmRlZmluZWQgJiYgZi5waW5uZWQpO1xuICAgIGNvbnN0IG5vbkZhdm9yaXRlcyA9IGZhY2V0cy5maWx0ZXIoIChmKSA9PiBmLnBpbm5lZCA9PT0gdW5kZWZpbmVkIHx8ICFmLnBpbm5lZCk7XG4gICAgZmF2b3JpdGVzLnNvcnQodGhpcy5jb21wYXJlRm4pO1xuICAgIG5vbkZhdm9yaXRlcy5zb3J0KHRoaXMuY29tcGFyZUZuKTtcbiAgICBjb25zdCBub09mRmFjZXRUb1Nob3cgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMubm9PZkZhY2V0VG9TaG93O1xuICAgIHJldHVybiB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbih7IGZhdm9yaXRlcywgbm9uRmF2b3JpdGVzLCBub09mRmFjZXRUb1Nob3cgfSk7XG4gIH1cbiAgcHVibGljIHNldERhdGEgPSAoZmFjZXRzOiBJRmFjZXRbXSk6IHZvaWQgPT4ge1xuICAgIHRoaXMuZGF0YSA9IGZhY2V0cztcbiAgfVxuICBwdWJsaWMgZ2V0RGF0YSA9ICgpOiBJRmFjZXRbXSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YTtcbiAgfVxuICBwcml2YXRlIGNvbXBhcmVGbiA9IChwcmV2OiBJRmFjZXQsIG5leHQ6IElGYWNldCkgPT4ge1xuICAgIGlmICggcHJldi5vcmRlciA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpZiAoIG5leHQub3JkZXIgPT09IHVuZGVmaW5lZCApIHtcbiAgICAgIHJldHVybiAxO1xuICAgIH1cbiAgICByZXR1cm4gcHJldi5vcmRlciAtIG5leHQub3JkZXI7XG4gIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvc2VydmljZXMvRmFjZXRUZW1wbGF0ZVNlcnZpY2UudHMiLCJ2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIiAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1ib2R5IGd1aSBmbHVpZC1oIG9mLWhpZGRlbiBndWktaGlkZGVuXFxcIj5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcZmFjZXQtYm9keS5oYnNcIiksZGVwdGgwLHtcIm5hbWVcIjpcImZhY2V0LWJvZHlcIixcImRhdGFcIjpkYXRhLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L2Rpdj5cXG5cIjtcbn0sXCIzXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIiAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1ib2R5IGd1aSBmbHVpZC1oIG9mLWhpZGRlblxcXCI+XCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGZhY2V0LWJvZHkuaGJzXCIpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC1ib2R5XCIsXCJkYXRhXCI6ZGF0YSxcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC9kaXY+XFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJndWkgZmx1aWQtaCBcXFwiPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbGxhcHNlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCksXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC9kaXY+XCI7XG59LFwidXNlUGFydGlhbFwiOnRydWUsXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2hicy9mYWNldC1tYWluLmhic1xuLy8gbW9kdWxlIGlkID0gMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCIgXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmF2b3JpdGVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDIsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpO1xufSxcIjJcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uLCBhbGlhczM9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCJcXHJcXG48ZGl2IGNsYXNzPVxcXCJpdGVtIGZhY2V0LWl0ZW0gY29sbGFwc2VkIGd1aSBtLXQtNlxcXCIgZGF0YS1hdHRyLW5hbWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGVudFxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1pdGVtLWhlYWRlciBmbHVpZCBndWkgaXRlbSBmbGV4IGpjLXNiXFxcIj5cXHJcXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTEgcHJpbWFyeSBtLTAgZXhwYW5zaW9uLWljb24gY3Vyc29yLXBvaW50ZXJcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgXCJcbiAgICArICgoc3RhY2sxID0gX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXFNlbGVjdGVkRmlsdGVyc0NvdW50LnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcIlNlbGVjdGVkRmlsdGVyc0NvdW50XCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgIDxzcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8aSBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIHByaW1hcnkgZ3VpLWljb24tdW5waW4gbS10LTUgbS1yLTEwIHVucGluLWljb24gY3Vyc29yLXBvaW50ZXJcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj48L2k+XFxyXFxuICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLXVwIHByaW1hcnkgZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIiB0YWJpbmRleD1cXFwiMFxcXCI+PC9pPlxcclxcbiAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiY2xlYXJcXFwiPjwvZGl2PlxcclxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZGVzY3JpcHRpb24gZ3VpIGZhY2V0LWl0ZW0tZGVzY3JpcHRpb24gbS10LTIgbS1sLTVcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImd1aSBmbHVpZC13IG0tMCBwLTBcXFwiPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgICAgIFwiXG4gICAgKyAoKHN0YWNrMSA9IF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxTaG93TW9yZUxlc3NMaW5rLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5ub09mRmFjZXRUb1Nob3cgOiBkZXB0aHNbMV0pLHtcIm5hbWVcIjpcIlNob3dNb3JlTGVzc0xpbmtcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIjtcbn0sXCIzXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImd1aSBpdGVtIFwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ2hlY2tMZW5ndGgudHNcIikpLmNhbGwoYWxpYXMxLChkYXRhICYmIGRhdGEuaW5kZXgpLChkZXB0aHNbMl0gIT0gbnVsbCA/IGRlcHRoc1syXS5ub09mRmFjZXRUb1Nob3cgOiBkZXB0aHNbMl0pLHtcIm5hbWVcIjpcIkNoZWNrTGVuZ3RoXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXFwiPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuc2VsZWN0ZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDQsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5wcm9ncmFtKDYsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG5cIjtcbn0sXCI0XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24sIGFsaWFzMz1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGRhdGEtYXR0ci12YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiB0aXRsZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIilcXFwiIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgbm8td3JhcCBwcmltYXJ5IHRleHQtc2hvcnRlbiBtLTBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiZ3VpIGZhY2V0LXZhbHVlLWNoZWNrYm94IGN1cnNvci1wb2ludGVyIG0tbC0wXFxcIiBpZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLVwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkYXRhICYmIGRhdGEuaW5kZXgpLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXENoZWNrZWQudHNcIikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zZWxlY3RlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiQ2hlY2tlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXERpc2FibGVkLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZGlzYWJsZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkRpc2FibGVkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5pZCA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCI6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIHR5cGU9XFxcImNoZWNrYm94XFxcIiAvPiBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTEgbS0wXFxcIj4oXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvdW50IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuXCI7XG59LFwiNlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uLCBhbGlhczM9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBkYXRhLWF0dHItdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgdGl0bGU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIihcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIpXFxcIiBjbGFzcz1cXFwiZ3VpIGN1cnNvci1wb2ludGVyIG5vLXdyYXAgdGV4dC1zaG9ydGVuIG0tMFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJndWkgZmFjZXQtdmFsdWUtY2hlY2tib3ggY3Vyc29yLXBvaW50ZXIgbS1sLTBcXFwiIGlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRhdGEgJiYgZGF0YS5pbmRleCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ2hlY2tlZC50c1wiKSkuY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnNlbGVjdGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDaGVja2VkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcRGlzYWJsZWQudHNcIikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5kaXNhYmxlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiRGlzYWJsZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgdHlwZT1cXFwiY2hlY2tib3hcXFwiIC8+IFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMSBtLTBcXFwiPihcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIpPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG5cIjtcbn0sXCI4XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJndWkgbS10LTEwXFxcIj5cXHJcXG4gICAgXFxyXFxuPC9kaXY+XFxyXFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiZ3VpIG0tYi01IG0tdC01XFxcIj5cXHJcXG4gICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0xXFxcIj5cXHJcXG4gICAgICAgIFBJTk5FRCBGSUxURVJTXFxyXFxuICAgIDwvc3Bhbj5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhdm9yaXRlcyA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubGVuZ3RoIDogc3RhY2sxKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIucHJvZ3JhbSg4LCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZSxcInVzZURlcHRoc1wiOnRydWV9KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oYnMvZmFjZXQtcGlubmVkLmhic1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJ2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWNvbnRhaW5lci5sYW1iZGE7XG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiaXRlbSBmYWNldC1pdGVtIGd1aSBtLXQtNiBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxDb2xsYXBzZWQudHNcIikpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkNvbGxhcHNlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxcIiBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgZGF0YS1hdHRyLW5hbWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiY29udGVudFxcXCI+XFxyXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1pdGVtLWhlYWRlciBmbHVpZCBndWkgaXRlbSBmbGV4IGpjLXNiXFxcIj5cXHJcXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTEgcHJpbWFyeSBtLTAgZXhwYW5zaW9uLWljb24gY3Vyc29yLXBvaW50ZXJcXFwiIHRhYmluZGV4PVxcXCIwXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgXCJcbiAgICArICgoc3RhY2sxID0gX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXFNlbGVjdGVkRmlsdGVyc0NvdW50LnRzXCIpKS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcIlNlbGVjdGVkRmlsdGVyc0NvdW50XCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgIDxzcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8aSBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIHByaW1hcnkgZ3VpLWljb24tcGluIG0tdC01IHBpbi1pY29uIG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCIgdGFiaW5kZXg9XFxcIjBcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tZG93biBwcmltYXJ5IGV4cGFuc2lvbi1pY29uIG0tdC01IG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCIgdGFiaW5kZXg9XFxcIjBcXFwiPjwvaT5cXHJcXG4gICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNsZWFyXFxcIj48L2Rpdj5cXHJcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImRlc2NyaXB0aW9uIGd1aSBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxIaWRkZW4udHNcIikpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkhpZGRlblwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiIGZhY2V0LWl0ZW0tZGVzY3JpcHRpb24gbS10LTIgbS1sLTVcXFwiPlxcclxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImd1aSBmbHVpZC13IG0tMCBwLTBcXFwiPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMiwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgICAgIFwiXG4gICAgKyAoKHN0YWNrMSA9IF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxTaG93TW9yZUxlc3NMaW5rLnRzXCIpKS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5ub09mRmFjZXRUb1Nob3cgOiBkZXB0aHNbMV0pLHtcIm5hbWVcIjpcIlNob3dNb3JlTGVzc0xpbmtcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICA8L2Rpdj5cXHJcXG4gICAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIjtcbn0sXCIyXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImd1aSBpdGVtIFwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ2hlY2tMZW5ndGgudHNcIikpLmNhbGwoYWxpYXMxLChkYXRhICYmIGRhdGEuaW5kZXgpLChkZXB0aHNbMl0gIT0gbnVsbCA/IGRlcHRoc1syXS5ub09mRmFjZXRUb1Nob3cgOiBkZXB0aHNbMl0pLHtcIm5hbWVcIjpcIkNoZWNrTGVuZ3RoXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXFwiPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuc2VsZWN0ZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5wcm9ncmFtKDUsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgICAgICA8L2Rpdj5cXHJcXG5cIjtcbn0sXCIzXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24sIGFsaWFzMz1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGRhdGEtYXR0ci12YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiB0aXRsZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIilcXFwiIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgbm8td3JhcCBwcmltYXJ5IHRleHQtc2hvcnRlbiBtLTBcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiZ3VpIGZhY2V0LXZhbHVlLWNoZWNrYm94IGN1cnNvci1wb2ludGVyIG0tbC0wXFxcIiBpZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLVwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkYXRhICYmIGRhdGEuaW5kZXgpLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXENoZWNrZWQudHNcIikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zZWxlY3RlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiQ2hlY2tlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXERpc2FibGVkLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZGlzYWJsZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkRpc2FibGVkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5pZCA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCI6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIHR5cGU9XFxcImNoZWNrYm94XFxcIiAvPiBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTEgbS0wXFxcIj4oXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvdW50IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKTwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+XFxyXFxuXCI7XG59LFwiNVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uLCBhbGlhczM9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBkYXRhLWF0dHItdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgdGl0bGU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIihcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIpXFxcIiBjbGFzcz1cXFwiZ3VpIGN1cnNvci1wb2ludGVyIG5vLXdyYXAgdGV4dC1zaG9ydGVuIG0tMFxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJndWkgZmFjZXQtdmFsdWUtY2hlY2tib3ggY3Vyc29yLXBvaW50ZXIgbS1sLTBcXFwiIGlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRhdGEgJiYgZGF0YS5pbmRleCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ2hlY2tlZC50c1wiKSkuY2FsbChhbGlhczMsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnNlbGVjdGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDaGVja2VkXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCIgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcRGlzYWJsZWQudHNcIikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5kaXNhYmxlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiRGlzYWJsZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgdHlwZT1cXFwiY2hlY2tib3hcXFwiIC8+IFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMSBtLTBcXFwiPihcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIpPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cXHJcXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJndWkgbS1iLTUgbS10LTEwIFxcXCI+XFxyXFxuICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMVxcXCI+XFxyXFxuICAgICAgICBBTEwgRklMVEVSU1xcclxcbiAgICA8L3NwYW4+XFxyXFxuPC9kaXY+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubm9uRmF2b3JpdGVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpO1xufSxcInVzZURhdGFcIjp0cnVlLFwidXNlRGVwdGhzXCI6dHJ1ZX0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2hicy9mYWNldC11bnBpbm5lZC5oYnNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiY29uc3QgY29sbGFwc2VkID0gKHZhbHVlOiBib29sZWFuKTogc3RyaW5nID0+IHtcclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBcIiBjb2xsYXBzZWQgXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbGxhcHNlZDtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9oYnMvaGVscGVycy9Db2xsYXBzZWQudHMiLCJjb25zdCBoaWRkZW4gPSAodmFsdWU6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiIGd1aS1oaWRkZW4gXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGhpZGRlbjtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9oYnMvaGVscGVycy9IaWRkZW4udHMiLCJpbXBvcnQge0ZpbHRlckFjdGlvblR5cGV9IGZyb20gXCIuLi9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZVwiO1xuaW1wb3J0IHtJRmFjZXRPcHRpb25zfSBmcm9tIFwiLi9JRmFjZXRPcHRpb25zXCI7XG5cbmV4cG9ydCBjbGFzcyBGYWNldENvbmZpZ1N0b3JlIHtcbiAgICBwcml2YXRlIG9wdGlvbnM6IElGYWNldE9wdGlvbnM7XG4gICAgcHJpdmF0ZSBkZWZhdWx0RmFjZXRPcHRpb25zOiBJRmFjZXRPcHRpb25zID0ge1xuICAgICAgICBhbmltYXRpb25UaW1lOiAyMDAsXG4gICAgICAgIGNvbGxhcHNlZDogZmFsc2UsXG4gICAgICAgIGNvbnRhaW5lckVsZW1lbnQ6IG51bGwsXG4gICAgICAgIG5vT2ZGYWNldFRvU2hvdzogNSxcbiAgICAgICAgLy8gZmFjZXRzOiBbXSxcbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U6IChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYWN0aW9uOiBGaWx0ZXJBY3Rpb25UeXBlKTogdm9pZCA9PiB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfSxcbiAgICAgICAgb25QaW5VbnBpbjogKGtleTogc3RyaW5nLCBwaW46IGJvb2xlYW4pOiB2b2lkID0+IHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9LFxuICAgIH07XG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogSUZhY2V0T3B0aW9ucykge1xuICAgICAgICB0aGlzLmV4dGVuZE9wdGlvbnMob3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBQcm92aWRlIGEgdmFsaWQgY29udGFpbmVyIEVsZW1lbnQgb2JqZWN0XCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgT3B0aW9ucygpOiBJRmFjZXRPcHRpb25zIHtyZXR1cm4gdGhpcy5vcHRpb25zOyB9XG4gICAgcHJpdmF0ZSBleHRlbmRPcHRpb25zID0gKGlucHV0T3B0aW9uczogSUZhY2V0T3B0aW9ucyk6IElGYWNldE9wdGlvbnMgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0RmFjZXRPcHRpb25zLCBpbnB1dE9wdGlvbnMpO1xuICAgIH1cbn1cblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmUudHMiLCJpbXBvcnQgeyBGYWNldENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcbmltcG9ydCB7IEV4cGFuZENvbGxhcHNlTWFuYWdlciB9IGZyb20gXCIuL0V4cGFuZENvbGxhcHNlTWFuYWdlclwiO1xuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcbmltcG9ydCB7IFNob3dIaWRlIH0gZnJvbSBcIi4vU2hvd0hpZGVcIjtcblxuZXhwb3J0IGNsYXNzIEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlKSB7fVxuXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZXhwYW5kLWFsbFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoalF1ZXJ5KGVsZW1lbnQpLCBTaG93SGlkZS5TaG93KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5leHBhbmQtYWxsXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XG4gICAgICAgICAgICBpZiAoIGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoalF1ZXJ5KGVsZW1lbnQpLCBTaG93SGlkZS5TaG93KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5jb2xsYXBzZS1hbGxcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuZmluZChcIi5mYWNldC1pdGVtLWhlYWRlclwiKS5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGpRdWVyeShlbGVtZW50KSwgU2hvd0hpZGUuSGlkZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuY29sbGFwc2UtYWxsXCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XG4gICAgICAgICAgICBpZiAoIGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyICkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoalF1ZXJ5KGVsZW1lbnQpLCBTaG93SGlkZS5IaWRlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5mYWNldC1pdGVtLWhlYWRlciAuZXhwYW5zaW9uLWljb25cIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlckVsZW1lbnQgPSB0YXJnZXQucGFyZW50cyhcIi5mYWNldC1pdGVtLWhlYWRlclwiKTtcbiAgICAgICAgICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGhlYWRlckVsZW1lbnQsIFNob3dIaWRlLlRvZ2dsZSk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLmZhY2V0LWl0ZW0taGVhZGVyIC5leHBhbnNpb24taWNvblwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xuICAgICAgICAgICAgaWYgKCBjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMiApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJFbGVtZW50ID0gdGFyZ2V0LnBhcmVudHMoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIik7XG4gICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihoZWFkZXJFbGVtZW50LCBTaG93SGlkZS5Ub2dnbGUpO1xuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlci50cyIsImltcG9ydCB7IEZhY2V0Q29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcbmltcG9ydCB7IEZpbHRlckFjdGlvblR5cGUgfSBmcm9tIFwiLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGVcIjtcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBGYWNldEFjdGlvbkhhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlKSB7fVxuXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2hhbmdlXCIsIFwiLmZhY2V0LWJvZHkgLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb24gLmZhY2V0LXZhbHVlLWNoZWNrYm94XCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgY29uc3QgdmFsU3RyID0gZWxlbWVudC52YWwoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB2YWxTdHIuc3BsaXQoXCI6XCIpO1xuICAgICAgICAgICAgY29uc3QgY2hlY2tlZCA9IGVsZW1lbnQuaXMoXCI6Y2hlY2tlZFwiKTtcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IGNoZWNrZWQgPyBGaWx0ZXJBY3Rpb25UeXBlLkFkZCA6IEZpbHRlckFjdGlvblR5cGUuTWludXM7XG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25GaWx0ZXJDaGFuZ2UodmFsdWVbMF0sIHZhbHVlWzFdLCBhY3Rpb24sIHZhbHVlWzJdKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayhldmVudDogYW55KTogdm9pZCB7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0QWN0aW9uSGFuZGxlci50cyIsImltcG9ydCB7RmFjZXRDb25maWdTdG9yZX0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcclxuaW1wb3J0IHtFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXJ9IGZyb20gXCIuL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlclwiO1xyXG5pbXBvcnQge0V4cGFuZENvbGxhcHNlTWFuYWdlcn0gZnJvbSBcIi4vRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXCI7XHJcbmltcG9ydCB7SUV2ZW50SGFuZGxlcn0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQge1Nob3dIaWRlfSBmcm9tIFwiLi9TaG93SGlkZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZhY2V0U2VhcmNoSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBKUXVlcnksIHByaXZhdGUgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmUpIHt9XHJcblxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImtleXVwXCIsIFwiLmZpbHRlci1zZWFyY2gtaW5wdXRcIiwgdGhpcy5oYW5kbGVTZWFyY2gpO1xyXG5cclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBoYW5kbGVTZWFyY2ggPSAoZXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgY29uc3QgdmFsID0gZWxlbWVudFxyXG4gICAgICAgICAgICAudmFsKClcclxuICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAuZmluZChcIi5mYWNldC1saXN0IC5mYWNldC1pdGVtXCIpXHJcbiAgICAgICAgICAgIC5lYWNoKChpOiBudW1iZXIsIGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZhY2V0SXRlbSA9IGpRdWVyeShlKTtcclxuICAgICAgICAgICAgICAgIGxldCBmYWNldE5hbWVNYXRjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGlucHV0VmFsdWVCbGFuayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdmFsdWUgaXMgZW1wdHlcclxuICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09IG51bGwgfHwgdmFsLnRyaW0oKSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VmFsdWVCbGFuayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBDb21wYXJlIHZhbHVlIHdpdGggZmFjZXQgbmFtZVxyXG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dFZhbHVlQmxhbmsgJiYgZmFjZXRJdGVtLmF0dHIoXCJkYXRhLWF0dHItbmFtZVwiKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldE5hbWVNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LW1vcmUtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWFjaCgoaW5kZXg6IG51bWJlciwgc2h3TW9yZUVsZW0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqUXVlcnkoc2h3TW9yZUVsZW0pLmhhc0NsYXNzKFwiZ3VpLWhpZGRlblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShzaHdNb3JlRWxlbSkuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2h3TW9yZUVsZW0pLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LWxlc3MtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWFjaCgoaW5kZXg6IG51bWJlciwgc2hvd0xlc3NMaW5rKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHNob3dMZXNzTGluaykuaGFzQ2xhc3MoXCJndWktaGlkZGVuXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHNob3dMZXNzTGluaykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2hvd0xlc3NMaW5rKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnNob3ctbW9yZS1saW5rXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LWxlc3MtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB2YWx1ZXMgYWdhaW5zdCBjaGlsZCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgIGxldCBmYWNldENoaWxkTWF0Y2g6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGZhY2V0SXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwibGFiZWxcIilcclxuICAgICAgICAgICAgICAgICAgICAuZWFjaCgoajogbnVtYmVyLCBsYWJlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbEVsZW0gPSBqUXVlcnkobGFiZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZXROYW1lTWF0Y2ggfHwgaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW0uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlQmxhbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYWJlbFZhbHVlID0gbGFiZWxFbGVtLmF0dHIoXCJkYXRhLWF0dHItdmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsYWJlbFZhbHVlLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWwpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0Q2hpbGRNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW0uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTaG93IGhpZGUgRmFjZXQgSXRlbSBpdHNlbGZcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckVsbWVudCA9IGZhY2V0SXRlbS5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29sbGFwc2VkID0gZmFjZXRJdGVtLmhhc0NsYXNzKFwiY29sbGFwc2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFjb2xsYXBzZWQgfHwgZmFjZXROYW1lTWF0Y2ggfHwgZmFjZXRDaGlsZE1hdGNoIHx8IGlucHV0VmFsdWVCbGFuaykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0SXRlbS5mYWRlSW4odGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEl0ZW0uZmFkZU91dCh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBFeHBhbmQgQ29sbGFwc2UgRmFjZXRcclxuICAgICAgICAgICAgICAgIGlmIChjb2xsYXBzZWQgfHwgZmFjZXROYW1lTWF0Y2ggfHwgZmFjZXRDaGlsZE1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoaGVhZGVyRWxtZW50LCBTaG93SGlkZS5TaG93KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoaGVhZGVyRWxtZW50LCBTaG93SGlkZS5IaWRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0U2VhcmNoSGFuZGxlci50cyIsImltcG9ydCB7IEZpbHRlckNvbmZpZ1N0b3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9GaWx0ZXJDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBGaWx0ZXJBY3Rpb25UeXBlIH0gZnJvbSBcIi4uL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlXCI7XHJcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsdGVyQWN0aW9uSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZmlsdGVyRWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGaWx0ZXJDb25maWdTdG9yZSkge31cclxuXHJcbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmZhY2V0LXN1YmhlYWRlciAuZmFjZXQtbGFiZWxzIC5sYWJlbFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmlzKFwiLmxhYmVsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRzKFwiLmxhYmVsXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbFN0ciA9IGVsZW1lbnQuYXR0cihcImRhdGEtZmlsdGVyLWVudHJ5XCIpLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsU3RyLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uRmlsdGVyQ2hhbmdlKHZhbHVlWzBdLCB2YWx1ZVsxXSwgRmlsdGVyQWN0aW9uVHlwZS5NaW51cywgdmFsdWVbMl0pO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmZpbHRlckVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5mYWNldC1zdWJoZWFkZXIgLnJlbW92ZS1hbGxcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkFsbEZpbHRlclJlbW92ZSgpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmlsdGVyQWN0aW9uSGFuZGxlci50cyIsImltcG9ydCB7IEZhY2V0Q29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcclxuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBKUXVlcnksIHByaXZhdGUgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmUpIHt9XHJcblxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlciA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5oaWRlLWZhY2V0XCIsIHRoaXMuaGlkZUZhY2V0KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5zaG93LWZhY2V0XCIsIHRoaXMuc2hvd0ZhY2V0KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5oaWRlLWZhY2V0XCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKCBjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMiApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmhpZGVGYWNldChldmVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuc2hvdy1mYWNldFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmICggY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zaG93RmFjZXQoZXZlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfVxyXG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayhldmVudDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaGlkZUZhY2V0ID0gKGV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgJChcIi5mYWNldC1ib2R5XCIpLmhpZGUoKTtcclxuICAgICAgICAkKFwiLmZhY2V0LWNvbGxhcHNlZC1ib2R5XCIpLmZhZGVJbih0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbGxhcHNlZCA9IHRydWU7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2hvd0ZhY2V0ID0gKGV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgJChcIi5mYWNldC1jb2xsYXBzZWQtYm9keVwiKS5oaWRlKCk7XHJcbiAgICAgICAgJChcIi5mYWNldC1ib2R5XCIpLmZhZGVJbih0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbGxhcHNlZCA9IGZhbHNlO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9IaWRlRmFjZXRTZWN0aW9uSGFuZGxlci50cyIsImltcG9ydCB7IEZhY2V0Q29uZmlnU3RvcmUgfSBmcm9tIFwiLi8uLi9jb25maWcvRmFjZXRDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBJRmFjZXRUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi8uLi9zZXJ2aWNlcy9JRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcclxuaW1wb3J0IHsgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyIH0gZnJvbSBcIi4vRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyXCI7XHJcbmltcG9ydCB7IEV4cGFuZENvbGxhcHNlTWFuYWdlciB9IGZyb20gXCIuL0V4cGFuZENvbGxhcHNlTWFuYWdlclwiO1xyXG5pbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5pbXBvcnQgeyBTaG93SGlkZSB9IGZyb20gXCIuL1Nob3dIaWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGluVW5waW5FdmVudEhhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlLFxyXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSB0ZW1wbGF0ZVNlcnZpY2U6IElGYWNldFRlbXBsYXRlU2VydmljZSkge31cclxuXHJcbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLnBpbi1pY29uXCIsIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi51bnBpbi1pY29uXCIsIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIucGluLWljb25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoIGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUGluVW5waW4oZXZlbnQsIHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLnVucGluLWljb25cIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoIGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlUGluVW5waW4oZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBoYW5kbGVQaW5VbnBpbihldmVudDogYW55LCBwaW46IGJvb2xlYW4pIHtcclxuICAgICAgICBjb25zdCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgY29uc3QgaWQgPSBlbGVtZW50LmF0dHIoXCJkYXRhLWF0dHItaWRcIik7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmdldERhdGEoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGZhY2V0IG9mIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCBmYWNldC5pZCA9PT0gaWQgKSB7XHJcbiAgICAgICAgICAgICAgICBmYWNldC5waW5uZWQgPSBwaW47XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZS5zZXREYXRhKGRhdGEpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5odG1sKHRoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZGF0YSkpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vblBpblVucGluKGlkLCBwaW4pO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9QaW5VbnBpbkV2ZW50SGFuZGxlci50cyIsImltcG9ydCB7RmFjZXRDb25maWdTdG9yZX0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcclxuaW1wb3J0IHtJRmFjZXRUZW1wbGF0ZVNlcnZpY2V9IGZyb20gXCIuLy4uL3NlcnZpY2VzL0lGYWNldFRlbXBsYXRlU2VydmljZVwiO1xyXG5pbXBvcnQge0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlcn0gZnJvbSBcIi4vRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyXCI7XHJcbmltcG9ydCB7RXhwYW5kQ29sbGFwc2VNYW5hZ2VyfSBmcm9tIFwiLi9FeHBhbmRDb2xsYXBzZU1hbmFnZXJcIjtcclxuaW1wb3J0IHtJRXZlbnRIYW5kbGVyfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XHJcbmltcG9ydCB7U2hvd0hpZGV9IGZyb20gXCIuL1Nob3dIaWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU2hvd01vcmVMZXNzSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBKUXVlcnksIHByaXZhdGUgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmUpIHt9XHJcblxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIFwiLnNob3ctbW9yZS1saW5rXCIsIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TW9yZUxlc3NGaWx0ZXJzKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJjbGlja1wiLCBcIi5zaG93LWxlc3MtbGlua1wiLCAoZXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01vcmVMZXNzRmlsdGVycyhldmVudCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImtleXVwXCIsIFwiLnNob3ctbW9yZS1saW5rXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNb3JlTGVzc0ZpbHRlcnMoZXZlbnQsIHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImtleXVwXCIsIFwiLnNob3ctbGVzcy1saW5rXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNb3JlTGVzc0ZpbHRlcnMoZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxuICAgIHByaXZhdGUgc2hvd01vcmVMZXNzRmlsdGVycyhldmVudDogYW55LCBzaG93TW9yZTogYm9vbGVhbikge1xyXG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICBpZiAoc2hvd01vcmUpIHtcclxuICAgICAgICAgICAgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgLnBhcmVudCgpXHJcbiAgICAgICAgICAgICAgICAuZmluZChcIi5leHRyYS1maWx0ZXJcIilcclxuICAgICAgICAgICAgICAgIC5mYWRlSW4odGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaWJsaW5ncyhcImFcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNob3coKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAuZmFkZU91dCh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNpYmxpbmdzKFwiYVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9TaG93TW9yZUxlc3NIYW5kbGVyLnRzIiwiaW1wb3J0IHsgSUZpbHRlck9wdGlvbnMgfSBmcm9tIFwiLi4vY29uZmlnL0lGaWx0ZXJPcHRpb25zXCI7XHJcbmltcG9ydCB7IEhvdEtleXNGaWx0ZXJzSGFuZGxlciB9IGZyb20gXCIuLi9ldmVudGhhbmRsZXJzL0hvdEtleXNGaWx0ZXJzSGFuZGxlclwiO1xyXG5pbXBvcnQgeyBJRmFjZXQgfSBmcm9tIFwiLi4vbW9kZWxzL0lGYWNldFwiO1xyXG5pbXBvcnQgeyBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvRmlsdGVyVGVtcGxhdGVTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IElGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvSUZpbHRlclRlbXBsYXRlU2VydmljZVwiO1xyXG5pbXBvcnQgeyBGaWx0ZXJDb25maWdTdG9yZSB9IGZyb20gXCIuLy4uL2NvbmZpZy9GaWx0ZXJDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBGaWx0ZXJBY3Rpb25IYW5kbGVyLCBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vLi4vZXZlbnRoYW5kbGVyc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpbHRlciB7XHJcbiAgICBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGaWx0ZXJDb25maWdTdG9yZTtcclxuICAgIHByaXZhdGUgdGVtcGxhdGVTZXJ2aWNlOiBJRmlsdGVyVGVtcGxhdGVTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBmaWx0ZXJFbGVtZW50OiBKUXVlcnk7XHJcbiAgICBwcml2YXRlIGhhbmRsZXJDaGFpbjogSUV2ZW50SGFuZGxlcltdID0gW107XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJRmlsdGVyT3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSAgbmV3IEZpbHRlckNvbmZpZ1N0b3JlKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudCA9IGpRdWVyeShvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlID0gbmV3IEZpbHRlclRlbXBsYXRlU2VydmljZSgpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEZpbHRlckFjdGlvbkhhbmRsZXIodGhpcy5maWx0ZXJFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgSG90S2V5c0ZpbHRlcnNIYW5kbGVyKCkpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLmZvckVhY2goKGhhbmRsZXIpID0+IHtcclxuICAgICAgICAgICAgaGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBiaW5kID0gIChmaWx0ZXJzOiBJRmFjZXRbXSk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IGZhY2V0U3ViSGVhZGVyID0gdGhpcy50ZW1wbGF0ZVNlcnZpY2UuYmluZChmaWx0ZXJzKTtcclxuICAgICAgICB0aGlzLmZpbHRlckVsZW1lbnQuaHRtbChmYWNldFN1YkhlYWRlcik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZGVzdHJveSA9ICAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgaWYgKCB0aGlzLmZpbHRlckVsZW1lbnQgIT09IHVuZGVmaW5lZCApIHtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJFbGVtZW50Lm9mZigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbi5mb3JFYWNoKChoYW5kbGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChoYW5kbGVyICE9PSB1bmRlZmluZWQgJiYgaGFuZGxlci5kZXJlZ2lzdGVyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGhhbmRsZXIuZGVyZWdpc3RlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9tYWluL0ZpbHRlci50cyIsImltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XHJcbmNsYXNzIEhvdEtleXNGaWx0ZXJzSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG5cclxuICAgIHB1YmxpYyBSZWdpc3RlckRvbUhhbmRsZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vbihcImtleWRvd25cIiwgdGhpcy5mb2N1c09uU2VhcmNoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2sgPSAoZXZlbnQ6IGFueSk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmdcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVSZWdpc3RlciA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9mZihcImtleWRvd25cIiwgdGhpcy5mb2N1c09uU2VhcmNoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZvY3VzT25TZWFyY2ggPSAoZXZlbnQpID0+IHtcclxuICAgICAgICBpZiAoZXZlbnQuYWx0S2V5ICAmJiAgZXZlbnQua2V5ID09PSBcInJcIikge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBqUXVlcnkoXCIuZmFjZXQtc3ViaGVhZGVyIC5yZW1vdmUtYWxsXCIpLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQge0hvdEtleXNGaWx0ZXJzSGFuZGxlcn07XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9Ib3RLZXlzRmlsdGVyc0hhbmRsZXIudHMiLCJpbXBvcnQgKiBhcyBIYW5kbGViYXJzIGZyb20gXCJoYW5kbGViYXJzXCI7XHJcbmltcG9ydCB7IElGYWNldCB9IGZyb20gXCIuLi9tb2RlbHMvSUZhY2V0XCI7XHJcbmltcG9ydCAqIGFzIEZhY2V0U3ViSGVhZGVyIGZyb20gXCIuLy4uLy4uL2hicy9mYWNldC1hcHBsaWVkLWZpbHRlcnMuaGJzXCI7XHJcbmltcG9ydCB7IElGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi9JRmlsdGVyVGVtcGxhdGVTZXJ2aWNlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsdGVyVGVtcGxhdGVTZXJ2aWNlIGltcGxlbWVudHMgSUZpbHRlclRlbXBsYXRlU2VydmljZSB7XHJcbiAgICBwcml2YXRlIHRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbjogYW55O1xyXG4gICAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEhlYWRlcjogYW55O1xyXG4gICAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlcjogYW55O1xyXG4gICAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEJvZHk6IGFueTtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRTdWJIZWFkZXIgPSBGYWNldFN1YkhlYWRlcjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBiaW5kKGZpbHRlcnM6IElGYWNldFtdKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlcih7ZmlsdGVyc30pO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvc2VydmljZXMvRmlsdGVyVGVtcGxhdGVTZXJ2aWNlLnRzIiwidmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGFuZGxlYmFyc1wiKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiY29udGVudCBmYWNldC1zdWJoZWFkZXIgZ3VpIGZsdWlkLXcgYmFzaWMgY3VydmVkIHAtNVxcXCI+XFxuICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMiBjYXBzXFxcIj5BcHBsaWVkIEZpbHRlcnM8L3NwYW4+XFxuICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBtLWwtNSByZW1vdmUtYWxsXFxcIiA+XFxuICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gZ3VpLWljb24tY2FuY2VsXFxcIj48L2k+XFxuICAgICAgICA8c3Bhbj5DbGVhciBBbGw8L3NwYW4+XFxuICAgIDwvYnV0dG9uPlxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIG0tbC0xMFxcXCI+XFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmlsdGVycyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgyLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgPC9zcGFuPlxcbjwvZGl2PlxcblwiO1xufSxcIjJcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxLCBoZWxwZXIsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIiAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtLXItNVxcXCI+XFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBsYXJnZSBsYWJlbHMgZmFjZXQtbGFiZWxzXFxcIj5cXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0xXFxcIj5cIlxuICAgICsgY29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24oKChoZWxwZXIgPSAoaGVscGVyID0gaGVscGVycy5uYW1lIHx8IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGhlbHBlcnMuaGVscGVyTWlzc2luZyksKHR5cGVvZiBoZWxwZXIgPT09IFwiZnVuY3Rpb25cIiA/IGhlbHBlci5jYWxsKGFsaWFzMSx7XCJuYW1lXCI6XCJuYW1lXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIjwvc3Bhbj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhY2V0VmFsdWVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRSYW5nZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oNSwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgPC9zcGFuPlxcblwiO1xufSxcIjNcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgaGVscGVyLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJndWkgbS0wIG0tdC0yIG0tci0yIHAtNCBsYWJlbCBjdXJzb3ItcG9pbnRlciBzdHJpa2V0aHJvdWdoLWhvdmVyXFxcIiBkYXRhLWZpbHRlci1lbnRyeT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMubGFiZWwgfHwgKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGhlbHBlcnMuaGVscGVyTWlzc2luZyksKHR5cGVvZiBoZWxwZXIgPT09IFwiZnVuY3Rpb25cIiA/IGhlbHBlci5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSkse1wibmFtZVwiOlwibGFiZWxcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiXFxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gZ3VpLWljb24tY2FuY2VsXFxcIj48L2k+XFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxcblwiO1xufSxcIjVcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgaGVscGVyLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uLCBhbGlhczM9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwgYWxpYXM0PWhlbHBlcnMuaGVscGVyTWlzc2luZywgYWxpYXM1PVwiZnVuY3Rpb25cIjtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIG0tMCBtLXQtMiBtLXItMiBwLTQgbGFiZWwgY3Vyc29yLXBvaW50ZXIgc3RyaWtldGhyb3VnaC1ob3ZlclxcXCIgZGF0YS1maWx0ZXItZW50cnk9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5pZCA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIjpcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCI6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMigoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLm1pbiB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubWluIDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzNCksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzNSA/IGhlbHBlci5jYWxsKGFsaWFzMyx7XCJuYW1lXCI6XCJtaW5cIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiIC0gXCJcbiAgICArIGFsaWFzMigoKGhlbHBlciA9IChoZWxwZXIgPSBoZWxwZXJzLm1heCB8fCAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubWF4IDogZGVwdGgwKSkgIT0gbnVsbCA/IGhlbHBlciA6IGFsaWFzNCksKHR5cGVvZiBoZWxwZXIgPT09IGFsaWFzNSA/IGhlbHBlci5jYWxsKGFsaWFzMyx7XCJuYW1lXCI6XCJtYXhcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkgOiBoZWxwZXIpKSlcbiAgICArIFwiXFxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gZ3VpLWljb24tY2FuY2VsXFxcIj48L2k+XFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmlsdGVycyA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubGVuZ3RoIDogc3RhY2sxKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZSxcInVzZURlcHRoc1wiOnRydWV9KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oYnMvZmFjZXQtYXBwbGllZC1maWx0ZXJzLmhic1xuLy8gbW9kdWxlIGlkID0gMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJpbXBvcnQgeyBGaWx0ZXJBY3Rpb25UeXBlIH0gZnJvbSBcIi4uL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlXCI7XHJcbmltcG9ydCB7IElGaWx0ZXJPcHRpb25zIH0gZnJvbSBcIi4vSUZpbHRlck9wdGlvbnNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWx0ZXJDb25maWdTdG9yZSB7XHJcbiAgICBwcml2YXRlIG9wdGlvbnM6IElGaWx0ZXJPcHRpb25zO1xyXG4gICAgcHJpdmF0ZSBkZWZhdWx0ZmlsdGVyT3B0aW9uczogSUZpbHRlck9wdGlvbnMgPSB7XHJcbiAgICAgICAgYW5pbWF0aW9uVGltZTogMjAwLFxyXG4gICAgICAgIGNvbnRhaW5lckVsZW1lbnQ6IG51bGwsXHJcbiAgICAgICAgb25BbGxGaWx0ZXJSZW1vdmU6ICgpID0+IHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uRmlsdGVyQ2hhbmdlOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGFjdGlvbjogRmlsdGVyQWN0aW9uVHlwZSk6IHZvaWQgPT4ge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9uczogSUZpbHRlck9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLmV4dGVuZE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY29udGFpbmVyRWxlbWVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgUHJvdmlkZSBhIHZhbGlkIGNvbnRhaW5lciBFbGVtZW50IG9iamVjdCBmb3IgZmlsdGVyc1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0IE9wdGlvbnMoKTogSUZpbHRlck9wdGlvbnMge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIGV4dGVuZE9wdGlvbnMgPSAoaW5wdXRPcHRpb25zOiBJRmlsdGVyT3B0aW9ucyk6IElGaWx0ZXJPcHRpb25zID0+IHtcclxuICAgICAgICByZXR1cm4gKHRoaXMub3B0aW9ucyA9IGpRdWVyeS5leHRlbmQoe30sIHRoaXMuZGVmYXVsdGZpbHRlck9wdGlvbnMsIGlucHV0T3B0aW9ucykpO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvY29uZmlnL0ZpbHRlckNvbmZpZ1N0b3JlLnRzIl0sInNvdXJjZVJvb3QiOiIifQ==