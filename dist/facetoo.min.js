!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("handlebars/runtime"),require("moment")):"function"==typeof define&&define.amd?define(["handlebars.runtime","moment"],t):"object"==typeof exports?exports.Facetoo=t(require("handlebars/runtime"),require("moment")):e.Facetoo=t(e.Handlebars,e.moment)}("undefined"!=typeof self?self:this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=14)}([function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.Add="Add",e.Minus="Minus"}(t.FilterActionType||(t.FilterActionType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.Show=0]="Show",e[e.Hide=1]="Hide",e[e.Toggle=2]="Toggle"}(t.ShowHide||(t.ShowHide={}))},function(e,t,n){var i=n(0);e.exports=(i.default||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,i,r,o){var a,l=e.lambda,s=e.escapeExpression;return'<div class="gui of-hidden min-w-50 w-auto fluid-h flex column container" id="'+s(l(null!=t?t.idPrefix:t,t))+'-facet-container">\n    <section class="gui h-auto gui-subheading-1 m-0 border-bottom light p-r-10 p-t-5 p-b-5 p-l-10">\n        <button class="gui cursor-pointer expand-all" \n                aria-label="Expand All Filters">\n            <i  class="gui-icon special rotate-left gui-icon-chevdouble"></i>\n            Expand All\n        </button>\n        <button class="gui cursor-pointer collapse-all" \n                aria-label="Collapse All Filters">\n            <i class="gui-icon special rotate-right gui-icon-chevdouble"></i>\n            Collapse All\n        </button>\n    </section>\n    <section class="gui border-bottom light p-r-10 p-t-5 p-b-5 p-l-10">\n        <div class="gui gui-icon input fluid-w h-30">\n            <input class="gui input fluid-w gui-subheading-2 filter-search-input"\n                   role="search"\n                   aria-controls="'+s(l(null!=t?t.idPrefix:t,t))+"-filter-tree "+s(l(null!=t?t.idPrefix:t,t))+"-pinned-filter-tree "+s(l(null!=t?t.idPrefix:t,t))+'-unpinned-filter-tree"\n                   placeholder="Search Filters. Shortcut Alt + F " />\n            <i class="gui gui-icon gui-icon-search gui-hidden"></i>\n        </div>\n    </section>\n    <ul class="gui fluid-h facet-list of-auto ofx-hidden m-0 p-0" \n        role="tree"\n        id="'+s(l(null!=t?t.idPrefix:t,t))+'-filter-tree"\n        aria-relevant="all"\n        aria-live="assertive">\n'+(null!=(a=e.invokePartial(n(18),t,{name:"facet-pinned",data:o,indent:"        ",helpers:i,partials:r,decorators:e.decorators}))?a:"")+(null!=(a=e.invokePartial(n(25),t,{name:"facet-unpinned",data:o,indent:"        ",helpers:i,partials:r,decorators:e.decorators}))?a:"")+"    </ul>\n</div>"},usePartial:!0,useData:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e?" collapsed ":""};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){return t&&(e=!e),e?"true":"false"};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){var t=0;if(void 0!==e&&null!==e&&e.length>0)for(var n=0,i=e;n<i.length;n++){var r=i[n];r.selected&&t++}return 0===t?"":'<span class="gui-body-2">('+t+")</span>"};t.default=i},function(e,t,n){function i(e){return e&&(e.__esModule?e.default:e)}var r=n(0);e.exports=(r.default||r).template({1:function(e,t,r,o,a,l,s){var u=null!=t?t:e.nullContext||{},c=e.escapeExpression,d=e.lambda;return'    <li class="gui item '+c(i(n(19)).call(u,a&&a.index,5,{name:"CheckLength",hash:{},data:a}))+'"\r\n        aria-label="'+c(d(null!=t?t.label:t,t))+'">\r\n        <label  data-attr-value="'+c(d(null!=t?t.label:t,t))+'" \r\n                data-attr-id="'+c(d(null!=s[1]?s[1].id:s[1],t))+'"\r\n                data-attr-type="'+c(d(null!=s[1]?s[1].type:s[1],t))+'"\r\n                tabindex="0"\r\n                role="treeitem"\r\n                title="'+c(d(null!=t?t.label:t,t))+"("+c(d(null!=t?t.count:t,t))+')"\r\n                for="'+c(d(null!=t?t.idPrefix:t,t))+"-"+c(d(null!=s[1]?s[1].id:s[1],t))+"-"+c(d(a&&a.index,t))+'-checkbox"\r\n                aria-label="Filter '+c(d(null!=t?t.label:t,t))+" in "+c(d(null!=s[1]?s[1].name:s[1],t))+" has "+c(d(null!=t?t.count:t,t))+" records. Press spacebar to "+c(i(n(20)).call(u,null!=t?t.selected:t,{name:"ApplyRemove",hash:{},data:a}))+' this filter."\r\n                class="gui cursor-pointer gui-subheading-1 no-wrap text-shorten m-0">\r\n            <input class="gui facet-value-checkbox cursor-pointer m-l-0" \r\n                    id="'+c(d(null!=t?t.idPrefix:t,t))+"-"+c(d(null!=s[1]?s[1].id:s[1],t))+"-"+c(d(a&&a.index,t))+'-checkbox"\r\n                    '+c(i(n(21)).call(u,null!=t?t.selected:t,{name:"Checked",hash:{},data:a}))+"\r\n                    "+c(i(n(22)).call(u,null!=t?t.disabled:t,{name:"Disabled",hash:{},data:a}))+'\r\n                    tabindex="-1"\r\n                    value="'+c(d(null!=s[1]?s[1].id:s[1],t))+":::"+c(d(null!=t?t.label:t,t))+":::"+c(d(null!=s[1]?s[1].type:s[1],t))+'" \r\n                    type="checkbox" />\r\n                    '+c(i(n(8)).call(u,null!=s[1]?s[1].type:s[1],null!=t?t.label:t,{name:"FormatLabelByType",hash:{},data:a}))+'\r\n            <span class="gui gui-subheading-1 m-0">('+c(d(null!=t?t.count:t,t))+")</span>\r\n        </label>\r\n    </li>\r\n"},compiler:[7,">= 4.0.0"],main:function(e,t,r,o,a,l,s){var u,c=null!=t?t:e.nullContext||{};return'<ul class="description gui facet-item-description m-t-10 p-l-5 p-0 '+e.escapeExpression(i(n(23)).call(c,null!=t?t.collapsed:t,!0,{name:"Hidden",hash:{},data:a}))+'" \r\n    role="group">\r\n'+(null!=(u=r.each.call(c,null!=t?t.facetValues:t,{name:"each",hash:{},fn:e.program(1,a,0,l,s),inverse:e.noop,data:a}))?u:"")+"    "+(null!=(u=i(n(24)).call(c,null!=t?t.facetValues:t,5,{name:"ShowMoreLessLink",hash:{},data:a}))?u:"")+"\r\n</ul>"},useData:!0,useDepths:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=function(e,t){return i&&"Edm.DateTimeOffset"===e?i.utc(t).format("DD-MMM-YYYY hh:mm a"):"Assigned"===t?"Committed":"Complete"===t?"Assigned":t};t.default=r},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.isDescendant=function(e,t){for(var n=t.parentNode;null!=n;){if(n===e)return!0;n=n.parentNode}return!1},e.isSelfOrDescendant=function(t,n){return t===n||e.isDescendant(t,n)},e.isHidden=function(e){return!e||null===e.offsetParent},e.isAriaHidden=function(e){return!!e&&"true"===e.getAttribute("aria-hidden")},e.setAriaHidden=function(e,t){if(!e)throw Error("DomUtils.setAriaHidden - Node cannot be of null or undefined");e.setAttribute("aria-hidden",t)},e.isAriaExpanded=function(e){return!!e&&"true"===e.getAttribute("aria-expanded")},e.setAriaExpanded=function(e,t){if(!e)throw Error("DomUtils.setAriaExpanded - Node cannot be of null or undefined");e.setAttribute("aria-expanded",t)},e.show=function(e){if(!e)throw Error("DomUtils.show - Node cannot be of null or undefined");e.classList.remove("gui-hidden")},e.hide=function(e){if(!e)throw Error("DomUtils.hide - Node cannot be of null or undefined");e.classList.add("gui-hidden")},e.toggleLabel=function(e){if(!e)throw Error("DomUtils.toggleLabel - Node cannot be of null or undefined");var t=e.htmlFor,n=document.getElementById(t)||e.firstElementChild;return n.checked=!n.checked,n.checked},e.off=function(e){var t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)},e}();t.DomUtils=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.UpKeyCode=38,e.DownKeyCode=40,e.EnterKeyCode=13,e.SpaceKeyCode=28,e}();t.FacetConstants=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),r=function(){function e(){}return e.ControlVisibilityOfFilter=function(e,t,n){var r=e.find(".expansion-icon"),o=r.hasClass("gui-icon-chevron-up");i.ShowHide.Toggle!==t&&(o&&t===i.ShowHide.Show||!o&&t===i.ShowHide.Hide)||(o?(e.find(".facet-item-description").slideUp(200),r.removeClass("gui-icon-chevron-up"),r.addClass("gui-icon-chevron-down"),e.attr("aria-expanded","false").attr("aria-label","Press enter or space to expand filter values for "+n)):(e.find(".facet-item-description").slideDown(200),r.removeClass("gui-icon-chevron-down"),r.addClass("gui-icon-chevron-up"),e.attr("aria-expanded","true").attr("aria-label","Press enter or space to collapse filter values for "+n)))},e}();t.ExpandCollapseManager=r},function(e,t){e.exports=function(e,t,n,i){function r(){function r(){a=Number(new Date),n.apply(s,c)}function l(){o=void 0}var s=this,u=Number(new Date)-a,c=arguments;i&&!o&&r(),o&&clearTimeout(o),void 0===i&&u>e?r():!0!==t&&(o=setTimeout(i?l:r,void 0===i?e-u:e))}var o,a=0;return"boolean"!=typeof t&&(i=n,n=t,t=void 0),r}},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(15)),i(n(30))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),r=n(26),o=n(29),a=function(){function e(e){var t=this;this.handlerChain=[],this.bind=function(e){t.templateService.setData(e),t.reRender()},this.reRender=function(){setTimeout(function(){var e=t.templateService.getData(),n=t.templateService.bind(e);t.facetElement.innerHTML=n;document.querySelectorAll('[role="tree"]');t.facetTree=new r.FacetTree(t.configStore.Options.containerElement,t,t.configStore),t.facetTree.init()},1)},this.setFacetConfig=function(e){t.configStore.Options.facetConfig=e},this.destroy=function(){t.facetTree.destroy()},this.configStore=new o.FacetConfigStore(e),this.facetElement=e.containerElement,this.templateService=new i.FacetTemplateService(this.configStore)}return e}();t.Facet=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=function(){function e(e){var t=this;this.configStore=e,this.setData=function(e){t.data=e},this.getData=function(){return t.data},this.compareFn=function(e,t){return void 0===e.order?-1:void 0===t.order?1:e.order-t.order},this.mergeWithFacetConfig=function(e){for(var n=[],i=0,r=e;i<r.length;i++)for(var o=r[i],a=0,l=t.configStore.Options.facetConfig;a<l.length;a++){var s=l[a];if(s.id===o.id){n.push({collapsed:s.collapsed,facetRanges:o.facetRanges,facetValues:o.facetValues,id:s.id,name:s.name,order:s.order,pinned:s.pinned,type:s.type});break}}return n},this.tempateFunctionForFacetMain=i}return e.prototype.bind=function(e){var t=(this.configStore.Options.collapsed,this.mergeWithFacetConfig(e)),n=t.filter(function(e){return void 0!==e.pinned&&e.pinned}),i=t.filter(function(e){return void 0===e.pinned||!e.pinned});n.sort(this.compareFn),i.sort(this.compareFn);var r=this.configStore.Options.noOfFacetToShow,o=this.configStore.Options.idPrefix;return this.tempateFunctionForFacetMain({idPrefix:o,favorites:n,nonFavorites:i,noOfFacetToShow:r})},e}();t.FacetTemplateService=r},function(e,t,n){var i=n(0);e.exports=(i.default||i).template({1:function(e,t,i,r,o){var a;return'    <div class="facet-body gui fluid-h of-hidden gui-hidden">'+(null!=(a=e.invokePartial(n(3),t,{name:"facet-body",data:o,helpers:i,partials:r,decorators:e.decorators}))?a:"")+"</div>\n"},3:function(e,t,i,r,o){var a;return'    <div class="facet-body gui fluid-h of-hidden">'+(null!=(a=e.invokePartial(n(3),t,{name:"facet-body",data:o,helpers:i,partials:r,decorators:e.decorators}))?a:"")+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var o;return'<div class="gui fluid-h ">\n'+(null!=(o=n.if.call(null!=t?t:e.nullContext||{},null!=t?t.collapsed:t,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.program(3,r,0),data:r}))?o:"")+"</div>"},usePartial:!0,useData:!0})},function(e,t,n){function i(e){return e&&(e.__esModule?e.default:e)}var r=n(0);e.exports=(r.default||r).template({1:function(e,t,n,i,r){var o,a=e.lambda,l=e.escapeExpression;return'<li class="gui m-0 p-r-10 p-t-5 p-b-5 p-l-10" \r\n    aria-label="Pinned Filters"\r\n    data-attr-value="Pinned Filters"\r\n    data-attr-ignoreForSearch="true"\r\n    aria-expanded="true"\r\n    aria-live="polite"\r\n    aria-atomic="true"\r\n    aria-relevant="all"\r\n    role="treeitem"\r\n    id="'+l(a(null!=t?t.idPrefix:t,t))+'-pinned-filter-tree">\r\n    <h6 class="gui gui-subheading-2 caps bold-500 flex m-b-10 jc-sb">\r\n        PINNED FILTERS\r\n        <i class="gui gui-icon selectable gui-icon-chevron-up expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n    </h6>\r\n    <ul aria-labelledby="'+l(a(null!=t?t.idPrefix:t,t))+'-pinned-filter-tree" class="gui m-0 p-0" role="group">\r\n'+(null!=(o=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.favorites:t,{name:"each",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r}))?o:"")+"    </ul>\r\n</li>\r\n"},2:function(e,t,r,o,a){var l,s=e.lambda,u=e.escapeExpression,c=null!=t?t:e.nullContext||{};return'        <li aria-label="'+u(s(null!=t?t.name:t,t))+'"\r\n            class="gui item facet-item border-bottom light p-r-10 p-t-5 p-b-5 p-l-5 '+u(i(n(4)).call(c,null!=t?t.collapsed:t,{name:"Collapsed",hash:{},data:a}))+'"\r\n            role="treeitem"\r\n            aria-expanded="'+u(i(n(5)).call(c,null!=t?t.collapsed:t,!0,{name:"Boolean",hash:{},data:a}))+'"\r\n            data-attr-id="'+u(s(null!=t?t.id:t,t))+'" \r\n            data-attr-value="'+u(s(null!=t?t.name:t,t))+'">\r\n            <div class="facet-item-header fluid gui item flex jc-sb">\r\n                <span class="gui primary gui-subheading-1 caps m-0 cursor-pointer" title="'+u(s(null!=t?t.name:t,t))+'">\r\n                    '+u(s(null!=t?t.name:t,t))+" "+(null!=(l=i(n(6)).call(c,null!=t?t.facetValues:t,{name:"SelectedFiltersCount",hash:{},data:a}))?l:"")+'\r\n                </span>\r\n                <span>\r\n                    <i  data-attr-id="'+u(s(null!=t?t.id:t,t))+'" \r\n                        class="gui gui-icon selectable pin-unpin-selector gui-icon-unpin m-t-5 m-r-10 unpin-icon cursor-pointer" \r\n                        aria-label="Press enter or space to unpin filter '+u(s(null!=t?t.name:t,t))+'"\r\n                        tabindex="0"></i>\r\n'+(null!=(l=r.if.call(c,null!=t?t.collapsed:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?l:"")+"                </span>\r\n            </div>\r\n"+(null!=(l=e.invokePartial(n(7),t,{name:"facet-label",data:a,indent:"            ",helpers:r,partials:o,decorators:e.decorators}))?l:"")+"        </li>\r\n"},3:function(e,t,n,i,r){return'                        <i class="gui gui-icon selectable gui-icon-chevron-up expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n'},5:function(e,t,n,i,r){return'                        <i class="gui gui-icon selectable gui-icon-chevron-down expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var o;return null!=(o=n.if.call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.favorites:t)?o.length:o,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?o:""},usePartial:!0,useData:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){return void 0!==e&&e+1>t?"gui-hidden extra-filter":""};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e?" remove ":" apply "};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e?"checked":""};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e?"disabled":""};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){var n;return n=t?!e:!!e,n?" gui-hidden ":" "};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n){return e.length>t?'<li class="gui m-b-5 m-t-5"><a tabindex="0" role="treeitem" data-attr-id="{{id}}" data-attr-value="Show More" aria-label="Press enter to show '+(e.length-t)+' more values" class="gui caps gui-body-2 simple show-more-link cursor-pointer p-0 m-t-3">'+(e.length-t)+' More</a></li><li class="gui m-b-5 m-t-5 gui-hidden"><a tabindex="0" role="treeitem" data-attr-value="Show Less" aria-label="Press enter to show less values" class="gui caps gui-body-2 simple show-less-link cursor-pointer p-0 m-t-3">Show Less</a></li>':""};t.default=i},function(e,t,n){function i(e){return e&&(e.__esModule?e.default:e)}var r=n(0);e.exports=(r.default||r).template({1:function(e,t,n,i,r){var o,a=e.lambda,l=e.escapeExpression;return'<li class="gui m-0 p-r-10 p-t-5 p-b-5 p-l-10" \r\n    aria-label="All Filters"\r\n    data-attr-value="All Filters"\r\n    data-attr-ignoreForSearch="true"\r\n    aria-expanded="true"\r\n    aria-live="polite"\r\n    aria-relevant="all"\r\n    aria-atomic="true"\r\n    role="treeitem"\r\n    id="'+l(a(null!=t?t.idPrefix:t,t))+'-unpinned-filter-tree">\r\n    <h6 class="gui gui-subheading-2 caps bold-500 m-b-10 flex jc-sb">\r\n        All FILTERS\r\n        <i class="gui gui-icon selectable gui-icon-chevron-up expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n    </h6>\r\n    <ul aria-labelledby="'+l(a(null!=t?t.idPrefix:t,t))+'-unpinned-filter-tree" class="gui m-0 p-0" role="group">\r\n'+(null!=(o=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.nonFavorites:t,{name:"each",hash:{},fn:e.program(2,r,0),inverse:e.noop,data:r}))?o:"")+"    </ul>\r\n</li>\r\n"},2:function(e,t,r,o,a){var l,s=e.lambda,u=e.escapeExpression,c=null!=t?t:e.nullContext||{};return'        <li aria-label="'+u(s(null!=t?t.name:t,t))+'"\r\n            class="gui item facet-item border-bottom light p-r-10 p-t-5 p-b-5 p-l-5 '+u(i(n(4)).call(c,null!=t?t.collapsed:t,{name:"Collapsed",hash:{},data:a}))+'"\r\n            role="treeitem"\r\n            aria-expanded="'+u(i(n(5)).call(c,null!=t?t.collapsed:t,!0,{name:"Boolean",hash:{},data:a}))+'"\r\n            data-attr-id="'+u(s(null!=t?t.id:t,t))+'" \r\n            data-attr-value="'+u(s(null!=t?t.name:t,t))+'">\r\n            <div class="facet-item-header fluid gui item flex jc-sb">\r\n                <span class="gui primary gui-subheading-1 caps m-0 cursor-pointer" title="'+u(s(null!=t?t.name:t,t))+'">\r\n                    '+u(s(null!=t?t.name:t,t))+" "+(null!=(l=i(n(6)).call(c,null!=t?t.facetValues:t,{name:"SelectedFiltersCount",hash:{},data:a}))?l:"")+'\r\n                </span>\r\n                <span>\r\n                    <i  data-attr-id="'+u(s(null!=t?t.id:t,t))+'" \r\n                        class="gui gui-icon selectable pin-unpin-selector gui-icon-pin m-t-5 m-r-10 pin-icon cursor-pointer" \r\n                        aria-label="Press enter or space to pin filter '+u(s(null!=t?t.name:t,t))+'"\r\n                        tabindex="0"></i>\r\n'+(null!=(l=r.if.call(c,null!=t?t.collapsed:t,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.program(5,a,0),data:a}))?l:"")+"                </span>\r\n            </div>\r\n"+(null!=(l=e.invokePartial(n(7),t,{name:"facet-label",data:a,indent:"            ",helpers:r,partials:o,decorators:e.decorators}))?l:"")+"        </li>\r\n"},3:function(e,t,n,i,r){return'                        <i class="gui gui-icon selectable gui-icon-chevron-up expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n'},5:function(e,t,n,i,r){return'                        <i class="gui gui-icon selectable gui-icon-chevron-down expansion-icon m-t-5 m-r-10 cursor-pointer"></i>\r\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r){var o;return null!=(o=n.if.call(null!=t?t:e.nullContext||{},null!=(o=null!=t?t.nonFavorites:t)?o.length:o,{name:"if",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r}))?o:""},usePartial:!0,useData:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=n(10),o=n(27),a=function(){function e(e,t,n){var a=this;this.lastInputValue="",this.findTreeitems=function(e,t,n){for(var i=e.firstElementChild,r=n;i;){var l=i.getAttribute("role");l&&"treeitem"===l.toLowerCase()&&(r=new o.FacetTreeItem(i,t,n),r.init(),t.treeitems.push(r),t.firstChars.push(r.label.substring(0,1).toLowerCase())),i.firstElementChild&&a.findTreeitems(i,t,r),i=i.nextElementSibling}},this.init=function(){a.treeDomNode.getAttribute("role")||a.treeDomNode.setAttribute("role","tree"),a.findTreeitems(a.treeDomNode,a,!1),a.updateVisibleTreeitems(),a.firstTreeitem.treeItemDomNode.tabIndex=0,a.collapseAllNode.addEventListener("click",a.collapseAllItems),a.expandAllNode.addEventListener("click",a.expandAllItems),a.searchBoxNode.addEventListener("keyup",a.handleSearchForFilters),document.addEventListener("keydown",a.setFocusToSearchBox)},this.destroy=function(){r.DomUtils.off(a.parentElement),document.removeEventListener("keydown",a.setFocusToSearchBox)},this.setFocusToSearchBox=function(e){e.altKey&&"f"===e.key&&(e.preventDefault(),a.searchBoxNode.focus())},this.setFocusToItem=function(e,t){for(var n=0,i=a.treeitems;n<i.length;n++){var r=i[n];r===e?(r.treeItemDomNode.tabIndex=0,t||r.treeItemDomNode.focus()):r.treeItemDomNode.tabIndex=-1}},this.setFocusToFirstVisible=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t];if(i.isVisible){a.setFocusToItem(i,e);break}}},this.setFocusToNextItem=function(e){for(var t,n=a.treeitems.length-1;n>=0;n--){var i=a.treeitems[n];if(i===e)break;i.isVisible&&(t=i)}t&&a.setFocusToItem(t)},this.setFocusToPreviousItem=function(e){for(var t,n=0,i=a.treeitems;n<i.length;n++){var r=i[n];if(r===e)break;r.isVisible&&(t=r)}t&&a.setFocusToItem(t)},this.setFocusToParentItem=function(e){e.groupTreeitem&&a.setFocusToItem(e.groupTreeitem)},this.setFocusToFirstItem=function(){a.setFocusToItem(a.firstTreeitem)},this.setFocusToLastItem=function(){a.setFocusToItem(a.lastTreeitem)},this.expandTreeitem=function(e,t){e.isExpandable&&(r.DomUtils.setAriaExpanded(e.treeItemDomNode,"true"),a.toggleExpansionIcon(e,!0),a.updateVisibleTreeitems(t)),a.collapseAllNode.removeAttribute("disabled"),a.expandAllNode.removeAttribute("disabled")},this.expandAllSiblingItems=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t];i.groupTreeitem===e.groupTreeitem&&i.isExpandable&&a.expandTreeitem(i)}a.notifyCollapseAndExpansion()},this.expandAllItems=function(){for(var e=0,t=a.treeitems;e<t.length;e++){var n=t[e];n.isExpandable&&a.expandTreeitem(n)}a.collapseAllNode.removeAttribute("disabled"),a.expandAllNode.setAttribute("disabled","true"),a.collapseAllNode.focus(),a.notifyCollapseAndExpansion()},this.collapseAllItems=function(){for(var e=0,t=a.treeitems;e<t.length;e++){var n=t[e];n.isExpandable&&a.collapseTreeitem(n)}a.expandAllNode.removeAttribute("disabled"),a.collapseAllNode.setAttribute("disabled","true"),a.expandAllNode.focus(),a.notifyCollapseAndExpansion()},this.collapseAllSiblingItems=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t];i.groupTreeitem===e.groupTreeitem&&i.isExpandable&&a.collapseTreeitem(i)}a.notifyCollapseAndExpansion()},this.collapseTreeitem=function(e,t){var n;n=e.isExpanded()?e:e.groupTreeitem,n&&(r.DomUtils.setAriaExpanded(n.treeItemDomNode,"false"),a.toggleExpansionIcon(n,!1),a.updateVisibleTreeitems(t),a.setFocusToItem(n)),a.collapseAllNode.removeAttribute("disabled"),a.expandAllNode.removeAttribute("disabled")},this.toggleExpansionIcon=function(e,t){var n,i=e.treeItemDomNode.querySelectorAll(".expansion-icon");i&&i.length&&(n=i[0]),t?(n.classList.remove("gui-icon-chevron-down"),n.classList.add("gui-icon-chevron-up")):(n.classList.remove("gui-icon-chevron-up"),n.classList.add("gui-icon-chevron-down"))},this.updateVisibleTreeitems=function(e){a.firstTreeitem=a.treeitems[0];for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t],r=i.treeItemDomNode.parentElement;for(i.isVisible=!0,(i.treeItemDomNode.classList.contains("gui-hidden")||r.classList.contains("gui-hidden"))&&(i.isVisible=!1);r&&r!==a.treeDomNode;)"false"===r.getAttribute("aria-expanded")&&(i.isVisible=!1),r=r.parentElement;i.isVisible&&(a.lastTreeitem=i)}e&&a.notifyCollapseAndExpansion()},this.setFocusByFirstCharacter=function(e,t){var n,i;t=t.toLowerCase(),n=a.treeitems.indexOf(e)+1,n===a.treeitems.length&&(n=0),i=a.getIndexFirstChars(n,t),-1===i&&(i=a.getIndexFirstChars(0,t)),i>-1&&a.setFocusToItem(a.treeitems[i])},this.getIndexFirstChars=function(e,t){for(var n=e;n<a.firstChars.length;n++)if(a.treeitems[n].isVisible&&t===a.firstChars[n])return n;return-1},this.showMoreValues=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t],r=i.treeItemDomNode.parentElement;i.groupTreeitem===e&&(r.classList.remove("gui-hidden"),i.isVisible=!0,i.isShowLessLink&&(r.classList.remove("gui-hidden"),i.treeItemDomNode.focus()),i.isShowMoreLink&&(r.classList.add("gui-hidden"),i.isVisible=!1))}a.updateVisibleTreeitems()},this.showLessValues=function(e){for(var t=0,n=a.treeitems;t<n.length;t++){var i=n[t],r=i.treeItemDomNode.parentElement;i.groupTreeitem===e&&(r.classList.contains("extra-filter")&&(r.classList.add("gui-hidden"),i.isVisible=!1),i.isShowLessLink&&(r.classList.add("gui-hidden"),i.isVisible=!1),i.isShowMoreLink&&(r.classList.remove("gui-hidden"),i.treeItemDomNode.focus()))}a.updateVisibleTreeitems()},this.handleLabelChange=function(e){var t=r.DomUtils.toggleLabel(e.treeItemDomNode),n=t?i.FilterActionType.Add:i.FilterActionType.Minus;e.treeItemDomNode.setAttribute("aria-selected",t.toString()),a.configStore.Options.onFilterChange(e.id,e.label,n,e.dataType,e.isRange)},this.notifyCollapseAndExpansion=function(){for(var e=a.configStore.Options.facetConfig,t=[],n=0,i=a.treeitems;n<i.length;n++){var r=i[n];if(r.isExpandable)for(var o=0,l=e;o<l.length;o++){var s=l[o];if(s.id===r.id){s.collapsed=!r.isExpanded(),t.push({key:s.id,collapsed:s.collapsed});break}}}a.configStore.Options.onCollapseToggle(t)},this.handlePinUnpin=function(e,t,n){for(var i=a.configStore.Options.facetConfig,r=0,o=i;r<o.length;r++){var l=o[r];if(l.id===n){l.pinned=t;break}}a.facet.reRender(),a.configStore.Options.onPinUnpin(n,t),e.stopPropagation()},this.handleSearchForFilters=function(e){var t=e.target,n=t.parentElement,i=t.value.toLowerCase();if(i!==a.lastInputValue){a.lastInputValue=i;var r=!1;n.classList.add("loading"),void 0!==i&&null!==i&&""!==i.trim()||(r=!0),setTimeout(function(){r?a.handleBlankInputSearch():a.handleNotBlankInputSearch(i),a.updateVisibleTreeitems(),a.setFocusToFirstVisible(!0),n.classList.remove("loading")},1)}},this.handleBlankInputSearch=function(){for(var e=0,t=a.treeitems;e<t.length;e++){var n=t[e];if(!n.ignoreForSearch&&(n.isExpandable&&(n.isVisible=!0,r.DomUtils.show(n.treeItemDomNode),n.treeItemDomNode.classList.contains("collapsed")?r.DomUtils.setAriaExpanded(n.treeItemDomNode,"true"):r.DomUtils.setAriaExpanded(n.treeItemDomNode,"false")),!n.isExpandable)){if(!n.isShowMoreLink&&!n.isShowLessLink){n.treeItemDomNode.parentElement.classList.contains("extra-filter")?(n.isVisible=!1,r.DomUtils.hide(n.treeItemDomNode.parentElement)):(n.isVisible=!0,r.DomUtils.show(n.treeItemDomNode.parentElement));continue}if(n.isShowMoreLink){n.isVisible=!0,r.DomUtils.show(n.treeItemDomNode.parentElement);continue}if(n.isShowLessLink){n.isVisible=!1,r.DomUtils.hide(n.treeItemDomNode.parentElement);continue}}}},this.handleNotBlankInputSearch=function(e){for(var t,n,i,o=0,l=a.treeitems;o<l.length;o++){var s=l[o];s.ignoreForSearch||(s.isShowLessLink||s.isShowMoreLink?(s.isVisible=!1,r.DomUtils.hide(s.treeItemDomNode.parentElement)):(s.isExpandable&&(t=s,n=!1,i=!1,s.isVisible=!1,r.DomUtils.setAriaExpanded(s.treeItemDomNode,"false"),r.DomUtils.hide(s.treeItemDomNode),s.label.toLowerCase().indexOf(e)>-1&&(n=!0)),(n||i)&&(t.isVisible=!0,r.DomUtils.setAriaExpanded(t.treeItemDomNode,"true"),r.DomUtils.show(t.treeItemDomNode)),s.isExpandable||s.groupTreeitem!==t||(n?(s.isVisible=!0,r.DomUtils.show(s.treeItemDomNode.parentElement)):s.label.toLowerCase().indexOf(e)>-1?(s.isVisible=!0,r.DomUtils.show(s.treeItemDomNode.parentElement),i=!0):(s.isVisible=!1,r.DomUtils.hide(s.treeItemDomNode.parentElement)))))}},this.configStore=n,this.parentElement=e,this.facet=t,this.treeDomNode=this.parentElement.querySelectorAll("[role=tree]")[0],this.collapseAllNode=this.parentElement.querySelectorAll(".collapse-all")[0],this.expandAllNode=this.parentElement.querySelectorAll(".expand-all")[0],this.searchBoxNode=this.parentElement.querySelectorAll(".filter-search-input")[0],this.treeitems=[],this.firstChars=[],this.firstTreeitem=null,this.lastTreeitem=null}return e}();t.FacetTree=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),r=n(28),o=function(){function e(e,t,n){var o=this;this.init=function(){o.treeItemDomNode.tabIndex=-1,o.treeItemDomNode.getAttribute("role")||o.treeItemDomNode.setAttribute("role","treeitem"),o.treeItemDomNode.addEventListener("keydown",o.handleKeydown.bind(o)),o.treeItemDomNode.addEventListener("click",o.handleClick.bind(o)),o.treeItemDomNode.addEventListener("focus",o.handleFocus.bind(o)),o.treeItemDomNode.addEventListener("blur",o.handleBlur.bind(o)),o.isExpandable?(o.treeItemDomNode.firstElementChild.addEventListener("mouseover",o.handleMouseOver.bind(o)),o.treeItemDomNode.firstElementChild.addEventListener("mouseout",o.handleMouseOut.bind(o))):(o.treeItemDomNode.addEventListener("mouseover",o.handleMouseOver.bind(o)),o.treeItemDomNode.addEventListener("mouseout",o.handleMouseOut.bind(o))),o.pinUnPinDomNode&&(o.pinUnPinDomNode.addEventListener("click",o.handleUnPinClick),o.pinUnPinDomNode.addEventListener("keydown",o.handleUnPinKeyup))},this.destroy=function(){var e=o.treeItemDomNode.cloneNode(!0);o.treeItemDomNode.parentNode.replaceChild(e,o.treeItemDomNode),o.treeItemDomNode=null},this.isExpanded=function(){return!!o.isExpandable&&i.DomUtils.isAriaExpanded(o.treeItemDomNode)},this.handleUnPinClick=function(e){e.target.classList.contains("unpin-icon")?o.tree.handlePinUnpin(e,!1,o.id):o.tree.handlePinUnpin(e,!0,o.id)},this.handleUnPinKeyup=function(e){var t=e.target;switch(e.keyCode){case r.KeyCodes.SPACE:case r.KeyCodes.RETURN:t.classList.contains("unpin-icon")?o.tree.handlePinUnpin(e,!1,o.id):o.tree.handlePinUnpin(e,!0,o.id)}e.stopPropagation()},this.handleKeydown=function(e){function t(e){return 1===e.length&&e.match(/\S/)}function n(e){"*"===a?(e.tree.expandAllSiblingItems(e),i=!0):t(a)&&(e.tree.setFocusByFirstCharacter(e,a),i=!0)}var i=(e.currentTarget,!1),a=e.key;if(o.stopDefaultClick=!1,!(e.altKey||e.ctrlKey||e.metaKey)){if(e.shiftKey)e.keyCode===r.KeyCodes.SPACE||e.keyCode===r.KeyCodes.RETURN?(e.stopPropagation(),o.stopDefaultClick=!0):t(a)&&n(o);else switch(e.keyCode){case r.KeyCodes.SPACE:case r.KeyCodes.RETURN:i=!0,o.isExpandable?o.isExpanded()?o.tree.collapseTreeitem(o,!0):o.tree.expandTreeitem(o,!0):(o.isShowMoreLink&&o.tree.showMoreValues(o.groupTreeitem),o.isShowLessLink&&o.tree.showLessValues(o.groupTreeitem),o.isLabel&&o.tree.handleLabelChange(o));break;case r.KeyCodes.UP:o.tree.setFocusToPreviousItem(o),i=!0;break;case r.KeyCodes.DOWN:o.tree.setFocusToNextItem(o),i=!0;break;case r.KeyCodes.RIGHT:o.isExpandable&&(o.isExpanded()?o.tree.setFocusToNextItem(o):o.tree.expandTreeitem(o,!0)),i=!0;break;case r.KeyCodes.LEFT:o.isExpandable&&o.isExpanded()?(o.tree.collapseTreeitem(o,!0),i=!0):o.inGroup&&(o.tree.setFocusToParentItem(o),i=!0);break;case r.KeyCodes.HOME:o.tree.setFocusToFirstItem(),i=!0;break;case r.KeyCodes.END:o.tree.setFocusToLastItem(),i=!0;break;default:t(a)&&n(o)}i&&(e.stopPropagation(),e.preventDefault())}},this.handleClick=function(e){(e.target===o.treeItemDomNode||i.DomUtils.isSelfOrDescendant(o.treeItemDomNode.firstElementChild,e.target))&&(o.isExpandable?(o.isExpanded()?o.tree.collapseTreeitem(o,!0):o.tree.expandTreeitem(o,!0),e.stopPropagation()):(o.isShowMoreLink&&o.tree.showMoreValues(o.groupTreeitem),o.isShowLessLink&&o.tree.showLessValues(o.groupTreeitem),o.isLabel&&o.tree.handleLabelChange(o),e.stopPropagation(),e.preventDefault()))},this.handleFocus=function(e){var t=o.treeItemDomNode;o.isExpandable&&(t=t.firstElementChild),t.classList.add("focus")},this.handleBlur=function(e){var t=this.treeItemDomNode;this.isExpandable&&(t=t.firstElementChild),t.classList.remove("focus")},this.handleMouseOver=function(e){e.currentTarget.classList.add("hover")},this.handleMouseOut=function(e){e.currentTarget.classList.remove("hover")},e.tabIndex=-1,this.tree=t,this.groupTreeitem=n,this.treeItemDomNode=e,this.stopDefaultClick=!1;var a=this.treeItemDomNode.firstElementChild;a&&(this.pinUnPinDomNode=a.querySelector(".pin-unpin-selector")),this.id=e.getAttribute("data-attr-id"),this.label=e.getAttribute("data-attr-value"),this.dataType=e.getAttribute("data-attr-type"),this.isRange="true"===e.getAttribute("data-attr-isRange"),this.ignoreForSearch="true"===e.getAttribute("data-attr-ignoreForSearch"),this.isShowMoreLink=e.classList.contains("show-more-link"),this.isShowLessLink=e.classList.contains("show-less-link"),this.isLabel="label"===e.tagName.toLowerCase(),this.isExpandable=!1,this.isVisible=!1,this.inGroup=!1,n&&(this.inGroup=!0);for(var l=e.firstElementChild;l;){if("ul"===l.tagName.toLowerCase()){l.setAttribute("role","group"),this.isExpandable=!0;break}l=l.nextElementSibling}}return e}();t.FacetTreeItem=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyCodes=Object.freeze({RETURN:13,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;if(this.defaultFacetOptions={animationTime:200,collapsed:!1,containerElement:null,facetConfig:[],idPrefix:Math.floor(16777216*(1+Math.random())).toString(),noOfFacetToShow:5,onCollapseToggle:function(e){},onFilterChange:function(e,t,n){},onPinUnpin:function(e,t){}},this.extendOptions=function(e){return t.options=jQuery.extend({},t.defaultFacetOptions,e)},this.extendOptions(e),null===e.containerElement)throw new Error("Please Provide a valid container Element object")}return Object.defineProperty(e.prototype,"Options",{get:function(){return this.options},enumerable:!0,configurable:!0}),e}();t.FacetConfigStore=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(31),r=n(32),o=n(35),a=n(36),l=function(){function e(e){var t=this;this.handlerChain=[],this.bind=function(e){setTimeout(function(){var n=t.templateService.bind(e);t.filterElement.html(n)},1)},this.destroy=function(){void 0!==t.filterElement&&t.filterElement.off(),t.handlerChain.forEach(function(e){void 0!==e&&void 0!==e.deregister&&e.deregister()})},this.configStore=new o.FilterConfigStore(e),this.filterElement=jQuery(e.containerElement),this.templateService=new r.FilterTemplateService(this.configStore),this.handlerChain.push(new a.FilterActionHandler(this.filterElement,this.configStore)),this.handlerChain.push(new i.HotKeysFiltersHandler),this.handlerChain.forEach(function(e){e.RegisterDomHandler()})}return e}();t.Filter=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){var e=this;this.RegisterDomHandler=function(){jQuery(document).on("keydown",e.focusOnSearch)},this.onResize=function(){throw new Error("Method not implemented.")},this.onDocumentClick=function(e){},this.deRegister=function(){jQuery(document).off("keydown",e.focusOnSearch)},this.focusOnSearch=function(e){e.altKey&&"r"===e.key&&(e.preventDefault(),jQuery(".facet-subheader .remove-all").focus())}}return e}();t.HotKeysFiltersHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(33),r=function(){function e(e){var t=this;this.configStore=e,this.mergeWithFacetConfig=function(e){for(var n=[],i=0,r=e;i<r.length;i++)for(var o=r[i],a=0,l=t.configStore.Options.filterConfig;a<l.length;a++){var s=l[a];if(s.id===o.id){n.push({collapsed:s.collapsed,facetRanges:o.facetRanges,facetValues:o.facetValues,id:s.id,name:s.name,order:s.order,pinned:s.pinned,type:s.type});break}}return n},this.tempateFunctionForFacetSubHeader=i}return e.prototype.bind=function(e){var t=this.mergeWithFacetConfig(e);return this.tempateFunctionForFacetSubHeader({filters:t})},e}();t.FilterTemplateService=r},function(e,t,n){function i(e){return e&&(e.__esModule?e.default:e)}var r=n(0);e.exports=(r.default||r).template({1:function(e,t,n,i,r,o,a){var l;return'<section class="content facet-subheader gui fluid-w basic curved p-5" aria-label="Applied Filters">\n    <span class="gui gui-subheading-2 caps">Applied Filters</span>\n    <button class="gui m-l-5 remove-all" aria-label="Clear All Filters">\n        <i class="gui-icon gui-icon-cancel"></i>\n        <span>Clear All</span>\n    </button>\n    <span class="gui m-l-10">\n'+(null!=(l=n.each.call(null!=t?t:e.nullContext||{},null!=t?t.filters:t,{name:"each",hash:{},fn:e.program(2,r,0,o,a),inverse:e.noop,data:r}))?l:"")+"    </span>\n</section>\n"},2:function(e,t,n,i,r,o,a){var l,s=null!=t?t:e.nullContext||{};return'        <span class="gui m-r-5">\n            <span class="gui large labels facet-labels">\n                <span class="gui gui-subheading-1">'+e.escapeExpression(e.lambda(null!=t?t.name:t,t))+"</span>\n"+(null!=(l=n.each.call(s,null!=t?t.facetValues:t,{name:"each",hash:{},fn:e.program(3,r,0,o,a),inverse:e.noop,data:r}))?l:"")+(null!=(l=n.each.call(s,null!=t?t.facetRanges:t,{name:"each",hash:{},fn:e.program(5,r,0,o,a),inverse:e.noop,data:r}))?l:"")+"            </span>\n        </span>\n"},3:function(e,t,r,o,a,l,s){var u=e.lambda,c=e.escapeExpression;return'                <button aria-label="Clear filter '+c(u(null!=t?t.label:t,t))+" of "+c(u(null!=t?t.name:t,t))+'"\n                        class="gui m-0 m-t-2 m-r-2 p-4 label cursor-pointer strikethrough-hover" \n                        data-filter-entry="'+c(u(null!=s[1]?s[1].id:s[1],t))+":::"+c(u(null!=t?t.label:t,t))+":::"+c(u(null!=s[1]?s[1].type:s[1],t))+'">\n                    '+c(i(n(8)).call(null!=t?t:e.nullContext||{},null!=s[1]?s[1].type:s[1],null!=t?t.label:t,{name:"FormatLabelByType",hash:{},data:a}))+'\n                    <i class="gui-icon gui-icon-cancel"></i>\n                </button>\n'},5:function(e,t,r,o,a,l,s){var u=e.lambda,c=e.escapeExpression;return'                <button aria-label="Clear Range for filter '+c(u(null!=t?t.name:t,t))+'"\n                        class="gui m-0 m-t-2 m-r-2 p-4 label cursor-pointer strikethrough-hover" \n                        data-filter-entry="'+c(u(null!=s[1]?s[1].id:s[1],t))+":::"+c(u(null!=t?t.label:t,t))+":::"+c(u(null!=s[1]?s[1].type:s[1],t))+':::true">\n                    '+c(i(n(34)).call(null!=t?t:e.nullContext||{},null!=t?t.min:t,null!=t?t.max:t,null!=s[1]?s[1].type:s[1],{name:"Range",hash:{},data:a}))+'\n                    <i class="gui-icon gui-icon-cancel"></i>\n                </button>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,i,r,o,a){var l;return null!=(l=n.if.call(null!=t?t:e.nullContext||{},null!=(l=null!=t?t.filters:t)?l.length:l,{name:"if",hash:{},fn:e.program(1,r,0,o,a),inverse:e.noop,data:r}))?l:""},useData:!0,useDepths:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),r=function(e,t,n){var r="",o=e,a=t;return"Edm.DateTimeOffset"===n&&(void 0!==e&&null!==e&&""!==e&&(o=i(e).format("DD-MMM-YYYY")),void 0!==t&&null!==t&&""!==t&&(a=i(t).format("DD-MMM-YYYY"))),void 0!==o&&null!==o&&""!==o&&(r+=" from: "+o),void 0!==a&&null!==a&&""!==a&&(r+=" to: "+a),r};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){var t=this;if(this.defaultfilterOptions={animationTime:200,containerElement:null,filterConfig:[],onAllFilterRemove:function(){},onFilterChange:function(e,t,n){}},this.extendOptions=function(e){return t.options=jQuery.extend({},t.defaultfilterOptions,e)},this.extendOptions(e),null===e.containerElement)throw new Error("Please Provide a valid container Element object for filters")}return Object.defineProperty(e.prototype,"Options",{get:function(){return this.options},enumerable:!0,configurable:!0}),e}();t.FilterConfigStore=i},function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(37)),i(n(38)),i(n(39)),i(n(42)),i(n(43)),i(n(44)),i(n(45)),i(n(46))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=n(12),o=n(2),a=function(){function e(e,t,n){var a=this;this.element=e,this.configStore=t,this.templateService=n,this.onFocusInOfTreeItem=function(e){var t=jQuery(e.target),n=t.is("[role=treeitem]")?t:t.parents("[role=treeitem]").first(),i=jQuery("#"+n.attr("aria-labelledBy"));i&&i.length?i.addClass("focus"):n.addClass("focus"),e.stopImmediatePropagation(),e.stopPropagation()},this.onFocusOutOfTreeItem=function(e){var t=jQuery(e.target),n=t.is("[role=treeitem]")?t:t.parents("[role=treeitem]").first(),i=jQuery("#"+n.attr("aria-labelledBy"));i&&i.length?i.removeClass("focus"):n.removeClass("focus"),e.stopPropagation()},this.handleKeyDown=function(e){console.log("Handling Key Down");var t=e.keyCode||e.which;if(!([i.FacetConstants.EnterKeyCode,i.FacetConstants.SpaceKeyCode,i.FacetConstants.UpKeyCode,i.FacetConstants.DownKeyCode].indexOf(t)<=-1))return[i.FacetConstants.EnterKeyCode,i.FacetConstants.SpaceKeyCode].indexOf(t)>-1?void a.handleVisibilityOfOne(e):[i.FacetConstants.UpKeyCode,i.FacetConstants.DownKeyCode].indexOf(t)>-1?void a.handleUpAndDownOfTreeItem(e):void 0},this.handleUpAndDownOfTreeItem=function(e){var t=e.keyCode||e.which;if(!([i.FacetConstants.UpKeyCode,i.FacetConstants.DownKeyCode].indexOf(t)<=-1)){console.log("Handling Up and Down");var n=jQuery(e.target),r=n.is("[role=treeitem]")?n:n.parents("[role=treeitem]").first();if(e.preventDefault(),i.FacetConstants.UpKeyCode===t){var o=r.prevAll(":visible").first();if(o.length)return void o.focus();var a=r.parent().prevAll(":visible").first().find("[role=treeitem]");if(a.length)return void a.focus();r.parents("[role=treeitem]").each(function(e,t){var n=jQuery(t),i=n.prevAll(":visible").first();if(i.length)return i.focus(),!1})}if(i.FacetConstants.DownKeyCode===t){var l=r.find("[role=treeitem]:visible").first();if(l.length)return void l.focus();var s=r.nextAll(":visible").first();if(s.length)return void s.focus();var u=r.parent().nextAll(":visible").first().find("[role=treeitem]");if(u.length)return void u.focus();r.parents("[role=treeitem]").each(function(e,t){var n=jQuery(t),i=n.nextAll(":visible").first();if(i.length)return i.focus(),!1})}}},this.handleVisibilityOfAll=function(e,t){var n=e.keyCode||e.which;if("click"===e.type||"keyup"!==e.type||n===i.FacetConstants.EnterKeyCode||n===i.FacetConstants.SpaceKeyCode){var l=t===o.ShowHide.Show;a.element.find(".facet-item-header").each(function(e,n){var i=jQuery(n).parents(".facet-item"),o=i.attr("data-attr-name");l?i.addClass("collapsed"):i.removeClass("collapsed"),r.ExpandCollapseManager.ControlVisibilityOfFilter(jQuery(n),t,o)});for(var s=a.configStore.Options.facetConfig,u=[],c=0,d=s;c<d.length;c++){var f=d[c];f.collapsed=l,u.push({key:f.id,collapsed:f.collapsed})}a.configStore.Options.onCollapseToggle(u),e.stopPropagation()}},this.handleVisibilityOfOne=function(e){var t=jQuery(e.target),n=t.is("[role=treeitem]")?t:t.parents("[role=treeitem]").first();if(n.hasClass("collapsible")&&t.parents(".facet-item-header").length){var i=n.attr("data-attr-name"),l=n.attr("data-attr-id"),s=n.hasClass("collapsed");s?n.removeClass("collapsed"):n.addClass("collapsed");for(var u=a.configStore.Options.facetConfig,c=[],d=0,f=u;d<f.length;d++){var p=f[d];if(p.id===l){p.collapsed=!s,c.push({key:p.id,collapsed:p.collapsed});break}}a.configStore.Options.onCollapseToggle(c),r.ExpandCollapseManager.ControlVisibilityOfFilter(n,o.ShowHide.Toggle,i),e.stopPropagation()}}}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".expand-all",function(t){e.handleVisibilityOfAll(t,o.ShowHide.Show)}),this.element.on("keyup",".expand-all",function(t){e.handleVisibilityOfAll(t,o.ShowHide.Show)}),this.element.on("click",".collapse-all",function(t){e.handleVisibilityOfAll(t,o.ShowHide.Hide)}),this.element.on("keyup",".collapse-all",function(t){e.handleVisibilityOfAll(t,o.ShowHide.Hide)}),this.element.on("click","[role=treeitem]",this.handleVisibilityOfOne),this.element.on("keydown","[role=treeitem]",this.handleKeyDown),this.element.on("focusin","[role=treeitem]",this.onFocusInOfTreeItem),this.element.on("focusout","[role=treeitem]",this.onFocusOutOfTreeItem)},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.ExpandCollapseFacetsHandler=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=function(){function e(e,t){this.element=e,this.configStore=t}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("change",".facet-body .facet-item-description .facet-value-checkbox",function(t){var n=jQuery(t.target),r=n.val().toString(),o=r.split(":::"),a=n.is(":checked"),l=a?i.FilterActionType.Add:i.FilterActionType.Minus;e.configStore.Options.onFilterChange(o[0],o[1],l,o[2],!1),t.stopPropagation()})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.FacetActionHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(40),r=n(12),o=n(2),a=function(){function e(e,t){var n=this;this.element=e,this.configStore=t,this.handleSearch=function(e){var t=jQuery(e.target);t.parent().addClass("loading"),t.next().show(),setTimeout(function(){var e=t.val().toString().toLowerCase();n.element.find(".facet-list .facet-item").each(function(t,i){var a=jQuery(i),l=a.attr("data-attr-name"),s=!1,u=!1;void 0!==e&&null!==e&&""!==e.trim()||(u=!0),u||-1===a.attr("data-attr-name").toLowerCase().indexOf(e)||(s=!0),u?(n.element.find(".show-more-link").each(function(e,t){jQuery(t).hasClass("gui-hidden")?jQuery(t).hide():jQuery(t).show()}),n.element.find(".show-less-link").each(function(e,t){jQuery(t).hasClass("gui-hidden")?jQuery(t).hide():jQuery(t).show()})):(n.element.find(".show-more-link").hide(),n.element.find(".show-less-link").hide());var c=!1;a.find("label").each(function(t,n){var i=jQuery(n);if(u?i.parent(".extra-filter").hide():i.parent(".extra-filter").show(),s||u)return void i.show();-1===i.attr("data-attr-value").toLowerCase().indexOf(e)?i.hide():(c=!0,i.show())});var d=a.find(".facet-item-header"),f=a.hasClass("collapsed");s||c||u?a.fadeIn(n.configStore.Options.animationTime):a.fadeOut(n.configStore.Options.animationTime),f||s||c?r.ExpandCollapseManager.ControlVisibilityOfFilter(d,o.ShowHide.Show,l):r.ExpandCollapseManager.ControlVisibilityOfFilter(d,o.ShowHide.Hide,l)}),t.parent().removeClass("loading"),t.next().hide()},1),e.stopPropagation()}}return e.prototype.RegisterDomHandler=function(){this.element.on("keyup",".filter-search-input",i.debounce(250,this.handleSearch))},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.FacetSearchHandler=a},function(e,t,n){var i=n(13),r=n(41);e.exports={throttle:i,debounce:r}},function(e,t,n){var i=n(13);e.exports=function(e,t,n){return void 0===n?i(e,t,!1):i(e,n,!1!==t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=function(){function e(e,t){this.filterElement=e,this.configStore=t}return e.prototype.RegisterDomHandler=function(){var e=this;this.filterElement.on("click",".facet-subheader .facet-labels .label",function(t){var n=jQuery(t.target);n.is(".label")||(n=n.parents(".label"));var r=n.attr("data-filter-entry").toString(),o=r.split(":::"),a=!1;4===o.length&&(a=!0),e.configStore.Options.onFilterChange(o[0],o[1],i.FilterActionType.Minus,o[2],a),t.stopPropagation()}),this.filterElement.on("click",".facet-subheader .remove-all",function(t){e.configStore.Options.onAllFilterRemove(),t.stopPropagation()})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.FilterActionHandler=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=this;this.element=e,this.configStore=t,this.RegisterDomHandler=function(){n.element.on("click",".hide-facet",n.hideFacet),n.element.on("click",".show-facet",n.showFacet),n.element.on("keyup",".hide-facet",function(e){var t=e.keyCode||e.which;13!==t&&32!==t||n.hideFacet(e)}),n.element.on("keyup",".show-facet",function(e){var t=e.keyCode||e.which;13!==t&&32!==t||n.showFacet(e)})},this.hideFacet=function(e){$(".facet-body").hide(),$(".facet-collapsed-body").fadeIn(n.configStore.Options.animationTime),n.configStore.Options.collapsed=!0,e.stopPropagation()},this.showFacet=function(e){$(".facet-collapsed-body").hide(),$(".facet-body").fadeIn(n.configStore.Options.animationTime),n.configStore.Options.collapsed=!1,e.stopPropagation()}}return e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.HideFacetSectionHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,n){this.element=e,this.configStore=t,this.templateService=n}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".pin-icon",function(t){e.handlePinUnpin(t,!0)}),this.element.on("click",".unpin-icon",function(t){e.handlePinUnpin(t,!1)}),this.element.on("keyup",".pin-icon",function(t){var n=t.keyCode||t.which;13!==n&&32!==n||e.handlePinUnpin(t,!0)}),this.element.on("keyup",".unpin-icon",function(t){var n=t.keyCode||t.which;13!==n&&32!==n||e.handlePinUnpin(t,!1)})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e.prototype.handlePinUnpin=function(e,t){for(var n=this,i=jQuery(e.target),r=i.attr("data-attr-id"),o=this.configStore.Options.facetConfig,a=0,l=o;a<l.length;a++){var s=l[a];if(s.id===r){s.pinned=t;break}}setTimeout(function(){n.element.html(n.templateService.bind(n.templateService.getData()))},1),this.configStore.Options.onPinUnpin(r,t),e.stopPropagation()},e}();t.PinUnpinEventHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){this.element=e,this.configStore=t}return e.prototype.RegisterDomHandler=function(){var e=this;this.element.on("click",".show-more-link",function(t){e.showMoreLessFilters(t,!0)}),this.element.on("click",".show-less-link",function(t){e.showMoreLessFilters(t,!1)}),this.element.on("keyup",".show-more-link",function(t){var n=t.keyCode||t.which;13!==n&&32!==n||e.showMoreLessFilters(t,!0)}),this.element.on("keyup",".show-less-link",function(t){var n=t.keyCode||t.which;13!==n&&32!==n||e.showMoreLessFilters(t,!1)})},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e.prototype.showMoreLessFilters=function(e,t){var n=jQuery(e.target);t?n.parents(".facet-item-description").find(".extra-filter").fadeIn(this.configStore.Options.animationTime,function(){n.parent().hide(),n.parent().next().show().find("a").focus()}):n.parents(".facet-item-description").find(".extra-filter").fadeOut(this.configStore.Options.animationTime,function(){n.parent().prev().show().find("a").focus(),n.parent().hide()}),e.stopPropagation()},e}();t.ShowMoreLessHandler=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),r=function(){function e(e){var t=this;this.element=e,this.deRegister=function(){t.element.off("keydown",".arrowkeys-aware",t.handleArrowKeys)},this.handleArrowKeys=function(e){var t=e.which;if(t===i.FacetConstants.UpKeyCode||t===i.FacetConstants.DownKeyCode){var n=jQuery(e.target);n.is(".arrowkeys-aware")||(n=n.parent());var r,o=n.parent();if(t===i.FacetConstants.UpKeyCode&&(r=o.prev().find(".arrowkeys-aware")),t===i.FacetConstants.DownKeyCode&&(r=o.next().find(".arrowkeys-aware")),r&&r.length)e.view.event.preventDefault(),e.stopPropagation(),r.focus();else{var a=o.next().find("show-more-link")||o.next().find("show-less-link");a&&a.length&&a.focus()}}}}return e.prototype.RegisterDomHandler=function(){this.element.on("keydown",".arrowkeys-aware",this.handleArrowKeys)},e.prototype.onResize=function(){},e.prototype.onDocumentClick=function(e){},e}();t.FacetKeyBoardNavigationHandler=r}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy9mYWNldG9vLm1pbi5qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgOTg4YzYxMjMzOGFhNjUzY2YwM2MiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIkhhbmRsZWJhcnNcIixcImFtZFwiOlwiaGFuZGxlYmFycy5ydW50aW1lXCIsXCJjb21tb25qczJcIjpcImhhbmRsZWJhcnMvcnVudGltZVwiLFwiY29tbW9uanNcIjpcImhhbmRsZWJhcnMvcnVudGltZVwifSIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvbW9kZWxzL0ZpbHRlckFjdGlvblR5cGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvU2hvd0hpZGUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9mYWNldC1ib2R5LmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvQ29sbGFwc2VkLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9Cb29sZWFuLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9TZWxlY3RlZEZpbHRlcnNDb3VudC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2ZhY2V0LWxhYmVsLmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvRm9ybWF0TGFiZWxCeVR5cGUudHMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9tZW50XCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2ExMXkvRG9tVXRpbHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2NvbmZpZy9GYWNldENvbnN0YW50cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZU1hbmFnZXIudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Rocm90dGxlLWRlYm91bmNlL3Rocm90dGxlLmpzIiwid2VicGFjazovLy8uL3NyYy90cy9tYWluL0VudHJ5LnRzIiwid2VicGFjazovLy8uL3NyYy90cy9tYWluL0ZhY2V0LnRzIiwid2VicGFjazovLy8uL3NyYy90cy9zZXJ2aWNlcy9GYWNldFRlbXBsYXRlU2VydmljZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2ZhY2V0LW1haW4uaGJzIiwid2VicGFjazovLy8uL3NyYy9oYnMvZmFjZXQtcGlubmVkLmhicyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tMZW5ndGgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9oZWxwZXJzL0FwcGx5UmVtb3ZlLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9DaGVja2VkLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaGJzL2hlbHBlcnMvSGlkZGVuLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9TaG93TW9yZUxlc3NMaW5rLnRzIiwid2VicGFjazovLy8uL3NyYy9oYnMvZmFjZXQtdW5waW5uZWQuaGJzIiwid2VicGFjazovLy8uL3NyYy90cy9hMTF5L0ZhY2V0VHJlZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvYTExeS9GYWNldFRyZWVJdGVtLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9hMTF5L0tleUNvZGVzLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9jb25maWcvRmFjZXRDb25maWdTdG9yZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvbWFpbi9GaWx0ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvSG90S2V5c0ZpbHRlcnNIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9zZXJ2aWNlcy9GaWx0ZXJUZW1wbGF0ZVNlcnZpY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2hicy9mYWNldC1hcHBsaWVkLWZpbHRlcnMuaGJzIiwid2VicGFjazovLy8uL3NyYy9oYnMvaGVscGVycy9SYW5nZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvY29uZmlnL0ZpbHRlckNvbmZpZ1N0b3JlLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL2luZGV4LnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9GYWNldEFjdGlvbkhhbmRsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmFjZXRTZWFyY2hIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aHJvdHRsZS1kZWJvdW5jZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdGhyb3R0bGUtZGVib3VuY2UvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmlsdGVyQWN0aW9uSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9IaWRlRmFjZXRTZWN0aW9uSGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9QaW5VbnBpbkV2ZW50SGFuZGxlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9TaG93TW9yZUxlc3NIYW5kbGVyLnRzIiwid2VicGFjazovLy8uL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlci50cyJdLCJuYW1lcyI6WyJyb290IiwiZmFjdG9yeSIsImV4cG9ydHMiLCJtb2R1bGUiLCJyZXF1aXJlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXyIsIl9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fIiwibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidmFsdWUiLCJGaWx0ZXJBY3Rpb25UeXBlIiwiU2hvd0hpZGUiLCJIYW5kbGViYXJzIiwidGVtcGxhdGUiLCJjb21waWxlciIsIm1haW4iLCJjb250YWluZXIiLCJkZXB0aDAiLCJoZWxwZXJzIiwicGFydGlhbHMiLCJkYXRhIiwic3RhY2sxIiwiYWxpYXMxIiwibGFtYmRhIiwiYWxpYXMyIiwiZXNjYXBlRXhwcmVzc2lvbiIsImlkUHJlZml4IiwiaW52b2tlUGFydGlhbCIsImluZGVudCIsImRlY29yYXRvcnMiLCJ1c2VQYXJ0aWFsIiwidXNlRGF0YSIsImNvbGxhcHNlZCIsImRlZmF1bHQiLCJCb29sZWFuVmFsdWUiLCJib29sIiwibmVnYXRlIiwic2VsZWN0ZWRGaWx0ZXJzQ291bnQiLCJmYWNldFZhbHVlcyIsImluZGV4IiwidW5kZWZpbmVkIiwibGVuZ3RoIiwiX2kiLCJmYWNldFZhbHVlc18xIiwiZmFjZXRWYWx1ZSIsInNlbGVjdGVkIiwiX19kZWZhdWx0Iiwib2JqIiwiMSIsImJsb2NrUGFyYW1zIiwiZGVwdGhzIiwibnVsbENvbnRleHQiLCJhbGlhczMiLCJoYXNoIiwibGFiZWwiLCJpZCIsInR5cGUiLCJjb3VudCIsImRpc2FibGVkIiwiZWFjaCIsImZuIiwicHJvZ3JhbSIsImludmVyc2UiLCJub29wIiwidXNlRGVwdGhzIiwibW9tZW50IiwiZm9ybWF0TGFiZWxCeVR5cGUiLCJ1dGMiLCJmb3JtYXQiLCJEb21VdGlscyIsImlzRGVzY2VuZGFudCIsInBhcmVudCIsImNoaWxkIiwibm9kZSIsInBhcmVudE5vZGUiLCJpc1NlbGZPckRlc2NlbmRhbnQiLCJpc0hpZGRlbiIsIm9mZnNldFBhcmVudCIsImlzQXJpYUhpZGRlbiIsImdldEF0dHJpYnV0ZSIsInNldEFyaWFIaWRkZW4iLCJFcnJvciIsInNldEF0dHJpYnV0ZSIsImlzQXJpYUV4cGFuZGVkIiwic2V0QXJpYUV4cGFuZGVkIiwic2hvdyIsImNsYXNzTGlzdCIsInJlbW92ZSIsImhpZGUiLCJhZGQiLCJ0b2dnbGVMYWJlbCIsImZvcklkIiwiaHRtbEZvciIsImlucHV0IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2hlY2tlZCIsIm9mZiIsIm5ld05vZGUiLCJjbG9uZU5vZGUiLCJyZXBsYWNlQ2hpbGQiLCJGYWNldENvbnN0YW50cyIsIlVwS2V5Q29kZSIsIkRvd25LZXlDb2RlIiwiRW50ZXJLZXlDb2RlIiwiU3BhY2VLZXlDb2RlIiwiU2hvd0hpZGVfMSIsIkV4cGFuZENvbGxhcHNlTWFuYWdlciIsIkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIiLCJ0YXJnZXQiLCJzaG93SGlkZSIsImljb25FbGVtZW50IiwiZmluZCIsImN1cnJlbnRseVZpc2libGUiLCJoYXNDbGFzcyIsIlRvZ2dsZSIsIlNob3ciLCJIaWRlIiwic2xpZGVVcCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJhdHRyIiwic2xpZGVEb3duIiwiZGVsYXkiLCJub1RyYWlsaW5nIiwiY2FsbGJhY2siLCJkZWJvdW5jZU1vZGUiLCJ3cmFwcGVyIiwiZXhlYyIsImxhc3RFeGVjIiwiTnVtYmVyIiwiRGF0ZSIsImFwcGx5IiwiYXJncyIsImNsZWFyIiwidGltZW91dElEIiwiZWxhcHNlZCIsImFyZ3VtZW50cyIsImNsZWFyVGltZW91dCIsInNldFRpbWVvdXQiLCJfX2V4cG9ydCIsIkZhY2V0VGVtcGxhdGVTZXJ2aWNlXzEiLCJGYWNldFRyZWVfMSIsIkZhY2V0Q29uZmlnU3RvcmVfMSIsIkZhY2V0Iiwib3B0aW9ucyIsIl90aGlzIiwiaGFuZGxlckNoYWluIiwiYmluZCIsImZhY2V0cyIsInRlbXBsYXRlU2VydmljZSIsInNldERhdGEiLCJyZVJlbmRlciIsImdldERhdGEiLCJmdWxsRmFjZXQiLCJmYWNldEVsZW1lbnQiLCJpbm5lckhUTUwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZmFjZXRUcmVlIiwiRmFjZXRUcmVlIiwiY29uZmlnU3RvcmUiLCJPcHRpb25zIiwiY29udGFpbmVyRWxlbWVudCIsImluaXQiLCJzZXRGYWNldENvbmZpZyIsImZhY2V0Q29uZmlnIiwiZGVzdHJveSIsIkZhY2V0Q29uZmlnU3RvcmUiLCJGYWNldFRlbXBsYXRlU2VydmljZSIsIkZhY2V0TWFpbiIsImNvbXBhcmVGbiIsInByZXYiLCJuZXh0Iiwib3JkZXIiLCJtZXJnZVdpdGhGYWNldENvbmZpZyIsIm1lcmdlZEFycmF5IiwiZmFjZXRzXzEiLCJmYWNldCIsIl9hIiwiX2IiLCJwdXNoIiwiZmFjZXRSYW5nZXMiLCJwaW5uZWQiLCJ0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW4iLCJtZXJnZWRGYWNldHMiLCJmYXZvcml0ZXMiLCJmaWx0ZXIiLCJmIiwibm9uRmF2b3JpdGVzIiwic29ydCIsIm5vT2ZGYWNldFRvU2hvdyIsIjMiLCIyIiwiNSIsImNoZWNrTGVuZ3RoIiwidjIiLCJBcHBseVJlbW92ZSIsImhpZGRlbiIsImludmVydCIsIlNob3dNb3JlTGVzc0xpbmsiLCJGaWx0ZXJBY3Rpb25UeXBlXzEiLCJEb21VdGlsc18xIiwiRmFjZXRUcmVlSXRlbV8xIiwibGFzdElucHV0VmFsdWUiLCJmaW5kVHJlZWl0ZW1zIiwidHJlZSIsImdyb3VwIiwiZWxlbSIsInRpIiwicm9sZSIsInRvTG93ZXJDYXNlIiwiRmFjZXRUcmVlSXRlbSIsInRyZWVpdGVtcyIsImZpcnN0Q2hhcnMiLCJzdWJzdHJpbmciLCJuZXh0RWxlbWVudFNpYmxpbmciLCJ0cmVlRG9tTm9kZSIsInVwZGF0ZVZpc2libGVUcmVlaXRlbXMiLCJmaXJzdFRyZWVpdGVtIiwidHJlZUl0ZW1Eb21Ob2RlIiwidGFiSW5kZXgiLCJjb2xsYXBzZUFsbE5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiY29sbGFwc2VBbGxJdGVtcyIsImV4cGFuZEFsbE5vZGUiLCJleHBhbmRBbGxJdGVtcyIsInNlYXJjaEJveE5vZGUiLCJoYW5kbGVTZWFyY2hGb3JGaWx0ZXJzIiwic2V0Rm9jdXNUb1NlYXJjaEJveCIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJhbHRLZXkiLCJrZXkiLCJwcmV2ZW50RGVmYXVsdCIsImZvY3VzIiwic2V0Rm9jdXNUb0l0ZW0iLCJ0cmVlaXRlbSIsImRvbnRTZXRmb2N1cyIsInNldEZvY3VzVG9GaXJzdFZpc2libGUiLCJpc1Zpc2libGUiLCJzZXRGb2N1c1RvTmV4dEl0ZW0iLCJjdXJyZW50SXRlbSIsIm5leHRJdGVtIiwic2V0Rm9jdXNUb1ByZXZpb3VzSXRlbSIsInByZXZJdGVtIiwic2V0Rm9jdXNUb1BhcmVudEl0ZW0iLCJncm91cFRyZWVpdGVtIiwic2V0Rm9jdXNUb0ZpcnN0SXRlbSIsInNldEZvY3VzVG9MYXN0SXRlbSIsImxhc3RUcmVlaXRlbSIsImV4cGFuZFRyZWVpdGVtIiwibm90aWZ5IiwiaXNFeHBhbmRhYmxlIiwidG9nZ2xlRXhwYW5zaW9uSWNvbiIsInJlbW92ZUF0dHJpYnV0ZSIsImV4cGFuZEFsbFNpYmxpbmdJdGVtcyIsIm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uIiwiY29sbGFwc2VUcmVlaXRlbSIsImNvbGxhcHNlQWxsU2libGluZ0l0ZW1zIiwiaXNFeHBhbmRlZCIsImN1cnJlbnRFeHBhbmRlZCIsImljb25Ob2RlIiwiaWNvbk5vZGVMaXN0IiwicGFyZW50XzEiLCJjb250YWlucyIsInNldEZvY3VzQnlGaXJzdENoYXJhY3RlciIsImNoYXIiLCJzdGFydCIsImluZGV4T2YiLCJnZXRJbmRleEZpcnN0Q2hhcnMiLCJzdGFydEluZGV4Iiwic2hvd01vcmVWYWx1ZXMiLCJncm91cEl0ZW0iLCJwYXJlbnRfMiIsImlzU2hvd0xlc3NMaW5rIiwiaXNTaG93TW9yZUxpbmsiLCJzaG93TGVzc1ZhbHVlcyIsInBhcmVudF8zIiwiaGFuZGxlTGFiZWxDaGFuZ2UiLCJhY3Rpb24iLCJBZGQiLCJNaW51cyIsInRvU3RyaW5nIiwib25GaWx0ZXJDaGFuZ2UiLCJkYXRhVHlwZSIsImlzUmFuZ2UiLCJwdWJsaXNoIiwiZGF0YV8xIiwib25Db2xsYXBzZVRvZ2dsZSIsImhhbmRsZVBpblVucGluIiwicGluIiwiZGF0YV8yIiwib25QaW5VbnBpbiIsInN0b3BQcm9wYWdhdGlvbiIsInZhbCIsImlucHV0VmFsdWVCbGFuayIsInRyaW0iLCJoYW5kbGVCbGFua0lucHV0U2VhcmNoIiwiaGFuZGxlTm90QmxhbmtJbnB1dFNlYXJjaCIsImlnbm9yZUZvclNlYXJjaCIsImdyb3VwSXRlbU1hdGNoZWQiLCJjaGlsZEl0ZW1NYXRjaGVkIiwiS2V5Q29kZXNfMSIsImhhbmRsZUtleWRvd24iLCJoYW5kbGVDbGljayIsImhhbmRsZUZvY3VzIiwiaGFuZGxlQmx1ciIsImhhbmRsZU1vdXNlT3ZlciIsImhhbmRsZU1vdXNlT3V0IiwicGluVW5QaW5Eb21Ob2RlIiwiaGFuZGxlVW5QaW5DbGljayIsImhhbmRsZVVuUGluS2V5dXAiLCJrZXlDb2RlIiwiS2V5Q29kZXMiLCJTUEFDRSIsIlJFVFVSTiIsImlzUHJpbnRhYmxlQ2hhcmFjdGVyIiwic3RyIiwibWF0Y2giLCJwcmludGFibGVDaGFyYWN0ZXIiLCJpdGVtIiwiZmxhZyIsImN1cnJlbnRUYXJnZXQiLCJzdG9wRGVmYXVsdENsaWNrIiwiY3RybEtleSIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImlzTGFiZWwiLCJVUCIsIkRPV04iLCJSSUdIVCIsIkxFRlQiLCJpbkdyb3VwIiwiSE9NRSIsIkVORCIsImZpcnN0RW0iLCJxdWVyeVNlbGVjdG9yIiwidGFnTmFtZSIsImZyZWV6ZSIsIlBBR0VVUCIsIlBBR0VET1dOIiwiZGVmYXVsdEZhY2V0T3B0aW9ucyIsImFuaW1hdGlvblRpbWUiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJjb2xsYXBzZUNvbmZpZyIsImV4dGVuZE9wdGlvbnMiLCJpbnB1dE9wdGlvbnMiLCJqUXVlcnkiLCJleHRlbmQiLCJIb3RLZXlzRmlsdGVyc0hhbmRsZXJfMSIsIkZpbHRlclRlbXBsYXRlU2VydmljZV8xIiwiRmlsdGVyQ29uZmlnU3RvcmVfMSIsImV2ZW50aGFuZGxlcnNfMSIsIkZpbHRlciIsImZpbHRlcnMiLCJmYWNldFN1YkhlYWRlciIsImZpbHRlckVsZW1lbnQiLCJodG1sIiwiZm9yRWFjaCIsImhhbmRsZXIiLCJkZXJlZ2lzdGVyIiwiRmlsdGVyQ29uZmlnU3RvcmUiLCJGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UiLCJGaWx0ZXJBY3Rpb25IYW5kbGVyIiwiSG90S2V5c0ZpbHRlcnNIYW5kbGVyIiwiUmVnaXN0ZXJEb21IYW5kbGVyIiwib24iLCJmb2N1c09uU2VhcmNoIiwib25SZXNpemUiLCJvbkRvY3VtZW50Q2xpY2siLCJkZVJlZ2lzdGVyIiwiRmFjZXRTdWJIZWFkZXIiLCJmaWx0ZXJzXzEiLCJmaWx0ZXJDb25maWciLCJ0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlciIsIm1lcmdlZEZpbHRlcnMiLCJtaW4iLCJtYXgiLCJyYW5nZSIsIm1pblN0ciIsIm1heFN0ciIsImRlZmF1bHRmaWx0ZXJPcHRpb25zIiwib25BbGxGaWx0ZXJSZW1vdmUiLCJGYWNldENvbnN0YW50c18xIiwiRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXzEiLCJFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIiLCJlbGVtZW50Iiwib25Gb2N1c0luT2ZUcmVlSXRlbSIsIm9UIiwiaXMiLCJwYXJlbnRzIiwiZmlyc3QiLCJsYWJlbElkIiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwib25Gb2N1c091dE9mVHJlZUl0ZW0iLCJoYW5kbGVLZXlEb3duIiwiY29uc29sZSIsImxvZyIsImNvZGUiLCJ3aGljaCIsImhhbmRsZVZpc2liaWxpdHlPZk9uZSIsImhhbmRsZVVwQW5kRG93bk9mVHJlZUl0ZW0iLCJwcmV2U2libGluZyIsInByZXZBbGwiLCJwcmV2RGVlcFNpYmxpbmciLCJwYXJlbnRHcm91cCIsInBhcmVudENoaWxkIiwiZmlyc3RDaGlsZCIsIm5leHRTaWJsaW5nIiwibmV4dEFsbCIsIm5leHREZWVwU2libGluZyIsImhhbmRsZVZpc2liaWxpdHlPZkFsbCIsImhpZGVTaG93IiwiaXNDb2xsYXBzZWQiLCJGYWNldEFjdGlvbkhhbmRsZXIiLCJ2YWxTdHIiLCJzcGxpdCIsInRocm90dGxlX2RlYm91bmNlXzEiLCJGYWNldFNlYXJjaEhhbmRsZXIiLCJoYW5kbGVTZWFyY2giLCJlIiwiZmFjZXRJdGVtIiwiZmFjZXROYW1lTWF0Y2giLCJzaHdNb3JlRWxlbSIsInNob3dMZXNzTGluayIsImZhY2V0Q2hpbGRNYXRjaCIsImoiLCJsYWJlbEVsZW0iLCJoZWFkZXJFbG1lbnQiLCJmYWRlSW4iLCJmYWRlT3V0IiwiZGVib3VuY2UiLCJ0aHJvdHRsZSIsImF0QmVnaW4iLCJIaWRlRmFjZXRTZWN0aW9uSGFuZGxlciIsImhpZGVGYWNldCIsInNob3dGYWNldCIsIiQiLCJQaW5VbnBpbkV2ZW50SGFuZGxlciIsIlNob3dNb3JlTGVzc0hhbmRsZXIiLCJzaG93TW9yZUxlc3NGaWx0ZXJzIiwic2hvd01vcmUiLCJGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIiLCJoYW5kbGVBcnJvd0tleXMiLCJmb2N1c2FibGUiLCJkaXYiLCJ2aWV3Il0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGdCQUFBQyxVQUFBLGdCQUFBQyxRQUNBQSxPQUFBRCxRQUFBRCxFQUFBRyxRQUFBLHNCQUFBQSxRQUFBLFdBQ0Esa0JBQUFDLGdCQUFBQyxJQUNBRCxRQUFBLCtCQUFBSixHQUNBLGdCQUFBQyxTQUNBQSxRQUFBLFFBQUFELEVBQUFHLFFBQUEsc0JBQUFBLFFBQUEsV0FFQUosRUFBQSxRQUFBQyxFQUFBRCxFQUFBLFdBQUFBLEVBQUEsU0FDQyxt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dCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJoYW5kbGViYXJzL3J1bnRpbWVcIiksIHJlcXVpcmUoXCJtb21lbnRcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiaGFuZGxlYmFycy5ydW50aW1lXCIsIFwibW9tZW50XCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkZhY2V0b29cIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJoYW5kbGViYXJzL3J1bnRpbWVcIiksIHJlcXVpcmUoXCJtb21lbnRcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkZhY2V0b29cIl0gPSBmYWN0b3J5KHJvb3RbXCJIYW5kbGViYXJzXCJdLCByb290W1wibW9tZW50XCJdKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV85X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiaGFuZGxlYmFycy9ydW50aW1lXCIpLCByZXF1aXJlKFwibW9tZW50XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcImhhbmRsZWJhcnMucnVudGltZVwiLCBcIm1vbWVudFwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJGYWNldG9vXCJdID0gZmFjdG9yeShyZXF1aXJlKFwiaGFuZGxlYmFycy9ydW50aW1lXCIpLCByZXF1aXJlKFwibW9tZW50XCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJGYWNldG9vXCJdID0gZmFjdG9yeShyb290W1wiSGFuZGxlYmFyc1wiXSwgcm9vdFtcIm1vbWVudFwiXSk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8wX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fKSB7XG5yZXR1cm4gLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuLyoqKioqKi8gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuLyoqKioqKi8gXHRcdFx0XHRnZXQ6IGdldHRlclxuLyoqKioqKi8gXHRcdFx0fSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDE0KTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogZXh0ZXJuYWwge1wicm9vdFwiOlwiSGFuZGxlYmFyc1wiLFwiYW1kXCI6XCJoYW5kbGViYXJzLnJ1bnRpbWVcIixcImNvbW1vbmpzMlwiOlwiaGFuZGxlYmFycy9ydW50aW1lXCIsXCJjb21tb25qc1wiOlwiaGFuZGxlYmFycy9ydW50aW1lXCJ9ICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxubW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXztcblxuLyoqKi8gfSksXG4vKiAxICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQWN0aW9uVHlwZTtcclxuKGZ1bmN0aW9uIChGaWx0ZXJBY3Rpb25UeXBlKSB7XHJcbiAgICBGaWx0ZXJBY3Rpb25UeXBlW1wiQWRkXCJdID0gXCJBZGRcIjtcclxuICAgIEZpbHRlckFjdGlvblR5cGVbXCJNaW51c1wiXSA9IFwiTWludXNcIjtcclxufSkoRmlsdGVyQWN0aW9uVHlwZSA9IGV4cG9ydHMuRmlsdGVyQWN0aW9uVHlwZSB8fCAoZXhwb3J0cy5GaWx0ZXJBY3Rpb25UeXBlID0ge30pKTtcclxuXG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvU2hvd0hpZGUudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFNob3dIaWRlO1xyXG4oZnVuY3Rpb24gKFNob3dIaWRlKSB7XHJcbiAgICBTaG93SGlkZVtTaG93SGlkZVtcIlNob3dcIl0gPSAwXSA9IFwiU2hvd1wiO1xyXG4gICAgU2hvd0hpZGVbU2hvd0hpZGVbXCJIaWRlXCJdID0gMV0gPSBcIkhpZGVcIjtcclxuICAgIFNob3dIaWRlW1Nob3dIaWRlW1wiVG9nZ2xlXCJdID0gMl0gPSBcIlRvZ2dsZVwiO1xyXG59KShTaG93SGlkZSA9IGV4cG9ydHMuU2hvd0hpZGUgfHwgKGV4cG9ydHMuU2hvd0hpZGUgPSB7fSkpO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvZmFjZXQtYm9keS5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIjxkaXYgY2xhc3M9XFxcImd1aSBvZi1oaWRkZW4gbWluLXctNTAgdy1hdXRvIGZsdWlkLWggZmxleCBjb2x1bW4gY29udGFpbmVyXFxcIiBpZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLWZhY2V0LWNvbnRhaW5lclxcXCI+XFxuICAgIDxzZWN0aW9uIGNsYXNzPVxcXCJndWkgaC1hdXRvIGd1aS1zdWJoZWFkaW5nLTEgbS0wIGJvcmRlci1ib3R0b20gbGlnaHQgcC1yLTEwIHAtdC01IHAtYi01IHAtbC0xMFxcXCI+XFxuICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJndWkgY3Vyc29yLXBvaW50ZXIgZXhwYW5kLWFsbFxcXCIgXFxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIkV4cGFuZCBBbGwgRmlsdGVyc1xcXCI+XFxuICAgICAgICAgICAgPGkgIGNsYXNzPVxcXCJndWktaWNvbiBzcGVjaWFsIHJvdGF0ZS1sZWZ0IGd1aS1pY29uLWNoZXZkb3VibGVcXFwiPjwvaT5cXG4gICAgICAgICAgICBFeHBhbmQgQWxsXFxuICAgICAgICA8L2J1dHRvbj5cXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBjdXJzb3ItcG9pbnRlciBjb2xsYXBzZS1hbGxcXFwiIFxcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJDb2xsYXBzZSBBbGwgRmlsdGVyc1xcXCI+XFxuICAgICAgICAgICAgPGkgY2xhc3M9XFxcImd1aS1pY29uIHNwZWNpYWwgcm90YXRlLXJpZ2h0IGd1aS1pY29uLWNoZXZkb3VibGVcXFwiPjwvaT5cXG4gICAgICAgICAgICBDb2xsYXBzZSBBbGxcXG4gICAgICAgIDwvYnV0dG9uPlxcbiAgICA8L3NlY3Rpb24+XFxuICAgIDxzZWN0aW9uIGNsYXNzPVxcXCJndWkgYm9yZGVyLWJvdHRvbSBsaWdodCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTEwXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImd1aSBndWktaWNvbiBpbnB1dCBmbHVpZC13IGgtMzBcXFwiPlxcbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cXFwiZ3VpIGlucHV0IGZsdWlkLXcgZ3VpLXN1YmhlYWRpbmctMiBmaWx0ZXItc2VhcmNoLWlucHV0XFxcIlxcbiAgICAgICAgICAgICAgICAgICByb2xlPVxcXCJzZWFyY2hcXFwiXFxuICAgICAgICAgICAgICAgICAgIGFyaWEtY29udHJvbHM9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1maWx0ZXItdHJlZSBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItcGlubmVkLWZpbHRlci10cmVlIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi11bnBpbm5lZC1maWx0ZXItdHJlZVxcXCJcXG4gICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XFxcIlNlYXJjaCBGaWx0ZXJzLiBTaG9ydGN1dCBBbHQgKyBGIFxcXCIgLz5cXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIGd1aS1pY29uLXNlYXJjaCBndWktaGlkZGVuXFxcIj48L2k+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9zZWN0aW9uPlxcbiAgICA8dWwgY2xhc3M9XFxcImd1aSBmbHVpZC1oIGZhY2V0LWxpc3Qgb2YtYXV0byBvZngtaGlkZGVuIG0tMCBwLTBcXFwiIFxcbiAgICAgICAgcm9sZT1cXFwidHJlZVxcXCJcXG4gICAgICAgIGlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItZmlsdGVyLXRyZWVcXFwiXFxuICAgICAgICBhcmlhLXJlbGV2YW50PVxcXCJhbGxcXFwiXFxuICAgICAgICBhcmlhLWxpdmU9XFxcImFzc2VydGl2ZVxcXCI+XFxuXCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2ZhY2V0LXBpbm5lZC5oYnMgKi8gMTgpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC1waW5uZWRcIixcImRhdGFcIjpkYXRhLFwiaW5kZW50XCI6XCIgICAgICAgIFwiLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvZmFjZXQtdW5waW5uZWQuaGJzICovIDI1KSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtdW5waW5uZWRcIixcImRhdGFcIjpkYXRhLFwiaW5kZW50XCI6XCIgICAgICAgIFwiLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgPC91bD5cXG48L2Rpdj5cIjtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2hlbHBlcnMvQ29sbGFwc2VkLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGNvbGxhcHNlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiIGNvbGxhcHNlZCBcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBcIlwiO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBjb2xsYXBzZWQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9Cb29sZWFuLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBCb29sZWFuVmFsdWUgPSBmdW5jdGlvbiAoYm9vbCwgbmVnYXRlKSB7XHJcbiAgICBpZiAobmVnYXRlKSB7XHJcbiAgICAgICAgYm9vbCA9ICFib29sO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJvb2wgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQm9vbGVhblZhbHVlO1xyXG5cblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9oZWxwZXJzL1NlbGVjdGVkRmlsdGVyc0NvdW50LnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgc2VsZWN0ZWRGaWx0ZXJzQ291bnQgPSBmdW5jdGlvbiAoZmFjZXRWYWx1ZXMpIHtcclxuICAgIHZhciBpbmRleCA9IDA7XHJcbiAgICBpZiAoZmFjZXRWYWx1ZXMgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICYmIGZhY2V0VmFsdWVzICE9PSBudWxsXHJcbiAgICAgICAgJiYgZmFjZXRWYWx1ZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgZmFjZXRWYWx1ZXNfMSA9IGZhY2V0VmFsdWVzOyBfaSA8IGZhY2V0VmFsdWVzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBmYWNldFZhbHVlID0gZmFjZXRWYWx1ZXNfMVtfaV07XHJcbiAgICAgICAgICAgIGlmIChmYWNldFZhbHVlLnNlbGVjdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluZGV4ID09PSAwID8gXCJcIiA6IFwiPHNwYW4gY2xhc3M9XFxcImd1aS1ib2R5LTJcXFwiPihcIiArIGluZGV4ICsgXCIpPC9zcGFuPlwiO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBzZWxlY3RlZEZpbHRlcnNDb3VudDtcclxuXG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9mYWNldC1sYWJlbC5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciBIYW5kbGViYXJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgaGFuZGxlYmFycyAqLyAwKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uLCBhbGlhczM9Y29udGFpbmVyLmxhbWJkYTtcblxuICByZXR1cm4gXCIgICAgPGxpIGNsYXNzPVxcXCJndWkgaXRlbSBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9DaGVja0xlbmd0aC50cyAqLyAxOSkpLmNhbGwoYWxpYXMxLChkYXRhICYmIGRhdGEuaW5kZXgpLDUse1wibmFtZVwiOlwiQ2hlY2tMZW5ndGhcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgIGFyaWEtbGFiZWw9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICA8bGFiZWwgIGRhdGEtYXR0ci12YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBcXHJcXG4gICAgICAgICAgICAgICAgZGF0YS1hdHRyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgICAgIGRhdGEtYXR0ci10eXBlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICAgICAgdGFiaW5kZXg9XFxcIjBcXFwiXFxyXFxuICAgICAgICAgICAgICAgIHJvbGU9XFxcInRyZWVpdGVtXFxcIlxcclxcbiAgICAgICAgICAgICAgICB0aXRsZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKFwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIilcXFwiXFxyXFxuICAgICAgICAgICAgICAgIGZvcj1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLVwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5pZCA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIi1cIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGF0YSAmJiBkYXRhLmluZGV4KSwgZGVwdGgwKSlcbiAgICArIFwiLWNoZWNrYm94XFxcIlxcclxcbiAgICAgICAgICAgICAgICBhcmlhLWxhYmVsPVxcXCJGaWx0ZXIgXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiIGluIFwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5uYW1lIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiIGhhcyBcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgcmVjb3Jkcy4gUHJlc3Mgc3BhY2ViYXIgdG8gXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvQXBwbHlSZW1vdmUudHMgKi8gMjApKS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuc2VsZWN0ZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkFwcGx5UmVtb3ZlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCIgdGhpcyBmaWx0ZXIuXFxcIlxcclxcbiAgICAgICAgICAgICAgICBjbGFzcz1cXFwiZ3VpIGN1cnNvci1wb2ludGVyIGd1aS1zdWJoZWFkaW5nLTEgbm8td3JhcCB0ZXh0LXNob3J0ZW4gbS0wXFxcIj5cXHJcXG4gICAgICAgICAgICA8aW5wdXQgY2xhc3M9XFxcImd1aSBmYWNldC12YWx1ZS1jaGVja2JveCBjdXJzb3ItcG9pbnRlciBtLWwtMFxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICBpZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLVwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5pZCA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIi1cIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGF0YSAmJiBkYXRhLmluZGV4KSwgZGVwdGgwKSlcbiAgICArIFwiLWNoZWNrYm94XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tlZC50cyAqLyAyMSkpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zZWxlY3RlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiQ2hlY2tlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyAqLyAyMikpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5kaXNhYmxlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiRGlzYWJsZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgdGFiaW5kZXg9XFxcIi0xXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5pZCA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIjo6OlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjo6OlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBcXHJcXG4gICAgICAgICAgICAgICAgICAgIHR5cGU9XFxcImNoZWNrYm94XFxcIiAvPlxcclxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvRm9ybWF0TGFiZWxCeVR5cGUudHMgKi8gOCkpLmNhbGwoYWxpYXMxLChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkZvcm1hdExhYmVsQnlUeXBlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTEgbS0wXFxcIj4oXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvdW50IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKTwvc3Bhbj5cXHJcXG4gICAgICAgIDwvbGFiZWw+XFxyXFxuICAgIDwvbGk+XFxyXFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIjx1bCBjbGFzcz1cXFwiZGVzY3JpcHRpb24gZ3VpIGZhY2V0LWl0ZW0tZGVzY3JpcHRpb24gbS10LTEwIHAtbC01IHAtMCBcIlxuICAgICsgY29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24oX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL0hpZGRlbi50cyAqLyAyMykpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHRydWUse1wibmFtZVwiOlwiSGlkZGVuXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICByb2xlPVxcXCJncm91cFxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgXCJcbiAgICArICgoc3RhY2sxID0gX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL1Nob3dNb3JlTGVzc0xpbmsudHMgKi8gMjQpKS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLDUse1wibmFtZVwiOlwiU2hvd01vcmVMZXNzTGlua1wiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcclxcbjwvdWw+XCI7XG59LFwidXNlRGF0YVwiOnRydWUsXCJ1c2VEZXB0aHNcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9Gb3JtYXRMYWJlbEJ5VHlwZS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIG1vbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIG1vbWVudCAqLyA5KTtcclxudmFyIGZvcm1hdExhYmVsQnlUeXBlID0gZnVuY3Rpb24gKHR5cGUsIHZhbHVlKSB7XHJcbiAgICBpZiAobW9tZW50ICYmIHR5cGUgPT09IFwiRWRtLkRhdGVUaW1lT2Zmc2V0XCIpIHtcclxuICAgICAgICByZXR1cm4gbW9tZW50LnV0Yyh2YWx1ZSkuZm9ybWF0KFwiREQtTU1NLVlZWVkgaGg6bW0gYVwiKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gXCJBc3NpZ25lZFwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIkNvbW1pdHRlZFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmFsdWUgPT09IFwiQ29tcGxldGVcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJBc3NpZ25lZFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IGZvcm1hdExhYmVsQnlUeXBlO1xyXG5cblxuLyoqKi8gfSksXG4vKiA5ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIGV4dGVybmFsIFwibW9tZW50XCIgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5tb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fO1xuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvYTExeS9Eb21VdGlscy50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRG9tVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEb21VdGlscygpIHtcclxuICAgIH1cclxuICAgIERvbVV0aWxzLmlzRGVzY2VuZGFudCA9IGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBjaGlsZC5wYXJlbnROb2RlO1xyXG4gICAgICAgIHdoaWxlIChub2RlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKG5vZGUgPT09IHBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZSA9IG5vZGUucGFyZW50Tm9kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLmlzU2VsZk9yRGVzY2VuZGFudCA9IGZ1bmN0aW9uIChwYXJlbnQsIGNoaWxkKSB7XHJcbiAgICAgICAgaWYgKHBhcmVudCA9PT0gY2hpbGQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBEb21VdGlscy5pc0Rlc2NlbmRhbnQocGFyZW50LCBjaGlsZCk7XHJcbiAgICB9O1xyXG4gICAgRG9tVXRpbHMuaXNIaWRkZW4gPSBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgIGlmICghbm9kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGUub2Zmc2V0UGFyZW50ID09PSBudWxsO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLmlzQXJpYUhpZGRlbiA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5vZGUuZ2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIikgPT09IFwidHJ1ZVwiO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLnNldEFyaWFIaWRkZW4gPSBmdW5jdGlvbiAobm9kZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJEb21VdGlscy5zZXRBcmlhSGlkZGVuIC0gTm9kZSBjYW5ub3QgYmUgb2YgbnVsbCBvciB1bmRlZmluZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgdmFsdWUpO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLmlzQXJpYUV4cGFuZGVkID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIpID09PSBcInRydWVcIjtcclxuICAgIH07XHJcbiAgICBEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQgPSBmdW5jdGlvbiAobm9kZSwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQgLSBOb2RlIGNhbm5vdCBiZSBvZiBudWxsIG9yIHVuZGVmaW5lZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIHZhbHVlKTtcclxuICAgIH07XHJcbiAgICBEb21VdGlscy5zaG93ID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJEb21VdGlscy5zaG93IC0gTm9kZSBjYW5ub3QgYmUgb2YgbnVsbCBvciB1bmRlZmluZWRcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LnJlbW92ZShcImd1aS1oaWRkZW5cIik7XHJcbiAgICB9O1xyXG4gICAgRG9tVXRpbHMuaGlkZSA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKFwiRG9tVXRpbHMuaGlkZSAtIE5vZGUgY2Fubm90IGJlIG9mIG51bGwgb3IgdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgfTtcclxuICAgIERvbVV0aWxzLnRvZ2dsZUxhYmVsID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpZiAoIW5vZGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJEb21VdGlscy50b2dnbGVMYWJlbCAtIE5vZGUgY2Fubm90IGJlIG9mIG51bGwgb3IgdW5kZWZpbmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZm9ySWQgPSBub2RlLmh0bWxGb3I7XHJcbiAgICAgICAgdmFyIGlucHV0ID0gKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGZvcklkKSB8fCBub2RlLmZpcnN0RWxlbWVudENoaWxkKTtcclxuICAgICAgICBpbnB1dC5jaGVja2VkID0gIWlucHV0LmNoZWNrZWQ7XHJcbiAgICAgICAgcmV0dXJuIGlucHV0LmNoZWNrZWQ7XHJcbiAgICB9O1xyXG4gICAgRG9tVXRpbHMub2ZmID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICB2YXIgbmV3Tm9kZSA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIG5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgbm9kZSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERvbVV0aWxzO1xyXG59KCkpO1xyXG5leHBvcnRzLkRvbVV0aWxzID0gRG9tVXRpbHM7XHJcblxuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9jb25maWcvRmFjZXRDb25zdGFudHMudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmFjZXRDb25zdGFudHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldENvbnN0YW50cygpIHtcclxuICAgIH1cclxuICAgIEZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSA9IDM4O1xyXG4gICAgRmFjZXRDb25zdGFudHMuRG93bktleUNvZGUgPSA0MDtcclxuICAgIEZhY2V0Q29uc3RhbnRzLkVudGVyS2V5Q29kZSA9IDEzO1xyXG4gICAgRmFjZXRDb25zdGFudHMuU3BhY2VLZXlDb2RlID0gMjg7XHJcbiAgICByZXR1cm4gRmFjZXRDb25zdGFudHM7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjZXRDb25zdGFudHMgPSBGYWNldENvbnN0YW50cztcclxuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZU1hbmFnZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTaG93SGlkZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9TaG93SGlkZSAqLyAyKTtcclxudmFyIEV4cGFuZENvbGxhcHNlTWFuYWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEV4cGFuZENvbGxhcHNlTWFuYWdlcigpIHtcclxuICAgIH1cclxuICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgc2hvd0hpZGUsIG5hbWUpIHtcclxuICAgICAgICB2YXIgaWNvbkVsZW1lbnQgPSB0YXJnZXQuZmluZChcIi5leHBhbnNpb24taWNvblwiKTtcclxuICAgICAgICB2YXIgY3VycmVudGx5VmlzaWJsZSA9IGljb25FbGVtZW50Lmhhc0NsYXNzKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICBpZiAoU2hvd0hpZGVfMS5TaG93SGlkZS5Ub2dnbGUgIT09IHNob3dIaWRlICYmICgoY3VycmVudGx5VmlzaWJsZSAmJiBzaG93SGlkZSA9PT0gU2hvd0hpZGVfMS5TaG93SGlkZS5TaG93KSB8fFxyXG4gICAgICAgICAgICAoIWN1cnJlbnRseVZpc2libGUgJiYgc2hvd0hpZGUgPT09IFNob3dIaWRlXzEuU2hvd0hpZGUuSGlkZSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFjdXJyZW50bHlWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5maW5kKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIikuc2xpZGVEb3duKDIwMCk7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5hZGRDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsIFwidHJ1ZVwiKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJhcmlhLWxhYmVsXCIsIFwiUHJlc3MgZW50ZXIgb3Igc3BhY2UgdG8gY29sbGFwc2UgZmlsdGVyIHZhbHVlcyBmb3IgXCIgKyBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5maW5kKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIikuc2xpZGVVcCgyMDApO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5yZW1vdmVDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LmFkZENsYXNzKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICB0YXJnZXRcclxuICAgICAgICAgICAgICAgIC5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCBcImZhbHNlXCIpXHJcbiAgICAgICAgICAgICAgICAuYXR0cihcImFyaWEtbGFiZWxcIiwgXCJQcmVzcyBlbnRlciBvciBzcGFjZSB0byBleHBhbmQgZmlsdGVyIHZhbHVlcyBmb3IgXCIgKyBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEV4cGFuZENvbGxhcHNlTWFuYWdlcjtcclxufSgpKTtcclxuZXhwb3J0cy5FeHBhbmRDb2xsYXBzZU1hbmFnZXIgPSBFeHBhbmRDb2xsYXBzZU1hbmFnZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbm9kZV9tb2R1bGVzL3Rocm90dGxlLWRlYm91bmNlL3Rocm90dGxlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWZpbmVkLG5vLXBhcmFtLXJlYXNzaWduLG5vLXNoYWRvdyAqL1xuXG4vKipcbiAqIFRocm90dGxlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBFc3BlY2lhbGx5IHVzZWZ1bCBmb3IgcmF0ZSBsaW1pdGluZ1xuICogZXhlY3V0aW9uIG9mIGhhbmRsZXJzIG9uIGV2ZW50cyBsaWtlIHJlc2l6ZSBhbmQgc2Nyb2xsLlxuICpcbiAqIEBwYXJhbSAge051bWJlcn0gICAgZGVsYXkgICAgICAgICAgQSB6ZXJvLW9yLWdyZWF0ZXIgZGVsYXkgaW4gbWlsbGlzZWNvbmRzLiBGb3IgZXZlbnQgY2FsbGJhY2tzLCB2YWx1ZXMgYXJvdW5kIDEwMCBvciAyNTAgKG9yIGV2ZW4gaGlnaGVyKSBhcmUgbW9zdCB1c2VmdWwuXG4gKiBAcGFyYW0gIHtCb29sZWFufSAgIG5vVHJhaWxpbmcgICAgIE9wdGlvbmFsLCBkZWZhdWx0cyB0byBmYWxzZS4gSWYgbm9UcmFpbGluZyBpcyB0cnVlLCBjYWxsYmFjayB3aWxsIG9ubHkgZXhlY3V0ZSBldmVyeSBgZGVsYXlgIG1pbGxpc2Vjb25kcyB3aGlsZSB0aGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3R0bGVkLWZ1bmN0aW9uIGlzIGJlaW5nIGNhbGxlZC4gSWYgbm9UcmFpbGluZyBpcyBmYWxzZSBvciB1bnNwZWNpZmllZCwgY2FsbGJhY2sgd2lsbCBiZSBleGVjdXRlZCBvbmUgZmluYWwgdGltZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlciB0aGUgbGFzdCB0aHJvdHRsZWQtZnVuY3Rpb24gY2FsbC4gKEFmdGVyIHRoZSB0aHJvdHRsZWQtZnVuY3Rpb24gaGFzIG5vdCBiZWVuIGNhbGxlZCBmb3IgYGRlbGF5YCBtaWxsaXNlY29uZHMsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBpbnRlcm5hbCBjb3VudGVyIGlzIHJlc2V0KVxuICogQHBhcmFtICB7RnVuY3Rpb259ICBjYWxsYmFjayAgICAgICBBIGZ1bmN0aW9uIHRvIGJlIGV4ZWN1dGVkIGFmdGVyIGRlbGF5IG1pbGxpc2Vjb25kcy4gVGhlIGB0aGlzYCBjb250ZXh0IGFuZCBhbGwgYXJndW1lbnRzIGFyZSBwYXNzZWQgdGhyb3VnaCwgYXMtaXMsXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGBjYWxsYmFja2Agd2hlbiB0aGUgdGhyb3R0bGVkLWZ1bmN0aW9uIGlzIGV4ZWN1dGVkLlxuICogQHBhcmFtICB7Qm9vbGVhbn0gICBkZWJvdW5jZU1vZGUgICBJZiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIHNjaGVkdWxlIGBjbGVhcmAgdG8gZXhlY3V0ZSBhZnRlciBgZGVsYXlgIG1zLiBJZiBgZGVib3VuY2VNb2RlYCBpcyBmYWxzZSAoYXQgZW5kKSxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGUgYGNhbGxiYWNrYCB0byBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuXG4gKlxuICogQHJldHVybiB7RnVuY3Rpb259ICBBIG5ldywgdGhyb3R0bGVkLCBmdW5jdGlvbi5cbiAqL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoIGRlbGF5LCBub1RyYWlsaW5nLCBjYWxsYmFjaywgZGVib3VuY2VNb2RlICkge1xuXG5cdC8vIEFmdGVyIHdyYXBwZXIgaGFzIHN0b3BwZWQgYmVpbmcgY2FsbGVkLCB0aGlzIHRpbWVvdXQgZW5zdXJlcyB0aGF0XG5cdC8vIGBjYWxsYmFja2AgaXMgZXhlY3V0ZWQgYXQgdGhlIHByb3BlciB0aW1lcyBpbiBgdGhyb3R0bGVgIGFuZCBgZW5kYFxuXHQvLyBkZWJvdW5jZSBtb2Rlcy5cblx0dmFyIHRpbWVvdXRJRDtcblxuXHQvLyBLZWVwIHRyYWNrIG9mIHRoZSBsYXN0IHRpbWUgYGNhbGxiYWNrYCB3YXMgZXhlY3V0ZWQuXG5cdHZhciBsYXN0RXhlYyA9IDA7XG5cblx0Ly8gYG5vVHJhaWxpbmdgIGRlZmF1bHRzIHRvIGZhbHN5LlxuXHRpZiAoIHR5cGVvZiBub1RyYWlsaW5nICE9PSAnYm9vbGVhbicgKSB7XG5cdFx0ZGVib3VuY2VNb2RlID0gY2FsbGJhY2s7XG5cdFx0Y2FsbGJhY2sgPSBub1RyYWlsaW5nO1xuXHRcdG5vVHJhaWxpbmcgPSB1bmRlZmluZWQ7XG5cdH1cblxuXHQvLyBUaGUgYHdyYXBwZXJgIGZ1bmN0aW9uIGVuY2Fwc3VsYXRlcyBhbGwgb2YgdGhlIHRocm90dGxpbmcgLyBkZWJvdW5jaW5nXG5cdC8vIGZ1bmN0aW9uYWxpdHkgYW5kIHdoZW4gZXhlY3V0ZWQgd2lsbCBsaW1pdCB0aGUgcmF0ZSBhdCB3aGljaCBgY2FsbGJhY2tgXG5cdC8vIGlzIGV4ZWN1dGVkLlxuXHRmdW5jdGlvbiB3cmFwcGVyICgpIHtcblxuXHRcdHZhciBzZWxmID0gdGhpcztcblx0XHR2YXIgZWxhcHNlZCA9IE51bWJlcihuZXcgRGF0ZSgpKSAtIGxhc3RFeGVjO1xuXHRcdHZhciBhcmdzID0gYXJndW1lbnRzO1xuXG5cdFx0Ly8gRXhlY3V0ZSBgY2FsbGJhY2tgIGFuZCB1cGRhdGUgdGhlIGBsYXN0RXhlY2AgdGltZXN0YW1wLlxuXHRcdGZ1bmN0aW9uIGV4ZWMgKCkge1xuXHRcdFx0bGFzdEV4ZWMgPSBOdW1iZXIobmV3IERhdGUoKSk7XG5cdFx0XHRjYWxsYmFjay5hcHBseShzZWxmLCBhcmdzKTtcblx0XHR9XG5cblx0XHQvLyBJZiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbikgdGhpcyBpcyB1c2VkIHRvIGNsZWFyIHRoZSBmbGFnXG5cdFx0Ly8gdG8gYWxsb3cgZnV0dXJlIGBjYWxsYmFja2AgZXhlY3V0aW9ucy5cblx0XHRmdW5jdGlvbiBjbGVhciAoKSB7XG5cdFx0XHR0aW1lb3V0SUQgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0aWYgKCBkZWJvdW5jZU1vZGUgJiYgIXRpbWVvdXRJRCApIHtcblx0XHRcdC8vIFNpbmNlIGB3cmFwcGVyYCBpcyBiZWluZyBjYWxsZWQgZm9yIHRoZSBmaXJzdCB0aW1lIGFuZFxuXHRcdFx0Ly8gYGRlYm91bmNlTW9kZWAgaXMgdHJ1ZSAoYXQgYmVnaW4pLCBleGVjdXRlIGBjYWxsYmFja2AuXG5cdFx0XHRleGVjKCk7XG5cdFx0fVxuXG5cdFx0Ly8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVvdXQuXG5cdFx0aWYgKCB0aW1lb3V0SUQgKSB7XG5cdFx0XHRjbGVhclRpbWVvdXQodGltZW91dElEKTtcblx0XHR9XG5cblx0XHRpZiAoIGRlYm91bmNlTW9kZSA9PT0gdW5kZWZpbmVkICYmIGVsYXBzZWQgPiBkZWxheSApIHtcblx0XHRcdC8vIEluIHRocm90dGxlIG1vZGUsIGlmIGBkZWxheWAgdGltZSBoYXMgYmVlbiBleGNlZWRlZCwgZXhlY3V0ZVxuXHRcdFx0Ly8gYGNhbGxiYWNrYC5cblx0XHRcdGV4ZWMoKTtcblxuXHRcdH0gZWxzZSBpZiAoIG5vVHJhaWxpbmcgIT09IHRydWUgKSB7XG5cdFx0XHQvLyBJbiB0cmFpbGluZyB0aHJvdHRsZSBtb2RlLCBzaW5jZSBgZGVsYXlgIHRpbWUgaGFzIG5vdCBiZWVuXG5cdFx0XHQvLyBleGNlZWRlZCwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0byBleGVjdXRlIGBkZWxheWAgbXMgYWZ0ZXIgbW9zdFxuXHRcdFx0Ly8gcmVjZW50IGV4ZWN1dGlvbi5cblx0XHRcdC8vXG5cdFx0XHQvLyBJZiBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIHNjaGVkdWxlIGBjbGVhcmAgdG8gZXhlY3V0ZVxuXHRcdFx0Ly8gYWZ0ZXIgYGRlbGF5YCBtcy5cblx0XHRcdC8vXG5cdFx0XHQvLyBJZiBgZGVib3VuY2VNb2RlYCBpcyBmYWxzZSAoYXQgZW5kKSwgc2NoZWR1bGUgYGNhbGxiYWNrYCB0b1xuXHRcdFx0Ly8gZXhlY3V0ZSBhZnRlciBgZGVsYXlgIG1zLlxuXHRcdFx0dGltZW91dElEID0gc2V0VGltZW91dChkZWJvdW5jZU1vZGUgPyBjbGVhciA6IGV4ZWMsIGRlYm91bmNlTW9kZSA9PT0gdW5kZWZpbmVkID8gZGVsYXkgLSBlbGFwc2VkIDogZGVsYXkpO1xuXHRcdH1cblxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSB3cmFwcGVyIGZ1bmN0aW9uLlxuXHRyZXR1cm4gd3JhcHBlcjtcblxufTtcblxuXG4vKioqLyB9KSxcbi8qIDE0ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvbWFpbi9FbnRyeS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9GYWNldCAqLyAxNSkpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0ZpbHRlciAqLyAzMCkpO1xyXG5cblxuLyoqKi8gfSksXG4vKiAxNSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL21haW4vRmFjZXQudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZhY2V0VGVtcGxhdGVTZXJ2aWNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9zZXJ2aWNlcy9GYWNldFRlbXBsYXRlU2VydmljZSAqLyAxNik7XHJcbnZhciBGYWNldFRyZWVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vLi4vYTExeS9GYWNldFRyZWUgKi8gMjYpO1xyXG52YXIgRmFjZXRDb25maWdTdG9yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9jb25maWcvRmFjZXRDb25maWdTdG9yZSAqLyAyOSk7XHJcbnZhciBGYWNldCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZhY2V0KG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluID0gW107XHJcbiAgICAgICAgdGhpcy5iaW5kID0gZnVuY3Rpb24gKGZhY2V0cykge1xyXG4gICAgICAgICAgICBfdGhpcy50ZW1wbGF0ZVNlcnZpY2Uuc2V0RGF0YShmYWNldHMpO1xyXG4gICAgICAgICAgICBfdGhpcy5yZVJlbmRlcigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5yZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IF90aGlzLnRlbXBsYXRlU2VydmljZS5nZXREYXRhKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgZnVsbEZhY2V0ID0gX3RoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5mYWNldEVsZW1lbnQuaW5uZXJIVE1MID0gZnVsbEZhY2V0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyZWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW3JvbGU9XCJ0cmVlXCJdJyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5mYWNldFRyZWUgPSBuZXcgRmFjZXRUcmVlXzEuRmFjZXRUcmVlKF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29udGFpbmVyRWxlbWVudCwgX3RoaXMsIF90aGlzLmNvbmZpZ1N0b3JlKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZhY2V0VHJlZS5pbml0KCk7XHJcbiAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRGYWNldENvbmZpZyA9IGZ1bmN0aW9uIChmYWNldENvbmZpZykge1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnID0gZmFjZXRDb25maWc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmZhY2V0VHJlZS5kZXN0cm95KCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gbmV3IEZhY2V0Q29uZmlnU3RvcmVfMS5GYWNldENvbmZpZ1N0b3JlKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZmFjZXRFbGVtZW50ID0gb3B0aW9ucy5jb250YWluZXJFbGVtZW50O1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlID0gbmV3IEZhY2V0VGVtcGxhdGVTZXJ2aWNlXzEuRmFjZXRUZW1wbGF0ZVNlcnZpY2UodGhpcy5jb25maWdTdG9yZSk7XHJcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LFxyXG4gICAgICAgIC8vICAgICB0aGlzLmNvbmZpZ1N0b3JlLCB0aGlzLnRlbXBsYXRlU2VydmljZSkpO1xyXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEZhY2V0QWN0aW9uSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xyXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEZhY2V0U2VhcmNoSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xyXG4gICAgICAgIC8vIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgSG90S2V5c0ZhY2V0SGFuZGxlcigpKTtcclxuICAgICAgICAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBQaW5VbnBpbkV2ZW50SGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSwgdGhpcy50ZW1wbGF0ZVNlcnZpY2UpKTtcclxuICAgICAgICAvLyAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBTaG93TW9yZUxlc3NIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgLy8gLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50KSk7XHJcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xyXG4gICAgICAgIC8vICAgICBoYW5kbGVyLlJlZ2lzdGVyRG9tSGFuZGxlcigpO1xyXG4gICAgICAgIC8vIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZhY2V0O1xyXG59KCkpO1xyXG5leHBvcnRzLkZhY2V0ID0gRmFjZXQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL3NlcnZpY2VzL0ZhY2V0VGVtcGxhdGVTZXJ2aWNlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmFjZXRNYWluID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi8uLi9oYnMvZmFjZXQtbWFpbi5oYnMgKi8gMTcpO1xyXG52YXIgRmFjZXRUZW1wbGF0ZVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldFRlbXBsYXRlU2VydmljZShjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0YSA9IGZ1bmN0aW9uIChmYWNldHMpIHtcclxuICAgICAgICAgICAgX3RoaXMuZGF0YSA9IGZhY2V0cztcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZ2V0RGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLmRhdGE7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbXBhcmVGbiA9IGZ1bmN0aW9uIChwcmV2LCBuZXh0KSB7XHJcbiAgICAgICAgICAgIGlmIChwcmV2Lm9yZGVyID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV4dC5vcmRlciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJldi5vcmRlciAtIG5leHQub3JkZXI7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm1lcmdlV2l0aEZhY2V0Q29uZmlnID0gZnVuY3Rpb24gKGZhY2V0cykge1xyXG4gICAgICAgICAgICB2YXIgbWVyZ2VkQXJyYXkgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBmYWNldHNfMSA9IGZhY2V0czsgX2kgPCBmYWNldHNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBmYWNldCA9IGZhY2V0c18xW19pXTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIF9hID0gMCwgX2IgPSBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWNldENvbmZpZyA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZXRDb25maWcuaWQgPT09IGZhY2V0LmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkOiBmYWNldENvbmZpZy5jb2xsYXBzZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldFJhbmdlczogZmFjZXQuZmFjZXRSYW5nZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlczogZmFjZXQuZmFjZXRWYWx1ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZmFjZXRDb25maWcuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmYWNldENvbmZpZy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IGZhY2V0Q29uZmlnLm9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlubmVkOiBmYWNldENvbmZpZy5waW5uZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBmYWNldENvbmZpZy50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZXJnZWRBcnJheTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRNYWluID0gRmFjZXRNYWluO1xyXG4gICAgfVxyXG4gICAgRmFjZXRUZW1wbGF0ZVNlcnZpY2UucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZmFjZXRzKSB7XHJcbiAgICAgICAgdmFyIGNvbGxhcHNlZCA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2xsYXBzZWQ7XHJcbiAgICAgICAgdmFyIG1lcmdlZEZhY2V0cyA9IHRoaXMubWVyZ2VXaXRoRmFjZXRDb25maWcoZmFjZXRzKTtcclxuICAgICAgICB2YXIgZmF2b3JpdGVzID0gbWVyZ2VkRmFjZXRzLmZpbHRlcihmdW5jdGlvbiAoZikgeyByZXR1cm4gZi5waW5uZWQgIT09IHVuZGVmaW5lZCAmJiBmLnBpbm5lZDsgfSk7XHJcbiAgICAgICAgdmFyIG5vbkZhdm9yaXRlcyA9IG1lcmdlZEZhY2V0cy5maWx0ZXIoZnVuY3Rpb24gKGYpIHsgcmV0dXJuIGYucGlubmVkID09PSB1bmRlZmluZWQgfHwgIWYucGlubmVkOyB9KTtcclxuICAgICAgICBmYXZvcml0ZXMuc29ydCh0aGlzLmNvbXBhcmVGbik7XHJcbiAgICAgICAgbm9uRmF2b3JpdGVzLnNvcnQodGhpcy5jb21wYXJlRm4pO1xyXG4gICAgICAgIHZhciBub09mRmFjZXRUb1Nob3cgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMubm9PZkZhY2V0VG9TaG93O1xyXG4gICAgICAgIHZhciBpZFByZWZpeCA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5pZFByZWZpeDtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW4oeyBpZFByZWZpeDogaWRQcmVmaXgsIGZhdm9yaXRlczogZmF2b3JpdGVzLCBub25GYXZvcml0ZXM6IG5vbkZhdm9yaXRlcywgbm9PZkZhY2V0VG9TaG93OiBub09mRmFjZXRUb1Nob3cgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZhY2V0VGVtcGxhdGVTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLkZhY2V0VGVtcGxhdGVTZXJ2aWNlID0gRmFjZXRUZW1wbGF0ZVNlcnZpY2U7XHJcblxuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvZmFjZXQtbWFpbi5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIiAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1ib2R5IGd1aSBmbHVpZC1oIG9mLWhpZGRlbiBndWktaGlkZGVuXFxcIj5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvZmFjZXQtYm9keS5oYnMgKi8gMyksZGVwdGgwLHtcIm5hbWVcIjpcImZhY2V0LWJvZHlcIixcImRhdGFcIjpkYXRhLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCI8L2Rpdj5cXG5cIjtcbn0sXCIzXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIiAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1ib2R5IGd1aSBmbHVpZC1oIG9mLWhpZGRlblxcXCI+XCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2ZhY2V0LWJvZHkuaGJzICovIDMpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC1ib2R5XCIsXCJkYXRhXCI6ZGF0YSxcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC9kaXY+XFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJndWkgZmx1aWQtaCBcXFwiPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvbGxhcHNlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCksXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC9kaXY+XCI7XG59LFwidXNlUGFydGlhbFwiOnRydWUsXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuXG4vKioqLyB9KSxcbi8qIDE4ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL2hicy9mYWNldC1waW5uZWQuaGJzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIjxsaSBjbGFzcz1cXFwiZ3VpIG0tMCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTEwXFxcIiBcXHJcXG4gICAgYXJpYS1sYWJlbD1cXFwiUGlubmVkIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci12YWx1ZT1cXFwiUGlubmVkIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci1pZ25vcmVGb3JTZWFyY2g9XFxcInRydWVcXFwiXFxyXFxuICAgIGFyaWEtZXhwYW5kZWQ9XFxcInRydWVcXFwiXFxyXFxuICAgIGFyaWEtbGl2ZT1cXFwicG9saXRlXFxcIlxcclxcbiAgICBhcmlhLWF0b21pYz1cXFwidHJ1ZVxcXCJcXHJcXG4gICAgYXJpYS1yZWxldmFudD1cXFwiYWxsXFxcIlxcclxcbiAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1waW5uZWQtZmlsdGVyLXRyZWVcXFwiPlxcclxcbiAgICA8aDYgY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0yIGNhcHMgYm9sZC01MDAgZmxleCBtLWItMTAgamMtc2JcXFwiPlxcclxcbiAgICAgICAgUElOTkVEIEZJTFRFUlNcXHJcXG4gICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLXVwIGV4cGFuc2lvbi1pY29uIG0tdC01IG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCI+PC9pPlxcclxcbiAgICA8L2g2PlxcclxcbiAgICA8dWwgYXJpYS1sYWJlbGxlZGJ5PVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItcGlubmVkLWZpbHRlci10cmVlXFxcIiBjbGFzcz1cXFwiZ3VpIG0tMCBwLTBcXFwiIHJvbGU9XFxcImdyb3VwXFxcIj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYXZvcml0ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMiwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgIDwvdWw+XFxyXFxuPC9saT5cXHJcXG5cIjtcbn0sXCIyXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uLCBhbGlhczM9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KTtcblxuICByZXR1cm4gXCIgICAgICAgIDxsaSBhcmlhLWxhYmVsPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICBjbGFzcz1cXFwiZ3VpIGl0ZW0gZmFjZXQtaXRlbSBib3JkZXItYm90dG9tIGxpZ2h0IHAtci0xMCBwLXQtNSBwLWItNSBwLWwtNSBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9Db2xsYXBzZWQudHMgKi8gNCkpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcIkNvbGxhcHNlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgIHJvbGU9XFxcInRyZWVpdGVtXFxcIlxcclxcbiAgICAgICAgICAgIGFyaWEtZXhwYW5kZWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL0Jvb2xlYW4udHMgKi8gNSkpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHRydWUse1wibmFtZVwiOlwiQm9vbGVhblwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgIGRhdGEtYXR0ci1pZD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIiBcXHJcXG4gICAgICAgICAgICBkYXRhLWF0dHItdmFsdWU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmYWNldC1pdGVtLWhlYWRlciBmbHVpZCBndWkgaXRlbSBmbGV4IGpjLXNiXFxcIj5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBwcmltYXJ5IGd1aS1zdWJoZWFkaW5nLTEgY2FwcyBtLTAgY3Vyc29yLXBvaW50ZXJcXFwiIHRpdGxlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIiBcIlxuICAgICsgKChzdGFjazEgPSBfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvU2VsZWN0ZWRGaWx0ZXJzQ291bnQudHMgKi8gNikpLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYWNldFZhbHVlcyA6IGRlcHRoMCkse1wibmFtZVwiOlwiU2VsZWN0ZWRGaWx0ZXJzQ291bnRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCJcXHJcXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgICAgICA8c3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgICAgIDxpICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIHBpbi11bnBpbi1zZWxlY3RvciBndWktaWNvbi11bnBpbiBtLXQtNSBtLXItMTAgdW5waW4taWNvbiBjdXJzb3ItcG9pbnRlclxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cXFwiUHJlc3MgZW50ZXIgb3Igc3BhY2UgdG8gdW5waW4gZmlsdGVyIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVxcXCIwXFxcIj48L2k+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMzLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5wcm9ncmFtKDUsIGRhdGEsIDApLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgICAgICAgICA8L3NwYW4+XFxyXFxuICAgICAgICAgICAgPC9kaXY+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2ZhY2V0LWxhYmVsLmhicyAqLyA3KSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtbGFiZWxcIixcImRhdGFcIjpkYXRhLFwiaW5kZW50XCI6XCIgICAgICAgICAgICBcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICA8L2xpPlxcclxcblwiO1xufSxcIjNcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLXVwIGV4cGFuc2lvbi1pY29uIG0tdC01IG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCI+PC9pPlxcclxcblwiO1xufSxcIjVcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIiAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBndWktaWNvbi1jaGV2cm9uLWRvd24gZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIj48L2k+XFxyXFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLCgoc3RhY2sxID0gKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhdm9yaXRlcyA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubGVuZ3RoIDogc3RhY2sxKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cbi8qKiovIH0pLFxuLyogMTkgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2hlbHBlcnMvQ2hlY2tMZW5ndGgudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjaGVja0xlbmd0aCA9IGZ1bmN0aW9uIChpbmRleCwgdjIpIHtcclxuICAgIGlmIChpbmRleCAhPT0gdW5kZWZpbmVkICYmIGluZGV4ICsgMSA+IHYyKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiZ3VpLWhpZGRlbiBleHRyYS1maWx0ZXJcIjtcclxuICAgIH1cclxuICAgIHJldHVybiBcIlwiO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBjaGVja0xlbmd0aDtcclxuXG5cbi8qKiovIH0pLFxuLyogMjAgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2hlbHBlcnMvQXBwbHlSZW1vdmUudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBBcHBseVJlbW92ZSA9IGZ1bmN0aW9uIChib29sKSB7XHJcbiAgICByZXR1cm4gYm9vbCA/IFwiIHJlbW92ZSBcIiA6IFwiIGFwcGx5IFwiO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBBcHBseVJlbW92ZTtcclxuXG5cbi8qKiovIH0pLFxuLyogMjEgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9DaGVja2VkLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBjaGVja2VkID0gZnVuY3Rpb24gKGJvb2wpIHtcclxuICAgIHJldHVybiBib29sID8gXCJjaGVja2VkXCIgOiBcIlwiO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBjaGVja2VkO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyMiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9EaXNhYmxlZC50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIGRpc2FibGVkID0gZnVuY3Rpb24gKGJvb2wpIHtcclxuICAgIHJldHVybiBib29sID8gXCJkaXNhYmxlZFwiIDogXCJcIjtcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gZGlzYWJsZWQ7XHJcblxuXG4vKioqLyB9KSxcbi8qIDIzICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9IaWRkZW4udHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgaGlkZGVuID0gZnVuY3Rpb24gKHZhbHVlLCBpbnZlcnQpIHtcclxuICAgIHZhciBoaWRlO1xyXG4gICAgaWYgKGludmVydCkge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgaGlkZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBoaWRlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGhpZGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGlkZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoaWRlID8gXCIgZ3VpLWhpZGRlbiBcIiA6IFwiIFwiO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSBoaWRkZW47XHJcblxuXG4vKioqLyB9KSxcbi8qIDI0ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2hlbHBlcnMvU2hvd01vcmVMZXNzTGluay50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2hvd01vcmVMZXNzTGluayA9IGZ1bmN0aW9uIChpbmRleCwgdjIsIG9wdGlvbnMpIHtcclxuICAgIGlmIChpbmRleC5sZW5ndGggPiB2Mikge1xyXG4gICAgICAgIHJldHVybiBcIjxsaSBjbGFzcz1cXFwiZ3VpIG0tYi01IG0tdC01XFxcIj5cIlxyXG4gICAgICAgICAgICArIFwiPGEgdGFiaW5kZXg9XFxcIjBcXFwiIHJvbGU9XFxcInRyZWVpdGVtXFxcIiBcIlxyXG4gICAgICAgICAgICArIFwiZGF0YS1hdHRyLWlkPVxcXCJ7e2lkfX1cXFwiIFwiXHJcbiAgICAgICAgICAgICsgXCJkYXRhLWF0dHItdmFsdWU9XFxcIlNob3cgTW9yZVxcXCIgXCJcclxuICAgICAgICAgICAgKyBcImFyaWEtbGFiZWw9XFxcIlByZXNzIGVudGVyIHRvIHNob3cgXCIgKyAoaW5kZXgubGVuZ3RoIC0gdjIpICsgXCIgbW9yZSB2YWx1ZXNcXFwiIFwiXHJcbiAgICAgICAgICAgICsgXCJjbGFzcz1cXFwiZ3VpIGNhcHMgZ3VpLWJvZHktMiBzaW1wbGUgc2hvdy1tb3JlLWxpbmsgY3Vyc29yLXBvaW50ZXIgcC0wIG0tdC0zXFxcIj5cIlxyXG4gICAgICAgICAgICArIChpbmRleC5sZW5ndGggLSB2MikgKyBcIiBNb3JlXCJcclxuICAgICAgICAgICAgKyBcIjwvYT5cIlxyXG4gICAgICAgICAgICArIFwiPC9saT5cIlxyXG4gICAgICAgICAgICArIFwiPGxpIGNsYXNzPVxcXCJndWkgbS1iLTUgbS10LTUgZ3VpLWhpZGRlblxcXCI+XCJcclxuICAgICAgICAgICAgKyBcIjxhIHRhYmluZGV4PVxcXCIwXFxcIiByb2xlPVxcXCJ0cmVlaXRlbVxcXCIgXCJcclxuICAgICAgICAgICAgKyBcImRhdGEtYXR0ci12YWx1ZT1cXFwiU2hvdyBMZXNzXFxcIiBcIlxyXG4gICAgICAgICAgICArIFwiYXJpYS1sYWJlbD1cXFwiUHJlc3MgZW50ZXIgdG8gc2hvdyBsZXNzIHZhbHVlc1xcXCIgXCJcclxuICAgICAgICAgICAgKyBcImNsYXNzPVxcXCJndWkgY2FwcyBndWktYm9keS0yIHNpbXBsZSBzaG93LWxlc3MtbGluayBjdXJzb3ItcG9pbnRlciBwLTAgbS10LTNcXFwiPlwiXHJcbiAgICAgICAgICAgICsgXCJTaG93IExlc3NcIiArXHJcbiAgICAgICAgICAgIFwiPC9hPlwiXHJcbiAgICAgICAgICAgICsgXCI8L2xpPlwiO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbn07XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFNob3dNb3JlTGVzc0xpbms7XHJcblxuXG4vKioqLyB9KSxcbi8qIDI1ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2ZhY2V0LXVucGlubmVkLmhicyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxudmFyIEhhbmRsZWJhcnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISBoYW5kbGViYXJzICovIDApO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIjxsaSBjbGFzcz1cXFwiZ3VpIG0tMCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTEwXFxcIiBcXHJcXG4gICAgYXJpYS1sYWJlbD1cXFwiQWxsIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci12YWx1ZT1cXFwiQWxsIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci1pZ25vcmVGb3JTZWFyY2g9XFxcInRydWVcXFwiXFxyXFxuICAgIGFyaWEtZXhwYW5kZWQ9XFxcInRydWVcXFwiXFxyXFxuICAgIGFyaWEtbGl2ZT1cXFwicG9saXRlXFxcIlxcclxcbiAgICBhcmlhLXJlbGV2YW50PVxcXCJhbGxcXFwiXFxyXFxuICAgIGFyaWEtYXRvbWljPVxcXCJ0cnVlXFxcIlxcclxcbiAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi11bnBpbm5lZC1maWx0ZXItdHJlZVxcXCI+XFxyXFxuICAgIDxoNiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTIgY2FwcyBib2xkLTUwMCBtLWItMTAgZmxleCBqYy1zYlxcXCI+XFxyXFxuICAgICAgICBBbGwgRklMVEVSU1xcclxcbiAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tdXAgZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIj48L2k+XFxyXFxuICAgIDwvaDY+XFxyXFxuICAgIDx1bCBhcmlhLWxhYmVsbGVkYnk9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi11bnBpbm5lZC1maWx0ZXItdHJlZVxcXCIgY2xhc3M9XFxcImd1aSBtLTAgcC0wXFxcIiByb2xlPVxcXCJncm91cFxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubm9uRmF2b3JpdGVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDIsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICA8L3VsPlxcclxcbjwvbGk+XFxyXFxuXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICA8bGkgYXJpYS1sYWJlbD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBpdGVtIGZhY2V0LWl0ZW0gYm9yZGVyLWJvdHRvbSBsaWdodCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTUgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvQ29sbGFwc2VkLnRzICovIDQpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDb2xsYXBzZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVxcXCJcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3NyYy9oYnMvaGVscGVycy9Cb29sZWFuLnRzICovIDUpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx0cnVlLHtcIm5hbWVcIjpcIkJvb2xlYW5cIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgZGF0YS1hdHRyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtaXRlbS1oZWFkZXIgZmx1aWQgZ3VpIGl0ZW0gZmxleCBqYy1zYlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgcHJpbWFyeSBndWktc3ViaGVhZGluZy0xIGNhcHMgbS0wIGN1cnNvci1wb2ludGVyXFxcIiB0aXRsZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgXCJcbiAgICArICgoc3RhY2sxID0gX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL1NlbGVjdGVkRmlsdGVyc0NvdW50LnRzICovIDYpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcIlNlbGVjdGVkRmlsdGVyc0NvdW50XCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aSAgZGF0YS1hdHRyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBwaW4tdW5waW4tc2VsZWN0b3IgZ3VpLWljb24tcGluIG0tdC01IG0tci0xMCBwaW4taWNvbiBjdXJzb3ItcG9pbnRlclxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cXFwiUHJlc3MgZW50ZXIgb3Igc3BhY2UgdG8gcGluIGZpbHRlciBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cXFwiMFxcXCI+PC9pPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgzLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIucHJvZ3JhbSg1LCBkYXRhLCAwKSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9mYWNldC1sYWJlbC5oYnMgKi8gNyksZGVwdGgwLHtcIm5hbWVcIjpcImZhY2V0LWxhYmVsXCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICAgICAgXCIsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgPC9saT5cXHJcXG5cIjtcbn0sXCIzXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgZ3VpLWljb24tY2hldnJvbi11cCBleHBhbnNpb24taWNvbiBtLXQtNSBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiPjwvaT5cXHJcXG5cIjtcbn0sXCI1XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgZ3VpLWljb24tY2hldnJvbi1kb3duIGV4cGFuc2lvbi1pY29uIG0tdC01IG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCI+PC9pPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5ub25GYXZvcml0ZXMgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLmxlbmd0aCA6IHN0YWNrMSkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIik7XG59LFwidXNlUGFydGlhbFwiOnRydWUsXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuXG4vKioqLyB9KSxcbi8qIDI2ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2ExMXkvRmFjZXRUcmVlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgRmlsdGVyQWN0aW9uVHlwZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZSAqLyAxKTtcclxudmFyIERvbVV0aWxzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0RvbVV0aWxzICovIDEwKTtcclxudmFyIEZhY2V0VHJlZUl0ZW1fMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRmFjZXRUcmVlSXRlbSAqLyAyNyk7XHJcbnZhciBGYWNldFRyZWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldFRyZWUobm9kZSwgZmFjZXQsIGNvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBMb2NhbFxyXG4gICAgICAgIHRoaXMubGFzdElucHV0VmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIHRoaXMuZmluZFRyZWVpdGVtcyA9IGZ1bmN0aW9uIChub2RlLCB0cmVlLCBncm91cCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbSA9IG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICAgICAgICAgIHZhciB0aSA9IGdyb3VwO1xyXG4gICAgICAgICAgICB3aGlsZSAoZWxlbSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJvbGUgPSBlbGVtLmdldEF0dHJpYnV0ZShcInJvbGVcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAocm9sZSAmJiByb2xlLnRvTG93ZXJDYXNlKCkgPT09IFwidHJlZWl0ZW1cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpID0gbmV3IEZhY2V0VHJlZUl0ZW1fMS5GYWNldFRyZWVJdGVtKGVsZW0sIHRyZWUsIGdyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICB0aS5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJlZWl0ZW1zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wdXNoKHRpKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maXJzdENoYXJzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wdXNoKHRpLmxhYmVsLnN1YnN0cmluZygwLCAxKS50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChlbGVtLmZpcnN0RWxlbWVudENoaWxkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmluZFRyZWVpdGVtcyhlbGVtLCB0cmVlLCB0aSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbGVtID0gZWxlbS5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBwb3AgdXAgbWVudXNcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy50cmVlRG9tTm9kZS5nZXRBdHRyaWJ1dGUoXCJyb2xlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC50cmVlRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwidHJlZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBQb3B1bGF0ZSBhbGwgVHJlZSBJdGVtc1xyXG4gICAgICAgICAgICBfdGhpcy5maW5kVHJlZWl0ZW1zKF90aGlzLnRyZWVEb21Ob2RlLCBfdGhpcywgZmFsc2UpO1xyXG4gICAgICAgICAgICAvLyBVcGRhdGUgVmlzaWJsZSBUcmVlIEl0ZW1zXHJcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVZpc2libGVUcmVlaXRlbXMoKTtcclxuICAgICAgICAgICAgLy8gU2V0IHRhYiBJbmRleCBvZiBmaXJzdCB0cmVlIGl0ZW0uXHJcbiAgICAgICAgICAgIF90aGlzLmZpcnN0VHJlZWl0ZW0udHJlZUl0ZW1Eb21Ob2RlLnRhYkluZGV4ID0gMDtcclxuICAgICAgICAgICAgLy8gRXZlbnQgSGFuZGxlcnNcclxuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VBbGxOb2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfdGhpcy5jb2xsYXBzZUFsbEl0ZW1zKTtcclxuICAgICAgICAgICAgX3RoaXMuZXhwYW5kQWxsTm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX3RoaXMuZXhwYW5kQWxsSXRlbXMpO1xyXG4gICAgICAgICAgICBfdGhpcy5zZWFyY2hCb3hOb2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCBfdGhpcy5oYW5kbGVTZWFyY2hGb3JGaWx0ZXJzKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgX3RoaXMuc2V0Rm9jdXNUb1NlYXJjaEJveCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMub2ZmKF90aGlzLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBfdGhpcy5zZXRGb2N1c1RvU2VhcmNoQm94KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNUb1NlYXJjaEJveCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleSA9PT0gXCJmXCIpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZWFyY2hCb3hOb2RlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNUb0l0ZW0gPSBmdW5jdGlvbiAodHJlZWl0ZW0sIGRvbnRTZXRmb2N1cykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMudHJlZWl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpID09PSB0cmVlaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLnRyZWVJdGVtRG9tTm9kZS50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFkb250U2V0Zm9jdXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLnRyZWVJdGVtRG9tTm9kZS50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldEZvY3VzVG9GaXJzdFZpc2libGUgPSBmdW5jdGlvbiAoZG9udFNldGZvY3VzKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy50cmVlaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGkuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2V0Rm9jdXNUb0l0ZW0odGksIGRvbnRTZXRmb2N1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNUb05leHRJdGVtID0gZnVuY3Rpb24gKGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXh0SXRlbTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IChfdGhpcy50cmVlaXRlbXMubGVuZ3RoIC0gMSk7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfdGhpcy50cmVlaXRlbXNbaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGkgPT09IGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGkuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEl0ZW0gPSB0aTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobmV4dEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldEZvY3VzVG9JdGVtKG5leHRJdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c1RvUHJldmlvdXNJdGVtID0gZnVuY3Rpb24gKGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBwcmV2SXRlbTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aSA9PT0gY3VycmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmV2SXRlbSA9IHRpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwcmV2SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2V0Rm9jdXNUb0l0ZW0ocHJldkl0ZW0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnNldEZvY3VzVG9QYXJlbnRJdGVtID0gZnVuY3Rpb24gKGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbS5ncm91cFRyZWVpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRGb2N1c1RvSXRlbShjdXJyZW50SXRlbS5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zZXRGb2N1c1RvRmlyc3RJdGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRGb2N1c1RvSXRlbShfdGhpcy5maXJzdFRyZWVpdGVtKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNUb0xhc3RJdGVtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zZXRGb2N1c1RvSXRlbShfdGhpcy5sYXN0VHJlZWl0ZW0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5leHBhbmRUcmVlaXRlbSA9IGZ1bmN0aW9uIChjdXJyZW50SXRlbSwgbm90aWZ5KSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIFRyZWUgSXRlbSBpcyBleHBhbmRhYmxlXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50SXRlbS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKGN1cnJlbnRJdGVtLnRyZWVJdGVtRG9tTm9kZSwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlRXhwYW5zaW9uSWNvbihjdXJyZW50SXRlbSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVWaXNpYmxlVHJlZWl0ZW1zKG5vdGlmeSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICBfdGhpcy5leHBhbmRBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxTaWJsaW5nSXRlbXMgPSBmdW5jdGlvbiAoY3VycmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICgodGkuZ3JvdXBUcmVlaXRlbSA9PT0gY3VycmVudEl0ZW0uZ3JvdXBUcmVlaXRlbSkgJiYgdGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuZXhwYW5kVHJlZWl0ZW0odGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmV4cGFuZEFsbEl0ZW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMudHJlZWl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmV4cGFuZFRyZWVpdGVtKHRpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUFsbE5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgIF90aGlzLmV4cGFuZEFsbE5vZGUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUFsbE5vZGUuZm9jdXMoKTtcclxuICAgICAgICAgICAgX3RoaXMubm90aWZ5Q29sbGFwc2VBbmRFeHBhbnNpb24oKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VBbGxJdGVtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb2xsYXBzZVRyZWVpdGVtKHRpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5leHBhbmRBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUFsbE5vZGUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICBfdGhpcy5leHBhbmRBbGxOb2RlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIF90aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbGxhcHNlQWxsU2libGluZ0l0ZW1zID0gZnVuY3Rpb24gKGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy50cmVlaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoKHRpLmdyb3VwVHJlZWl0ZW0gPT09IGN1cnJlbnRJdGVtLmdyb3VwVHJlZWl0ZW0pICYmIHRpLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbGxhcHNlVHJlZWl0ZW0odGkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbGxhcHNlVHJlZWl0ZW0gPSBmdW5jdGlvbiAoY3VycmVudEl0ZW0sIG5vdGlmeSkge1xyXG4gICAgICAgICAgICB2YXIgZ3JvdXBUcmVlaXRlbTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRJdGVtLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBUcmVlaXRlbSA9IGN1cnJlbnRJdGVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBUcmVlaXRlbSA9IGN1cnJlbnRJdGVtLmdyb3VwVHJlZWl0ZW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGdyb3VwVHJlZWl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKGdyb3VwVHJlZWl0ZW0udHJlZUl0ZW1Eb21Ob2RlLCBcImZhbHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudG9nZ2xlRXhwYW5zaW9uSWNvbihncm91cFRyZWVpdGVtLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVWaXNpYmxlVHJlZWl0ZW1zKG5vdGlmeSk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRGb2N1c1RvSXRlbShncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5jb2xsYXBzZUFsbE5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgICAgIF90aGlzLmV4cGFuZEFsbE5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUV4cGFuc2lvbkljb24gPSBmdW5jdGlvbiAoZ3JvdXBUcmVlaXRlbSwgY3VycmVudEV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgIHZhciBpY29uTm9kZUxpc3QgPSBncm91cFRyZWVpdGVtLnRyZWVJdGVtRG9tTm9kZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmV4cGFuc2lvbi1pY29uXCIpO1xyXG4gICAgICAgICAgICB2YXIgaWNvbk5vZGU7XHJcbiAgICAgICAgICAgIGlmIChpY29uTm9kZUxpc3QgJiYgaWNvbk5vZGVMaXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWNvbk5vZGUgPSBpY29uTm9kZUxpc3RbMF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFjdXJyZW50RXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIGljb25Ob2RlLmNsYXNzTGlzdC5yZW1vdmUoXCJndWktaWNvbi1jaGV2cm9uLXVwXCIpO1xyXG4gICAgICAgICAgICAgICAgaWNvbk5vZGUuY2xhc3NMaXN0LmFkZChcImd1aS1pY29uLWNoZXZyb24tZG93blwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGljb25Ob2RlLmNsYXNzTGlzdC5yZW1vdmUoXCJndWktaWNvbi1jaGV2cm9uLWRvd25cIik7XHJcbiAgICAgICAgICAgICAgICBpY29uTm9kZS5jbGFzc0xpc3QuYWRkKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaXNpYmxlVHJlZWl0ZW1zID0gZnVuY3Rpb24gKG5vdGlmeSkge1xyXG4gICAgICAgICAgICBfdGhpcy5maXJzdFRyZWVpdGVtID0gX3RoaXMudHJlZWl0ZW1zWzBdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMudHJlZWl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudF8xID0gdGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpLnRyZWVJdGVtRG9tTm9kZS5jbGFzc0xpc3QuY29udGFpbnMoXCJndWktaGlkZGVuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgfHwgcGFyZW50XzEuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZ3VpLWhpZGRlblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgd2hpbGUgKHBhcmVudF8xICYmIChwYXJlbnRfMSAhPT0gX3RoaXMudHJlZURvbU5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudF8xLmdldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIikgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50XzEgPSBwYXJlbnRfMS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmxhc3RUcmVlaXRlbSA9IHRpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChub3RpZnkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXNCeUZpcnN0Q2hhcmFjdGVyID0gZnVuY3Rpb24gKGN1cnJlbnRJdGVtLCBjaGFyKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGFydDtcclxuICAgICAgICAgICAgdmFyIGluZGV4O1xyXG4gICAgICAgICAgICBjaGFyID0gY2hhci50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAvLyBHZXQgc3RhcnQgaW5kZXggZm9yIHNlYXJjaCBiYXNlZCBvbiBwb3NpdGlvbiBvZiBjdXJyZW50SXRlbVxyXG4gICAgICAgICAgICBzdGFydCA9IF90aGlzXHJcbiAgICAgICAgICAgICAgICAudHJlZWl0ZW1zXHJcbiAgICAgICAgICAgICAgICAuaW5kZXhPZihjdXJyZW50SXRlbSkgKyAxO1xyXG4gICAgICAgICAgICBpZiAoc3RhcnQgPT09IF90aGlzLnRyZWVpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVjayByZW1haW5pbmcgc2xvdHMgaW4gdGhlIG1lbnVcclxuICAgICAgICAgICAgaW5kZXggPSBfdGhpcy5nZXRJbmRleEZpcnN0Q2hhcnMoc3RhcnQsIGNoYXIpO1xyXG4gICAgICAgICAgICAvLyBJZiBub3QgZm91bmQgaW4gcmVtYWluaW5nIHNsb3RzLCBjaGVjayBmcm9tIGJlZ2lubmluZ1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IF90aGlzLmdldEluZGV4Rmlyc3RDaGFycygwLCBjaGFyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJZiBtYXRjaCB3YXMgZm91bmQuLi5cclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldEZvY3VzVG9JdGVtKF90aGlzLnRyZWVpdGVtc1tpbmRleF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdldEluZGV4Rmlyc3RDaGFycyA9IGZ1bmN0aW9uIChzdGFydEluZGV4LCBjaGFyKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgX3RoaXMuZmlyc3RDaGFycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLnRyZWVpdGVtc1tpXS5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhciA9PT0gX3RoaXMuZmlyc3RDaGFyc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zaG93TW9yZVZhbHVlcyA9IGZ1bmN0aW9uIChncm91cEl0ZW0pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRfMiA9IHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmdyb3VwVHJlZWl0ZW0gPT09IGdyb3VwSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudF8yLmNsYXNzTGlzdC5yZW1vdmUoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpLmlzU2hvd0xlc3NMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudF8yLmNsYXNzTGlzdC5yZW1vdmUoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS50cmVlSXRlbURvbU5vZGUuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpLmlzU2hvd01vcmVMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudF8yLmNsYXNzTGlzdC5hZGQoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlVmlzaWJsZVRyZWVpdGVtcygpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zaG93TGVzc1ZhbHVlcyA9IGZ1bmN0aW9uIChncm91cEl0ZW0pIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRfMyA9IHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmdyb3VwVHJlZWl0ZW0gPT09IGdyb3VwSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRfMy5jbGFzc0xpc3QuY29udGFpbnMoXCJleHRyYS1maWx0ZXJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50XzMuY2xhc3NMaXN0LmFkZChcImd1aS1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkuaXNTaG93TGVzc0xpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50XzMuY2xhc3NMaXN0LmFkZChcImd1aS1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkuaXNTaG93TW9yZUxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50XzMuY2xhc3NMaXN0LnJlbW92ZShcImd1aS1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpLnRyZWVJdGVtRG9tTm9kZS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy51cGRhdGVWaXNpYmxlVHJlZWl0ZW1zKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZUxhYmVsQ2hhbmdlID0gZnVuY3Rpb24gKGN1cnJlbnRJdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGVja2VkID0gRG9tVXRpbHNfMS5Eb21VdGlscy50b2dnbGVMYWJlbChjdXJyZW50SXRlbS50cmVlSXRlbURvbU5vZGUpO1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gY2hlY2tlZCA/IEZpbHRlckFjdGlvblR5cGVfMS5GaWx0ZXJBY3Rpb25UeXBlLkFkZCA6IEZpbHRlckFjdGlvblR5cGVfMS5GaWx0ZXJBY3Rpb25UeXBlLk1pbnVzO1xyXG4gICAgICAgICAgICBjdXJyZW50SXRlbS50cmVlSXRlbURvbU5vZGUuc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCBjaGVja2VkLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uRmlsdGVyQ2hhbmdlKGN1cnJlbnRJdGVtLmlkLCBjdXJyZW50SXRlbS5sYWJlbCwgYWN0aW9uLCBjdXJyZW50SXRlbS5kYXRhVHlwZSwgY3VycmVudEl0ZW0uaXNSYW5nZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuZmFjZXRDb25maWc7XHJcbiAgICAgICAgICAgIHZhciBwdWJsaXNoID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBfdGhpcy50cmVlaXRlbXM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGkgPSBfYVtfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAodGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBkYXRhXzEgPSBkYXRhOyBfYiA8IGRhdGFfMS5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZhY2V0ID0gZGF0YV8xW19iXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhY2V0LmlkID09PSB0aS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXQuY29sbGFwc2VkID0gIXRpLmlzRXhwYW5kZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1Ymxpc2gucHVzaCh7IGtleTogZmFjZXQuaWQsIGNvbGxhcHNlZDogZmFjZXQuY29sbGFwc2VkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkNvbGxhcHNlVG9nZ2xlKHB1Ymxpc2gpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVQaW5VbnBpbiA9IGZ1bmN0aW9uIChldmVudCwgcGluLCBpZCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuZmFjZXRDb25maWc7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZGF0YV8yID0gZGF0YTsgX2kgPCBkYXRhXzIubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmFjZXQgPSBkYXRhXzJbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZhY2V0LmlkID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0LnBpbm5lZCA9IHBpbjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5mYWNldC5yZVJlbmRlcigpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uUGluVW5waW4oaWQsIHBpbik7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVTZWFyY2hGb3JGaWx0ZXJzID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgdmFyIHBhcmVudCA9IGlucHV0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHZhciB2YWwgPSBpbnB1dC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBpZiAodmFsID09PSBfdGhpcy5sYXN0SW5wdXRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmxhc3RJbnB1dFZhbHVlID0gdmFsO1xyXG4gICAgICAgICAgICB2YXIgaW5wdXRWYWx1ZUJsYW5rID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkIHx8IHZhbCA9PT0gbnVsbCB8fCB2YWwudHJpbSgpID09PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICBpbnB1dFZhbHVlQmxhbmsgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpbnB1dFZhbHVlQmxhbmspIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVOb3RCbGFua0lucHV0U2VhcmNoKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5oYW5kbGVCbGFua0lucHV0U2VhcmNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVWaXNpYmxlVHJlZWl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRGb2N1c1RvRmlyc3RWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICAgICAgLy8gY29uc3QgbWF0Y2hlZEdyb3VwSXRlbTogRmFjZXRUcmVlSXRlbVtdID0gW107XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IG5vdE1hdGNoZWRHcm91cEl0ZW06IEZhY2V0VHJlZUl0ZW1bXSA9IFtdO1xyXG4gICAgICAgICAgICAvLyBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAodGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgaWYgKHRpLmxhYmVsLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWwpID4gLTEpIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgbWF0Y2hlZEdyb3VwSXRlbS5wdXNoKHRpKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBub3RNYXRjaGVkR3JvdXBJdGVtLnB1c2godGkpO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gICAgIGlmICh0aS5pc1Nob3dMZXNzTGluayB8fCB0aS5pc1Nob3dNb3JlTGluayApIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gICAgICAgICBEb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAvLyBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAodGkuaXNTaG93TGVzc0xpbmsgfHwgdGkuaXNTaG93TW9yZUxpbmspIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAgICAgLy8gICAgIGlmICggbWF0Y2hlZEdyb3VwSXRlbS5pbmRleE9mKHRpKSA+IC0xIHx8IG1hdGNoZWRHcm91cEl0ZW0uaW5kZXhPZih0aS5ncm91cFRyZWVpdGVtKSA+IC0xICkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgIGlmICghdGkuaXNFeHBhbmRhYmxlICkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICBpZiAodGkudmFsdWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPiAtMSApIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChtYXRjaGVkR3JvdXBJdGVtLmluZGV4T2YodGkuZ3JvdXBUcmVlaXRlbSkgPD0gLTEgKSB7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlZEdyb3VwSXRlbS5wdXNoKHRpLmdyb3VwVHJlZWl0ZW0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgY29uc3Qgbm90TWF0Y2hlZEluZGV4ID0gbm90TWF0Y2hlZEdyb3VwSXRlbS5pbmRleE9mKHRpLmdyb3VwVHJlZWl0ZW0pO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKG5vdE1hdGNoZWRJbmRleCA+IC0xICkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG5vdE1hdGNoZWRHcm91cEl0ZW0uc2xpY2Uobm90TWF0Y2hlZEluZGV4LCBub3RNYXRjaGVkSW5kZXggKyAxKTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICBEb21VdGlscy5zaG93KHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAvLyAgICAgICAgICAgICAgICAgRG9tVXRpbHMuaGlkZSh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgLy8gZm9yIChjb25zdCBtZyBvZiBtYXRjaGVkR3JvdXBJdGVtKSB7XHJcbiAgICAgICAgICAgIC8vICAgICBtZy5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyAgICAgRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKG1nLnRyZWVJdGVtRG9tTm9kZSwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICAvLyAgICAgRG9tVXRpbHMuc2hvdyhtZy50cmVlSXRlbURvbU5vZGUpO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgIC8vIGZvciAoY29uc3Qgbm1nIG9mIG5vdE1hdGNoZWRHcm91cEl0ZW0pIHtcclxuICAgICAgICAgICAgLy8gICAgIG5tZy5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgLy8gICAgIERvbVV0aWxzLnNldEFyaWFFeHBhbmRlZChubWcudHJlZUl0ZW1Eb21Ob2RlLCBcImZhbHNlXCIpO1xyXG4gICAgICAgICAgICAvLyAgICAgRG9tVXRpbHMuaGlkZShubWcudHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVCbGFua0lucHV0U2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBIYW5kbGUgYmxhbmsgU2VhcmNoIGhlcmVcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IF90aGlzLnRyZWVpdGVtczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB0aSA9IF9hW19pXTtcclxuICAgICAgICAgICAgICAgIGlmICh0aS5pZ25vcmVGb3JTZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGV4cGFuZGFibGVcclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aS50cmVlSXRlbURvbU5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY29sbGFwc2VkXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKHRpLnRyZWVJdGVtRG9tTm9kZSwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5zZXRBcmlhRXhwYW5kZWQodGkudHJlZUl0ZW1Eb21Ob2RlLCBcImZhbHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aS5pc1Nob3dNb3JlTGluayAmJiAhdGkuaXNTaG93TGVzc0xpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudF80ID0gdGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpc0V4dHJhRmlsdGVyID0gcGFyZW50XzQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZXh0cmEtZmlsdGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNFeHRyYUZpbHRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aS5pc1Nob3dNb3JlTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLnNob3codGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRpLmlzU2hvd0xlc3NMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlTm90QmxhbmtJbnB1dFNlYXJjaCA9IGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgdmFyIGdyb3VwSXRlbTtcclxuICAgICAgICAgICAgdmFyIGdyb3VwSXRlbU1hdGNoZWQ7XHJcbiAgICAgICAgICAgIHZhciBjaGlsZEl0ZW1NYXRjaGVkO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gX3RoaXMudHJlZWl0ZW1zOyBfaSA8IF9hLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpID0gX2FbX2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmlnbm9yZUZvclNlYXJjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRpLmlzU2hvd0xlc3NMaW5rIHx8IHRpLmlzU2hvd01vcmVMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGV4cGFuZGFibGVcclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgZ3JvdXAgbGV2ZWwgVmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJdGVtID0gdGk7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJdGVtTWF0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkSXRlbU1hdGNoZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLnNldEFyaWFFeHBhbmRlZCh0aS50cmVlSXRlbURvbU5vZGUsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZ3JvdXAgaXMgbWF0Y2hpbmdcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cEl0ZW1NYXRjaGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBncm91cCBpcyBtYXRjaGluZyBleHBhbmQgdGhlIGdyb3VwXHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXBJdGVtTWF0Y2hlZCB8fCBjaGlsZEl0ZW1NYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBJdGVtLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5zZXRBcmlhRXhwYW5kZWQoZ3JvdXBJdGVtLnRyZWVJdGVtRG9tTm9kZSwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2hvdyhncm91cEl0ZW0udHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZvciBDaGlsZCBMaW5rc1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aS5pc0V4cGFuZGFibGUgJiYgdGkuZ3JvdXBUcmVlaXRlbSA9PT0gZ3JvdXBJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgZ3JvdXAgbWF0Y2hlcyBzZXQgdGhlIHZpc2libGl0eSB0byB0cnVlIGV4Y2VwdCBzaG93IG1vcmUgb3IgbGVzcyBsaW5rc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChncm91cEl0ZW1NYXRjaGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERvbVV0aWxzXzEuRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBncm91cCBub3QgbWF0Y2hlZCBjaGVjayBpZiBjaGlsZCBtYXRjaGVzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aS5sYWJlbC50b0xvd2VyQ2FzZSgpLmluZGV4T2YodmFsKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHNfMS5Eb21VdGlscy5zaG93KHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkSXRlbU1hdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlsc18xLkRvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRFbGVtZW50ID0gbm9kZTtcclxuICAgICAgICB0aGlzLmZhY2V0ID0gZmFjZXQ7XHJcbiAgICAgICAgdGhpcy50cmVlRG9tTm9kZSA9IHRoaXMucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW3JvbGU9dHJlZV1cIilbMF07XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUFsbE5vZGUgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jb2xsYXBzZS1hbGxcIilbMF07XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxOb2RlID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZXhwYW5kLWFsbFwiKVswXTtcclxuICAgICAgICB0aGlzLnNlYXJjaEJveE5vZGUgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5maWx0ZXItc2VhcmNoLWlucHV0XCIpWzBdO1xyXG4gICAgICAgIHRoaXMudHJlZWl0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5maXJzdENoYXJzID0gW107XHJcbiAgICAgICAgdGhpcy5maXJzdFRyZWVpdGVtID0gbnVsbDtcclxuICAgICAgICB0aGlzLmxhc3RUcmVlaXRlbSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gRmFjZXRUcmVlO1xyXG59KCkpO1xyXG5leHBvcnRzLkZhY2V0VHJlZSA9IEZhY2V0VHJlZTtcclxuXG5cbi8qKiovIH0pLFxuLyogMjcgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2ExMXkvRmFjZXRUcmVlSXRlbS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBEb21VdGlsc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9Eb21VdGlscyAqLyAxMCk7XHJcbnZhciBLZXlDb2Rlc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9LZXlDb2RlcyAqLyAyOCk7XHJcbnZhciBGYWNldFRyZWVJdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmFjZXRUcmVlSXRlbShub2RlLCB0cmVlLCBncm91cCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy50cmVlSXRlbURvbU5vZGUudGFiSW5kZXggPSAtMTtcclxuICAgICAgICAgICAgaWYgKCFfdGhpcy50cmVlSXRlbURvbU5vZGUuZ2V0QXR0cmlidXRlKFwicm9sZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJ0cmVlaXRlbVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIF90aGlzLmhhbmRsZUtleWRvd24uYmluZChfdGhpcykpO1xyXG4gICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBfdGhpcy5oYW5kbGVDbGljay5iaW5kKF90aGlzKSk7XHJcbiAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIF90aGlzLmhhbmRsZUZvY3VzLmJpbmQoX3RoaXMpKTtcclxuICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCBfdGhpcy5oYW5kbGVCbHVyLmJpbmQoX3RoaXMpKTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpcnN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgX3RoaXMuaGFuZGxlTW91c2VPdmVyLmJpbmQoX3RoaXMpKTtcclxuICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIC5maXJzdEVsZW1lbnRDaGlsZFxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgX3RoaXMuaGFuZGxlTW91c2VPdXQuYmluZChfdGhpcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgX3RoaXMuaGFuZGxlTW91c2VPdmVyLmJpbmQoX3RoaXMpKTtcclxuICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgX3RoaXMuaGFuZGxlTW91c2VPdXQuYmluZChfdGhpcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5waW5VblBpbkRvbU5vZGUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnBpblVuUGluRG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgX3RoaXMuaGFuZGxlVW5QaW5DbGljayk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5waW5VblBpbkRvbU5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgX3RoaXMuaGFuZGxlVW5QaW5LZXl1cCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld05vZGUgPSBfdGhpcy50cmVlSXRlbURvbU5vZGUuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgICAgICBfdGhpcy50cmVlSXRlbURvbU5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Tm9kZSwgX3RoaXMudHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgX3RoaXMudHJlZUl0ZW1Eb21Ob2RlID0gbnVsbDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaXNFeHBhbmRlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIERvbVV0aWxzXzEuRG9tVXRpbHMuaXNBcmlhRXhwYW5kZWQoX3RoaXMudHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZVVuUGluQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ1bnBpbi1pY29uXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy50cmVlLmhhbmRsZVBpblVucGluKGV2ZW50LCBmYWxzZSwgX3RoaXMuaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudHJlZS5oYW5kbGVQaW5VbnBpbihldmVudCwgdHJ1ZSwgX3RoaXMuaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZVVuUGluS2V5dXAgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgc3dpdGNoIChldmVudC5rZXlDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzXzEuS2V5Q29kZXMuU1BBQ0U6XHJcbiAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzXzEuS2V5Q29kZXMuUkVUVVJOOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidW5waW4taWNvblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy50cmVlLmhhbmRsZVBpblVucGluKGV2ZW50LCBmYWxzZSwgX3RoaXMuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMudHJlZS5oYW5kbGVQaW5VbnBpbihldmVudCwgdHJ1ZSwgX3RoaXMuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZUtleWRvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHRndCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgICAgIHZhciBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHZhciBjaGFyID0gZXZlbnQua2V5O1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBpc1ByaW50YWJsZUNoYXJhY3RlcihzdHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHIubGVuZ3RoID09PSAxICYmIHN0ci5tYXRjaCgvXFxTLyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gcHJpbnRhYmxlQ2hhcmFjdGVyKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGFyID09PSBcIipcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmV4cGFuZEFsbFNpYmxpbmdJdGVtcyhpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1ByaW50YWJsZUNoYXJhY3RlcihjaGFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzQnlGaXJzdENoYXJhY3RlcihpdGVtLCBjaGFyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLnN0b3BEZWZhdWx0Q2xpY2sgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlDb2Rlc18xLktleUNvZGVzLlNQQUNFIHx8IGV2ZW50LmtleUNvZGUgPT09IEtleUNvZGVzXzEuS2V5Q29kZXMuUkVUVVJOKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc3RvcERlZmF1bHRDbGljayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNQcmludGFibGVDaGFyYWN0ZXIoY2hhcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnRhYmxlQ2hhcmFjdGVyKF90aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzXzEuS2V5Q29kZXMuU1BBQ0U6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlc18xLktleUNvZGVzLlJFVFVSTjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29sbGFwc2VUcmVlaXRlbShfdGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZXhwYW5kVHJlZWl0ZW0oX3RoaXMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzU2hvd01vcmVMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNob3dNb3JlVmFsdWVzKF90aGlzLmdyb3VwVHJlZWl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzU2hvd0xlc3NMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNob3dMZXNzVmFsdWVzKF90aGlzLmdyb3VwVHJlZWl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzTGFiZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGFuZGxlTGFiZWxDaGFuZ2UoX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXNfMS5LZXlDb2Rlcy5VUDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Rm9jdXNUb1ByZXZpb3VzSXRlbShfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzXzEuS2V5Q29kZXMuRE9XTjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Rm9jdXNUb05leHRJdGVtKF90aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXNfMS5LZXlDb2Rlcy5SSUdIVDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c1RvTmV4dEl0ZW0oX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4cGFuZFRyZWVpdGVtKF90aGlzLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlc18xLktleUNvZGVzLkxFRlQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0V4cGFuZGFibGUgJiYgX3RoaXMuaXNFeHBhbmRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbGxhcHNlVHJlZWl0ZW0oX3RoaXMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuaW5Hcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c1RvUGFyZW50SXRlbShfdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlc18xLktleUNvZGVzLkhPTUU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzVG9GaXJzdEl0ZW0oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXNfMS5LZXlDb2Rlcy5FTkQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzVG9MYXN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJpbnRhYmxlQ2hhcmFjdGVyKGNoYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludGFibGVDaGFyYWN0ZXIoX3RoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gb25seSBwcm9jZXNzIGNsaWNrIGV2ZW50cyB0aGF0IGRpcmVjdGx5IGhhcHBlbmVkIG9uIHRoaXMgdHJlZWl0ZW1cclxuICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gX3RoaXMudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgICAgICAmJiAhRG9tVXRpbHNfMS5Eb21VdGlscy5pc1NlbGZPckRlc2NlbmRhbnQoX3RoaXMudHJlZUl0ZW1Eb21Ob2RlLmZpcnN0RWxlbWVudENoaWxkLCBldmVudC50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsYXBzZVRyZWVpdGVtKF90aGlzLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5leHBhbmRUcmVlaXRlbShfdGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1Nob3dNb3JlTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93TW9yZVZhbHVlcyhfdGhpcy5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc1Nob3dMZXNzTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93TGVzc1ZhbHVlcyhfdGhpcy5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5pc0xhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmhhbmRsZUxhYmVsQ2hhbmdlKF90aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVGb2N1cyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IF90aGlzLnRyZWVJdGVtRG9tTm9kZTtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZVxyXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdFxyXG4gICAgICAgICAgICAgICAgLmFkZChcImZvY3VzXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVCbHVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy50cmVlSXRlbURvbU5vZGU7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgbm9kZSA9IG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbm9kZVxyXG4gICAgICAgICAgICAgICAgLmNsYXNzTGlzdFxyXG4gICAgICAgICAgICAgICAgLnJlbW92ZShcImZvY3VzXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVNb3VzZU92ZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ7XHJcbiAgICAgICAgICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKFwiaG92ZXJcIik7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZU1vdXNlT3V0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgICAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZShcImhvdmVyXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbm9kZS50YWJJbmRleCA9IC0xO1xyXG4gICAgICAgIHRoaXMudHJlZSA9IHRyZWU7XHJcbiAgICAgICAgdGhpcy5ncm91cFRyZWVpdGVtID0gZ3JvdXA7XHJcbiAgICAgICAgdGhpcy50cmVlSXRlbURvbU5vZGUgPSBub2RlO1xyXG4gICAgICAgIC8vIHRoaXMubGFiZWwgPSBub2RlXHJcbiAgICAgICAgLy8gICAgIC50ZXh0Q29udGVudFxyXG4gICAgICAgIC8vICAgICAudHJpbSgpO1xyXG4gICAgICAgIHRoaXMuc3RvcERlZmF1bHRDbGljayA9IGZhbHNlO1xyXG4gICAgICAgIC8vIGlmIChub2RlLmdldEF0dHJpYnV0ZShcImFyaWEtbGFiZWxcIikpIHtcclxuICAgICAgICAvLyAgICAgdGhpcy5sYWJlbCA9IG5vZGVcclxuICAgICAgICAvLyAgICAgICAgIC5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpXHJcbiAgICAgICAgLy8gICAgICAgICAudHJpbSgpO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICB2YXIgZmlyc3RFbSA9IHRoaXMudHJlZUl0ZW1Eb21Ob2RlLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgIGlmIChmaXJzdEVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGluVW5QaW5Eb21Ob2RlID0gZmlyc3RFbS5xdWVyeVNlbGVjdG9yKFwiLnBpbi11bnBpbi1zZWxlY3RvclwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pZCA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdHRyLWlkXCIpO1xyXG4gICAgICAgIHRoaXMubGFiZWwgPSBub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtYXR0ci12YWx1ZVwiKTtcclxuICAgICAgICB0aGlzLmRhdGFUeXBlID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF0dHItdHlwZVwiKTtcclxuICAgICAgICB0aGlzLmlzUmFuZ2UgPSBub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtYXR0ci1pc1JhbmdlXCIpID09PSBcInRydWVcIjtcclxuICAgICAgICB0aGlzLmlnbm9yZUZvclNlYXJjaCA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdHRyLWlnbm9yZUZvclNlYXJjaFwiKSA9PT0gXCJ0cnVlXCI7XHJcbiAgICAgICAgdGhpcy5pc1Nob3dNb3JlTGluayA9IG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvdy1tb3JlLWxpbmtcIik7XHJcbiAgICAgICAgdGhpcy5pc1Nob3dMZXNzTGluayA9IG5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwic2hvdy1sZXNzLWxpbmtcIik7XHJcbiAgICAgICAgdGhpcy5pc0xhYmVsID0gbm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwibGFiZWxcIjtcclxuICAgICAgICB0aGlzLmlzRXhwYW5kYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pbkdyb3VwID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKGdyb3VwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5Hcm91cCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBlbGVtID0gbm9kZS5maXJzdEVsZW1lbnRDaGlsZDtcclxuICAgICAgICB3aGlsZSAoZWxlbSkge1xyXG4gICAgICAgICAgICBpZiAoZWxlbS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidWxcIikge1xyXG4gICAgICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsIFwiZ3JvdXBcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzRXhwYW5kYWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbGVtID0gZWxlbS5uZXh0RWxlbWVudFNpYmxpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIEZhY2V0VHJlZUl0ZW07XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjZXRUcmVlSXRlbSA9IEZhY2V0VHJlZUl0ZW07XHJcblxuXG4vKioqLyB9KSxcbi8qIDI4ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvYTExeS9LZXlDb2Rlcy50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5leHBvcnRzLktleUNvZGVzID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICBSRVRVUk46IDEzLFxyXG4gICAgU1BBQ0U6IDMyLFxyXG4gICAgUEFHRVVQOiAzMyxcclxuICAgIFBBR0VET1dOOiAzNCxcclxuICAgIEVORDogMzUsXHJcbiAgICBIT01FOiAzNixcclxuICAgIExFRlQ6IDM3LFxyXG4gICAgVVA6IDM4LFxyXG4gICAgUklHSFQ6IDM5LFxyXG4gICAgRE9XTjogNDAsXHJcbn0pO1xyXG5cblxuLyoqKi8gfSksXG4vKiAyOSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9jb25maWcvRmFjZXRDb25maWdTdG9yZS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZhY2V0Q29uZmlnU3RvcmUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGYWNldENvbmZpZ1N0b3JlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdEZhY2V0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5pbWF0aW9uVGltZTogMjAwLFxyXG4gICAgICAgICAgICBjb2xsYXBzZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBjb250YWluZXJFbGVtZW50OiBudWxsLFxyXG4gICAgICAgICAgICBmYWNldENvbmZpZzogW10sXHJcbiAgICAgICAgICAgIGlkUHJlZml4OiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwMDApLnRvU3RyaW5nKCksXHJcbiAgICAgICAgICAgIG5vT2ZGYWNldFRvU2hvdzogNSxcclxuICAgICAgICAgICAgLy8gZmFjZXRzOiBbXSxcclxuICAgICAgICAgICAgb25Db2xsYXBzZVRvZ2dsZTogZnVuY3Rpb24gKGNvbGxhcHNlQ29uZmlnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZ25vcmVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25GaWx0ZXJDaGFuZ2U6IGZ1bmN0aW9uIChrZXksIHZhbHVlLCBhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblBpblVucGluOiBmdW5jdGlvbiAoa2V5LCBwaW4pIHtcclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5leHRlbmRPcHRpb25zID0gZnVuY3Rpb24gKGlucHV0T3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMub3B0aW9ucyA9IGpRdWVyeS5leHRlbmQoe30sIF90aGlzLmRlZmF1bHRGYWNldE9wdGlvbnMsIGlucHV0T3B0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmV4dGVuZE9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuY29udGFpbmVyRWxlbWVudCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgUHJvdmlkZSBhIHZhbGlkIGNvbnRhaW5lciBFbGVtZW50IG9iamVjdFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRmFjZXRDb25maWdTdG9yZS5wcm90b3R5cGUsIFwiT3B0aW9uc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLm9wdGlvbnM7IH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIEZhY2V0Q29uZmlnU3RvcmU7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjZXRDb25maWdTdG9yZSA9IEZhY2V0Q29uZmlnU3RvcmU7XHJcblxuXG4vKioqLyB9KSxcbi8qIDMwICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL21haW4vRmlsdGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgSG90S2V5c0ZpbHRlcnNIYW5kbGVyXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9ldmVudGhhbmRsZXJzL0hvdEtleXNGaWx0ZXJzSGFuZGxlciAqLyAzMSk7XHJcbnZhciBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2VfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL3NlcnZpY2VzL0ZpbHRlclRlbXBsYXRlU2VydmljZSAqLyAzMik7XHJcbnZhciBGaWx0ZXJDb25maWdTdG9yZV8xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9jb25maWcvRmlsdGVyQ29uZmlnU3RvcmUgKi8gMzUpO1xyXG52YXIgZXZlbnRoYW5kbGVyc18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9ldmVudGhhbmRsZXJzICovIDM2KTtcclxudmFyIEZpbHRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpbHRlcihvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbiA9IFtdO1xyXG4gICAgICAgIHRoaXMuYmluZCA9IGZ1bmN0aW9uIChmaWx0ZXJzKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZhY2V0U3ViSGVhZGVyID0gX3RoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZmlsdGVycyk7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5maWx0ZXJFbGVtZW50Lmh0bWwoZmFjZXRTdWJIZWFkZXIpO1xyXG4gICAgICAgICAgICB9LCAxKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKF90aGlzLmZpbHRlckVsZW1lbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZmlsdGVyRWxlbWVudC5vZmYoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIgIT09IHVuZGVmaW5lZCAmJiBoYW5kbGVyLmRlcmVnaXN0ZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIuZGVyZWdpc3RlcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBuZXcgRmlsdGVyQ29uZmlnU3RvcmVfMS5GaWx0ZXJDb25maWdTdG9yZShvcHRpb25zKTtcclxuICAgICAgICB0aGlzLmZpbHRlckVsZW1lbnQgPSBqUXVlcnkob3B0aW9ucy5jb250YWluZXJFbGVtZW50KTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZSA9IG5ldyBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2VfMS5GaWx0ZXJUZW1wbGF0ZVNlcnZpY2UodGhpcy5jb25maWdTdG9yZSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgZXZlbnRoYW5kbGVyc18xLkZpbHRlckFjdGlvbkhhbmRsZXIodGhpcy5maWx0ZXJFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgSG90S2V5c0ZpbHRlcnNIYW5kbGVyXzEuSG90S2V5c0ZpbHRlcnNIYW5kbGVyKCkpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLmZvckVhY2goZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgaGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBGaWx0ZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmlsdGVyID0gRmlsdGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzMSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0hvdEtleXNGaWx0ZXJzSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEhvdEtleXNGaWx0ZXJzSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEhvdEtleXNGaWx0ZXJzSGFuZGxlcigpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9uKFwia2V5ZG93blwiLCBfdGhpcy5mb2N1c09uU2VhcmNoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90aGluZ1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kZVJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBqUXVlcnkoZG9jdW1lbnQpLm9mZihcImtleWRvd25cIiwgX3RoaXMuZm9jdXNPblNlYXJjaCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmZvY3VzT25TZWFyY2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXkgPT09IFwiclwiKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5KFwiLmZhY2V0LXN1YmhlYWRlciAucmVtb3ZlLWFsbFwiKS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBIb3RLZXlzRmlsdGVyc0hhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSG90S2V5c0ZpbHRlcnNIYW5kbGVyID0gSG90S2V5c0ZpbHRlcnNIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzMiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvc2VydmljZXMvRmlsdGVyVGVtcGxhdGVTZXJ2aWNlLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZhY2V0U3ViSGVhZGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi8uLi9oYnMvZmFjZXQtYXBwbGllZC1maWx0ZXJzLmhicyAqLyAzMyk7XHJcbnZhciBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UoY29uZmlnU3RvcmUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgICAgICB0aGlzLm1lcmdlV2l0aEZhY2V0Q29uZmlnID0gZnVuY3Rpb24gKGZpbHRlcnMpIHtcclxuICAgICAgICAgICAgdmFyIG1lcmdlZEFycmF5ID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZmlsdGVyc18xID0gZmlsdGVyczsgX2kgPCBmaWx0ZXJzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmFjZXQgPSBmaWx0ZXJzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBfYiA9IF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuZmlsdGVyQ29uZmlnOyBfYSA8IF9iLmxlbmd0aDsgX2ErKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWNldENvbmZpZyA9IF9iW19hXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZXRDb25maWcuaWQgPT09IGZhY2V0LmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lcmdlZEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sbGFwc2VkOiBmYWNldENvbmZpZy5jb2xsYXBzZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldFJhbmdlczogZmFjZXQuZmFjZXRSYW5nZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlczogZmFjZXQuZmFjZXRWYWx1ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZmFjZXRDb25maWcuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmYWNldENvbmZpZy5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JkZXI6IGZhY2V0Q29uZmlnLm9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlubmVkOiBmYWNldENvbmZpZy5waW5uZWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBmYWNldENvbmZpZy50eXBlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBtZXJnZWRBcnJheTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRTdWJIZWFkZXIgPSBGYWNldFN1YkhlYWRlcjtcclxuICAgIH1cclxuICAgIEZpbHRlclRlbXBsYXRlU2VydmljZS5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChmaWx0ZXJzKSB7XHJcbiAgICAgICAgdmFyIG1lcmdlZEZpbHRlcnMgPSB0aGlzLm1lcmdlV2l0aEZhY2V0Q29uZmlnKGZpbHRlcnMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyKHsgZmlsdGVyczogbWVyZ2VkRmlsdGVycyB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRmlsdGVyVGVtcGxhdGVTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLkZpbHRlclRlbXBsYXRlU2VydmljZSA9IEZpbHRlclRlbXBsYXRlU2VydmljZTtcclxuXG5cbi8qKiovIH0pLFxuLyogMzMgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvaGJzL2ZhY2V0LWFwcGxpZWQtZmlsdGVycy5oYnMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG52YXIgSGFuZGxlYmFycyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIGhhbmRsZWJhcnMgKi8gMCk7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcIjFcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIjxzZWN0aW9uIGNsYXNzPVxcXCJjb250ZW50IGZhY2V0LXN1YmhlYWRlciBndWkgZmx1aWQtdyBiYXNpYyBjdXJ2ZWQgcC01XFxcIiBhcmlhLWxhYmVsPVxcXCJBcHBsaWVkIEZpbHRlcnNcXFwiPlxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTIgY2Fwc1xcXCI+QXBwbGllZCBGaWx0ZXJzPC9zcGFuPlxcbiAgICA8YnV0dG9uIGNsYXNzPVxcXCJndWkgbS1sLTUgcmVtb3ZlLWFsbFxcXCIgYXJpYS1sYWJlbD1cXFwiQ2xlYXIgQWxsIEZpbHRlcnNcXFwiPlxcbiAgICAgICAgPGkgY2xhc3M9XFxcImd1aS1pY29uIGd1aS1pY29uLWNhbmNlbFxcXCI+PC9pPlxcbiAgICAgICAgPHNwYW4+Q2xlYXIgQWxsPC9zcGFuPlxcbiAgICA8L2J1dHRvbj5cXG4gICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtLWwtMTBcXFwiPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZpbHRlcnMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMiwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgIDwvc3Bhbj5cXG48L3NlY3Rpb24+XFxuXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIiAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtLXItNVxcXCI+XFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBsYXJnZSBsYWJlbHMgZmFjZXQtbGFiZWxzXFxcIj5cXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0xXFxcIj5cIlxuICAgICsgY29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24oY29udGFpbmVyLmxhbWJkYSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjwvc3Bhbj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhY2V0VmFsdWVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRSYW5nZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oNSwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgPC9zcGFuPlxcblwiO1xufSxcIjNcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgPGJ1dHRvbiBhcmlhLWxhYmVsPVxcXCJDbGVhciBmaWx0ZXIgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiIG9mIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJndWkgbS0wIG0tdC0yIG0tci0yIHAtNCBsYWJlbCBjdXJzb3ItcG9pbnRlciBzdHJpa2V0aHJvdWdoLWhvdmVyXFxcIiBcXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWZpbHRlci1lbnRyeT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9zcmMvaGJzL2hlbHBlcnMvRm9ybWF0TGFiZWxCeVR5cGUudHMgKi8gOCkpLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJGb3JtYXRMYWJlbEJ5VHlwZVwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gZ3VpLWljb24tY2FuY2VsXFxcIj48L2k+XFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxcblwiO1xufSxcIjVcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgPGJ1dHRvbiBhcmlhLWxhYmVsPVxcXCJDbGVhciBSYW5nZSBmb3IgZmlsdGVyIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJndWkgbS0wIG0tdC0yIG0tci0yIHAtNCBsYWJlbCBjdXJzb3ItcG9pbnRlciBzdHJpa2V0aHJvdWdoLWhvdmVyXFxcIiBcXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWZpbHRlci1lbnRyeT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6Ojp0cnVlXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vc3JjL2hicy9oZWxwZXJzL1JhbmdlLnRzICovIDM0KSkuY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5taW4gOiBkZXB0aDApLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5tYXggOiBkZXB0aDApLChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSx7XCJuYW1lXCI6XCJSYW5nZVwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gZ3VpLWljb24tY2FuY2VsXFxcIj48L2k+XFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKChzdGFjazEgPSAoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmlsdGVycyA6IGRlcHRoMCkpICE9IG51bGwgPyBzdGFjazEubGVuZ3RoIDogc3RhY2sxKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZSxcInVzZURlcHRoc1wiOnRydWV9KTtcblxuLyoqKi8gfSksXG4vKiAzNCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy9oYnMvaGVscGVycy9SYW5nZS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIG1vbWVudCA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIG1vbWVudCAqLyA5KTtcclxudmFyIHJhbmdlID0gZnVuY3Rpb24gKG1pbiwgbWF4LCB0eXBlKSB7XHJcbiAgICB2YXIgc3RyID0gXCJcIjtcclxuICAgIHZhciBtaW5TdHIgPSBtaW47XHJcbiAgICB2YXIgbWF4U3RyID0gbWF4O1xyXG4gICAgaWYgKHR5cGUgPT09IFwiRWRtLkRhdGVUaW1lT2Zmc2V0XCIpIHtcclxuICAgICAgICBpZiAobWluICE9PSB1bmRlZmluZWQgJiYgbWluICE9PSBudWxsICYmIG1pbiAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBtaW5TdHIgPSBtb21lbnQobWluKS5mb3JtYXQoXCJERC1NTU0tWVlZWVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1heCAhPT0gdW5kZWZpbmVkICYmIG1heCAhPT0gbnVsbCAmJiBtYXggIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgbWF4U3RyID0gbW9tZW50KG1heCkuZm9ybWF0KFwiREQtTU1NLVlZWVlcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKG1pblN0ciAhPT0gdW5kZWZpbmVkICYmIG1pblN0ciAhPT0gbnVsbCAmJiBtaW5TdHIgIT09IFwiXCIpIHtcclxuICAgICAgICBzdHIgKz0gXCIgZnJvbTogXCIgKyBtaW5TdHI7XHJcbiAgICB9XHJcbiAgICBpZiAobWF4U3RyICE9PSB1bmRlZmluZWQgJiYgbWF4U3RyICE9PSBudWxsICYmIG1heFN0ciAhPT0gXCJcIikge1xyXG4gICAgICAgIHN0ciArPSBcIiB0bzogXCIgKyBtYXhTdHI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RyO1xyXG59O1xyXG5leHBvcnRzLmRlZmF1bHQgPSByYW5nZTtcclxuXG5cbi8qKiovIH0pLFxuLyogMzUgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vc3JjL3RzL2NvbmZpZy9GaWx0ZXJDb25maWdTdG9yZS50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBGaWx0ZXJDb25maWdTdG9yZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpbHRlckNvbmZpZ1N0b3JlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdGZpbHRlck9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuaW1hdGlvblRpbWU6IDIwMCxcclxuICAgICAgICAgICAgY29udGFpbmVyRWxlbWVudDogbnVsbCxcclxuICAgICAgICAgICAgZmlsdGVyQ29uZmlnOiBbXSxcclxuICAgICAgICAgICAgb25BbGxGaWx0ZXJSZW1vdmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvbkZpbHRlckNoYW5nZTogZnVuY3Rpb24gKGtleSwgdmFsdWUsIGFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgLy8gSWdub3JlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmV4dGVuZE9wdGlvbnMgPSBmdW5jdGlvbiAoaW5wdXRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoX3RoaXMub3B0aW9ucyA9IGpRdWVyeS5leHRlbmQoe30sIF90aGlzLmRlZmF1bHRmaWx0ZXJPcHRpb25zLCBpbnB1dE9wdGlvbnMpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kT3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5jb250YWluZXJFbGVtZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBQcm92aWRlIGEgdmFsaWQgY29udGFpbmVyIEVsZW1lbnQgb2JqZWN0IGZvciBmaWx0ZXJzXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShGaWx0ZXJDb25maWdTdG9yZS5wcm90b3R5cGUsIFwiT3B0aW9uc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gRmlsdGVyQ29uZmlnU3RvcmU7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmlsdGVyQ29uZmlnU3RvcmUgPSBGaWx0ZXJDb25maWdTdG9yZTtcclxuXG5cbi8qKiovIH0pLFxuLyogMzYgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL2luZGV4LnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlciAqLyAzNykpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0ZhY2V0QWN0aW9uSGFuZGxlciAqLyAzOCkpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0ZhY2V0U2VhcmNoSGFuZGxlciAqLyAzOSkpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL0ZpbHRlckFjdGlvbkhhbmRsZXIgKi8gNDIpKTtcclxuX19leHBvcnQoX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9IaWRlRmFjZXRTZWN0aW9uSGFuZGxlciAqLyA0MykpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL1BpblVucGluRXZlbnRIYW5kbGVyICovIDQ0KSk7XHJcbl9fZXhwb3J0KF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vU2hvd01vcmVMZXNzSGFuZGxlciAqLyA0NSkpO1xyXG5fX2V4cG9ydChfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLi9ldmVudGhhbmRsZXJzL0ZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlciAqLyA0NikpO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzNyAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZhY2V0Q29uc3RhbnRzXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuLy4uL2NvbmZpZy9GYWNldENvbnN0YW50cyAqLyAxMSk7XHJcbnZhciBFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRXhwYW5kQ29sbGFwc2VNYW5hZ2VyICovIDEyKTtcclxudmFyIFNob3dIaWRlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL1Nob3dIaWRlICovIDIpO1xyXG52YXIgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlLCB0ZW1wbGF0ZVNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlID0gdGVtcGxhdGVTZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMub25Gb2N1c0luT2ZUcmVlSXRlbSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgb1QgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IG9ULmlzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpID8gb1QgOiBvVC5wYXJlbnRzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIHZhciBsYWJlbElkID0galF1ZXJ5KFwiI1wiICsgdGFyZ2V0LmF0dHIoXCJhcmlhLWxhYmVsbGVkQnlcIikpO1xyXG4gICAgICAgICAgICBpZiAobGFiZWxJZCAmJiBsYWJlbElkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbGFiZWxJZC5hZGRDbGFzcyhcImZvY3VzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmFkZENsYXNzKFwiZm9jdXNcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5vbkZvY3VzT3V0T2ZUcmVlSXRlbSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgb1QgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIHRhcmdldCA9IG9ULmlzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpID8gb1QgOiBvVC5wYXJlbnRzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgIHZhciBsYWJlbElkID0galF1ZXJ5KFwiI1wiICsgdGFyZ2V0LmF0dHIoXCJhcmlhLWxhYmVsbGVkQnlcIikpO1xyXG4gICAgICAgICAgICBpZiAobGFiZWxJZCAmJiBsYWJlbElkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbGFiZWxJZC5yZW1vdmVDbGFzcyhcImZvY3VzXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUNsYXNzKFwiZm9jdXNcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZUtleURvd24gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJIYW5kbGluZyBLZXkgRG93blwiKTtcclxuICAgICAgICAgICAgdmFyIGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoW0ZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuRW50ZXJLZXlDb2RlLCBGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLlNwYWNlS2V5Q29kZSxcclxuICAgICAgICAgICAgICAgIEZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuVXBLZXlDb2RlLCBGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLkRvd25LZXlDb2RlXS5pbmRleE9mKGNvZGUpIDw9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFtGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLkVudGVyS2V5Q29kZSwgRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5TcGFjZUtleUNvZGVdLmluZGV4T2YoY29kZSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGFuZGxlVmlzaWJpbGl0eU9mT25lKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoW0ZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuVXBLZXlDb2RlLCBGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLkRvd25LZXlDb2RlXS5pbmRleE9mKGNvZGUpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmhhbmRsZVVwQW5kRG93bk9mVHJlZUl0ZW0oZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZVVwQW5kRG93bk9mVHJlZUl0ZW0gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoW0ZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuVXBLZXlDb2RlLCBGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLkRvd25LZXlDb2RlXS5pbmRleE9mKGNvZGUpIDw9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJIYW5kbGluZyBVcCBhbmQgRG93blwiKTtcclxuICAgICAgICAgICAgdmFyIG9UID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBvVC5pcyhcIltyb2xlPXRyZWVpdGVtXVwiKSA/IG9UIDogb1QucGFyZW50cyhcIltyb2xlPXRyZWVpdGVtXVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5VcEtleUNvZGUgPT09IGNvZGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIEZpcnN0IExldmVsXHJcbiAgICAgICAgICAgICAgICB2YXIgcHJldlNpYmxpbmcgPSB0YXJnZXQucHJldkFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJldlNpYmxpbmcubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldlNpYmxpbmcuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJldkRlZXBTaWJsaW5nID0gdGFyZ2V0LnBhcmVudCgpLnByZXZBbGwoXCI6dmlzaWJsZVwiKS5maXJzdCgpLmZpbmQoXCJbcm9sZT10cmVlaXRlbV1cIik7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJldkRlZXBTaWJsaW5nLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXZEZWVwU2libGluZy5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRhcmdldC5wYXJlbnRzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBwYXJlbnRHcm91cCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBncm91cCA9IGpRdWVyeShwYXJlbnRHcm91cCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudENoaWxkID0gZ3JvdXAucHJldkFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudENoaWxkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRDaGlsZC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKEZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuRG93bktleUNvZGUgPT09IGNvZGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmaXJzdENoaWxkID0gdGFyZ2V0LmZpbmQoXCJbcm9sZT10cmVlaXRlbV06dmlzaWJsZVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0Q2hpbGQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlyc3RDaGlsZC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZpcnN0IExldmVsXHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFNpYmxpbmcgPSB0YXJnZXQubmV4dEFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV4dFNpYmxpbmcubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dFNpYmxpbmcuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBTZWNvbmQgTGV2ZWxcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0RGVlcFNpYmxpbmcgPSB0YXJnZXQucGFyZW50KCkubmV4dEFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCkuZmluZChcIltyb2xlPXRyZWVpdGVtXVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChuZXh0RGVlcFNpYmxpbmcubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dERlZXBTaWJsaW5nLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudHMoXCJbcm9sZT10cmVlaXRlbV1cIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIHBhcmVudEdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGdyb3VwID0galF1ZXJ5KHBhcmVudEdyb3VwKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50Q2hpbGQgPSBncm91cC5uZXh0QWxsKFwiOnZpc2libGVcIikuZmlyc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50Q2hpbGQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudENoaWxkLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVWaXNpYmlsaXR5T2ZBbGwgPSBmdW5jdGlvbiAoZXZlbnQsIGhpZGVTaG93KSB7XHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKGV2ZW50LnR5cGUgIT09IFwiY2xpY2tcIiAmJiAoZXZlbnQudHlwZSA9PT0gXCJrZXl1cFwiICYmIGNvZGUgIT09IEZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuRW50ZXJLZXlDb2RlXHJcbiAgICAgICAgICAgICAgICAmJiBjb2RlICE9PSBGYWNldENvbnN0YW50c18xLkZhY2V0Q29uc3RhbnRzLlNwYWNlS2V5Q29kZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBoaWRlU2hvdyA9PT0gU2hvd0hpZGVfMS5TaG93SGlkZS5TaG93ID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50LmZpbmQoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBqUXVlcnkoZWxlbWVudCkucGFyZW50cyhcIi5mYWNldC1pdGVtXCIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBwYXJlbnQuYXR0cihcImRhdGEtYXR0ci1uYW1lXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmFkZENsYXNzKFwiY29sbGFwc2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXzEuRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoalF1ZXJ5KGVsZW1lbnQpLCBoaWRlU2hvdywgbmFtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuZmFjZXRDb25maWc7XHJcbiAgICAgICAgICAgIHZhciBwdWJsaXNoID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgZGF0YV8xID0gZGF0YTsgX2kgPCBkYXRhXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZmFjZXQgPSBkYXRhXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgZmFjZXQuY29sbGFwc2VkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBwdWJsaXNoLnB1c2goeyBrZXk6IGZhY2V0LmlkLCBjb2xsYXBzZWQ6IGZhY2V0LmNvbGxhcHNlZCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uQ29sbGFwc2VUb2dnbGUocHVibGlzaCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5oYW5kbGVWaXNpYmlsaXR5T2ZPbmUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIG9UID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBvVC5pcyhcIltyb2xlPXRyZWVpdGVtXVwiKSA/IG9UIDogb1QucGFyZW50cyhcIltyb2xlPXRyZWVpdGVtXVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICB2YXIgaXNDb2xsYXBzaWJsZU5vZGUgPSB0YXJnZXQuaGFzQ2xhc3MoXCJjb2xsYXBzaWJsZVwiKSAmJiBvVC5wYXJlbnRzKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKCFpc0NvbGxhcHNpYmxlTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBuYW1lID0gdGFyZ2V0LmF0dHIoXCJkYXRhLWF0dHItbmFtZVwiKTtcclxuICAgICAgICAgICAgdmFyIGlkID0gdGFyZ2V0LmF0dHIoXCJkYXRhLWF0dHItaWRcIik7XHJcbiAgICAgICAgICAgIHZhciBpc0NvbGxhcHNlZCA9IHRhcmdldC5oYXNDbGFzcyhcImNvbGxhcHNlZFwiKTtcclxuICAgICAgICAgICAgaWYgKCFpc0NvbGxhcHNlZCkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmFkZENsYXNzKFwiY29sbGFwc2VkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUNsYXNzKFwiY29sbGFwc2VkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZztcclxuICAgICAgICAgICAgdmFyIHB1Ymxpc2ggPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhXzIgPSBkYXRhOyBfaSA8IGRhdGFfMi5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBmYWNldCA9IGRhdGFfMltfaV07XHJcbiAgICAgICAgICAgICAgICBpZiAoZmFjZXQuaWQgPT09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXQuY29sbGFwc2VkID0gIWlzQ29sbGFwc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgIHB1Ymxpc2gucHVzaCh7IGtleTogZmFjZXQuaWQsIGNvbGxhcHNlZDogZmFjZXQuY29sbGFwc2VkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25Db2xsYXBzZVRvZ2dsZShwdWJsaXNoKTtcclxuICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXzEuRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIodGFyZ2V0LCBTaG93SGlkZV8xLlNob3dIaWRlLlRvZ2dsZSwgbmFtZSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmV4cGFuZC1hbGxcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVZpc2liaWxpdHlPZkFsbChldmVudCwgU2hvd0hpZGVfMS5TaG93SGlkZS5TaG93KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5leHBhbmQtYWxsXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVWaXNpYmlsaXR5T2ZBbGwoZXZlbnQsIFNob3dIaWRlXzEuU2hvd0hpZGUuU2hvdyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuY29sbGFwc2UtYWxsXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVWaXNpYmlsaXR5T2ZBbGwoZXZlbnQsIFNob3dIaWRlXzEuU2hvd0hpZGUuSGlkZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuY29sbGFwc2UtYWxsXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVWaXNpYmlsaXR5T2ZBbGwoZXZlbnQsIFNob3dIaWRlXzEuU2hvd0hpZGUuSGlkZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCJbcm9sZT10cmVlaXRlbV1cIiwgdGhpcy5oYW5kbGVWaXNpYmlsaXR5T2ZPbmUpO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleWRvd25cIiwgXCJbcm9sZT10cmVlaXRlbV1cIiwgdGhpcy5oYW5kbGVLZXlEb3duKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJmb2N1c2luXCIsIFwiW3JvbGU9dHJlZWl0ZW1dXCIsIHRoaXMub25Gb2N1c0luT2ZUcmVlSXRlbSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiZm9jdXNvdXRcIiwgXCJbcm9sZT10cmVlaXRlbV1cIiwgdGhpcy5vbkZvY3VzT3V0T2ZUcmVlSXRlbSk7XHJcbiAgICB9O1xyXG4gICAgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH07XHJcbiAgICBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBFeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyID0gRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzOCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0QWN0aW9uSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZpbHRlckFjdGlvblR5cGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlICovIDEpO1xyXG52YXIgRmFjZXRBY3Rpb25IYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmFjZXRBY3Rpb25IYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICB9XHJcbiAgICBGYWNldEFjdGlvbkhhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImNoYW5nZVwiLCBcIi5mYWNldC1ib2R5IC5mYWNldC1pdGVtLWRlc2NyaXB0aW9uIC5mYWNldC12YWx1ZS1jaGVja2JveFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyIHZhbFN0ciA9IGVsZW1lbnQudmFsKCkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsU3RyLnNwbGl0KFwiOjo6XCIpO1xyXG4gICAgICAgICAgICB2YXIgY2hlY2tlZCA9IGVsZW1lbnQuaXMoXCI6Y2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgdmFyIGFjdGlvbiA9IGNoZWNrZWQgPyBGaWx0ZXJBY3Rpb25UeXBlXzEuRmlsdGVyQWN0aW9uVHlwZS5BZGQgOiBGaWx0ZXJBY3Rpb25UeXBlXzEuRmlsdGVyQWN0aW9uVHlwZS5NaW51cztcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkZpbHRlckNoYW5nZSh2YWx1ZVswXSwgdmFsdWVbMV0sIGFjdGlvbiwgdmFsdWVbMl0sIGZhbHNlKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmFjZXRBY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH07XHJcbiAgICBGYWNldEFjdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGYWNldEFjdGlvbkhhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjZXRBY3Rpb25IYW5kbGVyID0gRmFjZXRBY3Rpb25IYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiAzOSAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0U2VhcmNoSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIHRocm90dGxlX2RlYm91bmNlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISB0aHJvdHRsZS1kZWJvdW5jZSAqLyA0MCk7XHJcbnZhciBFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vRXhwYW5kQ29sbGFwc2VNYW5hZ2VyICovIDEyKTtcclxudmFyIFNob3dIaWRlXzEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL1Nob3dIaWRlICovIDIpO1xyXG52YXIgRmFjZXRTZWFyY2hIYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmFjZXRTZWFyY2hIYW5kbGVyKGVsZW1lbnQsIGNvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgICAgICB0aGlzLmhhbmRsZVNlYXJjaCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLmFkZENsYXNzKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgZWxlbWVudC5uZXh0KCkuc2hvdygpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5mYWNldC1saXN0IC5mYWNldC1pdGVtXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGksIGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmFjZXRJdGVtID0galF1ZXJ5KGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuYW1lID0gZmFjZXRJdGVtLmF0dHIoXCJkYXRhLWF0dHItbmFtZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmFjZXROYW1lTWF0Y2ggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXRWYWx1ZUJsYW5rID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdmFsdWUgaXMgZW1wdHlcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQgfHwgdmFsID09PSBudWxsIHx8IHZhbC50cmltKCkgPT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXRWYWx1ZUJsYW5rID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB2YWx1ZSB3aXRoIGZhY2V0IG5hbWVcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWlucHV0VmFsdWVCbGFuayAmJiBmYWNldEl0ZW0uYXR0cihcImRhdGEtYXR0ci1uYW1lXCIpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWwpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldE5hbWVNYXRjaCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnB1dFZhbHVlQmxhbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LW1vcmUtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKGluZGV4LCBzaHdNb3JlRWxlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpRdWVyeShzaHdNb3JlRWxlbSkuaGFzQ2xhc3MoXCJndWktaGlkZGVuXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHNod01vcmVFbGVtKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2h3TW9yZUVsZW0pLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIuc2hvdy1sZXNzLWxpbmtcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChpbmRleCwgc2hvd0xlc3NMaW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHNob3dMZXNzTGluaykuaGFzQ2xhc3MoXCJndWktaGlkZGVuXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHNob3dMZXNzTGluaykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgalF1ZXJ5KHNob3dMZXNzTGluaykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIuc2hvdy1tb3JlLWxpbmtcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIuc2hvdy1sZXNzLWxpbmtcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENvbXBhcmUgdmFsdWVzIGFnYWluc3QgY2hpbGQgdmFsdWVzXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhY2V0Q2hpbGRNYXRjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0SXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcImxhYmVsXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChqLCBsYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWxFbGVtID0galF1ZXJ5KGxhYmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0VmFsdWVCbGFuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhcmVudChcIi5leHRyYS1maWx0ZXJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnBhcmVudChcIi5leHRyYS1maWx0ZXJcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmYWNldE5hbWVNYXRjaCB8fCBpbnB1dFZhbHVlQmxhbmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxhYmVsVmFsdWUgPSBsYWJlbEVsZW0uYXR0cihcImRhdGEtYXR0ci12YWx1ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsVmFsdWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW0uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRDaGlsZE1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IGhpZGUgRmFjZXQgSXRlbSBpdHNlbGZcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZGVyRWxtZW50ID0gZmFjZXRJdGVtLmZpbmQoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbGxhcHNlZCA9IGZhY2V0SXRlbS5oYXNDbGFzcyhcImNvbGxhcHNlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZXROYW1lTWF0Y2ggfHwgZmFjZXRDaGlsZE1hdGNoIHx8IGlucHV0VmFsdWVCbGFuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldEl0ZW0uZmFkZUluKF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldEl0ZW0uZmFkZU91dChfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBFeHBhbmQgQ29sbGFwc2UgRmFjZXRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sbGFwc2VkIHx8IGZhY2V0TmFtZU1hdGNoIHx8IGZhY2V0Q2hpbGRNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMS5FeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihoZWFkZXJFbG1lbnQsIFNob3dIaWRlXzEuU2hvd0hpZGUuU2hvdywgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBFeHBhbmRDb2xsYXBzZU1hbmFnZXJfMS5FeHBhbmRDb2xsYXBzZU1hbmFnZXIuQ29udHJvbFZpc2liaWxpdHlPZkZpbHRlcihoZWFkZXJFbG1lbnQsIFNob3dIaWRlXzEuU2hvd0hpZGUuSGlkZSwgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLnJlbW92ZUNsYXNzKFwibG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQubmV4dCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBGYWNldFNlYXJjaEhhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImtleXVwXCIsIFwiLmZpbHRlci1zZWFyY2gtaW5wdXRcIiwgdGhyb3R0bGVfZGVib3VuY2VfMS5kZWJvdW5jZSgyNTAsIHRoaXMuaGFuZGxlU2VhcmNoKSk7XHJcbiAgICB9O1xyXG4gICAgRmFjZXRTZWFyY2hIYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH07XHJcbiAgICBGYWNldFNlYXJjaEhhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIHJldHVybiBGYWNldFNlYXJjaEhhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjZXRTZWFyY2hIYW5kbGVyID0gRmFjZXRTZWFyY2hIYW5kbGVyO1xyXG5cblxuLyoqKi8gfSksXG4vKiA0MCAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL25vZGVfbW9kdWxlcy90aHJvdHRsZS1kZWJvdW5jZS9pbmRleC5qcyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbnZhciB0aHJvdHRsZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdGhyb3R0bGUgKi8gMTMpO1xudmFyIGRlYm91bmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9kZWJvdW5jZSAqLyA0MSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXHR0aHJvdHRsZTogdGhyb3R0bGUsXG5cdGRlYm91bmNlOiBkZWJvdW5jZVxufTtcblxuXG4vKioqLyB9KSxcbi8qIDQxICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAhKioqIC4vbm9kZV9tb2R1bGVzL3Rocm90dGxlLWRlYm91bmNlL2RlYm91bmNlLmpzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWZpbmVkICovXG5cbnZhciB0aHJvdHRsZSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vdGhyb3R0bGUgKi8gMTMpO1xuXG4vKipcbiAqIERlYm91bmNlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBEZWJvdW5jaW5nLCB1bmxpa2UgdGhyb3R0bGluZyxcbiAqIGd1YXJhbnRlZXMgdGhhdCBhIGZ1bmN0aW9uIGlzIG9ubHkgZXhlY3V0ZWQgYSBzaW5nbGUgdGltZSwgZWl0aGVyIGF0IHRoZVxuICogdmVyeSBiZWdpbm5pbmcgb2YgYSBzZXJpZXMgb2YgY2FsbHMsIG9yIGF0IHRoZSB2ZXJ5IGVuZC5cbiAqXG4gKiBAcGFyYW0gIHtOdW1iZXJ9ICAgZGVsYXkgICAgICAgICBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudCBjYWxsYmFja3MsIHZhbHVlcyBhcm91bmQgMTAwIG9yIDI1MCAob3IgZXZlbiBoaWdoZXIpIGFyZSBtb3N0IHVzZWZ1bC5cbiAqIEBwYXJhbSAge0Jvb2xlYW59ICBhdEJlZ2luICAgICAgIE9wdGlvbmFsLCBkZWZhdWx0cyB0byBmYWxzZS4gSWYgYXRCZWdpbiBpcyBmYWxzZSBvciB1bnNwZWNpZmllZCwgY2FsbGJhY2sgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIGBkZWxheWAgbWlsbGlzZWNvbmRzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlciB0aGUgbGFzdCBkZWJvdW5jZWQtZnVuY3Rpb24gY2FsbC4gSWYgYXRCZWdpbiBpcyB0cnVlLCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIG9ubHkgYXQgdGhlIGZpcnN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEFmdGVyIHRoZSB0aHJvdHRsZWQtZnVuY3Rpb24gaGFzIG5vdCBiZWVuIGNhbGxlZCBmb3IgYGRlbGF5YCBtaWxsaXNlY29uZHMsIHRoZSBpbnRlcm5hbCBjb3VudGVyIGlzIHJlc2V0KS5cbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayAgICAgIEEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZGVsYXkgbWlsbGlzZWNvbmRzLiBUaGUgYHRoaXNgIGNvbnRleHQgYW5kIGFsbCBhcmd1bWVudHMgYXJlIHBhc3NlZCB0aHJvdWdoLCBhcy1pcyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGBjYWxsYmFja2Agd2hlbiB0aGUgZGVib3VuY2VkLWZ1bmN0aW9uIGlzIGV4ZWN1dGVkLlxuICpcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldywgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICggZGVsYXksIGF0QmVnaW4sIGNhbGxiYWNrICkge1xuXHRyZXR1cm4gY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRocm90dGxlKGRlbGF5LCBhdEJlZ2luLCBmYWxzZSkgOiB0aHJvdHRsZShkZWxheSwgY2FsbGJhY2ssIGF0QmVnaW4gIT09IGZhbHNlKTtcbn07XG5cblxuLyoqKi8gfSksXG4vKiA0MiAqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9GaWx0ZXJBY3Rpb25IYW5kbGVyLnRzICoqKiFcbiAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISBkeW5hbWljIGV4cG9ydHMgcHJvdmlkZWQgKi9cbi8qISBhbGwgZXhwb3J0cyB1c2VkICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIEZpbHRlckFjdGlvblR5cGVfMSA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4uL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlICovIDEpO1xyXG52YXIgRmlsdGVyQWN0aW9uSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpbHRlckFjdGlvbkhhbmRsZXIoZmlsdGVyRWxlbWVudCwgY29uZmlnU3RvcmUpIHtcclxuICAgICAgICB0aGlzLmZpbHRlckVsZW1lbnQgPSBmaWx0ZXJFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgIH1cclxuICAgIEZpbHRlckFjdGlvbkhhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudC5vbihcImNsaWNrXCIsIFwiLmZhY2V0LXN1YmhlYWRlciAuZmFjZXQtbGFiZWxzIC5sYWJlbFwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50LmlzKFwiLmxhYmVsXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnRzKFwiLmxhYmVsXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB2YWxTdHIgPSBlbGVtZW50LmF0dHIoXCJkYXRhLWZpbHRlci1lbnRyeVwiKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWxTdHIuc3BsaXQoXCI6OjpcIik7XHJcbiAgICAgICAgICAgIHZhciBpc1JhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDQpIHtcclxuICAgICAgICAgICAgICAgIGlzUmFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25GaWx0ZXJDaGFuZ2UodmFsdWVbMF0sIHZhbHVlWzFdLCBGaWx0ZXJBY3Rpb25UeXBlXzEuRmlsdGVyQWN0aW9uVHlwZS5NaW51cywgdmFsdWVbMl0sIGlzUmFuZ2UpO1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmZpbHRlckVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5mYWNldC1zdWJoZWFkZXIgLnJlbW92ZS1hbGxcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25BbGxGaWx0ZXJSZW1vdmUoKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgRmlsdGVyQWN0aW9uSGFuZGxlci5wcm90b3R5cGUub25SZXNpemUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9O1xyXG4gICAgRmlsdGVyQWN0aW9uSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZpbHRlckFjdGlvbkhhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmlsdGVyQWN0aW9uSGFuZGxlciA9IEZpbHRlckFjdGlvbkhhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQzICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9IaWRlRmFjZXRTZWN0aW9uSGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlcihlbGVtZW50LCBjb25maWdTdG9yZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy5SZWdpc3RlckRvbUhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5oaWRlLWZhY2V0XCIsIF90aGlzLmhpZGVGYWNldCk7XHJcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5zaG93LWZhY2V0XCIsIF90aGlzLnNob3dGYWNldCk7XHJcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5oaWRlLWZhY2V0XCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGlkZUZhY2V0KGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5zaG93LWZhY2V0XCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2hvd0ZhY2V0KGV2ZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhpZGVGYWNldCA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAkKFwiLmZhY2V0LWJvZHlcIikuaGlkZSgpO1xyXG4gICAgICAgICAgICAkKFwiLmZhY2V0LWNvbGxhcHNlZC1ib2R5XCIpLmZhZGVJbihfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgICAgICBfdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmNvbGxhcHNlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5zaG93RmFjZXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgJChcIi5mYWNldC1jb2xsYXBzZWQtYm9keVwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoXCIuZmFjZXQtYm9keVwiKS5mYWRlSW4oX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgX3RoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2xsYXBzZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH07XHJcbiAgICBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlci5wcm90b3R5cGUub25Eb2N1bWVudENsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkhpZGVGYWNldFNlY3Rpb25IYW5kbGVyID0gSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQ0ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9QaW5VbnBpbkV2ZW50SGFuZGxlci50cyAqKiohXG4gIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgUGluVW5waW5FdmVudEhhbmRsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQaW5VbnBpbkV2ZW50SGFuZGxlcihlbGVtZW50LCBjb25maWdTdG9yZSwgdGVtcGxhdGVTZXJ2aWNlKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlID0gY29uZmlnU3RvcmU7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVNlcnZpY2UgPSB0ZW1wbGF0ZVNlcnZpY2U7XHJcbiAgICB9XHJcbiAgICBQaW5VbnBpbkV2ZW50SGFuZGxlci5wcm90b3R5cGUuUmVnaXN0ZXJEb21IYW5kbGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIucGluLWljb25cIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi51bnBpbi1pY29uXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5oYW5kbGVQaW5VbnBpbihldmVudCwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLnBpbi1pY29uXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi51bnBpbi1pY29uXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgUGluVW5waW5FdmVudEhhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIFBpblVucGluRXZlbnRIYW5kbGVyLnByb3RvdHlwZS5vbkRvY3VtZW50Q2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH07XHJcbiAgICBQaW5VbnBpbkV2ZW50SGFuZGxlci5wcm90b3R5cGUuaGFuZGxlUGluVW5waW4gPSBmdW5jdGlvbiAoZXZlbnQsIHBpbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICB2YXIgaWQgPSBlbGVtZW50LmF0dHIoXCJkYXRhLWF0dHItaWRcIik7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuZmFjZXRDb25maWc7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBkYXRhXzEgPSBkYXRhOyBfaSA8IGRhdGFfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGZhY2V0ID0gZGF0YV8xW19pXTtcclxuICAgICAgICAgICAgaWYgKGZhY2V0LmlkID09PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgZmFjZXQucGlubmVkID0gcGluO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmVsZW1lbnQuaHRtbChfdGhpcy50ZW1wbGF0ZVNlcnZpY2UuYmluZChfdGhpcy50ZW1wbGF0ZVNlcnZpY2UuZ2V0RGF0YSgpKSk7XHJcbiAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uUGluVW5waW4oaWQsIHBpbik7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFBpblVucGluRXZlbnRIYW5kbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLlBpblVucGluRXZlbnRIYW5kbGVyID0gUGluVW5waW5FdmVudEhhbmRsZXI7XHJcblxuXG4vKioqLyB9KSxcbi8qIDQ1ICovXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgISoqKiAuL3NyYy90cy9ldmVudGhhbmRsZXJzL1Nob3dNb3JlTGVzc0hhbmRsZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohIGR5bmFtaWMgZXhwb3J0cyBwcm92aWRlZCAqL1xuLyohIGFsbCBleHBvcnRzIHVzZWQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2hvd01vcmVMZXNzSGFuZGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNob3dNb3JlTGVzc0hhbmRsZXIoZWxlbWVudCwgY29uZmlnU3RvcmUpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSBjb25maWdTdG9yZTtcclxuICAgIH1cclxuICAgIFNob3dNb3JlTGVzc0hhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgXCIuc2hvdy1tb3JlLWxpbmtcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNob3dNb3JlTGVzc0ZpbHRlcnMoZXZlbnQsIHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgXCIuc2hvdy1sZXNzLWxpbmtcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNob3dNb3JlTGVzc0ZpbHRlcnMoZXZlbnQsIGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImtleXVwXCIsIFwiLnNob3ctbW9yZS1saW5rXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLnNob3dNb3JlTGVzc0ZpbHRlcnMoZXZlbnQsIHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgLm9uKFwia2V5dXBcIiwgXCIuc2hvdy1sZXNzLWxpbmtcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3RoaXMuc2hvd01vcmVMZXNzRmlsdGVycyhldmVudCwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFNob3dNb3JlTGVzc0hhbmRsZXIucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIFNob3dNb3JlTGVzc0hhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfTtcclxuICAgIFNob3dNb3JlTGVzc0hhbmRsZXIucHJvdG90eXBlLnNob3dNb3JlTGVzc0ZpbHRlcnMgPSBmdW5jdGlvbiAoZXZlbnQsIHNob3dNb3JlKSB7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICBpZiAoc2hvd01vcmUpIHtcclxuICAgICAgICAgICAgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgLnBhcmVudHMoXCIuZmFjZXQtaXRlbS1kZXNjcmlwdGlvblwiKVxyXG4gICAgICAgICAgICAgICAgLmZpbmQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAuZmFkZUluKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkubmV4dCgpLnNob3coKS5maW5kKFwiYVwiKS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC5wYXJlbnRzKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIilcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmV4dHJhLWZpbHRlclwiKVxyXG4gICAgICAgICAgICAgICAgLmZhZGVPdXQodGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQucGFyZW50KCkucHJldigpLnNob3coKS5maW5kKFwiYVwiKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2hvd01vcmVMZXNzSGFuZGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5TaG93TW9yZUxlc3NIYW5kbGVyID0gU2hvd01vcmVMZXNzSGFuZGxlcjtcclxuXG5cbi8qKiovIH0pLFxuLyogNDYgKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICEqKiogLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9GYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIudHMgKioqIVxuICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKiEgZHluYW1pYyBleHBvcnRzIHByb3ZpZGVkICovXG4vKiEgYWxsIGV4cG9ydHMgdXNlZCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBGYWNldENvbnN0YW50c18xID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi8uLi9jb25maWcvRmFjZXRDb25zdGFudHMgKi8gMTEpO1xyXG52YXIgRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyKGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5kZVJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50Lm9mZihcImtleWRvd25cIiwgXCIuYXJyb3drZXlzLWF3YXJlXCIsIF90aGlzLmhhbmRsZUFycm93S2V5cyk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmhhbmRsZUFycm93S2V5cyA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgY29kZSA9IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoY29kZSAhPT0gRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5VcEtleUNvZGUgJiYgY29kZSAhPT0gRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5Eb3duS2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5pcyhcIi5hcnJvd2tleXMtYXdhcmVcIikpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBmb2N1c2FibGU7XHJcbiAgICAgICAgICAgIHZhciBkaXYgPSBlbGVtZW50LnBhcmVudCgpO1xyXG4gICAgICAgICAgICBpZiAoY29kZSA9PT0gRmFjZXRDb25zdGFudHNfMS5GYWNldENvbnN0YW50cy5VcEtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGZvY3VzYWJsZSA9IGRpdi5wcmV2KCkuZmluZChcIi5hcnJvd2tleXMtYXdhcmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNvZGUgPT09IEZhY2V0Q29uc3RhbnRzXzEuRmFjZXRDb25zdGFudHMuRG93bktleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgIGZvY3VzYWJsZSA9IGRpdi5uZXh0KCkuZmluZChcIi5hcnJvd2tleXMtYXdhcmVcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZvY3VzYWJsZSAmJiBmb2N1c2FibGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC52aWV3LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIGZvY3VzYWJsZS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNob3dNb3JlID0gZGl2Lm5leHQoKS5maW5kKFwic2hvdy1tb3JlLWxpbmtcIikgfHwgZGl2Lm5leHQoKS5maW5kKFwic2hvdy1sZXNzLWxpbmtcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2hvd01vcmUgJiYgc2hvd01vcmUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd01vcmUuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIucHJvdG90eXBlLlJlZ2lzdGVyRG9tSGFuZGxlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXlkb3duXCIsIFwiLmFycm93a2V5cy1hd2FyZVwiLCB0aGlzLmhhbmRsZUFycm93S2V5cyk7XHJcbiAgICB9O1xyXG4gICAgRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyLnByb3RvdHlwZS5vblJlc2l6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH07XHJcbiAgICBGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIucHJvdG90eXBlLm9uRG9jdW1lbnRDbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyID0gRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyO1xyXG5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xufSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGZhY2V0b28ubWluLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMTQpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDk4OGM2MTIzMzhhYTY1M2NmMDNjIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzBfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJIYW5kbGViYXJzXCIsXCJhbWRcIjpcImhhbmRsZWJhcnMucnVudGltZVwiLFwiY29tbW9uanMyXCI6XCJoYW5kbGViYXJzL3J1bnRpbWVcIixcImNvbW1vbmpzXCI6XCJoYW5kbGViYXJzL3J1bnRpbWVcIn1cbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJleHBvcnQgZW51bSBGaWx0ZXJBY3Rpb25UeXBlIHtcbiAgICBBZGQgPSBcIkFkZFwiLFxuICAgIE1pbnVzID0gXCJNaW51c1wiLFxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZS50cyIsImV4cG9ydCBlbnVtIFNob3dIaWRlIHtcclxuICAgIFNob3csXHJcbiAgICBIaWRlLFxyXG4gICAgVG9nZ2xlLFxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9TaG93SGlkZS50cyIsInZhciBIYW5kbGViYXJzID0gcmVxdWlyZShcImhhbmRsZWJhcnNcIik7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiZ3VpIG9mLWhpZGRlbiBtaW4tdy01MCB3LWF1dG8gZmx1aWQtaCBmbGV4IGNvbHVtbiBjb250YWluZXJcXFwiIGlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItZmFjZXQtY29udGFpbmVyXFxcIj5cXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImd1aSBoLWF1dG8gZ3VpLXN1YmhlYWRpbmctMSBtLTAgYm9yZGVyLWJvdHRvbSBsaWdodCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTEwXFxcIj5cXG4gICAgICAgIDxidXR0b24gY2xhc3M9XFxcImd1aSBjdXJzb3ItcG9pbnRlciBleHBhbmQtYWxsXFxcIiBcXG4gICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cXFwiRXhwYW5kIEFsbCBGaWx0ZXJzXFxcIj5cXG4gICAgICAgICAgICA8aSAgY2xhc3M9XFxcImd1aS1pY29uIHNwZWNpYWwgcm90YXRlLWxlZnQgZ3VpLWljb24tY2hldmRvdWJsZVxcXCI+PC9pPlxcbiAgICAgICAgICAgIEV4cGFuZCBBbGxcXG4gICAgICAgIDwvYnV0dG9uPlxcbiAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3VpIGN1cnNvci1wb2ludGVyIGNvbGxhcHNlLWFsbFxcXCIgXFxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIkNvbGxhcHNlIEFsbCBGaWx0ZXJzXFxcIj5cXG4gICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gc3BlY2lhbCByb3RhdGUtcmlnaHQgZ3VpLWljb24tY2hldmRvdWJsZVxcXCI+PC9pPlxcbiAgICAgICAgICAgIENvbGxhcHNlIEFsbFxcbiAgICAgICAgPC9idXR0b24+XFxuICAgIDwvc2VjdGlvbj5cXG4gICAgPHNlY3Rpb24gY2xhc3M9XFxcImd1aSBib3JkZXItYm90dG9tIGxpZ2h0IHAtci0xMCBwLXQtNSBwLWItNSBwLWwtMTBcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIGlucHV0IGZsdWlkLXcgaC0zMFxcXCI+XFxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJndWkgaW5wdXQgZmx1aWQtdyBndWktc3ViaGVhZGluZy0yIGZpbHRlci1zZWFyY2gtaW5wdXRcXFwiXFxuICAgICAgICAgICAgICAgICAgIHJvbGU9XFxcInNlYXJjaFxcXCJcXG4gICAgICAgICAgICAgICAgICAgYXJpYS1jb250cm9scz1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLWZpbHRlci10cmVlIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1waW5uZWQtZmlsdGVyLXRyZWUgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLXVucGlubmVkLWZpbHRlci10cmVlXFxcIlxcbiAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj1cXFwiU2VhcmNoIEZpbHRlcnMuIFNob3J0Y3V0IEFsdCArIEYgXFxcIiAvPlxcbiAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gZ3VpLWljb24tc2VhcmNoIGd1aS1oaWRkZW5cXFwiPjwvaT5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L3NlY3Rpb24+XFxuICAgIDx1bCBjbGFzcz1cXFwiZ3VpIGZsdWlkLWggZmFjZXQtbGlzdCBvZi1hdXRvIG9meC1oaWRkZW4gbS0wIHAtMFxcXCIgXFxuICAgICAgICByb2xlPVxcXCJ0cmVlXFxcIlxcbiAgICAgICAgaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1maWx0ZXItdHJlZVxcXCJcXG4gICAgICAgIGFyaWEtcmVsZXZhbnQ9XFxcImFsbFxcXCJcXG4gICAgICAgIGFyaWEtbGl2ZT1cXFwiYXNzZXJ0aXZlXFxcIj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBjb250YWluZXIuaW52b2tlUGFydGlhbChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcZmFjZXQtcGlubmVkLmhic1wiKSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtcGlubmVkXCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICBcIixcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGZhY2V0LXVucGlubmVkLmhic1wiKSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtdW5waW5uZWRcIixcImRhdGFcIjpkYXRhLFwiaW5kZW50XCI6XCIgICAgICAgIFwiLFwiaGVscGVyc1wiOmhlbHBlcnMsXCJwYXJ0aWFsc1wiOnBhcnRpYWxzLFwiZGVjb3JhdG9yc1wiOmNvbnRhaW5lci5kZWNvcmF0b3JzfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgPC91bD5cXG48L2Rpdj5cIjtcbn0sXCJ1c2VQYXJ0aWFsXCI6dHJ1ZSxcInVzZURhdGFcIjp0cnVlfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGJzL2ZhY2V0LWJvZHkuaGJzXG4vLyBtb2R1bGUgaWQgPSAzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiY29uc3QgY29sbGFwc2VkID0gKHZhbHVlOiBib29sZWFuKTogc3RyaW5nID0+IHtcclxuICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBcIiBjb2xsYXBzZWQgXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbGxhcHNlZDtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy9oYnMvaGVscGVycy9Db2xsYXBzZWQudHMiLCJjb25zdCBCb29sZWFuVmFsdWUgPSAoYm9vbDogYm9vbGVhbiwgbmVnYXRlOiBib29sZWFuKTogc3RyaW5nID0+IHtcclxuICAgIGlmICggbmVnYXRlICkge1xyXG4gICAgICAgIGJvb2wgPSAhYm9vbDtcclxuICAgIH1cclxuICAgIHJldHVybiBib29sID8gXCJ0cnVlXCIgOiBcImZhbHNlXCI7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCb29sZWFuVmFsdWU7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvQm9vbGVhbi50cyIsImltcG9ydCB7IElGYWNldFZhbHVlIH0gZnJvbSBcIi4uLy4uLy4uL2luZGV4XCI7XHJcblxyXG5jb25zdCBzZWxlY3RlZEZpbHRlcnNDb3VudCA9IChmYWNldFZhbHVlczogSUZhY2V0VmFsdWVbXSk6IHN0cmluZyA9PiB7XHJcbiAgICBsZXQgaW5kZXggPSAwO1xyXG4gICAgaWYgKGZhY2V0VmFsdWVzICE9PSB1bmRlZmluZWRcclxuICAgICAgICAmJiBmYWNldFZhbHVlcyAhPT0gbnVsbFxyXG4gICAgICAgICYmIGZhY2V0VmFsdWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBmYWNldFZhbHVlIG9mIGZhY2V0VmFsdWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmFjZXRWYWx1ZS5zZWxlY3RlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBpbmRleCA9PT0gMCA/IFwiXCIgOiBcIjxzcGFuIGNsYXNzPVxcXCJndWktYm9keS0yXFxcIj4oXCIgKyBpbmRleCArIFwiKTwvc3Bhbj5cIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHNlbGVjdGVkRmlsdGVyc0NvdW50O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL1NlbGVjdGVkRmlsdGVyc0NvdW50LnRzIiwidmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGFuZGxlYmFyc1wiKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBhbGlhczE9ZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uLCBhbGlhczM9Y29udGFpbmVyLmxhbWJkYTtcblxuICByZXR1cm4gXCIgICAgPGxpIGNsYXNzPVxcXCJndWkgaXRlbSBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxDaGVja0xlbmd0aC50c1wiKSkuY2FsbChhbGlhczEsKGRhdGEgJiYgZGF0YS5pbmRleCksNSx7XCJuYW1lXCI6XCJDaGVja0xlbmd0aFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgYXJpYS1sYWJlbD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gICAgICAgIDxsYWJlbCAgZGF0YS1hdHRyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICAgICAgICAgICAgICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS5pZCA6IGRlcHRoc1sxXSksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICAgICAgZGF0YS1hdHRyLXR5cGU9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aHNbMV0gIT0gbnVsbCA/IGRlcHRoc1sxXS50eXBlIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcclxcbiAgICAgICAgICAgICAgICB0YWJpbmRleD1cXFwiMFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgcm9sZT1cXFwidHJlZWl0ZW1cXFwiXFxyXFxuICAgICAgICAgICAgICAgIHRpdGxlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIoXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmNvdW50IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiKVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgZm9yPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiLVwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkYXRhICYmIGRhdGEuaW5kZXgpLCBkZXB0aDApKVxuICAgICsgXCItY2hlY2tib3hcXFwiXFxyXFxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIkZpbHRlciBcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubGFiZWwgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgaW4gXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLm5hbWUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCIgaGFzIFwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb3VudCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIiByZWNvcmRzLiBQcmVzcyBzcGFjZWJhciB0byBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxBcHBseVJlbW92ZS50c1wiKSkuY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnNlbGVjdGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJBcHBseVJlbW92ZVwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiIHRoaXMgZmlsdGVyLlxcXCJcXHJcXG4gICAgICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBjdXJzb3ItcG9pbnRlciBndWktc3ViaGVhZGluZy0xIG5vLXdyYXAgdGV4dC1zaG9ydGVuIG0tMFxcXCI+XFxyXFxuICAgICAgICAgICAgPGlucHV0IGNsYXNzPVxcXCJndWkgZmFjZXQtdmFsdWUtY2hlY2tib3ggY3Vyc29yLXBvaW50ZXIgbS1sLTBcXFwiIFxcclxcbiAgICAgICAgICAgICAgICAgICAgaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMzKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi1cIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0uaWQgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCItXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRhdGEgJiYgZGF0YS5pbmRleCksIGRlcHRoMCkpXG4gICAgKyBcIi1jaGVja2JveFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXENoZWNrZWQudHNcIikpLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zZWxlY3RlZCA6IGRlcHRoMCkse1wibmFtZVwiOlwiQ2hlY2tlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxEaXNhYmxlZC50c1wiKSkuY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmRpc2FibGVkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJEaXNhYmxlZFwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cXFwiLTFcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczMoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cXFwiY2hlY2tib3hcXFwiIC8+XFxyXFxuICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxGb3JtYXRMYWJlbEJ5VHlwZS50c1wiKSkuY2FsbChhbGlhczEsKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5sYWJlbCA6IGRlcHRoMCkse1wibmFtZVwiOlwiRm9ybWF0TGFiZWxCeVR5cGVcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcclxcbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMSBtLTBcXFwiPihcIlxuICAgICsgYWxpYXMyKGFsaWFzMygoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY291bnQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIpPC9zcGFuPlxcclxcbiAgICAgICAgPC9sYWJlbD5cXHJcXG4gICAgPC9saT5cXHJcXG5cIjtcbn0sXCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEsYmxvY2tQYXJhbXMsZGVwdGhzKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiPHVsIGNsYXNzPVxcXCJkZXNjcmlwdGlvbiBndWkgZmFjZXQtaXRlbS1kZXNjcmlwdGlvbiBtLXQtMTAgcC1sLTUgcC0wIFwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcSGlkZGVuLnRzXCIpKS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx0cnVlLHtcIm5hbWVcIjpcIkhpZGRlblwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxcIiBcXHJcXG4gICAgcm9sZT1cXFwiZ3JvdXBcXFwiPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgIFwiXG4gICAgKyAoKHN0YWNrMSA9IF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxTaG93TW9yZUxlc3NMaW5rLnRzXCIpKS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLDUse1wibmFtZVwiOlwiU2hvd01vcmVMZXNzTGlua1wiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIlxcclxcbjwvdWw+XCI7XG59LFwidXNlRGF0YVwiOnRydWUsXCJ1c2VEZXB0aHNcIjp0cnVlfSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvaGJzL2ZhY2V0LWxhYmVsLmhic1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImltcG9ydCAqIGFzIG1vbWVudCBmcm9tIFwibW9tZW50XCI7XHJcbmNvbnN0IGZvcm1hdExhYmVsQnlUeXBlID0gKHR5cGU6IHN0cmluZywgdmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgaWYgKG1vbWVudCAmJiB0eXBlID09PSBcIkVkbS5EYXRlVGltZU9mZnNldFwiKSB7XHJcbiAgICAgICAgcmV0dXJuIG1vbWVudC51dGModmFsdWUpLmZvcm1hdChcIkRELU1NTS1ZWVlZIGhoOm1tIGFcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGlmICggdmFsdWUgPT09IFwiQXNzaWduZWRcIiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiQ29tbWl0dGVkXCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICggdmFsdWUgPT09IFwiQ29tcGxldGVcIiApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiQXNzaWduZWRcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgZm9ybWF0TGFiZWxCeVR5cGU7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvRm9ybWF0TGFiZWxCeVR5cGUudHMiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfOV9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwibW9tZW50XCJcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJpbXBvcnQgeyBlcnJvciB9IGZyb20gXCJ1dGlsXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRG9tVXRpbHMge1xyXG4gICAgcHVibGljIHN0YXRpYyBpc0Rlc2NlbmRhbnQgPSAocGFyZW50LCBjaGlsZCkgPT4ge1xyXG4gICAgICAgIGxldCBub2RlID0gY2hpbGQucGFyZW50Tm9kZTtcclxuICAgICAgICB3aGlsZSAobm9kZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGlmIChub2RlID09PSBwYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaXNTZWxmT3JEZXNjZW5kYW50ID0gKHBhcmVudCwgY2hpbGQpID0+IHtcclxuICAgICAgICBpZiAoIHBhcmVudCA9PT0gY2hpbGQgKSB7cmV0dXJuIHRydWU7IH1cclxuICAgICAgICByZXR1cm4gRG9tVXRpbHMuaXNEZXNjZW5kYW50KHBhcmVudCwgY2hpbGQpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBpc0hpZGRlbiA9IChub2RlOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghbm9kZSkgeyByZXR1cm4gdHJ1ZTsgfVxyXG4gICAgICAgIHJldHVybiBub2RlLm9mZnNldFBhcmVudCA9PT0gbnVsbDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaXNBcmlhSGlkZGVuID0gKG5vZGU6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICAgIHJldHVybiBub2RlLmdldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIpID09PSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0QXJpYUhpZGRlbiA9IChub2RlOiBIVE1MRWxlbWVudCwgdmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgIGlmICghbm9kZSkgeyB0aHJvdyBFcnJvcihcIkRvbVV0aWxzLnNldEFyaWFIaWRkZW4gLSBOb2RlIGNhbm5vdCBiZSBvZiBudWxsIG9yIHVuZGVmaW5lZFwiKTsgfVxyXG4gICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBpc0FyaWFFeHBhbmRlZCA9IChub2RlOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghbm9kZSkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICByZXR1cm4gbm9kZS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIpID09PSBcInRydWVcIjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgc2V0QXJpYUV4cGFuZGVkID0gKG5vZGU6IEhUTUxFbGVtZW50LCB2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7IHRocm93IEVycm9yKFwiRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkIC0gTm9kZSBjYW5ub3QgYmUgb2YgbnVsbCBvciB1bmRlZmluZWRcIik7IH1cclxuICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIiwgdmFsdWUpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBzaG93ID0gKG5vZGU6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKCFub2RlKSB7IHRocm93IEVycm9yKFwiRG9tVXRpbHMuc2hvdyAtIE5vZGUgY2Fubm90IGJlIG9mIG51bGwgb3IgdW5kZWZpbmVkXCIpOyB9XHJcbiAgICAgICAgbm9kZS5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGF0aWMgaGlkZSA9IChub2RlOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghbm9kZSkgeyB0aHJvdyBFcnJvcihcIkRvbVV0aWxzLmhpZGUgLSBOb2RlIGNhbm5vdCBiZSBvZiBudWxsIG9yIHVuZGVmaW5lZFwiKTsgfVxyXG4gICAgICAgIG5vZGUuY2xhc3NMaXN0LmFkZChcImd1aS1oaWRkZW5cIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhdGljIHRvZ2dsZUxhYmVsID0gKG5vZGU6IEhUTUxMYWJlbEVsZW1lbnQpOiBib29sZWFuID0+IHtcclxuICAgICAgICBpZiAoIW5vZGUpIHsgdGhyb3cgRXJyb3IoXCJEb21VdGlscy50b2dnbGVMYWJlbCAtIE5vZGUgY2Fubm90IGJlIG9mIG51bGwgb3IgdW5kZWZpbmVkXCIpOyB9XHJcbiAgICAgICAgY29uc3QgZm9ySWQgPSBub2RlLmh0bWxGb3I7XHJcbiAgICAgICAgY29uc3QgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZm9ySWQpIHx8IG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgICAgICAgaW5wdXQuY2hlY2tlZCA9ICFpbnB1dC5jaGVja2VkO1xyXG4gICAgICAgIHJldHVybiBpbnB1dC5jaGVja2VkO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0YXRpYyBvZmYgPSAobm9kZTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb25zdCBuZXdOb2RlID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdOb2RlLCBub2RlKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2ExMXkvRG9tVXRpbHMudHMiLCJleHBvcnQgY2xhc3MgRmFjZXRDb25zdGFudHMge1xyXG4gICAgcHVibGljIHN0YXRpYyBVcEtleUNvZGU6IG51bWJlciA9IDM4O1xyXG4gICAgcHVibGljIHN0YXRpYyBEb3duS2V5Q29kZTogbnVtYmVyID0gNDA7XHJcbiAgICBwdWJsaWMgc3RhdGljIEVudGVyS2V5Q29kZTogbnVtYmVyID0gMTM7XHJcbiAgICBwdWJsaWMgc3RhdGljIFNwYWNlS2V5Q29kZTogbnVtYmVyID0gMjg7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9jb25maWcvRmFjZXRDb25zdGFudHMudHMiLCJpbXBvcnQgeyBTaG93SGlkZSB9IGZyb20gXCIuL1Nob3dIaWRlXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyIHtcclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIENvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIgPSAodGFyZ2V0OiBKUXVlcnksIHNob3dIaWRlOiBTaG93SGlkZSwgbmFtZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWNvbkVsZW1lbnQgPSB0YXJnZXQuZmluZChcIi5leHBhbnNpb24taWNvblwiKSA7XHJcbiAgICAgICAgY29uc3QgY3VycmVudGx5VmlzaWJsZSA9IGljb25FbGVtZW50Lmhhc0NsYXNzKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICBpZiAoU2hvd0hpZGUuVG9nZ2xlICE9PSBzaG93SGlkZSAmJiAoKGN1cnJlbnRseVZpc2libGUgJiYgc2hvd0hpZGUgPT09IFNob3dIaWRlLlNob3cpIHx8XHJcbiAgICAgICAgICAgICghY3VycmVudGx5VmlzaWJsZSAmJiBzaG93SGlkZSA9PT0gU2hvd0hpZGUuSGlkZSkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFjdXJyZW50bHlWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5maW5kKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIikuc2xpZGVEb3duKDIwMCk7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICBpY29uRWxlbWVudC5hZGRDbGFzcyhcImd1aS1pY29uLWNoZXZyb24tdXBcIik7XHJcbiAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJ0cnVlXCIpXHJcbiAgICAgICAgICAgIC5hdHRyKFwiYXJpYS1sYWJlbFwiLCBcIlByZXNzIGVudGVyIG9yIHNwYWNlIHRvIGNvbGxhcHNlIGZpbHRlciB2YWx1ZXMgZm9yIFwiICsgbmFtZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFyZ2V0LmZpbmQoXCIuZmFjZXQtaXRlbS1kZXNjcmlwdGlvblwiKS5zbGlkZVVwKDIwMCk7XHJcbiAgICAgICAgICAgIGljb25FbGVtZW50LnJlbW92ZUNsYXNzKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICAgICAgaWNvbkVsZW1lbnQuYWRkQ2xhc3MoXCJndWktaWNvbi1jaGV2cm9uLWRvd25cIik7XHJcbiAgICAgICAgICAgIHRhcmdldFxyXG4gICAgICAgICAgICAuYXR0cihcImFyaWEtZXhwYW5kZWRcIiwgXCJmYWxzZVwiKVxyXG4gICAgICAgICAgICAuYXR0cihcImFyaWEtbGFiZWxcIiwgXCJQcmVzcyBlbnRlciBvciBzcGFjZSB0byBleHBhbmQgZmlsdGVyIHZhbHVlcyBmb3IgXCIgKyBuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9FeHBhbmRDb2xsYXBzZU1hbmFnZXIudHMiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZmluZWQsbm8tcGFyYW0tcmVhc3NpZ24sbm8tc2hhZG93ICovXG5cbi8qKlxuICogVGhyb3R0bGUgZXhlY3V0aW9uIG9mIGEgZnVuY3Rpb24uIEVzcGVjaWFsbHkgdXNlZnVsIGZvciByYXRlIGxpbWl0aW5nXG4gKiBleGVjdXRpb24gb2YgaGFuZGxlcnMgb24gZXZlbnRzIGxpa2UgcmVzaXplIGFuZCBzY3JvbGwuXG4gKlxuICogQHBhcmFtICB7TnVtYmVyfSAgICBkZWxheSAgICAgICAgICBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudCBjYWxsYmFja3MsIHZhbHVlcyBhcm91bmQgMTAwIG9yIDI1MCAob3IgZXZlbiBoaWdoZXIpIGFyZSBtb3N0IHVzZWZ1bC5cbiAqIEBwYXJhbSAge0Jvb2xlYW59ICAgbm9UcmFpbGluZyAgICAgT3B0aW9uYWwsIGRlZmF1bHRzIHRvIGZhbHNlLiBJZiBub1RyYWlsaW5nIGlzIHRydWUsIGNhbGxiYWNrIHdpbGwgb25seSBleGVjdXRlIGV2ZXJ5IGBkZWxheWAgbWlsbGlzZWNvbmRzIHdoaWxlIHRoZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdHRsZWQtZnVuY3Rpb24gaXMgYmVpbmcgY2FsbGVkLiBJZiBub1RyYWlsaW5nIGlzIGZhbHNlIG9yIHVuc3BlY2lmaWVkLCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIG9uZSBmaW5hbCB0aW1lXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyIHRoZSBsYXN0IHRocm90dGxlZC1mdW5jdGlvbiBjYWxsLiAoQWZ0ZXIgdGhlIHRocm90dGxlZC1mdW5jdGlvbiBoYXMgbm90IGJlZW4gY2FsbGVkIGZvciBgZGVsYXlgIG1pbGxpc2Vjb25kcyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIGludGVybmFsIGNvdW50ZXIgaXMgcmVzZXQpXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gIGNhbGxiYWNrICAgICAgIEEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZGVsYXkgbWlsbGlzZWNvbmRzLiBUaGUgYHRoaXNgIGNvbnRleHQgYW5kIGFsbCBhcmd1bWVudHMgYXJlIHBhc3NlZCB0aHJvdWdoLCBhcy1pcyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYGNhbGxiYWNrYCB3aGVuIHRoZSB0aHJvdHRsZWQtZnVuY3Rpb24gaXMgZXhlY3V0ZWQuXG4gKiBAcGFyYW0gIHtCb29sZWFufSAgIGRlYm91bmNlTW9kZSAgIElmIGBkZWJvdW5jZU1vZGVgIGlzIHRydWUgKGF0IGJlZ2luKSwgc2NoZWR1bGUgYGNsZWFyYCB0byBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuIElmIGBkZWJvdW5jZU1vZGVgIGlzIGZhbHNlIChhdCBlbmQpLFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY2hlZHVsZSBgY2FsbGJhY2tgIHRvIGV4ZWN1dGUgYWZ0ZXIgYGRlbGF5YCBtcy5cbiAqXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gIEEgbmV3LCB0aHJvdHRsZWQsIGZ1bmN0aW9uLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICggZGVsYXksIG5vVHJhaWxpbmcsIGNhbGxiYWNrLCBkZWJvdW5jZU1vZGUgKSB7XG5cblx0Ly8gQWZ0ZXIgd3JhcHBlciBoYXMgc3RvcHBlZCBiZWluZyBjYWxsZWQsIHRoaXMgdGltZW91dCBlbnN1cmVzIHRoYXRcblx0Ly8gYGNhbGxiYWNrYCBpcyBleGVjdXRlZCBhdCB0aGUgcHJvcGVyIHRpbWVzIGluIGB0aHJvdHRsZWAgYW5kIGBlbmRgXG5cdC8vIGRlYm91bmNlIG1vZGVzLlxuXHR2YXIgdGltZW91dElEO1xuXG5cdC8vIEtlZXAgdHJhY2sgb2YgdGhlIGxhc3QgdGltZSBgY2FsbGJhY2tgIHdhcyBleGVjdXRlZC5cblx0dmFyIGxhc3RFeGVjID0gMDtcblxuXHQvLyBgbm9UcmFpbGluZ2AgZGVmYXVsdHMgdG8gZmFsc3kuXG5cdGlmICggdHlwZW9mIG5vVHJhaWxpbmcgIT09ICdib29sZWFuJyApIHtcblx0XHRkZWJvdW5jZU1vZGUgPSBjYWxsYmFjaztcblx0XHRjYWxsYmFjayA9IG5vVHJhaWxpbmc7XG5cdFx0bm9UcmFpbGluZyA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdC8vIFRoZSBgd3JhcHBlcmAgZnVuY3Rpb24gZW5jYXBzdWxhdGVzIGFsbCBvZiB0aGUgdGhyb3R0bGluZyAvIGRlYm91bmNpbmdcblx0Ly8gZnVuY3Rpb25hbGl0eSBhbmQgd2hlbiBleGVjdXRlZCB3aWxsIGxpbWl0IHRoZSByYXRlIGF0IHdoaWNoIGBjYWxsYmFja2Bcblx0Ly8gaXMgZXhlY3V0ZWQuXG5cdGZ1bmN0aW9uIHdyYXBwZXIgKCkge1xuXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xuXHRcdHZhciBlbGFwc2VkID0gTnVtYmVyKG5ldyBEYXRlKCkpIC0gbGFzdEV4ZWM7XG5cdFx0dmFyIGFyZ3MgPSBhcmd1bWVudHM7XG5cblx0XHQvLyBFeGVjdXRlIGBjYWxsYmFja2AgYW5kIHVwZGF0ZSB0aGUgYGxhc3RFeGVjYCB0aW1lc3RhbXAuXG5cdFx0ZnVuY3Rpb24gZXhlYyAoKSB7XG5cdFx0XHRsYXN0RXhlYyA9IE51bWJlcihuZXcgRGF0ZSgpKTtcblx0XHRcdGNhbGxiYWNrLmFwcGx5KHNlbGYsIGFyZ3MpO1xuXHRcdH1cblxuXHRcdC8vIElmIGBkZWJvdW5jZU1vZGVgIGlzIHRydWUgKGF0IGJlZ2luKSB0aGlzIGlzIHVzZWQgdG8gY2xlYXIgdGhlIGZsYWdcblx0XHQvLyB0byBhbGxvdyBmdXR1cmUgYGNhbGxiYWNrYCBleGVjdXRpb25zLlxuXHRcdGZ1bmN0aW9uIGNsZWFyICgpIHtcblx0XHRcdHRpbWVvdXRJRCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHRpZiAoIGRlYm91bmNlTW9kZSAmJiAhdGltZW91dElEICkge1xuXHRcdFx0Ly8gU2luY2UgYHdyYXBwZXJgIGlzIGJlaW5nIGNhbGxlZCBmb3IgdGhlIGZpcnN0IHRpbWUgYW5kXG5cdFx0XHQvLyBgZGVib3VuY2VNb2RlYCBpcyB0cnVlIChhdCBiZWdpbiksIGV4ZWN1dGUgYGNhbGxiYWNrYC5cblx0XHRcdGV4ZWMoKTtcblx0XHR9XG5cblx0XHQvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZW91dC5cblx0XHRpZiAoIHRpbWVvdXRJRCApIHtcblx0XHRcdGNsZWFyVGltZW91dCh0aW1lb3V0SUQpO1xuXHRcdH1cblxuXHRcdGlmICggZGVib3VuY2VNb2RlID09PSB1bmRlZmluZWQgJiYgZWxhcHNlZCA+IGRlbGF5ICkge1xuXHRcdFx0Ly8gSW4gdGhyb3R0bGUgbW9kZSwgaWYgYGRlbGF5YCB0aW1lIGhhcyBiZWVuIGV4Y2VlZGVkLCBleGVjdXRlXG5cdFx0XHQvLyBgY2FsbGJhY2tgLlxuXHRcdFx0ZXhlYygpO1xuXG5cdFx0fSBlbHNlIGlmICggbm9UcmFpbGluZyAhPT0gdHJ1ZSApIHtcblx0XHRcdC8vIEluIHRyYWlsaW5nIHRocm90dGxlIG1vZGUsIHNpbmNlIGBkZWxheWAgdGltZSBoYXMgbm90IGJlZW5cblx0XHRcdC8vIGV4Y2VlZGVkLCBzY2hlZHVsZSBgY2FsbGJhY2tgIHRvIGV4ZWN1dGUgYGRlbGF5YCBtcyBhZnRlciBtb3N0XG5cdFx0XHQvLyByZWNlbnQgZXhlY3V0aW9uLlxuXHRcdFx0Ly9cblx0XHRcdC8vIElmIGBkZWJvdW5jZU1vZGVgIGlzIHRydWUgKGF0IGJlZ2luKSwgc2NoZWR1bGUgYGNsZWFyYCB0byBleGVjdXRlXG5cdFx0XHQvLyBhZnRlciBgZGVsYXlgIG1zLlxuXHRcdFx0Ly9cblx0XHRcdC8vIElmIGBkZWJvdW5jZU1vZGVgIGlzIGZhbHNlIChhdCBlbmQpLCBzY2hlZHVsZSBgY2FsbGJhY2tgIHRvXG5cdFx0XHQvLyBleGVjdXRlIGFmdGVyIGBkZWxheWAgbXMuXG5cdFx0XHR0aW1lb3V0SUQgPSBzZXRUaW1lb3V0KGRlYm91bmNlTW9kZSA/IGNsZWFyIDogZXhlYywgZGVib3VuY2VNb2RlID09PSB1bmRlZmluZWQgPyBkZWxheSAtIGVsYXBzZWQgOiBkZWxheSk7XG5cdFx0fVxuXG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIHdyYXBwZXIgZnVuY3Rpb24uXG5cdHJldHVybiB3cmFwcGVyO1xuXG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvdGhyb3R0bGUtZGVib3VuY2UvdGhyb3R0bGUuanNcbi8vIG1vZHVsZSBpZCA9IDEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiZXhwb3J0ICogZnJvbSBcIi4vRmFjZXRcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vRmlsdGVyXCI7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvbWFpbi9FbnRyeS50cyIsImltcG9ydCB7IEhvdEtleXNGYWNldEhhbmRsZXIgfSBmcm9tIFwiLi4vZXZlbnRoYW5kbGVycy9Ib3RLZXlzRmFjZXRIYW5kbGVyXCI7XG5pbXBvcnQgeyBJRmFjZXQgfSBmcm9tIFwiLi4vbW9kZWxzL0lGYWNldFwiO1xuaW1wb3J0IHsgSUZhY2V0Q29uZmlnIH0gZnJvbSBcIi4uL21vZGVscy9JRmFjZXRDb25maWdcIjtcbmltcG9ydCB7IElGYWNldFZhbHVlIH0gZnJvbSBcIi4uL21vZGVscy9JRmFjZXRWYWx1ZVwiO1xuaW1wb3J0IHsgRmFjZXRUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcbmltcG9ydCB7IElGYWNldFRlbXBsYXRlU2VydmljZSB9IGZyb20gXCIuLi9zZXJ2aWNlcy9JRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcbmltcG9ydCB7IEZhY2V0VHJlZSB9IGZyb20gXCIuLy4uL2ExMXkvRmFjZXRUcmVlXCI7XG5pbXBvcnQgeyBGYWNldENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcbmltcG9ydCB7IElGYWNldE9wdGlvbnMgfSBmcm9tIFwiLi8uLi9jb25maWcvSUZhY2V0T3B0aW9uc1wiO1xuaW1wb3J0IHsgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyICwgRmFjZXRBY3Rpb25IYW5kbGVyLFxuICAgIEZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlciwgRmFjZXRTZWFyY2hIYW5kbGVyLFxuICAgIEhpZGVGYWNldFNlY3Rpb25IYW5kbGVyLCBJRXZlbnRIYW5kbGVyLCBQaW5VbnBpbkV2ZW50SGFuZGxlciwgU2hvd01vcmVMZXNzSGFuZGxlciB9IGZyb20gXCIuLy4uL2V2ZW50aGFuZGxlcnNcIjtcbmV4cG9ydCBjbGFzcyBGYWNldCB7XG4gICAgcHJpdmF0ZSBjb25maWdTdG9yZTogRmFjZXRDb25maWdTdG9yZTtcbiAgICBwcml2YXRlIHRlbXBsYXRlU2VydmljZTogSUZhY2V0VGVtcGxhdGVTZXJ2aWNlO1xuICAgIHByaXZhdGUgZmFjZXRFbGVtZW50OiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGhhbmRsZXJDaGFpbjogSUV2ZW50SGFuZGxlcltdID0gW107XG4gICAgcHJpdmF0ZSBmYWNldFRyZWU6IEZhY2V0VHJlZTtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJRmFjZXRPcHRpb25zKSB7XG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSAgbmV3IEZhY2V0Q29uZmlnU3RvcmUob3B0aW9ucyk7XG4gICAgICAgIHRoaXMuZmFjZXRFbGVtZW50ID0gb3B0aW9ucy5jb250YWluZXJFbGVtZW50O1xuICAgICAgICB0aGlzLnRlbXBsYXRlU2VydmljZSA9IG5ldyBGYWNldFRlbXBsYXRlU2VydmljZSh0aGlzLmNvbmZpZ1N0b3JlKTtcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LFxuICAgICAgICAvLyAgICAgdGhpcy5jb25maWdTdG9yZSwgdGhpcy50ZW1wbGF0ZVNlcnZpY2UpKTtcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgRmFjZXRBY3Rpb25IYW5kbGVyKHRoaXMuZmFjZXRFbGVtZW50LCB0aGlzLmNvbmZpZ1N0b3JlKSk7XG4gICAgICAgIC8vIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEZhY2V0U2VhcmNoSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xuICAgICAgICAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBIaWRlRmFjZXRTZWN0aW9uSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xuICAgICAgICAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBIb3RLZXlzRmFjZXRIYW5kbGVyKCkpO1xuICAgICAgICAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBQaW5VbnBpbkV2ZW50SGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSwgdGhpcy50ZW1wbGF0ZVNlcnZpY2UpKTtcbiAgICAgICAgLy8gLy8gdGhpcy5oYW5kbGVyQ2hhaW4ucHVzaChuZXcgU2hvd01vcmVMZXNzSGFuZGxlcih0aGlzLmZhY2V0RWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xuICAgICAgICAvLyAvLyB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBGYWNldEtleUJvYXJkTmF2aWdhdGlvbkhhbmRsZXIodGhpcy5mYWNldEVsZW1lbnQpKTtcbiAgICAgICAgLy8gdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xuICAgICAgICAvLyAgICAgaGFuZGxlci5SZWdpc3RlckRvbUhhbmRsZXIoKTtcbiAgICAgICAgLy8gfSk7XG4gICAgfVxuICAgIHB1YmxpYyBiaW5kID0gIChmYWNldHM6IElGYWNldFtdKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlLnNldERhdGEoZmFjZXRzKTtcbiAgICAgICAgdGhpcy5yZVJlbmRlcigpO1xuICAgIH1cbiAgICBwdWJsaWMgcmVSZW5kZXIgPSAoKTogdm9pZCA9PiB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmdldERhdGEoKTtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxGYWNldCA9IHRoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQoZGF0YSk7XG4gICAgICAgICAgICB0aGlzLmZhY2V0RWxlbWVudC5pbm5lckhUTUwgPSBmdWxsRmFjZXQ7XG4gICAgICAgICAgICBjb25zdCB0cmVlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tyb2xlPVwidHJlZVwiXScpO1xuICAgICAgICAgICAgdGhpcy5mYWNldFRyZWUgPSBuZXcgRmFjZXRUcmVlKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb250YWluZXJFbGVtZW50LCB0aGlzLCB0aGlzLmNvbmZpZ1N0b3JlKTtcbiAgICAgICAgICAgIHRoaXMuZmFjZXRUcmVlLmluaXQoKTtcbiAgICAgICAgfSwgMSApO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0RmFjZXRDb25maWcgPSAoZmFjZXRDb25maWc6IElGYWNldENvbmZpZ1tdKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZyA9IGZhY2V0Q29uZmlnO1xuICAgIH1cbiAgICBwdWJsaWMgZGVzdHJveSA9ICAoKTogdm9pZCA9PiB7XG4gICAgICAgIHRoaXMuZmFjZXRUcmVlLmRlc3Ryb3koKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL21haW4vRmFjZXQudHMiLCJpbXBvcnQgKiBhcyBIYW5kbGViYXJzIGZyb20gXCJoYW5kbGViYXJzXCI7XG5pbXBvcnQge0lGYWNldH0gZnJvbSBcIi4uL21vZGVscy9JRmFjZXRcIjtcbmltcG9ydCAqIGFzIEZhY2V0TWFpbiBmcm9tIFwiLi8uLi8uLi9oYnMvZmFjZXQtbWFpbi5oYnNcIjtcbmltcG9ydCB7RmFjZXRDb25maWdTdG9yZX0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcbmltcG9ydCB7SUZhY2V0VGVtcGxhdGVTZXJ2aWNlfSBmcm9tIFwiLi9JRmFjZXRUZW1wbGF0ZVNlcnZpY2VcIjtcblxuZXhwb3J0IGNsYXNzIEZhY2V0VGVtcGxhdGVTZXJ2aWNlIGltcGxlbWVudHMgSUZhY2V0VGVtcGxhdGVTZXJ2aWNlIHtcbiAgcHJpdmF0ZSBkYXRhOiBJRmFjZXRbXTtcbiAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW46IGFueTtcbiAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldEhlYWRlcjogYW55O1xuICBwcml2YXRlIHRlbXBhdGVGdW5jdGlvbkZvckZhY2V0U3ViSGVhZGVyOiBhbnk7XG4gIHByaXZhdGUgdGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRCb2R5OiBhbnk7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY29uZmlnU3RvcmU6IEZhY2V0Q29uZmlnU3RvcmUpIHtcbiAgICB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbiA9IEZhY2V0TWFpbjtcbiAgfVxuICBwdWJsaWMgYmluZChmYWNldHM6IElGYWNldFtdKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb2xsYXBzZWQ6IGJvb2xlYW4gPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuY29sbGFwc2VkO1xuICAgIGNvbnN0IG1lcmdlZEZhY2V0cyA9IHRoaXMubWVyZ2VXaXRoRmFjZXRDb25maWcoZmFjZXRzKTtcbiAgICBjb25zdCBmYXZvcml0ZXMgPSBtZXJnZWRGYWNldHMuZmlsdGVyKChmKSA9PiBmLnBpbm5lZCAhPT0gdW5kZWZpbmVkICYmIGYucGlubmVkKTtcbiAgICBjb25zdCBub25GYXZvcml0ZXMgPSBtZXJnZWRGYWNldHMuZmlsdGVyKChmKSA9PiBmLnBpbm5lZCA9PT0gdW5kZWZpbmVkIHx8ICFmLnBpbm5lZCk7XG4gICAgZmF2b3JpdGVzLnNvcnQodGhpcy5jb21wYXJlRm4pO1xuICAgIG5vbkZhdm9yaXRlcy5zb3J0KHRoaXMuY29tcGFyZUZuKTtcbiAgICBjb25zdCBub09mRmFjZXRUb1Nob3cgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMubm9PZkZhY2V0VG9TaG93O1xuICAgIGNvbnN0IGlkUHJlZml4ID0gdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmlkUHJlZml4O1xuICAgIHJldHVybiB0aGlzLnRlbXBhdGVGdW5jdGlvbkZvckZhY2V0TWFpbih7aWRQcmVmaXgsIGZhdm9yaXRlcywgbm9uRmF2b3JpdGVzLCBub09mRmFjZXRUb1Nob3d9KTtcbiAgfVxuICBwdWJsaWMgc2V0RGF0YSA9IChmYWNldHM6IElGYWNldFtdKTogdm9pZCA9PiB7XG4gICAgdGhpcy5kYXRhID0gZmFjZXRzO1xuICB9XG4gIHB1YmxpYyBnZXREYXRhID0gKCk6IElGYWNldFtdID0+IHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9XG4gIHByaXZhdGUgY29tcGFyZUZuID0gKHByZXY6IGFueSwgbmV4dDogYW55KSA9PiB7XG4gICAgaWYgKHByZXYub3JkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpZiAobmV4dC5vcmRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgcmV0dXJuIHByZXYub3JkZXIgLSBuZXh0Lm9yZGVyO1xuICB9XG4gIHByaXZhdGUgbWVyZ2VXaXRoRmFjZXRDb25maWcgPSAoZmFjZXRzOiBJRmFjZXRbXSkgPT4ge1xuICAgIGNvbnN0IG1lcmdlZEFycmF5OiBhbnlbXSA9IFtdO1xuICAgIGZvciAoY29uc3QgZmFjZXQgb2YgZmFjZXRzKSB7XG4gICAgICBmb3IgKGNvbnN0IGZhY2V0Q29uZmlnIG9mIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZykge1xuICAgICAgICBpZiAoZmFjZXRDb25maWcuaWQgPT09IGZhY2V0LmlkKSB7XG4gICAgICAgICAgbWVyZ2VkQXJyYXkucHVzaCh7XG4gICAgICAgICAgICBjb2xsYXBzZWQ6IGZhY2V0Q29uZmlnLmNvbGxhcHNlZCxcbiAgICAgICAgICAgIGZhY2V0UmFuZ2VzOiBmYWNldC5mYWNldFJhbmdlcyxcbiAgICAgICAgICAgIGZhY2V0VmFsdWVzOiBmYWNldC5mYWNldFZhbHVlcyxcbiAgICAgICAgICAgIGlkOiBmYWNldENvbmZpZy5pZCxcbiAgICAgICAgICAgIG5hbWU6IGZhY2V0Q29uZmlnLm5hbWUsXG4gICAgICAgICAgICBvcmRlcjogZmFjZXRDb25maWcub3JkZXIsXG4gICAgICAgICAgICBwaW5uZWQ6IGZhY2V0Q29uZmlnLnBpbm5lZCxcbiAgICAgICAgICAgIHR5cGU6IGZhY2V0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1lcmdlZEFycmF5O1xuICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL3NlcnZpY2VzL0ZhY2V0VGVtcGxhdGVTZXJ2aWNlLnRzIiwidmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGFuZGxlYmFyc1wiKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCIgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtYm9keSBndWkgZmx1aWQtaCBvZi1oaWRkZW4gZ3VpLWhpZGRlblxcXCI+XCJcbiAgICArICgoc3RhY2sxID0gY29udGFpbmVyLmludm9rZVBhcnRpYWwocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGZhY2V0LWJvZHkuaGJzXCIpLGRlcHRoMCx7XCJuYW1lXCI6XCJmYWNldC1ib2R5XCIsXCJkYXRhXCI6ZGF0YSxcImhlbHBlcnNcIjpoZWxwZXJzLFwicGFydGlhbHNcIjpwYXJ0aWFscyxcImRlY29yYXRvcnNcIjpjb250YWluZXIuZGVjb3JhdG9yc30pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiPC9kaXY+XFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMTtcblxuICByZXR1cm4gXCIgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtYm9keSBndWkgZmx1aWQtaCBvZi1oaWRkZW5cXFwiPlwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxmYWNldC1ib2R5Lmhic1wiKSxkZXB0aDAse1wibmFtZVwiOlwiZmFjZXQtYm9keVwiLFwiZGF0YVwiOmRhdGEsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIjwvZGl2PlxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiZ3VpIGZsdWlkLWggXFxcIj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5jb2xsYXBzZWQgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDApLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIjwvZGl2PlwiO1xufSxcInVzZVBhcnRpYWxcIjp0cnVlLFwidXNlRGF0YVwiOnRydWV9KTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9oYnMvZmFjZXQtbWFpbi5oYnNcbi8vIG1vZHVsZSBpZCA9IDE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwidmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKFwiaGFuZGxlYmFyc1wiKTtcbmZ1bmN0aW9uIF9fZGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiAob2JqLl9fZXNNb2R1bGUgPyBvYmpbXCJkZWZhdWx0XCJdIDogb2JqKTsgfVxubW9kdWxlLmV4cG9ydHMgPSAoSGFuZGxlYmFyc1tcImRlZmF1bHRcIl0gfHwgSGFuZGxlYmFycykudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCI8bGkgY2xhc3M9XFxcImd1aSBtLTAgcC1yLTEwIHAtdC01IHAtYi01IHAtbC0xMFxcXCIgXFxyXFxuICAgIGFyaWEtbGFiZWw9XFxcIlBpbm5lZCBGaWx0ZXJzXFxcIlxcclxcbiAgICBkYXRhLWF0dHItdmFsdWU9XFxcIlBpbm5lZCBGaWx0ZXJzXFxcIlxcclxcbiAgICBkYXRhLWF0dHItaWdub3JlRm9yU2VhcmNoPVxcXCJ0cnVlXFxcIlxcclxcbiAgICBhcmlhLWV4cGFuZGVkPVxcXCJ0cnVlXFxcIlxcclxcbiAgICBhcmlhLWxpdmU9XFxcInBvbGl0ZVxcXCJcXHJcXG4gICAgYXJpYS1hdG9taWM9XFxcInRydWVcXFwiXFxyXFxuICAgIGFyaWEtcmVsZXZhbnQ9XFxcImFsbFxcXCJcXHJcXG4gICAgcm9sZT1cXFwidHJlZWl0ZW1cXFwiXFxyXFxuICAgIGlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWRQcmVmaXggOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCItcGlubmVkLWZpbHRlci10cmVlXFxcIj5cXHJcXG4gICAgPGg2IGNsYXNzPVxcXCJndWkgZ3VpLXN1YmhlYWRpbmctMiBjYXBzIGJvbGQtNTAwIGZsZXggbS1iLTEwIGpjLXNiXFxcIj5cXHJcXG4gICAgICAgIFBJTk5FRCBGSUxURVJTXFxyXFxuICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgZ3VpLWljb24tY2hldnJvbi11cCBleHBhbnNpb24taWNvbiBtLXQtNSBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiPjwvaT5cXHJcXG4gICAgPC9oNj5cXHJcXG4gICAgPHVsIGFyaWEtbGFiZWxsZWRieT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmlkUHJlZml4IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiLXBpbm5lZC1maWx0ZXItdHJlZVxcXCIgY2xhc3M9XFxcImd1aSBtLTAgcC0wXFxcIiByb2xlPVxcXCJncm91cFxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmF2b3JpdGVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDIsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICA8L3VsPlxcclxcbjwvbGk+XFxyXFxuXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICA8bGkgYXJpYS1sYWJlbD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBpdGVtIGZhY2V0LWl0ZW0gYm9yZGVyLWJvdHRvbSBsaWdodCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTUgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ29sbGFwc2VkLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDb2xsYXBzZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVxcXCJcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxCb29sZWFuLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx0cnVlLHtcIm5hbWVcIjpcIkJvb2xlYW5cIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgZGF0YS1hdHRyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtaXRlbS1oZWFkZXIgZmx1aWQgZ3VpIGl0ZW0gZmxleCBqYy1zYlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgcHJpbWFyeSBndWktc3ViaGVhZGluZy0xIGNhcHMgbS0wIGN1cnNvci1wb2ludGVyXFxcIiB0aXRsZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgXCJcbiAgICArICgoc3RhY2sxID0gX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXFNlbGVjdGVkRmlsdGVyc0NvdW50LnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcIlNlbGVjdGVkRmlsdGVyc0NvdW50XCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aSAgZGF0YS1hdHRyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBwaW4tdW5waW4tc2VsZWN0b3IgZ3VpLWljb24tdW5waW4gbS10LTUgbS1yLTEwIHVucGluLWljb24gY3Vyc29yLXBvaW50ZXJcXFwiIFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9XFxcIlByZXNzIGVudGVyIG9yIHNwYWNlIHRvIHVucGluIGZpbHRlciBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cXFwiMFxcXCI+PC9pPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgzLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIucHJvZ3JhbSg1LCBkYXRhLCAwKSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxmYWNldC1sYWJlbC5oYnNcIiksZGVwdGgwLHtcIm5hbWVcIjpcImZhY2V0LWxhYmVsXCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICAgICAgXCIsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgPC9saT5cXHJcXG5cIjtcbn0sXCIzXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgZ3VpLWljb24tY2hldnJvbi11cCBleHBhbnNpb24taWNvbiBtLXQtNSBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiPjwvaT5cXHJcXG5cIjtcbn0sXCI1XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgZ3VpLWljb24tY2hldnJvbi1kb3duIGV4cGFuc2lvbi1pY29uIG0tdC01IG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCI+PC9pPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5mYXZvcml0ZXMgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLmxlbmd0aCA6IHN0YWNrMSkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIik7XG59LFwidXNlUGFydGlhbFwiOnRydWUsXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2hicy9mYWNldC1waW5uZWQuaGJzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImNvbnN0IGNoZWNrTGVuZ3RoID0gKGluZGV4LCB2Mik6IHN0cmluZyA9PiB7XHJcbiAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCAmJiBpbmRleCArIDEgPiB2Mikge1xyXG4gICAgICAgIHJldHVybiBcImd1aS1oaWRkZW4gZXh0cmEtZmlsdGVyXCI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNoZWNrTGVuZ3RoO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL0NoZWNrTGVuZ3RoLnRzIiwiY29uc3QgQXBwbHlSZW1vdmUgPSAoYm9vbDogYm9vbGVhbik6IHN0cmluZyA9PiB7XHJcbiAgICByZXR1cm4gYm9vbCA/IFwiIHJlbW92ZSBcIiA6IFwiIGFwcGx5IFwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBwbHlSZW1vdmU7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvQXBwbHlSZW1vdmUudHMiLCJjb25zdCBjaGVja2VkID0gKGJvb2w6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xyXG4gICAgcmV0dXJuIGJvb2wgPyBcImNoZWNrZWRcIiA6IFwiXCI7XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjaGVja2VkO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL0NoZWNrZWQudHMiLCJjb25zdCBkaXNhYmxlZCA9IChib29sOiBib29sZWFuKTogc3RyaW5nID0+IHtcclxuICAgIHJldHVybiBib29sID8gXCJkaXNhYmxlZFwiIDogXCJcIjtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGRpc2FibGVkO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL0Rpc2FibGVkLnRzIiwiY29uc3QgaGlkZGVuID0gKHZhbHVlOiBib29sZWFuLCBpbnZlcnQ6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xyXG4gICAgbGV0IGhpZGU7XHJcbiAgICBpZiAoaW52ZXJ0KSB7XHJcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICBoaWRlID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBoaWRlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaGlkZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaGlkZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBoaWRlID8gXCIgZ3VpLWhpZGRlbiBcIiA6IFwiIFwiO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaGlkZGVuO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL0hpZGRlbi50cyIsImNvbnN0IFNob3dNb3JlTGVzc0xpbmsgPSAoaW5kZXgsIHYyLCBvcHRpb25zKTogc3RyaW5nID0+IHtcclxuICAgIGlmIChpbmRleC5sZW5ndGggPiB2Mikge1xyXG4gICAgICAgIHJldHVybiBcIjxsaSBjbGFzcz1cXFwiZ3VpIG0tYi01IG0tdC01XFxcIj5cIlxyXG4gICAgICAgICAgICAgICAgKyBcIjxhIHRhYmluZGV4PVxcXCIwXFxcIiByb2xlPVxcXCJ0cmVlaXRlbVxcXCIgXCJcclxuICAgICAgICAgICAgICAgICsgICAgICAgXCJkYXRhLWF0dHItaWQ9XFxcInt7aWR9fVxcXCIgXCJcclxuICAgICAgICAgICAgICAgICsgICAgICAgXCJkYXRhLWF0dHItdmFsdWU9XFxcIlNob3cgTW9yZVxcXCIgXCJcclxuICAgICAgICAgICAgICAgICsgICAgICAgXCJhcmlhLWxhYmVsPVxcXCJQcmVzcyBlbnRlciB0byBzaG93IFwiICsgKGluZGV4Lmxlbmd0aCAtIHYyKSArIFwiIG1vcmUgdmFsdWVzXFxcIiBcIlxyXG4gICAgICAgICAgICAgICAgKyAgICAgICBcImNsYXNzPVxcXCJndWkgY2FwcyBndWktYm9keS0yIHNpbXBsZSBzaG93LW1vcmUtbGluayBjdXJzb3ItcG9pbnRlciBwLTAgbS10LTNcXFwiPlwiXHJcbiAgICAgICAgICAgICAgICArICAgICAgIChpbmRleC5sZW5ndGggLSB2MikgKyBcIiBNb3JlXCJcclxuICAgICAgICAgICAgICAgICsgXCI8L2E+XCJcclxuICAgICAgICAgICAgICsgXCI8L2xpPlwiXHJcbiAgICAgICAgICAgICArIFwiPGxpIGNsYXNzPVxcXCJndWkgbS1iLTUgbS10LTUgZ3VpLWhpZGRlblxcXCI+XCJcclxuICAgICAgICAgICAgICAgICsgXCI8YSB0YWJpbmRleD1cXFwiMFxcXCIgcm9sZT1cXFwidHJlZWl0ZW1cXFwiIFwiXHJcbiAgICAgICAgICAgICAgICArICAgICAgIFwiZGF0YS1hdHRyLXZhbHVlPVxcXCJTaG93IExlc3NcXFwiIFwiXHJcbiAgICAgICAgICAgICAgICArICAgICAgIFwiYXJpYS1sYWJlbD1cXFwiUHJlc3MgZW50ZXIgdG8gc2hvdyBsZXNzIHZhbHVlc1xcXCIgXCJcclxuICAgICAgICAgICAgICAgICsgICAgICAgXCJjbGFzcz1cXFwiZ3VpIGNhcHMgZ3VpLWJvZHktMiBzaW1wbGUgc2hvdy1sZXNzLWxpbmsgY3Vyc29yLXBvaW50ZXIgcC0wIG0tdC0zXFxcIj5cIlxyXG4gICAgICAgICAgICAgICAgICAgICsgXCJTaG93IExlc3NcIiArXHJcbiAgICAgICAgICAgICAgICAgIFwiPC9hPlwiXHJcbiAgICAgICAgICAgICArIFwiPC9saT5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTaG93TW9yZUxlc3NMaW5rO1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL2hicy9oZWxwZXJzL1Nob3dNb3JlTGVzc0xpbmsudHMiLCJ2YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzXCIpO1xuZnVuY3Rpb24gX19kZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIChvYmouX19lc01vZHVsZSA/IG9ialtcImRlZmF1bHRcIl0gOiBvYmopOyB9XG5tb2R1bGUuZXhwb3J0cyA9IChIYW5kbGViYXJzW1wiZGVmYXVsdFwiXSB8fCBIYW5kbGViYXJzKS50ZW1wbGF0ZSh7XCIxXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICB2YXIgc3RhY2sxLCBhbGlhczE9Y29udGFpbmVyLmxhbWJkYSwgYWxpYXMyPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIjxsaSBjbGFzcz1cXFwiZ3VpIG0tMCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTEwXFxcIiBcXHJcXG4gICAgYXJpYS1sYWJlbD1cXFwiQWxsIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci12YWx1ZT1cXFwiQWxsIEZpbHRlcnNcXFwiXFxyXFxuICAgIGRhdGEtYXR0ci1pZ25vcmVGb3JTZWFyY2g9XFxcInRydWVcXFwiXFxyXFxuICAgIGFyaWEtZXhwYW5kZWQ9XFxcInRydWVcXFwiXFxyXFxuICAgIGFyaWEtbGl2ZT1cXFwicG9saXRlXFxcIlxcclxcbiAgICBhcmlhLXJlbGV2YW50PVxcXCJhbGxcXFwiXFxyXFxuICAgIGFyaWEtYXRvbWljPVxcXCJ0cnVlXFxcIlxcclxcbiAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi11bnBpbm5lZC1maWx0ZXItdHJlZVxcXCI+XFxyXFxuICAgIDxoNiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTIgY2FwcyBib2xkLTUwMCBtLWItMTAgZmxleCBqYy1zYlxcXCI+XFxyXFxuICAgICAgICBBbGwgRklMVEVSU1xcclxcbiAgICAgICAgPGkgY2xhc3M9XFxcImd1aSBndWktaWNvbiBzZWxlY3RhYmxlIGd1aS1pY29uLWNoZXZyb24tdXAgZXhwYW5zaW9uLWljb24gbS10LTUgbS1yLTEwIGN1cnNvci1wb2ludGVyXFxcIj48L2k+XFxyXFxuICAgIDwvaDY+XFxyXFxuICAgIDx1bCBhcmlhLWxhYmVsbGVkYnk9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZFByZWZpeCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIi11bnBpbm5lZC1maWx0ZXItdHJlZVxcXCIgY2xhc3M9XFxcImd1aSBtLTAgcC0wXFxcIiByb2xlPVxcXCJncm91cFxcXCI+XFxyXFxuXCJcbiAgICArICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubm9uRmF2b3JpdGVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDIsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICA8L3VsPlxcclxcbjwvbGk+XFxyXFxuXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIHN0YWNrMSwgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbiwgYWxpYXMzPWRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSk7XG5cbiAgcmV0dXJuIFwiICAgICAgICA8bGkgYXJpYS1sYWJlbD1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiXFxyXFxuICAgICAgICAgICAgY2xhc3M9XFxcImd1aSBpdGVtIGZhY2V0LWl0ZW0gYm9yZGVyLWJvdHRvbSBsaWdodCBwLXItMTAgcC10LTUgcC1iLTUgcC1sLTUgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcQ29sbGFwc2VkLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJDb2xsYXBzZWRcIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICByb2xlPVxcXCJ0cmVlaXRlbVxcXCJcXHJcXG4gICAgICAgICAgICBhcmlhLWV4cGFuZGVkPVxcXCJcIlxuICAgICsgYWxpYXMyKF9fZGVmYXVsdChyZXF1aXJlKFwiQzpcXFxcVXNlcnNcXFxccm91c3R1cmdcXFxcU291cmNlXFxcXFJlcG9zXFxcXFNlYXJjaE1hc3RlclxcXFxGYWNldG9vXFxcXHNyY1xcXFxoYnNcXFxcaGVscGVyc1xcXFxCb29sZWFuLnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx0cnVlLHtcIm5hbWVcIjpcIkJvb2xlYW5cIixcImhhc2hcIjp7fSxcImRhdGFcIjpkYXRhfSkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICBkYXRhLWF0dHItaWQ9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5pZCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCIgXFxyXFxuICAgICAgICAgICAgZGF0YS1hdHRyLXZhbHVlPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZmFjZXQtaXRlbS1oZWFkZXIgZmx1aWQgZ3VpIGl0ZW0gZmxleCBqYy1zYlxcXCI+XFxyXFxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVxcXCJndWkgcHJpbWFyeSBndWktc3ViaGVhZGluZy0xIGNhcHMgbS0wIGN1cnNvci1wb2ludGVyXFxcIiB0aXRsZT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcclxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm5hbWUgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCIgXCJcbiAgICArICgoc3RhY2sxID0gX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXFNlbGVjdGVkRmlsdGVyc0NvdW50LnRzXCIpKS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRWYWx1ZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcIlNlbGVjdGVkRmlsdGVyc0NvdW50XCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiXFxyXFxuICAgICAgICAgICAgICAgIDwvc3Bhbj5cXHJcXG4gICAgICAgICAgICAgICAgPHNwYW4+XFxyXFxuICAgICAgICAgICAgICAgICAgICA8aSAgZGF0YS1hdHRyLWlkPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaWQgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiIFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJndWkgZ3VpLWljb24gc2VsZWN0YWJsZSBwaW4tdW5waW4tc2VsZWN0b3IgZ3VpLWljb24tcGluIG0tdC01IG0tci0xMCBwaW4taWNvbiBjdXJzb3ItcG9pbnRlclxcXCIgXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS1sYWJlbD1cXFwiUHJlc3MgZW50ZXIgb3Igc3BhY2UgdG8gcGluIGZpbHRlciBcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJpbmRleD1cXFwiMFxcXCI+PC9pPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGFsaWFzMywoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuY29sbGFwc2VkIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgzLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIucHJvZ3JhbSg1LCBkYXRhLCAwKSxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICAgICAgICAgICAgPC9zcGFuPlxcclxcbiAgICAgICAgICAgIDwvZGl2PlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGNvbnRhaW5lci5pbnZva2VQYXJ0aWFsKHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxmYWNldC1sYWJlbC5oYnNcIiksZGVwdGgwLHtcIm5hbWVcIjpcImZhY2V0LWxhYmVsXCIsXCJkYXRhXCI6ZGF0YSxcImluZGVudFwiOlwiICAgICAgICAgICAgXCIsXCJoZWxwZXJzXCI6aGVscGVycyxcInBhcnRpYWxzXCI6cGFydGlhbHMsXCJkZWNvcmF0b3JzXCI6Y29udGFpbmVyLmRlY29yYXRvcnN9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyBcIiAgICAgICAgPC9saT5cXHJcXG5cIjtcbn0sXCIzXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgZ3VpLWljb24tY2hldnJvbi11cCBleHBhbnNpb24taWNvbiBtLXQtNSBtLXItMTAgY3Vyc29yLXBvaW50ZXJcXFwiPjwvaT5cXHJcXG5cIjtcbn0sXCI1XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCIgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpIGd1aS1pY29uIHNlbGVjdGFibGUgZ3VpLWljb24tY2hldnJvbi1kb3duIGV4cGFuc2lvbi1pY29uIG0tdC01IG0tci0xMCBjdXJzb3ItcG9pbnRlclxcXCI+PC9pPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5ub25GYXZvcml0ZXMgOiBkZXB0aDApKSAhPSBudWxsID8gc3RhY2sxLmxlbmd0aCA6IHN0YWNrMSkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIik7XG59LFwidXNlUGFydGlhbFwiOnRydWUsXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2hicy9mYWNldC11bnBpbm5lZC5oYnNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCAxIiwiaW1wb3J0IHsgRmFjZXRDb25maWdTdG9yZSB9IGZyb20gXCIuLi9jb25maWcvRmFjZXRDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBGYWNldCB9IGZyb20gXCIuLi9tYWluL0ZhY2V0XCI7XHJcbmltcG9ydCB7IEZpbHRlckFjdGlvblR5cGUgfSBmcm9tIFwiLi8uLi9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZVwiO1xyXG5pbXBvcnQgeyBEb21VdGlscyB9IGZyb20gXCIuL0RvbVV0aWxzXCI7XHJcbmltcG9ydCB7IEZhY2V0VHJlZUl0ZW0gfSBmcm9tIFwiLi9GYWNldFRyZWVJdGVtXCI7XHJcbmltcG9ydCB7IEtleUNvZGVzIH0gZnJvbSBcIi4vS2V5Q29kZXNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGYWNldFRyZWUge1xyXG4gICAgLy8gRmFjZXQgT2JqZWN0XHJcbiAgICBwcml2YXRlIGZhY2V0OiBGYWNldDtcclxuICAgIC8vIERvbSBOb2Rlc1xyXG4gICAgcHJpdmF0ZSBwYXJlbnRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgdHJlZURvbU5vZGU6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzZWFyY2hCb3hOb2RlOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgZXhwYW5kQWxsTm9kZTogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIGNvbGxhcHNlQWxsTm9kZTogSFRNTEVsZW1lbnQ7XHJcblxyXG4gICAgLy8gRGF0YSBTdHJ1Y3R1cmVzIGZvciBlYXN5IGFjY2Vzc1xyXG4gICAgcHJpdmF0ZSB0cmVlaXRlbXM6IEZhY2V0VHJlZUl0ZW1bXTtcclxuICAgIHByaXZhdGUgZmlyc3RDaGFyczogc3RyaW5nW107XHJcbiAgICBwcml2YXRlIGZpcnN0VHJlZWl0ZW06IEZhY2V0VHJlZUl0ZW07XHJcbiAgICBwcml2YXRlIGxhc3RUcmVlaXRlbTogRmFjZXRUcmVlSXRlbTtcclxuXHJcbiAgICAvLyBDb25maWcgU3RvcmVzXHJcbiAgICBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlO1xyXG5cclxuICAgIC8vIExvY2FsXHJcbiAgICBwcml2YXRlIGxhc3RJbnB1dFZhbHVlOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG5vZGU6IEhUTUxFbGVtZW50LCBmYWNldDogRmFjZXQsIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZSA9IGNvbmZpZ1N0b3JlO1xyXG4gICAgICAgIHRoaXMucGFyZW50RWxlbWVudCA9IG5vZGU7XHJcbiAgICAgICAgdGhpcy5mYWNldCA9IGZhY2V0O1xyXG4gICAgICAgIHRoaXMudHJlZURvbU5vZGUgPSB0aGlzLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltyb2xlPXRyZWVdXCIpWzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VBbGxOb2RlID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY29sbGFwc2UtYWxsXCIpWzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHRoaXMuZXhwYW5kQWxsTm9kZSA9IHRoaXMucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmV4cGFuZC1hbGxcIilbMF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hCb3hOb2RlID0gdGhpcy5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZmlsdGVyLXNlYXJjaC1pbnB1dFwiKVswXSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICB0aGlzLnRyZWVpdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZmlyc3RDaGFycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuZmlyc3RUcmVlaXRlbSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sYXN0VHJlZWl0ZW0gPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBmaW5kVHJlZWl0ZW1zID0gKG5vZGUsIHRyZWUsIGdyb3VwKSA9PiB7XHJcbiAgICAgICAgbGV0IGVsZW06IGFueSA9IG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICAgICAgbGV0IHRpID0gZ3JvdXA7XHJcbiAgICAgICAgd2hpbGUgKGVsZW0pIHtcclxuICAgICAgICAgICAgY29uc3Qgcm9sZSA9IGVsZW0uZ2V0QXR0cmlidXRlKFwicm9sZVwiKTtcclxuICAgICAgICAgICAgaWYgKHJvbGUgJiYgcm9sZS50b0xvd2VyQ2FzZSgpID09PSBcInRyZWVpdGVtXCIpIHtcclxuICAgICAgICAgICAgICAgIHRpID0gbmV3IEZhY2V0VHJlZUl0ZW0oZWxlbSwgdHJlZSwgZ3JvdXApO1xyXG4gICAgICAgICAgICAgICAgdGkuaW5pdCgpO1xyXG4gICAgICAgICAgICAgICAgdHJlZVxyXG4gICAgICAgICAgICAgICAgICAgIC50cmVlaXRlbXNcclxuICAgICAgICAgICAgICAgICAgICAucHVzaCh0aSk7XHJcbiAgICAgICAgICAgICAgICB0cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpcnN0Q2hhcnNcclxuICAgICAgICAgICAgICAgICAgICAucHVzaCh0aS5sYWJlbC5zdWJzdHJpbmcoMCwgMSkudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmluZFRyZWVpdGVtcyhlbGVtLCB0cmVlLCB0aSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxlbSA9IGVsZW0ubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaW5pdCA9ICgpID0+IHtcclxuICAgICAgICAvLyBpbml0aWFsaXplIHBvcCB1cCBtZW51c1xyXG4gICAgICAgIGlmICghdGhpcy50cmVlRG9tTm9kZS5nZXRBdHRyaWJ1dGUoXCJyb2xlXCIpKSB7XHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgIC50cmVlRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJ0cmVlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQb3B1bGF0ZSBhbGwgVHJlZSBJdGVtc1xyXG4gICAgICAgIHRoaXMuZmluZFRyZWVpdGVtcyh0aGlzLnRyZWVEb21Ob2RlLCB0aGlzLCBmYWxzZSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSBWaXNpYmxlIFRyZWUgSXRlbXNcclxuICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVUcmVlaXRlbXMoKTtcclxuXHJcbiAgICAgICAgLy8gU2V0IHRhYiBJbmRleCBvZiBmaXJzdCB0cmVlIGl0ZW0uXHJcbiAgICAgICAgdGhpcy5maXJzdFRyZWVpdGVtLnRyZWVJdGVtRG9tTm9kZS50YWJJbmRleCA9IDA7XHJcblxyXG4gICAgICAgIC8vIEV2ZW50IEhhbmRsZXJzXHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUFsbE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY29sbGFwc2VBbGxJdGVtcyk7XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxOb2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmV4cGFuZEFsbEl0ZW1zKTtcclxuICAgICAgICB0aGlzLnNlYXJjaEJveE5vZGUuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuaGFuZGxlU2VhcmNoRm9yRmlsdGVycyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5zZXRGb2N1c1RvU2VhcmNoQm94KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBkZXN0cm95ID0gKCkgPT4ge1xyXG4gICAgICAgIERvbVV0aWxzLm9mZih0aGlzLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuc2V0Rm9jdXNUb1NlYXJjaEJveCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0Rm9jdXNUb1NlYXJjaEJveCA9IChldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtcImtleWRvd25cIl0pID0+IHtcclxuICAgICAgICBpZiAoZXZlbnQuYWx0S2V5ICAmJiAgZXZlbnQua2V5ID09PSBcImZcIikge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEJveE5vZGUuZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0Rm9jdXNUb0l0ZW0gPSAodHJlZWl0ZW06IEZhY2V0VHJlZUl0ZW0sIGRvbnRTZXRmb2N1cz86IGJvb2xlYW4pID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICh0aSA9PT0gdHJlZWl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRpLnRyZWVJdGVtRG9tTm9kZS50YWJJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRvbnRTZXRmb2N1cykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGkudHJlZUl0ZW1Eb21Ob2RlLnRhYkluZGV4ID0gLTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0Rm9jdXNUb0ZpcnN0VmlzaWJsZSA9IChkb250U2V0Zm9jdXM/OiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgZm9yIChjb25zdCB0aSBvZiB0aGlzLnRyZWVpdGVtcykge1xyXG4gICAgICAgICAgICBpZiAodGkuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEZvY3VzVG9JdGVtKHRpLCBkb250U2V0Zm9jdXMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc2V0Rm9jdXNUb05leHRJdGVtID0gKGN1cnJlbnRJdGVtOiBGYWNldFRyZWVJdGVtKSA9PiB7XHJcbiAgICAgICAgbGV0IG5leHRJdGVtO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAodGhpcy50cmVlaXRlbXMubGVuZ3RoIC0gMSk7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpID0gdGhpcy50cmVlaXRlbXNbaV07XHJcbiAgICAgICAgICAgIGlmICh0aSA9PT0gY3VycmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aS5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIG5leHRJdGVtID0gdGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5leHRJdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNUb0l0ZW0obmV4dEl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Rm9jdXNUb1ByZXZpb3VzSXRlbSA9IChjdXJyZW50SXRlbTogRmFjZXRUcmVlSXRlbSkgPT4ge1xyXG4gICAgICAgIGxldCBwcmV2SXRlbTtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICh0aSA9PT0gY3VycmVudEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aS5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHByZXZJdGVtID0gdGk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHByZXZJdGVtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Rm9jdXNUb0l0ZW0ocHJldkl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Rm9jdXNUb1BhcmVudEl0ZW0gPSAoY3VycmVudEl0ZW06IEZhY2V0VHJlZUl0ZW0pID0+IHtcclxuICAgICAgICBpZiAoY3VycmVudEl0ZW0uZ3JvdXBUcmVlaXRlbSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldEZvY3VzVG9JdGVtKGN1cnJlbnRJdGVtLmdyb3VwVHJlZWl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Rm9jdXNUb0ZpcnN0SXRlbSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNldEZvY3VzVG9JdGVtKHRoaXMuZmlyc3RUcmVlaXRlbSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldEZvY3VzVG9MYXN0SXRlbSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLnNldEZvY3VzVG9JdGVtKHRoaXMubGFzdFRyZWVpdGVtKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXhwYW5kVHJlZWl0ZW0gPSAoY3VycmVudEl0ZW06IEZhY2V0VHJlZUl0ZW0sIG5vdGlmeT86IGJvb2xlYW4pID0+IHtcclxuICAgICAgICAvLyBDaGVjayBpZiBUcmVlIEl0ZW0gaXMgZXhwYW5kYWJsZVxyXG4gICAgICAgIGlmIChjdXJyZW50SXRlbS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKGN1cnJlbnRJdGVtLnRyZWVJdGVtRG9tTm9kZSwgXCJ0cnVlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUV4cGFuc2lvbkljb24oY3VycmVudEl0ZW0sIHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVUcmVlaXRlbXMobm90aWZ5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUFsbE5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBleHBhbmRBbGxTaWJsaW5nSXRlbXMgPSAoY3VycmVudEl0ZW06IEZhY2V0VHJlZUl0ZW0pID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICgodGkuZ3JvdXBUcmVlaXRlbSA9PT0gY3VycmVudEl0ZW0uZ3JvdXBUcmVlaXRlbSkgJiYgdGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZFRyZWVpdGVtKHRpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZXhwYW5kQWxsSXRlbXMgPSAoKSA9PiB7XHJcbiAgICAgICAgZm9yIChjb25zdCB0aSBvZiB0aGlzLnRyZWVpdGVtcykge1xyXG4gICAgICAgICAgICBpZiAodGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZFRyZWVpdGVtKHRpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbGxhcHNlQWxsTm9kZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB0aGlzLmV4cGFuZEFsbE5vZGUuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJ0cnVlXCIpO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VBbGxOb2RlLmZvY3VzKCk7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlDb2xsYXBzZUFuZEV4cGFuc2lvbigpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNvbGxhcHNlQWxsSXRlbXMgPSAoKSA9PiB7XHJcbiAgICAgICAgZm9yIChjb25zdCB0aSBvZiB0aGlzLnRyZWVpdGVtcykge1xyXG4gICAgICAgICAgICBpZiAodGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlVHJlZWl0ZW0odGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZXhwYW5kQWxsTm9kZS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICB0aGlzLmNvbGxhcHNlQWxsTm9kZS5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxOb2RlLmZvY3VzKCk7XHJcbiAgICAgICAgdGhpcy5ub3RpZnlDb2xsYXBzZUFuZEV4cGFuc2lvbigpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGNvbGxhcHNlQWxsU2libGluZ0l0ZW1zID0gKGN1cnJlbnRJdGVtOiBGYWNldFRyZWVJdGVtKSA9PiB7XHJcbiAgICAgICAgZm9yIChjb25zdCB0aSBvZiB0aGlzLnRyZWVpdGVtcykge1xyXG4gICAgICAgICAgICBpZiAoKHRpLmdyb3VwVHJlZWl0ZW0gPT09IGN1cnJlbnRJdGVtLmdyb3VwVHJlZWl0ZW0pICYmIHRpLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZVRyZWVpdGVtKHRpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm5vdGlmeUNvbGxhcHNlQW5kRXhwYW5zaW9uKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgY29sbGFwc2VUcmVlaXRlbSA9IChjdXJyZW50SXRlbTogRmFjZXRUcmVlSXRlbSwgbm90aWZ5PzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgIGxldCBncm91cFRyZWVpdGVtOiBGYWNldFRyZWVJdGVtO1xyXG4gICAgICAgIGlmIChjdXJyZW50SXRlbS5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgZ3JvdXBUcmVlaXRlbSA9IGN1cnJlbnRJdGVtO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdyb3VwVHJlZWl0ZW0gPSBjdXJyZW50SXRlbS5ncm91cFRyZWVpdGVtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGdyb3VwVHJlZWl0ZW0pIHtcclxuICAgICAgICAgICAgRG9tVXRpbHMuc2V0QXJpYUV4cGFuZGVkKGdyb3VwVHJlZWl0ZW0udHJlZUl0ZW1Eb21Ob2RlLCBcImZhbHNlXCIpO1xyXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUV4cGFuc2lvbkljb24oZ3JvdXBUcmVlaXRlbSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVUcmVlaXRlbXMobm90aWZ5KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRGb2N1c1RvSXRlbShncm91cFRyZWVpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb2xsYXBzZUFsbE5vZGUucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XHJcbiAgICAgICAgdGhpcy5leHBhbmRBbGxOb2RlLnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHRvZ2dsZUV4cGFuc2lvbkljb24gPSAoZ3JvdXBUcmVlaXRlbTogRmFjZXRUcmVlSXRlbSwgY3VycmVudEV4cGFuZGVkOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaWNvbk5vZGVMaXN0ID0gZ3JvdXBUcmVlaXRlbS50cmVlSXRlbURvbU5vZGUucXVlcnlTZWxlY3RvckFsbChcIi5leHBhbnNpb24taWNvblwiKTtcclxuICAgICAgICBsZXQgaWNvbk5vZGU6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmICggaWNvbk5vZGVMaXN0ICYmIGljb25Ob2RlTGlzdC5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgIGljb25Ob2RlID0gaWNvbk5vZGVMaXN0WzBdIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWN1cnJlbnRFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICBpY29uTm9kZS5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICAgICAgaWNvbk5vZGUuY2xhc3NMaXN0LmFkZChcImd1aS1pY29uLWNoZXZyb24tZG93blwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpY29uTm9kZS5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWljb24tY2hldnJvbi1kb3duXCIpO1xyXG4gICAgICAgICAgICBpY29uTm9kZS5jbGFzc0xpc3QuYWRkKFwiZ3VpLWljb24tY2hldnJvbi11cFwiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgdXBkYXRlVmlzaWJsZVRyZWVpdGVtcyA9IChub3RpZnk/OiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgdGhpcy5maXJzdFRyZWVpdGVtID0gdGhpcy50cmVlaXRlbXNbMF07XHJcbiAgICAgICAgZm9yIChjb25zdCB0aSBvZiB0aGlzLnRyZWVpdGVtcykge1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gdGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmICggdGkudHJlZUl0ZW1Eb21Ob2RlLmNsYXNzTGlzdC5jb250YWlucyhcImd1aS1oaWRkZW5cIilcclxuICAgICAgICAgICAgICAgIHx8IHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJndWktaGlkZGVuXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aGlsZSAocGFyZW50ICYmIChwYXJlbnQgIT09IHRoaXMudHJlZURvbU5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50LmdldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIikgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRpLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0VHJlZWl0ZW0gPSB0aTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIG5vdGlmeSApIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlDb2xsYXBzZUFuZEV4cGFuc2lvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0Rm9jdXNCeUZpcnN0Q2hhcmFjdGVyID0gKGN1cnJlbnRJdGVtLCBjaGFyKSA9PiB7XHJcbiAgICAgICAgbGV0IHN0YXJ0O1xyXG4gICAgICAgIGxldCBpbmRleDtcclxuICAgICAgICBjaGFyID0gY2hhci50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAvLyBHZXQgc3RhcnQgaW5kZXggZm9yIHNlYXJjaCBiYXNlZCBvbiBwb3NpdGlvbiBvZiBjdXJyZW50SXRlbVxyXG4gICAgICAgIHN0YXJ0ID0gdGhpc1xyXG4gICAgICAgICAgICAudHJlZWl0ZW1zXHJcbiAgICAgICAgICAgIC5pbmRleE9mKGN1cnJlbnRJdGVtKSArIDE7XHJcbiAgICAgICAgaWYgKHN0YXJ0ID09PSB0aGlzLnRyZWVpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgc3RhcnQgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgcmVtYWluaW5nIHNsb3RzIGluIHRoZSBtZW51XHJcbiAgICAgICAgaW5kZXggPSB0aGlzLmdldEluZGV4Rmlyc3RDaGFycyhzdGFydCwgY2hhcik7XHJcblxyXG4gICAgICAgIC8vIElmIG5vdCBmb3VuZCBpbiByZW1haW5pbmcgc2xvdHMsIGNoZWNrIGZyb20gYmVnaW5uaW5nXHJcbiAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuZ2V0SW5kZXhGaXJzdENoYXJzKDAsIGNoYXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSWYgbWF0Y2ggd2FzIGZvdW5kLi4uXHJcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRGb2N1c1RvSXRlbSh0aGlzLnRyZWVpdGVtc1tpbmRleF0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW5kZXhGaXJzdENoYXJzID0gKHN0YXJ0SW5kZXg6IG51bWJlciwgY2hhcjogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHN0YXJ0SW5kZXg7IGkgPCB0aGlzLmZpcnN0Q2hhcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudHJlZWl0ZW1zW2ldLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXIgPT09IHRoaXMuZmlyc3RDaGFyc1tpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAtMTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzaG93TW9yZVZhbHVlcyA9IChncm91cEl0ZW06IEZhY2V0VHJlZUl0ZW0pID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoIHRpLmdyb3VwVHJlZWl0ZW0gPT09IGdyb3VwSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJndWktaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc1Nob3dMZXNzTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aS50cmVlSXRlbURvbU5vZGUuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aS5pc1Nob3dNb3JlTGluaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKFwiZ3VpLWhpZGRlblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVUcmVlaXRlbXMoKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBzaG93TGVzc1ZhbHVlcyA9IChncm91cEl0ZW06IEZhY2V0VHJlZUl0ZW0pID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICBpZiAoIHRpLmdyb3VwVHJlZWl0ZW0gPT09IGdyb3VwSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJleHRyYS1maWx0ZXJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZChcImd1aS1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGkuaXNTaG93TGVzc0xpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LmFkZChcImd1aS1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGkuaXNTaG93TW9yZUxpbmspIHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShcImd1aS1oaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGkudHJlZUl0ZW1Eb21Ob2RlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy51cGRhdGVWaXNpYmxlVHJlZWl0ZW1zKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaGFuZGxlTGFiZWxDaGFuZ2UgPSAoY3VycmVudEl0ZW06IEZhY2V0VHJlZUl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBjaGVja2VkID0gRG9tVXRpbHMudG9nZ2xlTGFiZWwoY3VycmVudEl0ZW0udHJlZUl0ZW1Eb21Ob2RlIGFzICBIVE1MTGFiZWxFbGVtZW50KTtcclxuICAgICAgICBjb25zdCBhY3Rpb24gPSBjaGVja2VkID8gRmlsdGVyQWN0aW9uVHlwZS5BZGQgOiBGaWx0ZXJBY3Rpb25UeXBlLk1pbnVzO1xyXG4gICAgICAgIGN1cnJlbnRJdGVtLnRyZWVJdGVtRG9tTm9kZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLXNlbGVjdGVkXCIsIGNoZWNrZWQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uRmlsdGVyQ2hhbmdlKGN1cnJlbnRJdGVtLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5sYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbS5kYXRhVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEl0ZW0uaXNSYW5nZSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgbm90aWZ5Q29sbGFwc2VBbmRFeHBhbnNpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZztcclxuICAgICAgICBjb25zdCBwdWJsaXNoOiBBcnJheTx7a2V5OiBzdHJpbmcsIGNvbGxhcHNlZDogYm9vbGVhbn0+ID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCB0aSBvZiB0aGlzLnRyZWVpdGVtcykge1xyXG4gICAgICAgICAgICBpZiAoIHRpLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmYWNldCBvZiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBmYWNldC5pZCA9PT0gdGkuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXQuY29sbGFwc2VkID0gIXRpLmlzRXhwYW5kZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHVibGlzaC5wdXNoKHtrZXk6IGZhY2V0LmlkLCBjb2xsYXBzZWQ6IGZhY2V0LmNvbGxhcHNlZH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uQ29sbGFwc2VUb2dnbGUocHVibGlzaCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaGFuZGxlUGluVW5waW4gPSAoZXZlbnQ6IGFueSwgcGluOiBib29sZWFuLCBpZDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5mYWNldENvbmZpZztcclxuICAgICAgICBmb3IgKGNvbnN0IGZhY2V0IG9mIGRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKCBmYWNldC5pZCA9PT0gaWQgKSB7XHJcbiAgICAgICAgICAgICAgICBmYWNldC5waW5uZWQgPSBwaW47XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZhY2V0LnJlUmVuZGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uUGluVW5waW4oaWQsIHBpbik7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaGFuZGxlU2VhcmNoRm9yRmlsdGVycyA9IChldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtcImtleXVwXCJdKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICAgICAgICBjb25zdCBwYXJlbnQgPSBpbnB1dC5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgIGNvbnN0IHZhbCA9IGlucHV0LnZhbHVlLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgaWYgKCB2YWwgPT09IHRoaXMubGFzdElucHV0VmFsdWUgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sYXN0SW5wdXRWYWx1ZSA9IHZhbDtcclxuICAgICAgICBsZXQgaW5wdXRWYWx1ZUJsYW5rID0gZmFsc2U7XHJcbiAgICAgICAgcGFyZW50LmNsYXNzTGlzdC5hZGQoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09IG51bGwgfHwgdmFsLnRyaW0oKSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICBpbnB1dFZhbHVlQmxhbmsgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKCAhaW5wdXRWYWx1ZUJsYW5rICkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVOb3RCbGFua0lucHV0U2VhcmNoKHZhbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUJsYW5rSW5wdXRTZWFyY2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVZpc2libGVUcmVlaXRlbXMoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRGb2N1c1RvRmlyc3RWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICBwYXJlbnQuY2xhc3NMaXN0LnJlbW92ZShcImxvYWRpbmdcIik7XHJcbiAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgLy8gY29uc3QgbWF0Y2hlZEdyb3VwSXRlbTogRmFjZXRUcmVlSXRlbVtdID0gW107XHJcbiAgICAgICAgLy8gY29uc3Qgbm90TWF0Y2hlZEdyb3VwSXRlbTogRmFjZXRUcmVlSXRlbVtdID0gW107XHJcbiAgICAgICAgLy8gZm9yIChjb25zdCB0aSBvZiB0aGlzLnRyZWVpdGVtcykge1xyXG4gICAgICAgIC8vICAgICBpZiAodGkuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAodGkubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPiAtMSkge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIG1hdGNoZWRHcm91cEl0ZW0ucHVzaCh0aSk7XHJcbiAgICAgICAgLy8gICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIG5vdE1hdGNoZWRHcm91cEl0ZW0ucHVzaCh0aSk7XHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgaWYgKHRpLmlzU2hvd0xlc3NMaW5rIHx8IHRpLmlzU2hvd01vcmVMaW5rICkge1xyXG4gICAgICAgIC8vICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgICAgICBEb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgLy8gICAgIGlmICh0aS5pc1Nob3dMZXNzTGluayB8fCB0aS5pc1Nob3dNb3JlTGluaykge1xyXG4gICAgICAgIC8vICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgaWYgKCBtYXRjaGVkR3JvdXBJdGVtLmluZGV4T2YodGkpID4gLTEgfHwgbWF0Y2hlZEdyb3VwSXRlbS5pbmRleE9mKHRpLmdyb3VwVHJlZWl0ZW0pID4gLTEgKSB7XHJcbiAgICAgICAgLy8gICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgICAgICAgRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAoIXRpLmlzRXhwYW5kYWJsZSApIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICBpZiAodGkudmFsdWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPiAtMSApIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZWRHcm91cEl0ZW0uaW5kZXhPZih0aS5ncm91cFRyZWVpdGVtKSA8PSAtMSApIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG1hdGNoZWRHcm91cEl0ZW0ucHVzaCh0aS5ncm91cFRyZWVpdGVtKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBjb25zdCBub3RNYXRjaGVkSW5kZXggPSBub3RNYXRjaGVkR3JvdXBJdGVtLmluZGV4T2YodGkuZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgIGlmIChub3RNYXRjaGVkSW5kZXggPiAtMSApIHtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgIG5vdE1hdGNoZWRHcm91cEl0ZW0uc2xpY2Uobm90TWF0Y2hlZEluZGV4LCBub3RNYXRjaGVkSW5kZXggKyAxKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICBEb21VdGlscy5zaG93KHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAvLyAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgRG9tVXRpbHMuaGlkZSh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vIGZvciAoY29uc3QgbWcgb2YgbWF0Y2hlZEdyb3VwSXRlbSkge1xyXG4gICAgICAgIC8vICAgICBtZy5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIC8vICAgICBEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQobWcudHJlZUl0ZW1Eb21Ob2RlLCBcInRydWVcIik7XHJcbiAgICAgICAgLy8gICAgIERvbVV0aWxzLnNob3cobWcudHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgLy8gZm9yIChjb25zdCBubWcgb2Ygbm90TWF0Y2hlZEdyb3VwSXRlbSkge1xyXG4gICAgICAgIC8vICAgICBubWcuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgIERvbVV0aWxzLnNldEFyaWFFeHBhbmRlZChubWcudHJlZUl0ZW1Eb21Ob2RlLCBcImZhbHNlXCIpO1xyXG4gICAgICAgIC8vICAgICBEb21VdGlscy5oaWRlKG5tZy50cmVlSXRlbURvbU5vZGUpO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH1cclxuICAgIHByaXZhdGUgaGFuZGxlQmxhbmtJbnB1dFNlYXJjaCA9ICgpID0+IHtcclxuICAgICAgICAvLyBIYW5kbGUgYmxhbmsgU2VhcmNoIGhlcmVcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICh0aS5pZ25vcmVGb3JTZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGV4cGFuZGFibGVcclxuICAgICAgICAgICAgaWYgKHRpLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIERvbVV0aWxzLnNob3codGkudHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICAgICAgICAgIGlmICggdGkudHJlZUl0ZW1Eb21Ob2RlLmNsYXNzTGlzdC5jb250YWlucyhcImNvbGxhcHNlZFwiKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQodGkudHJlZUl0ZW1Eb21Ob2RlLCBcInRydWVcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIERvbVV0aWxzLnNldEFyaWFFeHBhbmRlZCh0aS50cmVlSXRlbURvbU5vZGUsIFwiZmFsc2VcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCEgdGkuaXNFeHBhbmRhYmxlICkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCAhdGkuaXNTaG93TW9yZUxpbmsgJiYgIXRpLmlzU2hvd0xlc3NMaW5rICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzRXh0cmFGaWx0ZXIgPSBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZXh0cmEtZmlsdGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0V4dHJhRmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aS5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlscy5zaG93KHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRpLmlzU2hvd01vcmVMaW5rICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIHRpLmlzU2hvd0xlc3NMaW5rICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIERvbVV0aWxzLmhpZGUodGkudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBoYW5kbGVOb3RCbGFua0lucHV0U2VhcmNoID0gKHZhbDogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgbGV0IGdyb3VwSXRlbTogRmFjZXRUcmVlSXRlbTtcclxuICAgICAgICBsZXQgZ3JvdXBJdGVtTWF0Y2hlZDogYm9vbGVhbjtcclxuICAgICAgICBsZXQgY2hpbGRJdGVtTWF0Y2hlZDogYm9vbGVhbjtcclxuICAgICAgICBmb3IgKGNvbnN0IHRpIG9mIHRoaXMudHJlZWl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGlmICh0aS5pZ25vcmVGb3JTZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aS5pc1Nob3dMZXNzTGluayB8fCB0aS5pc1Nob3dNb3JlTGluayApIHtcclxuICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgRG9tVXRpbHMuaGlkZSh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBleHBhbmRhYmxlXHJcbiAgICAgICAgICAgIGlmICh0aS5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBncm91cCBsZXZlbCBWYWx1ZXNcclxuICAgICAgICAgICAgICAgIGdyb3VwSXRlbSA9IHRpO1xyXG4gICAgICAgICAgICAgICAgZ3JvdXBJdGVtTWF0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY2hpbGRJdGVtTWF0Y2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBEb21VdGlscy5zZXRBcmlhRXhwYW5kZWQodGkudHJlZUl0ZW1Eb21Ob2RlLCBcImZhbHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgRG9tVXRpbHMuaGlkZSh0aS50cmVlSXRlbURvbU5vZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGdyb3VwIGlzIG1hdGNoaW5nXHJcbiAgICAgICAgICAgICAgICBpZiAodGkubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwSXRlbU1hdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIElmIGdyb3VwIGlzIG1hdGNoaW5nIGV4cGFuZCB0aGUgZ3JvdXBcclxuICAgICAgICAgICAgaWYgKCBncm91cEl0ZW1NYXRjaGVkIHx8IGNoaWxkSXRlbU1hdGNoZWQgKSB7XHJcbiAgICAgICAgICAgICAgICBncm91cEl0ZW0uaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIERvbVV0aWxzLnNldEFyaWFFeHBhbmRlZChncm91cEl0ZW0udHJlZUl0ZW1Eb21Ob2RlLCBcInRydWVcIik7XHJcbiAgICAgICAgICAgICAgICBEb21VdGlscy5zaG93KGdyb3VwSXRlbS50cmVlSXRlbURvbU5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEZvciBDaGlsZCBMaW5rc1xyXG4gICAgICAgICAgICBpZiAoICF0aS5pc0V4cGFuZGFibGUgJiYgdGkuZ3JvdXBUcmVlaXRlbSA9PT0gZ3JvdXBJdGVtICkge1xyXG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgZ3JvdXAgbWF0Y2hlcyBzZXQgdGhlIHZpc2libGl0eSB0byB0cnVlIGV4Y2VwdCBzaG93IG1vcmUgb3IgbGVzcyBsaW5rc1xyXG4gICAgICAgICAgICAgICAgaWYgKCBncm91cEl0ZW1NYXRjaGVkICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGdyb3VwIG5vdCBtYXRjaGVkIGNoZWNrIGlmIGNoaWxkIG1hdGNoZXNcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGkubGFiZWwudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPiAtMSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGkuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRG9tVXRpbHMuc2hvdyh0aS50cmVlSXRlbURvbU5vZGUucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkSXRlbU1hdGNoZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBEb21VdGlscy5oaWRlKHRpLnRyZWVJdGVtRG9tTm9kZS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9hMTF5L0ZhY2V0VHJlZS50cyIsImltcG9ydCB7IEZhY2V0Q29uZmlnU3RvcmUgfSBmcm9tIFwiLi8uLi9jb25maWcvRmFjZXRDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBEb21VdGlscyB9IGZyb20gXCIuL0RvbVV0aWxzXCI7XHJcbmltcG9ydCB7IEZhY2V0VHJlZSB9IGZyb20gXCIuL0ZhY2V0VHJlZVwiO1xyXG5pbXBvcnQgeyBLZXlDb2RlcyB9IGZyb20gXCIuL0tleUNvZGVzXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgRmFjZXRUcmVlSXRlbSB7XHJcbiAgICBwdWJsaWMgdHJlZTogRmFjZXRUcmVlO1xyXG4gICAgcHVibGljIGdyb3VwVHJlZWl0ZW06IEZhY2V0VHJlZUl0ZW07XHJcbiAgICBwdWJsaWMgcGluVW5QaW5Eb21Ob2RlOiBIVE1MRWxlbWVudDtcclxuICAgIHB1YmxpYyB0cmVlSXRlbURvbU5vZGU6IEhUTUxFbGVtZW50O1xyXG4gICAgcHVibGljIGxhYmVsOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgc3RvcERlZmF1bHRDbGljazogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc0V4cGFuZGFibGU6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaXNWaXNpYmxlOiBib29sZWFuO1xyXG4gICAgcHVibGljIGluR3JvdXA6IGJvb2xlYW47XHJcbiAgICBwdWJsaWMgaWQ6IHN0cmluZztcclxuICAgIC8vIHB1YmxpYyB2YWx1ZTogc3RyaW5nO1xyXG4gICAgcHVibGljIGRhdGFUeXBlOiBzdHJpbmc7XHJcbiAgICBwdWJsaWMgaXNSYW5nZTogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc1Nob3dNb3JlTGluazogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc1Nob3dMZXNzTGluazogYm9vbGVhbjtcclxuICAgIHB1YmxpYyBpc0xhYmVsOiBib29sZWFuO1xyXG4gICAgcHVibGljIGlnbm9yZUZvclNlYXJjaDogYm9vbGVhbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihub2RlOiBIVE1MRWxlbWVudCwgdHJlZTogRmFjZXRUcmVlLCBncm91cDogRmFjZXRUcmVlSXRlbSkge1xyXG4gICAgICAgIG5vZGUudGFiSW5kZXggPSAtMTtcclxuICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xyXG4gICAgICAgIHRoaXMuZ3JvdXBUcmVlaXRlbSA9IGdyb3VwO1xyXG4gICAgICAgIHRoaXMudHJlZUl0ZW1Eb21Ob2RlID0gbm9kZTtcclxuICAgICAgICAvLyB0aGlzLmxhYmVsID0gbm9kZVxyXG4gICAgICAgIC8vICAgICAudGV4dENvbnRlbnRcclxuICAgICAgICAvLyAgICAgLnRyaW0oKTtcclxuICAgICAgICB0aGlzLnN0b3BEZWZhdWx0Q2xpY2sgPSBmYWxzZTtcclxuICAgICAgICAvLyBpZiAobm9kZS5nZXRBdHRyaWJ1dGUoXCJhcmlhLWxhYmVsXCIpKSB7XHJcbiAgICAgICAgLy8gICAgIHRoaXMubGFiZWwgPSBub2RlXHJcbiAgICAgICAgLy8gICAgICAgICAuZ2V0QXR0cmlidXRlKFwiYXJpYS1sYWJlbFwiKVxyXG4gICAgICAgIC8vICAgICAgICAgLnRyaW0oKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgY29uc3QgZmlyc3RFbSA9IHRoaXMudHJlZUl0ZW1Eb21Ob2RlLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgIGlmICggZmlyc3RFbSApIHtcclxuICAgICAgICAgICAgdGhpcy5waW5VblBpbkRvbU5vZGUgPSBmaXJzdEVtLnF1ZXJ5U2VsZWN0b3IoXCIucGluLXVucGluLXNlbGVjdG9yXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlkID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF0dHItaWRcIik7XHJcbiAgICAgICAgdGhpcy5sYWJlbCA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdHRyLXZhbHVlXCIpO1xyXG4gICAgICAgIHRoaXMuZGF0YVR5cGUgPSBub2RlLmdldEF0dHJpYnV0ZShcImRhdGEtYXR0ci10eXBlXCIpO1xyXG4gICAgICAgIHRoaXMuaXNSYW5nZSA9IG5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1hdHRyLWlzUmFuZ2VcIikgPT09IFwidHJ1ZVwiO1xyXG4gICAgICAgIHRoaXMuaWdub3JlRm9yU2VhcmNoID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWF0dHItaWdub3JlRm9yU2VhcmNoXCIpID09PSBcInRydWVcIjtcclxuICAgICAgICB0aGlzLmlzU2hvd01vcmVMaW5rID0gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93LW1vcmUtbGlua1wiKTtcclxuICAgICAgICB0aGlzLmlzU2hvd0xlc3NMaW5rID0gbm9kZS5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93LWxlc3MtbGlua1wiKTtcclxuICAgICAgICB0aGlzLmlzTGFiZWwgPSBub2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJsYWJlbFwiO1xyXG4gICAgICAgIHRoaXMuaXNFeHBhbmRhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmluR3JvdXAgPSBmYWxzZTtcclxuICAgICAgICBpZiAoZ3JvdXApIHtcclxuICAgICAgICAgICAgdGhpcy5pbkdyb3VwID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGVsZW0gPSBub2RlLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgIHdoaWxlIChlbGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJ1bFwiKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJncm91cFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNFeHBhbmRhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsZW0gPSBlbGVtLm5leHRFbGVtZW50U2libGluZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGluaXQgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy50cmVlSXRlbURvbU5vZGUudGFiSW5kZXggPSAtMTtcclxuICAgICAgICBpZiAoIXRoaXMudHJlZUl0ZW1Eb21Ob2RlLmdldEF0dHJpYnV0ZShcInJvbGVcIikpIHtcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgLnNldEF0dHJpYnV0ZShcInJvbGVcIiwgXCJ0cmVlaXRlbVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZUtleWRvd24uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAudHJlZUl0ZW1Eb21Ob2RlXHJcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzLmhhbmRsZUZvY3VzLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImJsdXJcIiwgdGhpcy5oYW5kbGVCbHVyLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgLmZpcnN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCB0aGlzLmhhbmRsZU1vdXNlT3Zlci5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgLmZpcnN0RWxlbWVudENoaWxkXHJcbiAgICAgICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIHRoaXMuaGFuZGxlTW91c2VPdXQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgLnRyZWVJdGVtRG9tTm9kZVxyXG4gICAgICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgdGhpcy5oYW5kbGVNb3VzZU92ZXIuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgIC50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgdGhpcy5oYW5kbGVNb3VzZU91dC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGluVW5QaW5Eb21Ob2RlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGluVW5QaW5Eb21Ob2RlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZVVuUGluQ2xpY2spO1xyXG4gICAgICAgICAgICB0aGlzLnBpblVuUGluRG9tTm9kZS5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmhhbmRsZVVuUGluS2V5dXApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZGVzdHJveSA9ICgpID0+IHtcclxuICAgICAgICBjb25zdCBuZXdOb2RlID0gdGhpcy50cmVlSXRlbURvbU5vZGUuY2xvbmVOb2RlKHRydWUpO1xyXG4gICAgICAgIHRoaXMudHJlZUl0ZW1Eb21Ob2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5ld05vZGUsIHRoaXMudHJlZUl0ZW1Eb21Ob2RlKTtcclxuICAgICAgICB0aGlzLnRyZWVJdGVtRG9tTm9kZSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGlzRXhwYW5kZWQgPSAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBEb21VdGlscy5pc0FyaWFFeHBhbmRlZCh0aGlzLnRyZWVJdGVtRG9tTm9kZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBoYW5kbGVVblBpbkNsaWNrID0gKGV2ZW50OiBIVE1MRWxlbWVudEV2ZW50TWFwW1wiY2xpY2tcIl0pID0+IHtcclxuICAgICAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ1bnBpbi1pY29uXCIpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJlZS5oYW5kbGVQaW5VbnBpbihldmVudCwgZmFsc2UsIHRoaXMuaWQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudHJlZS5oYW5kbGVQaW5VbnBpbihldmVudCwgdHJ1ZSwgdGhpcy5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGhhbmRsZVVuUGluS2V5dXAgPSAoZXZlbnQ6IEhUTUxFbGVtZW50RXZlbnRNYXBbXCJrZXlkb3duXCJdKSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICBjYXNlIEtleUNvZGVzLlNQQUNFOlxyXG4gICAgICAgICAgICBjYXNlIEtleUNvZGVzLlJFVFVSTjpcclxuICAgICAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidW5waW4taWNvblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJlZS5oYW5kbGVQaW5VbnBpbihldmVudCwgZmFsc2UsIHRoaXMuaWQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyZWUuaGFuZGxlUGluVW5waW4oZXZlbnQsIHRydWUsIHRoaXMuaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgaGFuZGxlS2V5ZG93biA9IChldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtcImtleWRvd25cIl0pID0+IHtcclxuICAgICAgICBjb25zdCB0Z3QgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xyXG4gICAgICAgIGxldCBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgY29uc3QgY2hhciA9IGV2ZW50LmtleTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaXNQcmludGFibGVDaGFyYWN0ZXIoc3RyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHIubGVuZ3RoID09PSAxICYmIHN0ci5tYXRjaCgvXFxTLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHByaW50YWJsZUNoYXJhY3RlcihpdGVtOiBGYWNldFRyZWVJdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChjaGFyID09PSBcIipcIikge1xyXG4gICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgLmV4cGFuZEFsbFNpYmxpbmdJdGVtcyhpdGVtKTtcclxuICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzUHJpbnRhYmxlQ2hhcmFjdGVyKGNoYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Rm9jdXNCeUZpcnN0Q2hhcmFjdGVyKGl0ZW0sIGNoYXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN0b3BEZWZhdWx0Q2xpY2sgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LmFsdEtleSB8fCBldmVudC5jdHJsS2V5IHx8IGV2ZW50Lm1ldGFLZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGV2ZW50LnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSBLZXlDb2Rlcy5TUEFDRSB8fCBldmVudC5rZXlDb2RlID09PSBLZXlDb2Rlcy5SRVRVUk4pIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wRGVmYXVsdENsaWNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc1ByaW50YWJsZUNoYXJhY3RlcihjaGFyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaW50YWJsZUNoYXJhY3Rlcih0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQua2V5Q29kZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlcy5TUEFDRTpcclxuICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXMuUkVUVVJOOlxyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsYXBzZVRyZWVpdGVtKHRoaXMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4cGFuZFRyZWVpdGVtKHRoaXMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmlzU2hvd01vcmVMaW5rICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNob3dNb3JlVmFsdWVzKHRoaXMuZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmlzU2hvd0xlc3NMaW5rICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNob3dMZXNzVmFsdWVzKHRoaXMuZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCB0aGlzLmlzTGFiZWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaGFuZGxlTGFiZWxDaGFuZ2UodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlcy5VUDpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c1RvUHJldmlvdXNJdGVtKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXMuRE9XTjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRGb2N1c1RvTmV4dEl0ZW0odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgY2FzZSBLZXlDb2Rlcy5SSUdIVDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFeHBhbmRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Rm9jdXNUb05leHRJdGVtKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmV4cGFuZFRyZWVpdGVtKHRoaXMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXMuTEVGVDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGFibGUgJiYgdGhpcy5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsYXBzZVRyZWVpdGVtKHRoaXMsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbkdyb3VwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0Rm9jdXNUb1BhcmVudEl0ZW0odGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlIEtleUNvZGVzLkhPTUU6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAudHJlZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0Rm9jdXNUb0ZpcnN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgS2V5Q29kZXMuRU5EOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEZvY3VzVG9MYXN0SXRlbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZsYWcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUHJpbnRhYmxlQ2hhcmFjdGVyKGNoYXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW50YWJsZUNoYXJhY3Rlcih0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZsYWcpIHtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYW5kbGVDbGljayA9IChldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtcImNsaWNrXCJdKSA9PiB7XHJcblxyXG4gICAgICAgIC8vIG9ubHkgcHJvY2VzcyBjbGljayBldmVudHMgdGhhdCBkaXJlY3RseSBoYXBwZW5lZCBvbiB0aGlzIHRyZWVpdGVtXHJcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPT0gdGhpcy50cmVlSXRlbURvbU5vZGVcclxuICAgICAgICAgICAgJiYgISBEb21VdGlscy5pc1NlbGZPckRlc2NlbmRhbnQodGhpcy50cmVlSXRlbURvbU5vZGUuZmlyc3RFbGVtZW50Q2hpbGQsIGV2ZW50LnRhcmdldCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuaXNFeHBhbmRhYmxlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbGxhcHNlVHJlZWl0ZW0odGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAuZXhwYW5kVHJlZWl0ZW0odGhpcywgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCB0aGlzLmlzU2hvd01vcmVMaW5rICkge1xyXG4gICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNob3dNb3JlVmFsdWVzKHRoaXMuZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmlzU2hvd0xlc3NMaW5rICkge1xyXG4gICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgIC50cmVlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNob3dMZXNzVmFsdWVzKHRoaXMuZ3JvdXBUcmVlaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCB0aGlzLmlzTGFiZWwgKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgLnRyZWVcclxuICAgICAgICAgICAgICAgICAgICAuaGFuZGxlTGFiZWxDaGFuZ2UodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBoYW5kbGVGb2N1cyA9IChldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtcImZvY3VzXCJdKSA9PiB7XHJcbiAgICAgICAgbGV0IG5vZGU6IEVsZW1lbnQgPSB0aGlzLnRyZWVJdGVtRG9tTm9kZTtcclxuICAgICAgICBpZiAodGhpcy5pc0V4cGFuZGFibGUpIHtcclxuICAgICAgICAgICAgbm9kZSA9IG5vZGUuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5vZGVcclxuICAgICAgICAgICAgLmNsYXNzTGlzdFxyXG4gICAgICAgICAgICAuYWRkKFwiZm9jdXNcIik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGhhbmRsZUJsdXIgPSBmdW5jdGlvbihldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtcImJsdXJcIl0pIHtcclxuICAgICAgICBsZXQgbm9kZSA9IHRoaXMudHJlZUl0ZW1Eb21Ob2RlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzRXhwYW5kYWJsZSkge1xyXG4gICAgICAgICAgICBub2RlID0gbm9kZS5maXJzdEVsZW1lbnRDaGlsZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbm9kZVxyXG4gICAgICAgICAgICAuY2xhc3NMaXN0XHJcbiAgICAgICAgICAgIC5yZW1vdmUoXCJmb2N1c1wiKTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGhhbmRsZU1vdXNlT3ZlciA9IChldmVudDogSFRNTEVsZW1lbnRFdmVudE1hcFtcIm1vdXNlb3ZlclwiXSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJob3ZlclwiKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaGFuZGxlTW91c2VPdXQgPSAoZXZlbnQ6IEhUTUxFbGVtZW50RXZlbnRNYXBbXCJtb3VzZW91dFwiXSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJob3ZlclwiKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2ExMXkvRmFjZXRUcmVlSXRlbS50cyIsImV4cG9ydCBjb25zdCBLZXlDb2RlcyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgUkVUVVJOOiAxMyxcclxuICAgIFNQQUNFOiAzMixcclxuICAgIFBBR0VVUDogMzMsXHJcbiAgICBQQUdFRE9XTjogMzQsXHJcbiAgICBFTkQ6IDM1LFxyXG4gICAgSE9NRTogMzYsXHJcbiAgICBMRUZUOiAzNyxcclxuICAgIFVQOiAzOCxcclxuICAgIFJJR0hUOiAzOSxcclxuICAgIERPV046IDQwLFxyXG59KTtcclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9hMTF5L0tleUNvZGVzLnRzIiwiaW1wb3J0IHtGaWx0ZXJBY3Rpb25UeXBlfSBmcm9tIFwiLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGVcIjtcbmltcG9ydCB7SUZhY2V0T3B0aW9uc30gZnJvbSBcIi4vSUZhY2V0T3B0aW9uc1wiO1xuXG5leHBvcnQgY2xhc3MgRmFjZXRDb25maWdTdG9yZSB7XG4gICAgcHJpdmF0ZSBvcHRpb25zOiBJRmFjZXRPcHRpb25zO1xuICAgIHByaXZhdGUgZGVmYXVsdEZhY2V0T3B0aW9uczogSUZhY2V0T3B0aW9ucyA9IHtcbiAgICAgICAgYW5pbWF0aW9uVGltZTogMjAwLFxuICAgICAgICBjb2xsYXBzZWQ6IGZhbHNlLFxuICAgICAgICBjb250YWluZXJFbGVtZW50OiBudWxsLFxuICAgICAgICBmYWNldENvbmZpZzogW10sXG4gICAgICAgIGlkUHJlZml4OiBNYXRoLmZsb29yKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwMDApLnRvU3RyaW5nKCksXG4gICAgICAgIG5vT2ZGYWNldFRvU2hvdzogNSxcbiAgICAgICAgLy8gZmFjZXRzOiBbXSxcbiAgICAgICAgb25Db2xsYXBzZVRvZ2dsZTogKGNvbGxhcHNlQ29uZmlnOiBbe2tleTogc3RyaW5nLCBjb2xsYXBzZWQ6IGJvb2xlYW59XSkgPT4ge1xuICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgIH0sXG4gICAgICAgIG9uRmlsdGVyQ2hhbmdlOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcsIGFjdGlvbjogRmlsdGVyQWN0aW9uVHlwZSk6IHZvaWQgPT4ge1xuICAgICAgICAgICAgLy8gSWdub3JlXG4gICAgICAgIH0sXG4gICAgICAgIG9uUGluVW5waW46IChrZXk6IHN0cmluZywgcGluOiBib29sZWFuKTogdm9pZCA9PiB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IElGYWNldE9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5leHRlbmRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgICBpZiAob3B0aW9ucy5jb250YWluZXJFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgUHJvdmlkZSBhIHZhbGlkIGNvbnRhaW5lciBFbGVtZW50IG9iamVjdFwiKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgZ2V0IE9wdGlvbnMoKTogSUZhY2V0T3B0aW9ucyB7cmV0dXJuIHRoaXMub3B0aW9uczsgfVxuICAgIHByaXZhdGUgZXh0ZW5kT3B0aW9ucyA9IChpbnB1dE9wdGlvbnM6IElGYWNldE9wdGlvbnMpOiBJRmFjZXRPcHRpb25zID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucyA9IGpRdWVyeS5leHRlbmQoe30sIHRoaXMuZGVmYXVsdEZhY2V0T3B0aW9ucywgaW5wdXRPcHRpb25zKTtcbiAgICB9XG59XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2NvbmZpZy9GYWNldENvbmZpZ1N0b3JlLnRzIiwiaW1wb3J0IHsgSUZpbHRlck9wdGlvbnMgfSBmcm9tIFwiLi4vY29uZmlnL0lGaWx0ZXJPcHRpb25zXCI7XHJcbmltcG9ydCB7IEhvdEtleXNGaWx0ZXJzSGFuZGxlciB9IGZyb20gXCIuLi9ldmVudGhhbmRsZXJzL0hvdEtleXNGaWx0ZXJzSGFuZGxlclwiO1xyXG5pbXBvcnQgeyBJRmFjZXQgfSBmcm9tIFwiLi4vbW9kZWxzL0lGYWNldFwiO1xyXG5pbXBvcnQgeyBGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvRmlsdGVyVGVtcGxhdGVTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IElGaWx0ZXJUZW1wbGF0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vc2VydmljZXMvSUZpbHRlclRlbXBsYXRlU2VydmljZVwiO1xyXG5pbXBvcnQgeyBGaWx0ZXJDb25maWdTdG9yZSB9IGZyb20gXCIuLy4uL2NvbmZpZy9GaWx0ZXJDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBGaWx0ZXJBY3Rpb25IYW5kbGVyLCBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vLi4vZXZlbnRoYW5kbGVyc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpbHRlciB7XHJcbiAgICBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGaWx0ZXJDb25maWdTdG9yZTtcclxuICAgIHByaXZhdGUgdGVtcGxhdGVTZXJ2aWNlOiBJRmlsdGVyVGVtcGxhdGVTZXJ2aWNlO1xyXG4gICAgcHJpdmF0ZSBmaWx0ZXJFbGVtZW50OiBKUXVlcnk7XHJcbiAgICBwcml2YXRlIGhhbmRsZXJDaGFpbjogSUV2ZW50SGFuZGxlcltdID0gW107XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJRmlsdGVyT3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUgPSAgbmV3IEZpbHRlckNvbmZpZ1N0b3JlKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudCA9IGpRdWVyeShvcHRpb25zLmNvbnRhaW5lckVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMudGVtcGxhdGVTZXJ2aWNlID0gbmV3IEZpbHRlclRlbXBsYXRlU2VydmljZSh0aGlzLmNvbmZpZ1N0b3JlKTtcclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbi5wdXNoKG5ldyBGaWx0ZXJBY3Rpb25IYW5kbGVyKHRoaXMuZmlsdGVyRWxlbWVudCwgdGhpcy5jb25maWdTdG9yZSkpO1xyXG4gICAgICAgIHRoaXMuaGFuZGxlckNoYWluLnB1c2gobmV3IEhvdEtleXNGaWx0ZXJzSGFuZGxlcigpKTtcclxuICAgICAgICB0aGlzLmhhbmRsZXJDaGFpbi5mb3JFYWNoKChoYW5kbGVyKSA9PiB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIuUmVnaXN0ZXJEb21IYW5kbGVyKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYmluZCA9ICAoZmlsdGVyczogSUZhY2V0W10pOiB2b2lkID0+IHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZmFjZXRTdWJIZWFkZXIgPSB0aGlzLnRlbXBsYXRlU2VydmljZS5iaW5kKGZpbHRlcnMpO1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlckVsZW1lbnQuaHRtbChmYWNldFN1YkhlYWRlcik7XHJcbiAgICAgICAgfSwgMSApO1xyXG4gICAgfVxyXG4gICAgcHVibGljIGRlc3Ryb3kgPSAgKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGlmICggdGhpcy5maWx0ZXJFbGVtZW50ICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyRWxlbWVudC5vZmYoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyQ2hhaW4uZm9yRWFjaCgoaGFuZGxlcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlciAhPT0gdW5kZWZpbmVkICYmIGhhbmRsZXIuZGVyZWdpc3RlciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmRlcmVnaXN0ZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvbWFpbi9GaWx0ZXIudHMiLCJpbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5jbGFzcyBIb3RLZXlzRmlsdGVyc0hhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcclxuXHJcbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGpRdWVyeShkb2N1bWVudCkub24oXCJrZXlkb3duXCIsIHRoaXMuZm9jdXNPblNlYXJjaCk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrID0gKGV2ZW50OiBhbnkpOiB2b2lkID0+IHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGRlUmVnaXN0ZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgalF1ZXJ5KGRvY3VtZW50KS5vZmYoXCJrZXlkb3duXCIsIHRoaXMuZm9jdXNPblNlYXJjaCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBmb2N1c09uU2VhcmNoID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2ZW50LmFsdEtleSAgJiYgIGV2ZW50LmtleSA9PT0gXCJyXCIpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgalF1ZXJ5KFwiLmZhY2V0LXN1YmhlYWRlciAucmVtb3ZlLWFsbFwiKS5mb2N1cygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHtIb3RLZXlzRmlsdGVyc0hhbmRsZXJ9O1xyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvSG90S2V5c0ZpbHRlcnNIYW5kbGVyLnRzIiwiaW1wb3J0ICogYXMgSGFuZGxlYmFycyBmcm9tIFwiaGFuZGxlYmFyc1wiO1xyXG5pbXBvcnQgeyBJRmFjZXQgfSBmcm9tIFwiLi4vbW9kZWxzL0lGYWNldFwiO1xyXG5pbXBvcnQgKiBhcyBGYWNldFN1YkhlYWRlciBmcm9tIFwiLi8uLi8uLi9oYnMvZmFjZXQtYXBwbGllZC1maWx0ZXJzLmhic1wiO1xyXG5pbXBvcnQgeyBGaWx0ZXJDb25maWdTdG9yZSB9IGZyb20gXCIuLy4uL2NvbmZpZy9GaWx0ZXJDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQgeyBJRmlsdGVyVGVtcGxhdGVTZXJ2aWNlIH0gZnJvbSBcIi4vSUZpbHRlclRlbXBsYXRlU2VydmljZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpbHRlclRlbXBsYXRlU2VydmljZSBpbXBsZW1lbnRzIElGaWx0ZXJUZW1wbGF0ZVNlcnZpY2Uge1xyXG4gICAgcHJpdmF0ZSB0ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldE1haW46IGFueTtcclxuICAgIHByaXZhdGUgdGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRIZWFkZXI6IGFueTtcclxuICAgIHByaXZhdGUgdGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRTdWJIZWFkZXI6IGFueTtcclxuICAgIHByaXZhdGUgdGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRCb2R5OiBhbnk7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbmZpZ1N0b3JlOiBGaWx0ZXJDb25maWdTdG9yZSkge1xyXG4gICAgICAgIHRoaXMudGVtcGF0ZUZ1bmN0aW9uRm9yRmFjZXRTdWJIZWFkZXIgPSBGYWNldFN1YkhlYWRlcjtcclxuICAgIH1cclxuICAgIHB1YmxpYyBiaW5kKGZpbHRlcnM6IElGYWNldFtdKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBtZXJnZWRGaWx0ZXJzID0gdGhpcy5tZXJnZVdpdGhGYWNldENvbmZpZyhmaWx0ZXJzKTtcclxuICAgICAgICByZXR1cm4gdGhpcy50ZW1wYXRlRnVuY3Rpb25Gb3JGYWNldFN1YkhlYWRlcih7ZmlsdGVyczogbWVyZ2VkRmlsdGVyc30pO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBtZXJnZVdpdGhGYWNldENvbmZpZyA9IChmaWx0ZXJzOiBJRmFjZXRbXSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IG1lcmdlZEFycmF5OiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIGZvciAoY29uc3QgZmFjZXQgb2YgZmlsdGVycykge1xyXG4gICAgICAgICAgZm9yIChjb25zdCBmYWNldENvbmZpZyBvZiB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuZmlsdGVyQ29uZmlnKSB7XHJcbiAgICAgICAgICAgIGlmIChmYWNldENvbmZpZy5pZCA9PT0gZmFjZXQuaWQpIHtcclxuICAgICAgICAgICAgICBtZXJnZWRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGNvbGxhcHNlZDogZmFjZXRDb25maWcuY29sbGFwc2VkLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRSYW5nZXM6IGZhY2V0LmZhY2V0UmFuZ2VzLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRWYWx1ZXM6IGZhY2V0LmZhY2V0VmFsdWVzLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGZhY2V0Q29uZmlnLmlkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogZmFjZXRDb25maWcubmFtZSxcclxuICAgICAgICAgICAgICAgIG9yZGVyOiBmYWNldENvbmZpZy5vcmRlcixcclxuICAgICAgICAgICAgICAgIHBpbm5lZDogZmFjZXRDb25maWcucGlubmVkLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogZmFjZXRDb25maWcudHlwZSxcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWVyZ2VkQXJyYXk7XHJcbiAgICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL3NlcnZpY2VzL0ZpbHRlclRlbXBsYXRlU2VydmljZS50cyIsInZhciBIYW5kbGViYXJzID0gcmVxdWlyZShcImhhbmRsZWJhcnNcIik7XG5mdW5jdGlvbiBfX2RlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgKG9iai5fX2VzTW9kdWxlID8gb2JqW1wiZGVmYXVsdFwiXSA6IG9iaik7IH1cbm1vZHVsZS5leHBvcnRzID0gKEhhbmRsZWJhcnNbXCJkZWZhdWx0XCJdIHx8IEhhbmRsZWJhcnMpLnRlbXBsYXRlKHtcIjFcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgc3RhY2sxO1xuXG4gIHJldHVybiBcIjxzZWN0aW9uIGNsYXNzPVxcXCJjb250ZW50IGZhY2V0LXN1YmhlYWRlciBndWkgZmx1aWQtdyBiYXNpYyBjdXJ2ZWQgcC01XFxcIiBhcmlhLWxhYmVsPVxcXCJBcHBsaWVkIEZpbHRlcnNcXFwiPlxcbiAgICA8c3BhbiBjbGFzcz1cXFwiZ3VpIGd1aS1zdWJoZWFkaW5nLTIgY2Fwc1xcXCI+QXBwbGllZCBGaWx0ZXJzPC9zcGFuPlxcbiAgICA8YnV0dG9uIGNsYXNzPVxcXCJndWkgbS1sLTUgcmVtb3ZlLWFsbFxcXCIgYXJpYS1sYWJlbD1cXFwiQ2xlYXIgQWxsIEZpbHRlcnNcXFwiPlxcbiAgICAgICAgPGkgY2xhc3M9XFxcImd1aS1pY29uIGd1aS1pY29uLWNhbmNlbFxcXCI+PC9pPlxcbiAgICAgICAgPHNwYW4+Q2xlYXIgQWxsPC9zcGFuPlxcbiAgICA8L2J1dHRvbj5cXG4gICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtLWwtMTBcXFwiPlxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZpbHRlcnMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMiwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgIDwvc3Bhbj5cXG48L3NlY3Rpb24+XFxuXCI7XG59LFwiMlwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IChjb250YWluZXIubnVsbENvbnRleHQgfHwge30pO1xuXG4gIHJldHVybiBcIiAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBtLXItNVxcXCI+XFxuICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBsYXJnZSBsYWJlbHMgZmFjZXQtbGFiZWxzXFxcIj5cXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XFxcImd1aSBndWktc3ViaGVhZGluZy0xXFxcIj5cIlxuICAgICsgY29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb24oY29udGFpbmVyLmxhbWJkYSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubmFtZSA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjwvc3Bhbj5cXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmZhY2V0VmFsdWVzIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJlYWNoXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuZmFjZXRSYW5nZXMgOiBkZXB0aDApLHtcIm5hbWVcIjpcImVhY2hcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oNSwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgPC9zcGFuPlxcblwiO1xufSxcIjNcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgPGJ1dHRvbiBhcmlhLWxhYmVsPVxcXCJDbGVhciBmaWx0ZXIgXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiIG9mIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJndWkgbS0wIG0tdC0yIG0tci0yIHAtNCBsYWJlbCBjdXJzb3ItcG9pbnRlciBzdHJpa2V0aHJvdWdoLWhvdmVyXFxcIiBcXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWZpbHRlci1lbnRyeT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGFsaWFzMihfX2RlZmF1bHQocmVxdWlyZShcIkM6XFxcXFVzZXJzXFxcXHJvdXN0dXJnXFxcXFNvdXJjZVxcXFxSZXBvc1xcXFxTZWFyY2hNYXN0ZXJcXFxcRmFjZXRvb1xcXFxzcmNcXFxcaGJzXFxcXGhlbHBlcnNcXFxcRm9ybWF0TGFiZWxCeVR5cGUudHNcIikpLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoZGVwdGhzWzFdICE9IG51bGwgPyBkZXB0aHNbMV0udHlwZSA6IGRlcHRoc1sxXSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJGb3JtYXRMYWJlbEJ5VHlwZVwiLFwiaGFzaFwiOnt9LFwiZGF0YVwiOmRhdGF9KSlcbiAgICArIFwiXFxuICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZ3VpLWljb24gZ3VpLWljb24tY2FuY2VsXFxcIj48L2k+XFxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxcblwiO1xufSxcIjVcIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSxibG9ja1BhcmFtcyxkZXB0aHMpIHtcbiAgICB2YXIgYWxpYXMxPWNvbnRhaW5lci5sYW1iZGEsIGFsaWFzMj1jb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbjtcblxuICByZXR1cm4gXCIgICAgICAgICAgICAgICAgPGJ1dHRvbiBhcmlhLWxhYmVsPVxcXCJDbGVhciBSYW5nZSBmb3IgZmlsdGVyIFwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5uYW1lIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPVxcXCJndWkgbS0wIG0tdC0yIG0tci0yIHAtNCBsYWJlbCBjdXJzb3ItcG9pbnRlciBzdHJpa2V0aHJvdWdoLWhvdmVyXFxcIiBcXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhLWZpbHRlci1lbnRyeT1cXFwiXCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLmlkIDogZGVwdGhzWzFdKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmxhYmVsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiOjo6XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLCBkZXB0aDApKVxuICAgICsgXCI6Ojp0cnVlXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBhbGlhczIoX19kZWZhdWx0KHJlcXVpcmUoXCJDOlxcXFxVc2Vyc1xcXFxyb3VzdHVyZ1xcXFxTb3VyY2VcXFxcUmVwb3NcXFxcU2VhcmNoTWFzdGVyXFxcXEZhY2V0b29cXFxcc3JjXFxcXGhic1xcXFxoZWxwZXJzXFxcXFJhbmdlLnRzXCIpKS5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDogKGNvbnRhaW5lci5udWxsQ29udGV4dCB8fCB7fSksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm1pbiA6IGRlcHRoMCksKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm1heCA6IGRlcHRoMCksKGRlcHRoc1sxXSAhPSBudWxsID8gZGVwdGhzWzFdLnR5cGUgOiBkZXB0aHNbMV0pLHtcIm5hbWVcIjpcIlJhbmdlXCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJndWktaWNvbiBndWktaWNvbi1jYW5jZWxcXFwiPjwvaT5cXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XFxuXCI7XG59LFwiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhLGJsb2NrUGFyYW1zLGRlcHRocykge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiAoY29udGFpbmVyLm51bGxDb250ZXh0IHx8IHt9KSwoKHN0YWNrMSA9IChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5maWx0ZXJzIDogZGVwdGgwKSkgIT0gbnVsbCA/IHN0YWNrMS5sZW5ndGggOiBzdGFjazEpLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDEsIGRhdGEsIDAsIGJsb2NrUGFyYW1zLCBkZXB0aHMpLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpO1xufSxcInVzZURhdGFcIjp0cnVlLFwidXNlRGVwdGhzXCI6dHJ1ZX0pO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2hicy9mYWNldC1hcHBsaWVkLWZpbHRlcnMuaGJzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAgMSIsImltcG9ydCAqIGFzIG1vbWVudCBmcm9tIFwibW9tZW50XCI7XHJcbmNvbnN0IHJhbmdlID0gKG1pbiwgbWF4LCB0eXBlKSA9PiB7XHJcbiAgICBsZXQgc3RyID0gXCJcIjtcclxuICAgIGxldCBtaW5TdHIgPSBtaW47XHJcbiAgICBsZXQgbWF4U3RyID0gbWF4O1xyXG4gICAgaWYgKHR5cGUgPT09IFwiRWRtLkRhdGVUaW1lT2Zmc2V0XCIpIHtcclxuICAgICAgICBpZiAobWluICE9PSB1bmRlZmluZWQgJiYgbWluICE9PSBudWxsICYmIG1pbiAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICBtaW5TdHIgPSBtb21lbnQobWluKS5mb3JtYXQoXCJERC1NTU0tWVlZWVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1heCAhPT0gdW5kZWZpbmVkICYmIG1heCAhPT0gbnVsbCAmJiBtYXggIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgbWF4U3RyID0gbW9tZW50KG1heCkuZm9ybWF0KFwiREQtTU1NLVlZWVlcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKG1pblN0ciAhPT0gdW5kZWZpbmVkICYmIG1pblN0ciAhPT0gbnVsbCAmJiBtaW5TdHIgIT09IFwiXCIpIHtcclxuICAgICAgICBzdHIgKz0gXCIgZnJvbTogXCIgKyBtaW5TdHI7XHJcbiAgICB9XHJcbiAgICBpZiAobWF4U3RyICE9PSB1bmRlZmluZWQgJiYgbWF4U3RyICE9PSBudWxsICYmIG1heFN0ciAhPT0gXCJcIikge1xyXG4gICAgICAgIHN0ciArPSBcIiB0bzogXCIgKyBtYXhTdHI7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RyO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcmFuZ2U7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvaGJzL2hlbHBlcnMvUmFuZ2UudHMiLCJpbXBvcnQgeyBGaWx0ZXJBY3Rpb25UeXBlIH0gZnJvbSBcIi4uL21vZGVscy9GaWx0ZXJBY3Rpb25UeXBlXCI7XHJcbmltcG9ydCB7IElGaWx0ZXJPcHRpb25zIH0gZnJvbSBcIi4vSUZpbHRlck9wdGlvbnNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGaWx0ZXJDb25maWdTdG9yZSB7XHJcbiAgICBwcml2YXRlIG9wdGlvbnM6IElGaWx0ZXJPcHRpb25zO1xyXG4gICAgcHJpdmF0ZSBkZWZhdWx0ZmlsdGVyT3B0aW9uczogSUZpbHRlck9wdGlvbnMgPSB7XHJcbiAgICAgICAgYW5pbWF0aW9uVGltZTogMjAwLFxyXG4gICAgICAgIGNvbnRhaW5lckVsZW1lbnQ6IG51bGwsXHJcbiAgICAgICAgZmlsdGVyQ29uZmlnOiBbXSxcclxuICAgICAgICBvbkFsbEZpbHRlclJlbW92ZTogKCkgPT4ge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb25GaWx0ZXJDaGFuZ2U6IChrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZywgYWN0aW9uOiBGaWx0ZXJBY3Rpb25UeXBlKTogdm9pZCA9PiB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJRmlsdGVyT3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMuZXh0ZW5kT3B0aW9ucyhvcHRpb25zKTtcclxuICAgICAgICBpZiAob3B0aW9ucy5jb250YWluZXJFbGVtZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlBsZWFzZSBQcm92aWRlIGEgdmFsaWQgY29udGFpbmVyIEVsZW1lbnQgb2JqZWN0IGZvciBmaWx0ZXJzXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXQgT3B0aW9ucygpOiBJRmlsdGVyT3B0aW9ucyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcclxuICAgIH1cclxuICAgIHByaXZhdGUgZXh0ZW5kT3B0aW9ucyA9IChpbnB1dE9wdGlvbnM6IElGaWx0ZXJPcHRpb25zKTogSUZpbHRlck9wdGlvbnMgPT4ge1xyXG4gICAgICAgIHJldHVybiAodGhpcy5vcHRpb25zID0galF1ZXJ5LmV4dGVuZCh7fSwgdGhpcy5kZWZhdWx0ZmlsdGVyT3B0aW9ucywgaW5wdXRPcHRpb25zKSk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9jb25maWcvRmlsdGVyQ29uZmlnU3RvcmUudHMiLCJleHBvcnQgKiBmcm9tIFwiLi9FeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSAgXCIuL0ZhY2V0QWN0aW9uSGFuZGxlclwiO1xyXG5leHBvcnQgKiBmcm9tICBcIi4vRmFjZXRTZWFyY2hIYW5kbGVyXCI7XHJcbmV4cG9ydCAqIGZyb20gIFwiLi9GaWx0ZXJBY3Rpb25IYW5kbGVyXCI7XHJcbmV4cG9ydCAqIGZyb20gIFwiLi9IaWRlRmFjZXRTZWN0aW9uSGFuZGxlclwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL1BpblVucGluRXZlbnRIYW5kbGVyXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL1Nob3dNb3JlTGVzc0hhbmRsZXJcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4uL2V2ZW50aGFuZGxlcnMvRmFjZXRLZXlCb2FyZE5hdmlnYXRpb25IYW5kbGVyXCI7XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL25vZGVfbW9kdWxlcy90c2xpbnQtbG9hZGVyPz9yZWYtLTEhLi9zcmMvdHMvZXZlbnRoYW5kbGVycy9pbmRleC50cyIsImltcG9ydCB7IEZhY2V0Q29uZmlnU3RvcmUgfSBmcm9tIFwiLi8uLi9jb25maWcvRmFjZXRDb25maWdTdG9yZVwiO1xuaW1wb3J0IHsgRmFjZXRDb25zdGFudHMgfSBmcm9tIFwiLi8uLi9jb25maWcvRmFjZXRDb25zdGFudHNcIjtcbmltcG9ydCB7IElGYWNldFRlbXBsYXRlU2VydmljZSB9IGZyb20gXCIuLy4uL3NlcnZpY2VzL0lGYWNldFRlbXBsYXRlU2VydmljZVwiO1xuaW1wb3J0IHsgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyIH0gZnJvbSBcIi4vRXhwYW5kQ29sbGFwc2VNYW5hZ2VyXCI7XG5pbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xuaW1wb3J0IHsgU2hvd0hpZGUgfSBmcm9tIFwiLi9TaG93SGlkZVwiO1xuXG5leHBvcnQgY2xhc3MgRXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyIGltcGxlbWVudHMgSUV2ZW50SGFuZGxlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBlbGVtZW50OiBKUXVlcnksXG4gICAgICAgICAgICAgICAgcHJpdmF0ZSBjb25maWdTdG9yZTogRmFjZXRDb25maWdTdG9yZSxcbiAgICAgICAgICAgICAgICBwcml2YXRlIHRlbXBsYXRlU2VydmljZTogSUZhY2V0VGVtcGxhdGVTZXJ2aWNlKSB7fVxuXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZXhwYW5kLWFsbFwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVmlzaWJpbGl0eU9mQWxsKGV2ZW50LCBTaG93SGlkZS5TaG93KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLmV4cGFuZC1hbGxcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVZpc2liaWxpdHlPZkFsbChldmVudCwgU2hvd0hpZGUuU2hvdyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5jb2xsYXBzZS1hbGxcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVZpc2liaWxpdHlPZkFsbChldmVudCwgU2hvd0hpZGUuSGlkZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi5jb2xsYXBzZS1hbGxcIiwgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVZpc2liaWxpdHlPZkFsbChldmVudCwgU2hvd0hpZGUuSGlkZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIltyb2xlPXRyZWVpdGVtXVwiLCB0aGlzLmhhbmRsZVZpc2liaWxpdHlPZk9uZSk7XG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleWRvd25cIiwgXCJbcm9sZT10cmVlaXRlbV1cIiwgdGhpcy5oYW5kbGVLZXlEb3duKTtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiZm9jdXNpblwiLCBcIltyb2xlPXRyZWVpdGVtXVwiLCB0aGlzLm9uRm9jdXNJbk9mVHJlZUl0ZW0pO1xuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJmb2N1c291dFwiLCBcIltyb2xlPXRyZWVpdGVtXVwiLCB0aGlzLm9uRm9jdXNPdXRPZlRyZWVJdGVtKTtcbiAgICB9XG4gICAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayhldmVudDogYW55KTogdm9pZCB7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cbiAgICBwcml2YXRlIG9uRm9jdXNJbk9mVHJlZUl0ZW0gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3Qgb1QgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gb1QuaXMoXCJbcm9sZT10cmVlaXRlbV1cIikgPyBvVCA6IG9ULnBhcmVudHMoXCJbcm9sZT10cmVlaXRlbV1cIikuZmlyc3QoKTtcbiAgICAgICAgY29uc3QgbGFiZWxJZCA9IGpRdWVyeShcIiNcIiArIHRhcmdldC5hdHRyKFwiYXJpYS1sYWJlbGxlZEJ5XCIpKTtcbiAgICAgICAgaWYgKCBsYWJlbElkICYmIGxhYmVsSWQubGVuZ3RoICkge1xuICAgICAgICAgICAgbGFiZWxJZC5hZGRDbGFzcyhcImZvY3VzXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LmFkZENsYXNzKFwiZm9jdXNcIik7XG4gICAgICAgIH1cbiAgICAgICAgZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBwcml2YXRlIG9uRm9jdXNPdXRPZlRyZWVJdGVtID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IG9UID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IG9ULmlzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpID8gb1QgOiBvVC5wYXJlbnRzKFwiW3JvbGU9dHJlZWl0ZW1dXCIpLmZpcnN0KCk7XG4gICAgICAgIGNvbnN0IGxhYmVsSWQgPSBqUXVlcnkoXCIjXCIgKyB0YXJnZXQuYXR0cihcImFyaWEtbGFiZWxsZWRCeVwiKSk7XG4gICAgICAgIGlmICggbGFiZWxJZCAmJiBsYWJlbElkLmxlbmd0aCApIHtcbiAgICAgICAgICAgIGxhYmVsSWQucmVtb3ZlQ2xhc3MoXCJmb2N1c1wiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldC5yZW1vdmVDbGFzcyhcImZvY3VzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBwcml2YXRlIGhhbmRsZUtleURvd24gPSAoZXZlbnQpID0+IHtcbiAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS5sb2coXCJIYW5kbGluZyBLZXkgRG93blwiKTtcbiAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XG4gICAgICAgIGlmICggW0ZhY2V0Q29uc3RhbnRzLkVudGVyS2V5Q29kZSwgRmFjZXRDb25zdGFudHMuU3BhY2VLZXlDb2RlLFxuICAgICAgICAgICAgICAgIEZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSwgRmFjZXRDb25zdGFudHMuRG93bktleUNvZGUgXS5pbmRleE9mKGNvZGUpIDw9IC0xKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFtGYWNldENvbnN0YW50cy5FbnRlcktleUNvZGUsIEZhY2V0Q29uc3RhbnRzLlNwYWNlS2V5Q29kZV0uaW5kZXhPZihjb2RlKSA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZVZpc2liaWxpdHlPZk9uZShldmVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFtGYWNldENvbnN0YW50cy5VcEtleUNvZGUsIEZhY2V0Q29uc3RhbnRzLkRvd25LZXlDb2RlXS5pbmRleE9mKGNvZGUpID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVXBBbmREb3duT2ZUcmVlSXRlbShldmVudCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBoYW5kbGVVcEFuZERvd25PZlRyZWVJdGVtID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xuICAgICAgICBpZiAoW0ZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSwgRmFjZXRDb25zdGFudHMuRG93bktleUNvZGVdLmluZGV4T2YoY29kZSkgPD0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bm8tY29uc29sZVxuICAgICAgICBjb25zb2xlLmxvZyhcIkhhbmRsaW5nIFVwIGFuZCBEb3duXCIpO1xuICAgICAgICBjb25zdCBvVCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBvVC5pcyhcIltyb2xlPXRyZWVpdGVtXVwiKSA/IG9UIDogb1QucGFyZW50cyhcIltyb2xlPXRyZWVpdGVtXVwiKS5maXJzdCgpO1xuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoIEZhY2V0Q29uc3RhbnRzLlVwS2V5Q29kZSA9PT0gY29kZSApIHtcbiAgICAgICAgICAgIC8vIEZpcnN0IExldmVsXG4gICAgICAgICAgICBjb25zdCBwcmV2U2libGluZyA9IHRhcmdldC5wcmV2QWxsKFwiOnZpc2libGVcIikuZmlyc3QoKTtcbiAgICAgICAgICAgIGlmICggcHJldlNpYmxpbmcubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgIHByZXZTaWJsaW5nLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJldkRlZXBTaWJsaW5nID0gdGFyZ2V0LnBhcmVudCgpLnByZXZBbGwoXCI6dmlzaWJsZVwiKS5maXJzdCgpLmZpbmQoXCJbcm9sZT10cmVlaXRlbV1cIik7XG4gICAgICAgICAgICBpZiAoIHByZXZEZWVwU2libGluZy5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgcHJldkRlZXBTaWJsaW5nLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFyZ2V0LnBhcmVudHMoXCJbcm9sZT10cmVlaXRlbV1cIikuZWFjaCgoaW5kZXg6IG51bWJlciwgcGFyZW50R3JvdXA6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0galF1ZXJ5KHBhcmVudEdyb3VwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRDaGlsZCA9IGdyb3VwLnByZXZBbGwoXCI6dmlzaWJsZVwiKS5maXJzdCgpO1xuICAgICAgICAgICAgICAgIGlmICggcGFyZW50Q2hpbGQubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRDaGlsZC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCBGYWNldENvbnN0YW50cy5Eb3duS2V5Q29kZSA9PT0gY29kZSApIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0Q2hpbGQgPSB0YXJnZXQuZmluZChcIltyb2xlPXRyZWVpdGVtXTp2aXNpYmxlXCIpLmZpcnN0KCk7XG4gICAgICAgICAgICBpZiAoIGZpcnN0Q2hpbGQubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgIGZpcnN0Q2hpbGQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGaXJzdCBMZXZlbFxuICAgICAgICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSB0YXJnZXQubmV4dEFsbChcIjp2aXNpYmxlXCIpLmZpcnN0KCk7XG4gICAgICAgICAgICBpZiAoIG5leHRTaWJsaW5nLmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICBuZXh0U2libGluZy5mb2N1cygpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNlY29uZCBMZXZlbFxuICAgICAgICAgICAgY29uc3QgbmV4dERlZXBTaWJsaW5nID0gdGFyZ2V0LnBhcmVudCgpLm5leHRBbGwoXCI6dmlzaWJsZVwiKS5maXJzdCgpLmZpbmQoXCJbcm9sZT10cmVlaXRlbV1cIik7XG4gICAgICAgICAgICBpZiAoIG5leHREZWVwU2libGluZy5sZW5ndGggKSB7XG4gICAgICAgICAgICAgICAgbmV4dERlZXBTaWJsaW5nLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFyZ2V0LnBhcmVudHMoXCJbcm9sZT10cmVlaXRlbV1cIikuZWFjaCgoaW5kZXg6IG51bWJlciwgcGFyZW50R3JvdXA6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwID0galF1ZXJ5KHBhcmVudEdyb3VwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRDaGlsZCA9IGdyb3VwLm5leHRBbGwoXCI6dmlzaWJsZVwiKS5maXJzdCgpO1xuICAgICAgICAgICAgICAgIGlmICggcGFyZW50Q2hpbGQubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRDaGlsZC5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBoYW5kbGVWaXNpYmlsaXR5T2ZBbGwgPSAoZXZlbnQsIGhpZGVTaG93OiBTaG93SGlkZSkgPT4ge1xuICAgICAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcbiAgICAgICAgaWYgKCBldmVudC50eXBlICE9PSBcImNsaWNrXCIgJiYgKGV2ZW50LnR5cGUgPT09IFwia2V5dXBcIiAmJiBjb2RlICE9PSBGYWNldENvbnN0YW50cy5FbnRlcktleUNvZGVcbiAgICAgICAgICAgICAmJiBjb2RlICE9PSBGYWNldENvbnN0YW50cy5TcGFjZUtleUNvZGUpICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaGlkZVNob3cgPT09IFNob3dIaWRlLlNob3cgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHRoaXMuZWxlbWVudC5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpLmVhY2goKGluZGV4LCBlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSBqUXVlcnkoZWxlbWVudCkucGFyZW50cyhcIi5mYWNldC1pdGVtXCIpO1xuICAgICAgICAgICAgY29uc3QgbmFtZSA9IHBhcmVudC5hdHRyKFwiZGF0YS1hdHRyLW5hbWVcIik7XG4gICAgICAgICAgICBpZiAoIHZhbHVlICkge1xuICAgICAgICAgICAgICAgIHBhcmVudC5hZGRDbGFzcyhcImNvbGxhcHNlZFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNsYXNzKFwiY29sbGFwc2VkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoalF1ZXJ5KGVsZW1lbnQpLCBoaWRlU2hvdywgbmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmZhY2V0Q29uZmlnO1xuICAgICAgICBjb25zdCBwdWJsaXNoOiBBcnJheTx7a2V5OiBzdHJpbmcsIGNvbGxhcHNlZDogYm9vbGVhbn0+ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZmFjZXQgb2YgZGF0YSkge1xuICAgICAgICAgICAgZmFjZXQuY29sbGFwc2VkID0gdmFsdWU7XG4gICAgICAgICAgICBwdWJsaXNoLnB1c2goe2tleTogZmFjZXQuaWQsIGNvbGxhcHNlZDogZmFjZXQuY29sbGFwc2VkfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uQ29sbGFwc2VUb2dnbGUocHVibGlzaCk7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICBwcml2YXRlIGhhbmRsZVZpc2liaWxpdHlPZk9uZSA9IChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBvVCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBvVC5pcyhcIltyb2xlPXRyZWVpdGVtXVwiKSA/IG9UIDogb1QucGFyZW50cyhcIltyb2xlPXRyZWVpdGVtXVwiKS5maXJzdCgpO1xuICAgICAgICBjb25zdCBpc0NvbGxhcHNpYmxlTm9kZSA9IHRhcmdldC5oYXNDbGFzcyhcImNvbGxhcHNpYmxlXCIpICYmIG9ULnBhcmVudHMoXCIuZmFjZXQtaXRlbS1oZWFkZXJcIikubGVuZ3RoO1xuICAgICAgICBpZiAoICFpc0NvbGxhcHNpYmxlTm9kZSApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuYW1lID0gdGFyZ2V0LmF0dHIoXCJkYXRhLWF0dHItbmFtZVwiKTtcbiAgICAgICAgY29uc3QgaWQgPSB0YXJnZXQuYXR0cihcImRhdGEtYXR0ci1pZFwiKTtcbiAgICAgICAgY29uc3QgaXNDb2xsYXBzZWQgPSB0YXJnZXQuaGFzQ2xhc3MoXCJjb2xsYXBzZWRcIik7XG4gICAgICAgIGlmICggIWlzQ29sbGFwc2VkICkge1xuICAgICAgICAgICAgdGFyZ2V0LmFkZENsYXNzKFwiY29sbGFwc2VkXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUNsYXNzKFwiY29sbGFwc2VkXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuZmFjZXRDb25maWc7XG4gICAgICAgIGNvbnN0IHB1Ymxpc2g6IEFycmF5PHtrZXk6IHN0cmluZywgY29sbGFwc2VkOiBib29sZWFufT4gPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBmYWNldCBvZiBkYXRhKSB7XG4gICAgICAgICAgICBpZiAoZmFjZXQuaWQgPT09IGlkICkge1xuICAgICAgICAgICAgICAgIGZhY2V0LmNvbGxhcHNlZCA9ICFpc0NvbGxhcHNlZDtcbiAgICAgICAgICAgICAgICBwdWJsaXNoLnB1c2goe2tleTogZmFjZXQuaWQsIGNvbGxhcHNlZDogZmFjZXQuY29sbGFwc2VkfSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uQ29sbGFwc2VUb2dnbGUocHVibGlzaCk7XG4gICAgICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKHRhcmdldCwgU2hvd0hpZGUuVG9nZ2xlLCBuYW1lKTtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlci50cyIsImltcG9ydCB7IEZhY2V0Q29uZmlnU3RvcmUgfSBmcm9tIFwiLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcbmltcG9ydCB7IEZpbHRlckFjdGlvblR5cGUgfSBmcm9tIFwiLi4vbW9kZWxzL0ZpbHRlckFjdGlvblR5cGVcIjtcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBGYWNldEFjdGlvbkhhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlKSB7fVxuXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2hhbmdlXCIsIFwiLmZhY2V0LWJvZHkgLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb24gLmZhY2V0LXZhbHVlLWNoZWNrYm94XCIsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xuICAgICAgICAgICAgY29uc3QgdmFsU3RyID0gZWxlbWVudC52YWwoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSB2YWxTdHIuc3BsaXQoXCI6OjpcIik7XG4gICAgICAgICAgICBjb25zdCBjaGVja2VkID0gZWxlbWVudC5pcyhcIjpjaGVja2VkXCIpO1xuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gY2hlY2tlZCA/IEZpbHRlckFjdGlvblR5cGUuQWRkIDogRmlsdGVyQWN0aW9uVHlwZS5NaW51cztcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkZpbHRlckNoYW5nZSh2YWx1ZVswXSwgdmFsdWVbMV0sIGFjdGlvbiwgdmFsdWVbMl0sIGZhbHNlKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcbiAgICB9XG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayhldmVudDogYW55KTogdm9pZCB7XG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgIH1cblxufVxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0QWN0aW9uSGFuZGxlci50cyIsImltcG9ydCB7ZGVib3VuY2V9IGZyb20gXCJ0aHJvdHRsZS1kZWJvdW5jZVwiO1xyXG5pbXBvcnQge0ZhY2V0Q29uZmlnU3RvcmV9IGZyb20gXCIuLy4uL2NvbmZpZy9GYWNldENvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7RXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyfSBmcm9tIFwiLi9FeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXJcIjtcclxuaW1wb3J0IHtFeHBhbmRDb2xsYXBzZU1hbmFnZXJ9IGZyb20gXCIuL0V4cGFuZENvbGxhcHNlTWFuYWdlclwiO1xyXG5pbXBvcnQge0lFdmVudEhhbmRsZXJ9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHtTaG93SGlkZX0gZnJvbSBcIi4vU2hvd0hpZGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBGYWNldFNlYXJjaEhhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlKSB7fVxyXG5cclxuICAgIHB1YmxpYyBSZWdpc3RlckRvbUhhbmRsZXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAub24oXCJrZXl1cFwiLCBcIi5maWx0ZXItc2VhcmNoLWlucHV0XCIsIGRlYm91bmNlKDI1MCwgdGhpcy5oYW5kbGVTZWFyY2gpKTtcclxuXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxuICAgIHByaXZhdGUgaGFuZGxlU2VhcmNoID0gKGV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIGVsZW1lbnQucGFyZW50KCkuYWRkQ2xhc3MoXCJsb2FkaW5nXCIpO1xyXG4gICAgICAgIGVsZW1lbnQubmV4dCgpLnNob3coKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsID0gZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgLnZhbCgpXHJcbiAgICAgICAgICAgICAgICAudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAuZmluZChcIi5mYWNldC1saXN0IC5mYWNldC1pdGVtXCIpXHJcbiAgICAgICAgICAgICAgICAuZWFjaCgoaTogbnVtYmVyLCBlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjZXRJdGVtID0galF1ZXJ5KGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBmYWNldEl0ZW0uYXR0cihcImRhdGEtYXR0ci1uYW1lXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmYWNldE5hbWVNYXRjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnB1dFZhbHVlQmxhbmsgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB2YWx1ZSBpcyBlbXB0eVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCB8fCB2YWwgPT09IG51bGwgfHwgdmFsLnRyaW0oKSA9PT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dFZhbHVlQmxhbmsgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBDb21wYXJlIHZhbHVlIHdpdGggZmFjZXQgbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaW5wdXRWYWx1ZUJsYW5rICYmIGZhY2V0SXRlbS5hdHRyKFwiZGF0YS1hdHRyLW5hbWVcIikudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0TmFtZU1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0VmFsdWVCbGFuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIuc2hvdy1tb3JlLWxpbmtcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBzaHdNb3JlRWxlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqUXVlcnkoc2h3TW9yZUVsZW0pLmhhc0NsYXNzKFwiZ3VpLWhpZGRlblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2h3TW9yZUVsZW0pLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2h3TW9yZUVsZW0pLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIuc2hvdy1sZXNzLWxpbmtcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBzaG93TGVzc0xpbmspID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoalF1ZXJ5KHNob3dMZXNzTGluaykuaGFzQ2xhc3MoXCJndWktaGlkZGVuXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpRdWVyeShzaG93TGVzc0xpbmspLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqUXVlcnkoc2hvd0xlc3NMaW5rKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIuc2hvdy1tb3JlLWxpbmtcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zaG93LWxlc3MtbGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29tcGFyZSB2YWx1ZXMgYWdhaW5zdCBjaGlsZCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmFjZXRDaGlsZE1hdGNoOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRJdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKFwibGFiZWxcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmVhY2goKGo6IG51bWJlciwgbGFiZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsRWxlbSA9IGpRdWVyeShsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXRWYWx1ZUJsYW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoXCIuZXh0cmEtZmlsdGVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucGFyZW50KFwiLmV4dHJhLWZpbHRlclwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhY2V0TmFtZU1hdGNoIHx8IGlucHV0VmFsdWVCbGFuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsRWxlbS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFiZWxWYWx1ZSA9IGxhYmVsRWxlbS5hdHRyKFwiZGF0YS1hdHRyLXZhbHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsVmFsdWUudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxFbGVtLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRDaGlsZE1hdGNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbEVsZW0uc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3cgaGlkZSBGYWNldCBJdGVtIGl0c2VsZlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckVsbWVudCA9IGZhY2V0SXRlbS5maW5kKFwiLmZhY2V0LWl0ZW0taGVhZGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbGxhcHNlZCA9IGZhY2V0SXRlbS5oYXNDbGFzcyhcImNvbGxhcHNlZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZXROYW1lTWF0Y2ggfHwgZmFjZXRDaGlsZE1hdGNoIHx8IGlucHV0VmFsdWVCbGFuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldEl0ZW0uZmFkZUluKHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5hbmltYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldEl0ZW0uZmFkZU91dCh0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuYW5pbWF0aW9uVGltZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEV4cGFuZCBDb2xsYXBzZSBGYWNldFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2xsYXBzZWQgfHwgZmFjZXROYW1lTWF0Y2ggfHwgZmFjZXRDaGlsZE1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEV4cGFuZENvbGxhcHNlTWFuYWdlci5Db250cm9sVmlzaWJpbGl0eU9mRmlsdGVyKGhlYWRlckVsbWVudCwgU2hvd0hpZGUuU2hvdywgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRXhwYW5kQ29sbGFwc2VNYW5hZ2VyLkNvbnRyb2xWaXNpYmlsaXR5T2ZGaWx0ZXIoaGVhZGVyRWxtZW50LCBTaG93SGlkZS5IaWRlLCBuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZWxlbWVudC5wYXJlbnQoKS5yZW1vdmVDbGFzcyhcImxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgIGVsZW1lbnQubmV4dCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAxKTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvRmFjZXRTZWFyY2hIYW5kbGVyLnRzIiwidmFyIHRocm90dGxlID0gcmVxdWlyZSgnLi90aHJvdHRsZScpO1xudmFyIGRlYm91bmNlID0gcmVxdWlyZSgnLi9kZWJvdW5jZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcblx0dGhyb3R0bGU6IHRocm90dGxlLFxuXHRkZWJvdW5jZTogZGVib3VuY2Vcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy90aHJvdHRsZS1kZWJvdW5jZS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZmluZWQgKi9cblxudmFyIHRocm90dGxlID0gcmVxdWlyZSgnLi90aHJvdHRsZScpO1xuXG4vKipcbiAqIERlYm91bmNlIGV4ZWN1dGlvbiBvZiBhIGZ1bmN0aW9uLiBEZWJvdW5jaW5nLCB1bmxpa2UgdGhyb3R0bGluZyxcbiAqIGd1YXJhbnRlZXMgdGhhdCBhIGZ1bmN0aW9uIGlzIG9ubHkgZXhlY3V0ZWQgYSBzaW5nbGUgdGltZSwgZWl0aGVyIGF0IHRoZVxuICogdmVyeSBiZWdpbm5pbmcgb2YgYSBzZXJpZXMgb2YgY2FsbHMsIG9yIGF0IHRoZSB2ZXJ5IGVuZC5cbiAqXG4gKiBAcGFyYW0gIHtOdW1iZXJ9ICAgZGVsYXkgICAgICAgICBBIHplcm8tb3ItZ3JlYXRlciBkZWxheSBpbiBtaWxsaXNlY29uZHMuIEZvciBldmVudCBjYWxsYmFja3MsIHZhbHVlcyBhcm91bmQgMTAwIG9yIDI1MCAob3IgZXZlbiBoaWdoZXIpIGFyZSBtb3N0IHVzZWZ1bC5cbiAqIEBwYXJhbSAge0Jvb2xlYW59ICBhdEJlZ2luICAgICAgIE9wdGlvbmFsLCBkZWZhdWx0cyB0byBmYWxzZS4gSWYgYXRCZWdpbiBpcyBmYWxzZSBvciB1bnNwZWNpZmllZCwgY2FsbGJhY2sgd2lsbCBvbmx5IGJlIGV4ZWN1dGVkIGBkZWxheWAgbWlsbGlzZWNvbmRzXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZnRlciB0aGUgbGFzdCBkZWJvdW5jZWQtZnVuY3Rpb24gY2FsbC4gSWYgYXRCZWdpbiBpcyB0cnVlLCBjYWxsYmFjayB3aWxsIGJlIGV4ZWN1dGVkIG9ubHkgYXQgdGhlIGZpcnN0IGRlYm91bmNlZC1mdW5jdGlvbiBjYWxsLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKEFmdGVyIHRoZSB0aHJvdHRsZWQtZnVuY3Rpb24gaGFzIG5vdCBiZWVuIGNhbGxlZCBmb3IgYGRlbGF5YCBtaWxsaXNlY29uZHMsIHRoZSBpbnRlcm5hbCBjb3VudGVyIGlzIHJlc2V0KS5cbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYWxsYmFjayAgICAgIEEgZnVuY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZGVsYXkgbWlsbGlzZWNvbmRzLiBUaGUgYHRoaXNgIGNvbnRleHQgYW5kIGFsbCBhcmd1bWVudHMgYXJlIHBhc3NlZCB0aHJvdWdoLCBhcy1pcyxcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGBjYWxsYmFja2Agd2hlbiB0aGUgZGVib3VuY2VkLWZ1bmN0aW9uIGlzIGV4ZWN1dGVkLlxuICpcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBBIG5ldywgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICggZGVsYXksIGF0QmVnaW4sIGNhbGxiYWNrICkge1xuXHRyZXR1cm4gY2FsbGJhY2sgPT09IHVuZGVmaW5lZCA/IHRocm90dGxlKGRlbGF5LCBhdEJlZ2luLCBmYWxzZSkgOiB0aHJvdHRsZShkZWxheSwgY2FsbGJhY2ssIGF0QmVnaW4gIT09IGZhbHNlKTtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy90aHJvdHRsZS1kZWJvdW5jZS9kZWJvdW5jZS5qc1xuLy8gbW9kdWxlIGlkID0gNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIDEiLCJpbXBvcnQgeyBGaWx0ZXJDb25maWdTdG9yZSB9IGZyb20gXCIuLi9jb25maWcvRmlsdGVyQ29uZmlnU3RvcmVcIjtcclxuaW1wb3J0IHsgRmlsdGVyQWN0aW9uVHlwZSB9IGZyb20gXCIuLi9tb2RlbHMvRmlsdGVyQWN0aW9uVHlwZVwiO1xyXG5pbXBvcnQgeyBJRXZlbnRIYW5kbGVyIH0gZnJvbSBcIi4vSUV2ZW50SGFuZGxlclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZpbHRlckFjdGlvbkhhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGZpbHRlckVsZW1lbnQ6IEpRdWVyeSwgcHJpdmF0ZSBjb25maWdTdG9yZTogRmlsdGVyQ29uZmlnU3RvcmUpIHt9XHJcblxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmZpbHRlckVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5mYWNldC1zdWJoZWFkZXIgLmZhY2V0LWxhYmVscyAubGFiZWxcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0galF1ZXJ5KGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIGlmICghZWxlbWVudC5pcyhcIi5sYWJlbFwiKSkge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50cyhcIi5sYWJlbFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB2YWxTdHIgPSBlbGVtZW50LmF0dHIoXCJkYXRhLWZpbHRlci1lbnRyeVwiKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHZhbFN0ci5zcGxpdChcIjo6OlwiKTtcclxuICAgICAgICAgICAgbGV0IGlzUmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gNCApIHtcclxuICAgICAgICAgICAgICAgIGlzUmFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5vbkZpbHRlckNoYW5nZSh2YWx1ZVswXSwgdmFsdWVbMV0sIEZpbHRlckFjdGlvblR5cGUuTWludXMsIHZhbHVlWzJdLCBpc1JhbmdlKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJFbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuZmFjZXQtc3ViaGVhZGVyIC5yZW1vdmUtYWxsXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMub25BbGxGaWx0ZXJSZW1vdmUoKTtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuXHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZpbHRlckFjdGlvbkhhbmRsZXIudHMiLCJpbXBvcnQgeyBGYWNldENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4uL2NvbmZpZy9GYWNldENvbmZpZ1N0b3JlXCI7XHJcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9JRXZlbnRIYW5kbGVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXIgaW1wbGVtZW50cyBJRXZlbnRIYW5kbGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogSlF1ZXJ5LCBwcml2YXRlIGNvbmZpZ1N0b3JlOiBGYWNldENvbmZpZ1N0b3JlKSB7fVxyXG5cclxuICAgIHB1YmxpYyBSZWdpc3RlckRvbUhhbmRsZXIgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuaGlkZS1mYWNldFwiLCB0aGlzLmhpZGVGYWNldCk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIuc2hvdy1mYWNldFwiLCB0aGlzLnNob3dGYWNldCk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5dXBcIiwgXCIuaGlkZS1mYWNldFwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29kZSA9IGV2ZW50LmtleUNvZGUgfHwgZXZlbnQud2hpY2g7XHJcbiAgICAgICAgICAgIGlmICggY29kZSAhPT0gMTMgJiYgY29kZSAhPT0gMzIgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5oaWRlRmFjZXQoZXZlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLnNob3ctZmFjZXRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBldmVudC5rZXlDb2RlIHx8IGV2ZW50LndoaWNoO1xyXG4gICAgICAgICAgICBpZiAoIGNvZGUgIT09IDEzICYmIGNvZGUgIT09IDMyICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0ZhY2V0KGV2ZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfVxyXG4gICAgcHVibGljIGhpZGVGYWNldCA9IChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICQoXCIuZmFjZXQtYm9keVwiKS5oaWRlKCk7XHJcbiAgICAgICAgJChcIi5mYWNldC1jb2xsYXBzZWQtYm9keVwiKS5mYWRlSW4odGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2xsYXBzZWQgPSB0cnVlO1xyXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNob3dGYWNldCA9IChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICQoXCIuZmFjZXQtY29sbGFwc2VkLWJvZHlcIikuaGlkZSgpO1xyXG4gICAgICAgICQoXCIuZmFjZXQtYm9keVwiKS5mYWRlSW4odGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUpO1xyXG4gICAgICAgIHRoaXMuY29uZmlnU3RvcmUuT3B0aW9ucy5jb2xsYXBzZWQgPSBmYWxzZTtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvSGlkZUZhY2V0U2VjdGlvbkhhbmRsZXIudHMiLCJpbXBvcnQgeyBGYWNldENvbmZpZ1N0b3JlIH0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uZmlnU3RvcmVcIjtcclxuaW1wb3J0IHsgSUZhY2V0VGVtcGxhdGVTZXJ2aWNlIH0gZnJvbSBcIi4vLi4vc2VydmljZXMvSUZhY2V0VGVtcGxhdGVTZXJ2aWNlXCI7XHJcbmltcG9ydCB7IEV4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlciB9IGZyb20gXCIuL0V4cGFuZENvbGxhcHNlRmFjZXRzSGFuZGxlclwiO1xyXG5pbXBvcnQgeyBFeHBhbmRDb2xsYXBzZU1hbmFnZXIgfSBmcm9tIFwiLi9FeHBhbmRDb2xsYXBzZU1hbmFnZXJcIjtcclxuaW1wb3J0IHsgSUV2ZW50SGFuZGxlciB9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHsgU2hvd0hpZGUgfSBmcm9tIFwiLi9TaG93SGlkZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBpblVucGluRXZlbnRIYW5kbGVyIGltcGxlbWVudHMgSUV2ZW50SGFuZGxlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnQ6IEpRdWVyeSwgcHJpdmF0ZSBjb25maWdTdG9yZTogRmFjZXRDb25maWdTdG9yZSxcclxuICAgICAgICAgICAgICAgIHByaXZhdGUgdGVtcGxhdGVTZXJ2aWNlOiBJRmFjZXRUZW1wbGF0ZVNlcnZpY2UpIHt9XHJcblxyXG4gICAgcHVibGljIFJlZ2lzdGVyRG9tSGFuZGxlcigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJjbGlja1wiLCBcIi5waW4taWNvblwiLCAoZXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVQaW5VbnBpbihldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwiY2xpY2tcIiwgXCIudW5waW4taWNvblwiLCAoZXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVQaW5VbnBpbihldmVudCwgZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5vbihcImtleXVwXCIsIFwiLnBpbi1pY29uXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKCBjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMiApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCB0cnVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub24oXCJrZXl1cFwiLCBcIi51bnBpbi1pY29uXCIsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgaWYgKCBjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMiApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZVBpblVucGluKGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25SZXNpemUoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gSWdub3JlXHJcbiAgICB9XHJcbiAgICBwdWJsaWMgb25Eb2N1bWVudENsaWNrKGV2ZW50OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxuICAgIHByaXZhdGUgaGFuZGxlUGluVW5waW4oZXZlbnQ6IGFueSwgcGluOiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gZWxlbWVudC5hdHRyKFwiZGF0YS1hdHRyLWlkXCIpO1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmNvbmZpZ1N0b3JlLk9wdGlvbnMuZmFjZXRDb25maWc7XHJcbiAgICAgICAgZm9yIChjb25zdCBmYWNldCBvZiBkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICggZmFjZXQuaWQgPT09IGlkICkge1xyXG4gICAgICAgICAgICAgICAgZmFjZXQucGlubmVkID0gcGluO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5odG1sKHRoaXMudGVtcGxhdGVTZXJ2aWNlLmJpbmQodGhpcy50ZW1wbGF0ZVNlcnZpY2UuZ2V0RGF0YSgpKSk7XHJcbiAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgdGhpcy5jb25maWdTdG9yZS5PcHRpb25zLm9uUGluVW5waW4oaWQsIHBpbik7XHJcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL1BpblVucGluRXZlbnRIYW5kbGVyLnRzIiwiaW1wb3J0IHtGYWNldENvbmZpZ1N0b3JlfSBmcm9tIFwiLi8uLi9jb25maWcvRmFjZXRDb25maWdTdG9yZVwiO1xyXG5pbXBvcnQge0lGYWNldFRlbXBsYXRlU2VydmljZX0gZnJvbSBcIi4vLi4vc2VydmljZXMvSUZhY2V0VGVtcGxhdGVTZXJ2aWNlXCI7XHJcbmltcG9ydCB7RXhwYW5kQ29sbGFwc2VGYWNldHNIYW5kbGVyfSBmcm9tIFwiLi9FeHBhbmRDb2xsYXBzZUZhY2V0c0hhbmRsZXJcIjtcclxuaW1wb3J0IHtFeHBhbmRDb2xsYXBzZU1hbmFnZXJ9IGZyb20gXCIuL0V4cGFuZENvbGxhcHNlTWFuYWdlclwiO1xyXG5pbXBvcnQge0lFdmVudEhhbmRsZXJ9IGZyb20gXCIuL0lFdmVudEhhbmRsZXJcIjtcclxuaW1wb3J0IHtTaG93SGlkZX0gZnJvbSBcIi4vU2hvd0hpZGVcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTaG93TW9yZUxlc3NIYW5kbGVyIGltcGxlbWVudHMgSUV2ZW50SGFuZGxlciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGVsZW1lbnQ6IEpRdWVyeSwgcHJpdmF0ZSBjb25maWdTdG9yZTogRmFjZXRDb25maWdTdG9yZSkge31cclxuXHJcbiAgICBwdWJsaWMgUmVnaXN0ZXJEb21IYW5kbGVyKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgLm9uKFwiY2xpY2tcIiwgXCIuc2hvdy1tb3JlLWxpbmtcIiwgKGV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dNb3JlTGVzc0ZpbHRlcnMoZXZlbnQsIHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgIC5lbGVtZW50XHJcbiAgICAgICAgICAgIC5vbihcImNsaWNrXCIsIFwiLnNob3ctbGVzcy1saW5rXCIsIChldmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93TW9yZUxlc3NGaWx0ZXJzKGV2ZW50LCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgLm9uKFwia2V5dXBcIiwgXCIuc2hvdy1tb3JlLWxpbmtcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01vcmVMZXNzRmlsdGVycyhldmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXNcclxuICAgICAgICAgICAgLmVsZW1lbnRcclxuICAgICAgICAgICAgLm9uKFwia2V5dXBcIiwgXCIuc2hvdy1sZXNzLWxpbmtcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb2RlID0gZXZlbnQua2V5Q29kZSB8fCBldmVudC53aGljaDtcclxuICAgICAgICAgICAgICAgIGlmIChjb2RlICE9PSAxMyAmJiBjb2RlICE9PSAzMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd01vcmVMZXNzRmlsdGVycyhldmVudCwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBvblJlc2l6ZSgpOiB2b2lkIHtcclxuICAgICAgICAvLyBJZ25vcmVcclxuICAgIH1cclxuICAgIHB1YmxpYyBvbkRvY3VtZW50Q2xpY2soZXZlbnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIC8vIElnbm9yZVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBzaG93TW9yZUxlc3NGaWx0ZXJzKGV2ZW50OiBhbnksIHNob3dNb3JlOiBib29sZWFuKSB7XHJcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IGpRdWVyeShldmVudC50YXJnZXQpO1xyXG4gICAgICAgIGlmIChzaG93TW9yZSkge1xyXG4gICAgICAgICAgICBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAucGFyZW50cyhcIi5mYWNldC1pdGVtLWRlc2NyaXB0aW9uXCIpXHJcbiAgICAgICAgICAgICAgICAuZmluZChcIi5leHRyYS1maWx0ZXJcIilcclxuICAgICAgICAgICAgICAgIC5mYWRlSW4odGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLm5leHQoKS5zaG93KCkuZmluZChcImFcIikuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgIC5wYXJlbnRzKFwiLmZhY2V0LWl0ZW0tZGVzY3JpcHRpb25cIilcclxuICAgICAgICAgICAgICAgIC5maW5kKFwiLmV4dHJhLWZpbHRlclwiKVxyXG4gICAgICAgICAgICAgICAgLmZhZGVPdXQodGhpcy5jb25maWdTdG9yZS5PcHRpb25zLmFuaW1hdGlvblRpbWUsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLnByZXYoKS5zaG93KCkuZmluZChcImFcIikuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnBhcmVudCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9ub2RlX21vZHVsZXMvdHNsaW50LWxvYWRlcj8/cmVmLS0xIS4vc3JjL3RzL2V2ZW50aGFuZGxlcnMvU2hvd01vcmVMZXNzSGFuZGxlci50cyIsImltcG9ydCB7IEZhY2V0Q29uc3RhbnRzIH0gZnJvbSBcIi4vLi4vY29uZmlnL0ZhY2V0Q29uc3RhbnRzXCI7XHJcbmltcG9ydCB7IElFdmVudEhhbmRsZXIgfSBmcm9tIFwiLi9pbmRleFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlciBpbXBsZW1lbnRzIElFdmVudEhhbmRsZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZWxlbWVudDogSlF1ZXJ5KSB7fVxyXG5cclxuICAgIHB1YmxpYyBSZWdpc3RlckRvbUhhbmRsZXIoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50Lm9uKFwia2V5ZG93blwiLCBcIi5hcnJvd2tleXMtYXdhcmVcIiwgdGhpcy5oYW5kbGVBcnJvd0tleXMpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uUmVzaXplKCk6IHZvaWQge1xyXG4gICAgICAgIC8vIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgcHVibGljIG9uRG9jdW1lbnRDbGljayhldmVudDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZGVSZWdpc3RlciA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQub2ZmKFwia2V5ZG93blwiLCBcIi5hcnJvd2tleXMtYXdhcmVcIiwgdGhpcy5oYW5kbGVBcnJvd0tleXMpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBoYW5kbGVBcnJvd0tleXMgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICBjb25zdCBjb2RlID0gZXZlbnQud2hpY2g7XHJcbiAgICAgICAgaWYgKCBjb2RlICE9PSBGYWNldENvbnN0YW50cy5VcEtleUNvZGUgJiYgY29kZSAhPT0gRmFjZXRDb25zdGFudHMuRG93bktleUNvZGUgKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGVsZW1lbnQgPSBqUXVlcnkoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICBpZiAoICFlbGVtZW50LmlzKFwiLmFycm93a2V5cy1hd2FyZVwiKSkge1xyXG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGZvY3VzYWJsZTtcclxuICAgICAgICBjb25zdCBkaXYgPSBlbGVtZW50LnBhcmVudCgpO1xyXG4gICAgICAgIGlmICggY29kZSA9PT0gRmFjZXRDb25zdGFudHMuVXBLZXlDb2RlICkge1xyXG4gICAgICAgICAgICBmb2N1c2FibGUgPSBkaXYucHJldigpLmZpbmQoXCIuYXJyb3drZXlzLWF3YXJlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIGNvZGUgPT09IEZhY2V0Q29uc3RhbnRzLkRvd25LZXlDb2RlICkge1xyXG4gICAgICAgICAgICBmb2N1c2FibGUgPSBkaXYubmV4dCgpLmZpbmQoXCIuYXJyb3drZXlzLWF3YXJlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIGZvY3VzYWJsZSAmJiBmb2N1c2FibGUubGVuZ3RoICkge1xyXG4gICAgICAgICAgICBldmVudC52aWV3LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICBmb2N1c2FibGUuZm9jdXMoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBzaG93TW9yZSA9IGRpdi5uZXh0KCkuZmluZChcInNob3ctbW9yZS1saW5rXCIpIHx8IGRpdi5uZXh0KCkuZmluZChcInNob3ctbGVzcy1saW5rXCIpO1xyXG4gICAgICAgICAgICBpZiAoIHNob3dNb3JlICYmIHNob3dNb3JlLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgIHNob3dNb3JlLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vbm9kZV9tb2R1bGVzL3RzbGludC1sb2FkZXI/P3JlZi0tMSEuL3NyYy90cy9ldmVudGhhbmRsZXJzL0ZhY2V0S2V5Qm9hcmROYXZpZ2F0aW9uSGFuZGxlci50cyJdLCJzb3VyY2VSb290IjoiIn0=